!function(e) {
    function t(r) {
        if (n[r]) return n[r].exports;
        var a = n[r] = {
            exports: {},
            id: r,
            loaded: !1
        };
        return e[r].call(a.exports, a, a.exports, t), a.loaded = !0, a.exports;
    }
    var n = {};
    return t.m = e, t.c = n, t.p = "", t(0);
}([ function(e, t, n) {
    e.exports = n(1);
}, function(e, t, n) {
    "use strict";
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    function a() {
        d.default.render(d.default.createElement(m.default.ApplicationList, {
            metainfo_db: _
        }), document.getElementById("list"));
    }
    function o() {
        d.default.render(d.default.createElement(g.default.Application, {
            metainfo_db: _,
            id: u.default.location.path[0]
        }), document.getElementById("app"));
    }
    function i(e) {
        document.getElementById(e).style.display = "block";
    }
    function l(e) {
        document.getElementById(e).style.display = "none";
    }
    function s() {
        var e = u.default.location.path;
        0 === e.length ? (i("list-page"), l("app-page")) : 1 === e.length ? (o(), l("list-page"), 
        i("app-page")) : (console.warn("not a apps location: " + e), u.default.location = "");
    }
    var c = n(2), u = r(c), p = n(3), d = r(p), f = n(4), m = r(f), h = n(10), g = r(h), v = n(13), y = r(v);
    n(8);
    var _ = y.default.get_metainfo_db();
    document.addEventListener("DOMContentLoaded", function() {
        u.default.translate(), _.addEventListener("changed", function() {
            a(), o();
        }), a(), u.default.addEventListener("locationchanged", s), s(), document.body.style.display = "block";
    });
}, function(e, t) {
    e.exports = cockpit;
}, function(e, t, n) {
    /*!
	 * react-lite.js v0.15.39
	 * (c) 2017 Jade Gu
	 * Released under the MIT License.
	 */
    !function(t, n) {
        e.exports = n();
    }(this, function() {
        "use strict";
        function e(e, t, n, r, a) {
            var o = {
                vtype: e,
                type: t,
                props: n,
                refs: Xe,
                key: r,
                ref: a
            };
            return e !== We && e !== $e || (o.uid = le()), o;
        }
        function t(e, t, n) {
            var r = e.vtype, a = null;
            return r ? r === Ve ? a = s(e, t, n) : r === $e ? a = _(e, t, n) : r === We ? a = h(e, t, n) : r === qe && (a = document.createComment("react-text: " + (e.uid || le()))) : a = document.createTextNode(e), 
            a;
        }
        function n(e, t, n, a) {
            var o = e.vtype;
            if (o === $e) return b(e, t, n, a);
            if (o === We) return g(e, t, n, a);
            if (o !== Ve) return n;
            var i = e.props[je] && e.props[je].__html;
            return null != i ? (f(e, t, n, a), c(t, n, a)) : (r(e, t, n, a), f(e, t, n, a)), 
            n;
        }
        function r(e, t, n, r) {
            var l = {
                removes: [],
                updates: [],
                creates: []
            };
            d(l, e, t, n, r), oe(l.removes, o), oe(l.updates, a), oe(l.creates, i);
        }
        function a(e) {
            if (e) {
                var t = e.vnode, n = e.node;
                e.shouldIgnore || (t.vtype ? t.vtype === Ve ? f(t, e.newVnode, n, e.parentContext) : t.vtype === We ? n = g(t, e.newVnode, n, e.parentContext) : t.vtype === $e && (n = b(t, e.newVnode, n, e.parentContext)) : n.replaceData(0, n.length, e.newVnode));
                var r = n.parentNode.childNodes[e.index];
                return r !== n && n.parentNode.insertBefore(n, r), n;
            }
        }
        function o(e) {
            l(e.vnode, e.node), e.node.parentNode.removeChild(e.node);
        }
        function i(e) {
            var n = t(e.vnode, e.parentContext, e.parentNode.namespaceURI);
            e.parentNode.insertBefore(n, e.parentNode.childNodes[e.index]);
        }
        function l(e, t) {
            var n = e.vtype;
            n === Ve ? m(e, t) : n === $e ? x(e, t) : n === We && v(e, t);
        }
        function s(e, t, n) {
            var r = e.type, a = e.props, o = null;
            "svg" === r || n === ze ? (o = document.createElementNS(ze, r), n = ze) : o = document.createElement(r), 
            c(e, o, t);
            var i = r.indexOf("-") >= 0 || null != a.is;
            return pe(o, a, i), null != e.ref && (ae(Ke, e), ae(Ke, o)), o;
        }
        function c(e, n, r) {
            for (var a = n.vchildren = u(e), o = n.namespaceURI, i = 0, l = a.length; i < l; i++) n.appendChild(t(a[i], r, o));
        }
        function u(e) {
            var t = e.props.children, n = [];
            return wt(t) ? oe(t, p, n) : p(t, n), n;
        }
        function p(e, t) {
            if (null != e && "boolean" != typeof e) {
                if (!e.vtype) {
                    if (e.toJS) return e = e.toJS(), void (wt(e) ? oe(e, p, t) : p(e, t));
                    e = "" + e;
                }
                t[t.length] = e;
            }
        }
        function d(e, t, n, r, a) {
            if (r.vchildren) {
                var o = r.childNodes, i = r.vchildren, l = r.vchildren = u(n), s = i.length, c = l.length;
                if (0 !== s) if (0 !== c) {
                    for (var p = Array(c), f = null, m = null, h = 0; h < s; h++) for (var g = i[h], v = 0; v < c; v++) if (!p[v]) {
                        var y = l[v];
                        if (g === y) {
                            p[v] = {
                                shouldIgnore: L(r),
                                vnode: g,
                                newVnode: y,
                                node: o[h],
                                parentContext: a,
                                index: v
                            }, i[h] = null;
                            break;
                        }
                    }
                    for (var h = 0; h < s; h++) {
                        var _ = i[h];
                        if (null !== _) {
                            for (var b = !0, v = 0; v < c; v++) if (!p[v]) {
                                var x = l[v];
                                if (x.type === _.type && x.key === _.key && x.refs === _.refs) {
                                    p[v] = {
                                        vnode: _,
                                        newVnode: x,
                                        node: o[h],
                                        parentContext: a,
                                        index: v
                                    }, b = !1;
                                    break;
                                }
                            }
                            b && (f || (f = []), ae(f, {
                                vnode: _,
                                node: o[h]
                            }));
                        }
                    }
                    for (var h = 0; h < c; h++) {
                        var k = p[h];
                        k ? k.vnode.vtype === Ve && d(e, k.vnode, k.newVnode, k.node, k.parentContext) : (m || (m = []), 
                        ae(m, {
                            vnode: l[h],
                            parentNode: r,
                            parentContext: a,
                            index: h
                        }));
                    }
                    f && ae(e.removes, f), m && ae(e.creates, m), ae(e.updates, p);
                } else for (var h = 0; h < s; h++) ae(e.removes, {
                    vnode: i[h],
                    node: o[h]
                }); else if (c > 0) for (var h = 0; h < c; h++) ae(e.creates, {
                    vnode: l[h],
                    parentNode: r,
                    parentContext: a,
                    index: h
                });
            }
        }
        function f(e, t, n) {
            var r = e.type.indexOf("-") >= 0 || null != e.props.is;
            return de(n, e.props, t.props, r), e.ref !== t.ref && (I(e.refs, e.ref, n), T(t.refs, t.ref, n)), 
            n;
        }
        function m(e, t) {
            var n = (e.props, t.vchildren), r = t.childNodes;
            if (n) for (var a = 0, o = n.length; a < o; a++) l(n[a], r[a]);
            I(e.refs, e.ref, t), t.eventStore = t.vchildren = null;
        }
        function h(e, n, r) {
            var a = y(e, n), o = t(a, n, r);
            return o.cache = o.cache || {}, o.cache[e.uid] = a, o;
        }
        function g(e, t, n, r) {
            var a = e.uid, o = n.cache[a];
            delete n.cache[a];
            var i = y(t, r), l = O(o, i, n, r);
            return l.cache = l.cache || {}, l.cache[t.uid] = i, l !== n && A(l.cache, n.cache, l), 
            l;
        }
        function v(e, t) {
            var n = e.uid, r = t.cache[n];
            delete t.cache[n], l(r, t);
        }
        function y(t, n) {
            var r = t.type, a = t.props, o = k(n, r.contextTypes), i = r(a, o);
            if (i && i.render && (i = i.render()), null === i || i === !1) i = e(qe); else if (!i || !i.vtype) throw new Error("@" + r.name + "#render:You may have returned undefined, an array or some other invalid object");
            return i;
        }
        function _(e, n, r) {
            var a = e.type, o = e.props, i = e.uid, l = k(n, a.contextTypes), s = new a(o, l), c = s.$updater, u = s.$cache;
            u.parentContext = n, c.isPending = !0, s.props = s.props || o, s.context = s.context || l, 
            s.componentWillMount && (s.componentWillMount(), s.state = c.getState());
            var p = w(s), d = t(p, E(s, n), r);
            return d.cache = d.cache || {}, d.cache[i] = s, u.vnode = p, u.node = d, u.isMounted = !0, 
            ae(Je, s), null != e.ref && (ae(Ke, e), ae(Ke, s)), d;
        }
        function b(e, t, n, r) {
            var a = e.uid, o = n.cache[a], i = o.$updater, l = o.$cache, s = t.type, c = t.props, u = k(r, s.contextTypes);
            if (delete n.cache[a], n.cache[t.uid] = o, l.parentContext = r, o.componentWillReceiveProps) {
                var p = !i.isPending;
                p && (i.isPending = !0), o.componentWillReceiveProps(c, u), p && (i.isPending = !1);
            }
            return e.ref !== t.ref && (I(e.refs, e.ref, o), T(t.refs, t.ref, o)), i.emitUpdate(c, u), 
            l.node;
        }
        function x(e, t) {
            var n = e.uid, r = t.cache[n], a = r.$cache;
            delete t.cache[n], I(e.refs, e.ref, r), r.setState = r.forceUpdate = te, r.componentWillUnmount && r.componentWillUnmount(), 
            l(a.vnode, t), delete r.setState, a.isMounted = !1, a.node = a.parentContext = a.vnode = r.refs = r.context = null;
        }
        function k(e, t) {
            var n = {};
            if (!t || !e) return n;
            for (var r in t) t.hasOwnProperty(r) && (n[r] = e[r]);
            return n;
        }
        function w(t, n) {
            Xe = t.refs;
            var r = t.render();
            if (null === r || r === !1) r = e(qe); else if (!r || !r.vtype) throw new Error("@" + t.constructor.name + "#render:You may have returned undefined, an array or some other invalid object");
            return Xe = null, r;
        }
        function E(e, t) {
            if (e.getChildContext) {
                var n = e.getChildContext();
                n && (t = ie(ie({}, t), n));
            }
            return t;
        }
        function N() {
            var e = Je.length;
            if (e) {
                var t = Je;
                Je = [];
                for (var n = -1; e--; ) {
                    var r = t[++n], a = r.$updater;
                    r.componentDidMount && r.componentDidMount(), a.isPending = !1, a.emitUpdate();
                }
            }
        }
        function C() {
            var e = Ke.length;
            if (e) {
                var t = Ke;
                Ke = [];
                for (var n = 0; n < e; n += 2) {
                    var r = t[n], a = t[n + 1];
                    T(r.refs, r.ref, a);
                }
            }
        }
        function P() {
            C(), N();
        }
        function O(e, r, a, o) {
            var i = a;
            return null == r ? (l(e, a), a.parentNode.removeChild(a)) : e.type !== r.type || e.key !== r.key ? (l(e, a), 
            i = t(r, o, a.namespaceURI), a.parentNode.replaceChild(i, a)) : (e !== r || o) && (i = n(e, r, a, o)), 
            i;
        }
        function S() {
            return this;
        }
        function T(e, t, n) {
            null != t && n && (n.nodeName && !n.getDOMNode && (n.getDOMNode = S), ee(t) ? t(n) : e && (e[t] = n));
        }
        function I(e, t, n) {
            null != t && (ee(t) ? t(null) : e && e[t] === n && delete e[t]);
        }
        function A(e, t, n) {
            for (var r in t) if (t.hasOwnProperty(r)) {
                var a = t[r];
                e[r] = a, a.forceUpdate && (a.$cache.node = n);
            }
        }
        function L(e) {
            var t = e.vchildren, n = e.children;
            if (t) for (var r = 0; r < t.length; r++) {
                var a = t[r];
                if ((a.vtype === $e || a.vtype === We) && a.type.contextTypes) return !1;
            }
            if (n) for (var r = 0; r < n.length; r++) if (!L(n[r])) return !1;
            return !0;
        }
        function R(e) {
            this.instance = e, this.pendingStates = [], this.pendingCallbacks = [], this.isPending = !1, 
            this.nextProps = this.nextContext = null, this.clearCallbacks = this.clearCallbacks.bind(this);
        }
        function M(e, t) {
            this.$updater = new R(this), this.$cache = {
                isMounted: !1
            }, this.props = e, this.state = {}, this.refs = {}, this.context = t;
        }
        function U(e, t, n, r, a) {
            var o = !0;
            if (e.shouldComponentUpdate && (o = e.shouldComponentUpdate(t, n, r)), o === !1) return e.props = t, 
            e.state = n, void (e.context = r || {});
            var i = e.$cache;
            i.props = t, i.state = n, i.context = r || {}, e.forceUpdate(a);
        }
        function D(e) {
            return "onDoubleClick" === e ? e = "ondblclick" : "onTouchTap" === e && (e = "onclick"), 
            e.toLowerCase();
        }
        function F(e, t, n) {
            t = D(t);
            var r = e.eventStore || (e.eventStore = {});
            if (r[t] = n, 1 === et[t]) return void (e[t] = B);
            if (at[t] || (document.addEventListener(t.substr(2), z, !1), at[t] = !0), tt && t === rt) return void e.addEventListener("click", nt, !1);
            e.nodeName;
            "onchange" === t && W(e) && F(e, "oninput", n);
        }
        function j(e, t) {
            t = D(t);
            var n = e.eventStore || (e.eventStore = {});
            if (delete n[t], 1 === et[t]) return void (e[t] = null);
            if (tt && t === rt) return void e.removeEventListener("click", nt, !1);
            e.nodeName;
            "onchange" === t && W(e) && delete n.oninput;
        }
        function z(e) {
            var t = e.target, n = e.type, r = "on" + n, a = void 0;
            for (Ze.isPending = !0; t; ) {
                var o = t, i = o.eventStore, l = i && i[r];
                if (l) {
                    if (a || (a = V(e)), a.currentTarget = t, l.call(t, a), a.$cancelBubble) break;
                    t = t.parentNode;
                } else t = t.parentNode;
            }
            Ze.isPending = !1, Ze.batchUpdate();
        }
        function B(e) {
            var t = e.currentTarget || e.target, n = "on" + e.type, r = V(e);
            r.currentTarget = t, Ze.isPending = !0;
            var a = t.eventStore, o = a && a[n];
            o && o.call(t, r), Ze.isPending = !1, Ze.batchUpdate();
        }
        function V(e) {
            var t = {}, n = function() {
                return t.$cancelBubble = !0;
            };
            t.nativeEvent = e, t.persist = te;
            for (var r in e) "function" != typeof e[r] ? t[r] = e[r] : "stopPropagation" === r || "stopImmediatePropagation" === r ? t[r] = n : t[r] = e[r].bind(e);
            return t;
        }
        function W(e) {
            var t = e.nodeName && e.nodeName.toLowerCase();
            return "select" !== t && !("input" === t && "file" === e.type);
        }
        function $(e, t) {
            for (var n in t) t.hasOwnProperty(n) && Y(e, n, t[n]);
        }
        function q(e, t) {
            for (var n in t) t.hasOwnProperty(n) && (e[n] = "");
        }
        function G(e, t, n) {
            if (t !== n) {
                if (!n && t) return void q(e, t);
                if (n && !t) return void $(e, n);
                for (var r in t) n.hasOwnProperty(r) ? n[r] !== t[r] && Y(e, r, n[r]) : e[r] = "";
                for (var r in n) t.hasOwnProperty(r) || Y(e, r, n[r]);
            }
        }
        function H(e, t) {
            return e + t.charAt(0).toUpperCase() + t.substring(1);
        }
        function Y(e, t, n) {
            return !ot[t] && lt.test(n) ? void (e[t] = n + "px") : ("float" === t && (t = "cssFloat"), 
            null != n && "boolean" != typeof n || (n = ""), void (e[t] = n));
        }
        function X(e) {
            var t = e.props, n = e.attrNS, r = e.domAttrs, a = e.domProps;
            for (var o in t) if (t.hasOwnProperty(o)) {
                var i = t[o];
                dt[o] = {
                    attributeName: r.hasOwnProperty(o) ? r[o] : o.toLowerCase(),
                    propertyName: a.hasOwnProperty(o) ? a[o] : o,
                    attributeNamespace: n.hasOwnProperty(o) ? n[o] : null,
                    mustUseProperty: J(i, ft),
                    hasBooleanValue: J(i, mt),
                    hasNumericValue: J(i, ht),
                    hasPositiveNumericValue: J(i, gt),
                    hasOverloadedBooleanValue: J(i, vt)
                };
            }
        }
        function J(e, t) {
            return (e & t) === t;
        }
        function K(e, t, n) {
            var r = dt.hasOwnProperty(t) && dt[t];
            if (r) if (null == n || r.hasBooleanValue && !n || r.hasNumericValue && isNaN(n) || r.hasPositiveNumericValue && n < 1 || r.hasOverloadedBooleanValue && n === !1) Z(e, t); else if (r.mustUseProperty) e[r.propertyName] = n; else {
                var a = r.attributeName, o = r.attributeNamespace;
                o ? e.setAttributeNS(o, a, "" + n) : r.hasBooleanValue || r.hasOverloadedBooleanValue && n === !0 ? e.setAttribute(a, "") : e.setAttribute(a, "" + n);
            } else pt(t) && ut.test(t) && (null == n ? e.removeAttribute(t) : e.setAttribute(t, "" + n));
        }
        function Z(e, t) {
            var n = dt.hasOwnProperty(t) && dt[t];
            if (n) if (n.mustUseProperty) {
                var r = n.propertyName;
                n.hasBooleanValue ? e[r] = !1 : e[r] = "";
            } else e.removeAttribute(n.attributeName); else pt(t) && e.removeAttribute(t);
        }
        function Q(e, t, n) {
            var r, a, o = e.options;
            if (t) {
                if (e.multiple = !0, !Array.isArray(n)) throw new Error("The value prop supplied to <select> must be an array if `multiple` is true");
                for (r = {}, a = 0; a < n.length; a++) r["" + n[a]] = !0;
                for (a = 0; a < o.length; a++) {
                    var i = r.hasOwnProperty(o[a].value);
                    o[a].selected !== i && (o[a].selected = i);
                }
            } else {
                if (e.multiple = !1, Array.isArray(n)) throw new Error("The value prop supplied to <select> must be a scalar value if `multiple` is false.");
                for (r = "" + n, a = 0; a < o.length; a++) {
                    var l = o[a];
                    l.value === r ? l.selected || (l.selected = !0) : l.selected && (l.selected = !1);
                }
                o.selectedIndex < 0 && o.length && (o[0].selected = !0);
            }
        }
        function ee(e) {
            return "function" == typeof e;
        }
        function te() {}
        function ne(e) {
            return e;
        }
        function re(e, t) {
            return function() {
                return e.apply(this, arguments), t.apply(this, arguments);
            };
        }
        function ae(e, t) {
            e[e.length] = t;
        }
        function oe(e, t, n) {
            for (var r = e.length, a = -1; r--; ) {
                var o = e[++a];
                wt(o) ? oe(o, t, n) : t(o, n);
            }
        }
        function ie(e, t) {
            if (!t) return e;
            for (var n = Object.keys(t), r = n.length; r--; ) e[n[r]] = t[n[r]];
            return e;
        }
        function le() {
            return ++Et;
        }
        function se(e, t, n, r) {
            Nt.test(t) ? F(e, t, n) : "style" === t ? $(e.style, n) : t === je ? n && null != n.__html && (e.innerHTML = n.__html) : r ? null == n ? e.removeAttribute(t) : e.setAttribute(t, "" + n) : K(e, t, n);
        }
        function ce(e, t, n, r) {
            Nt.test(t) ? j(e, t) : "style" === t ? q(e.style, n) : t === je ? e.innerHTML = "" : r ? e.removeAttribute(t) : Z(e, t);
        }
        function ue(e, t, n, r, a) {
            if ("value" !== t && "checked" !== t || (r = e[t]), n !== r) return void 0 === n ? void ce(e, t, r, a) : void ("style" === t ? G(e.style, r, n) : se(e, t, n, a));
        }
        function pe(e, t, n) {
            var r = "SELECT" === e.nodeName;
            for (var a in t) "children" !== a && (!r || "value" !== a && "defaultValue" !== a ? se(e, a, t[a], n) : Q(e, t.multiple, t[a]));
        }
        function de(e, t, n, r) {
            var a = "SELECT" === e.nodeName;
            for (var o in t) "children" !== o && (n.hasOwnProperty(o) ? !a || "value" !== o && "defaultValue" !== o ? ue(e, o, n[o], t[o], r) : Q(e, n.multiple, n[o]) : ce(e, o, t[o], r));
            for (var o in n) "children" === o || t.hasOwnProperty(o) || (!a || "value" !== o && "defaultValue" !== o ? se(e, o, n[o], r) : Q(e, n.multiple, n[o]));
        }
        function fe(e) {
            return !(!e || e.nodeType !== Ge && e.nodeType !== He && e.nodeType !== Ye);
        }
        function me(e, n, r, a) {
            if (!e.vtype) throw new Error("cannot render " + e + " to container");
            if (!fe(n)) throw new Error("container " + n + " is not a DOM element");
            var o = n[Be] || (n[Be] = le()), i = Ct[o];
            if (i) return void (i === !0 ? Ct[o] = i = {
                vnode: e,
                callback: r,
                parentContext: a
            } : (i.vnode = e, i.parentContext = a, i.callback = i.callback ? re(i.callback, r) : r));
            Ct[o] = !0;
            var l = null, s = null;
            if (l = Pt[o]) s = O(l, e, n.firstChild, a); else {
                s = t(e, a, n.namespaceURI);
                for (var c = null; c = n.lastChild; ) n.removeChild(c);
                n.appendChild(s);
            }
            Pt[o] = e;
            var u = Ze.isPending;
            Ze.isPending = !0, P(), i = Ct[o], delete Ct[o];
            var p = null;
            return "object" == typeof i ? p = me(i.vnode, n, i.callback, i.parentContext) : e.vtype === Ve ? p = s : e.vtype === $e && (p = s.cache[e.uid]), 
            u || (Ze.isPending = !1, Ze.batchUpdate()), r && r.call(p), p;
        }
        function he(e, t, n) {
            return me(e, t, n);
        }
        function ge(e, t, n, r) {
            var a = e.$cache.parentContext;
            return me(t, n, r, a);
        }
        function ve(e) {
            if (!e.nodeName) throw new Error("expect node");
            var t = e[Be], n = null;
            return !!(n = Pt[t]) && (l(n, e.firstChild), e.removeChild(e.firstChild), delete Pt[t], 
            !0);
        }
        function ye(e) {
            if (null == e) return null;
            if (e.nodeName) return e;
            var t = e;
            if (t.getDOMNode && t.$cache.isMounted) return t.getDOMNode();
            throw new Error("findDOMNode can not find Node");
        }
        function _e(t, n, r) {
            var a = null;
            if ("string" == typeof t) a = Ve; else {
                if ("function" != typeof t) throw new Error("React.createElement: unexpect type [ " + t + " ]");
                a = t.prototype && t.prototype.isReactComponent ? $e : We;
            }
            var o = null, i = null, l = {};
            if (null != n) for (var s in n) n.hasOwnProperty(s) && ("key" === s ? void 0 !== n.key && (o = "" + n.key) : "ref" === s ? void 0 !== n.ref && (i = n.ref) : l[s] = n[s]);
            var c = t.defaultProps;
            if (c) for (var s in c) void 0 === l[s] && (l[s] = c[s]);
            var u = arguments.length, p = r;
            if (u > 3) {
                p = Array(u - 2);
                for (var d = 2; d < u; d++) p[d - 2] = arguments[d];
            }
            return void 0 !== p && (l.children = p), e(a, t, l, o, i);
        }
        function be(e) {
            return null != e && !!e.vtype;
        }
        function xe(e, t) {
            for (var n = e.type, r = e.key, a = e.ref, o = ie(ie({
                key: r,
                ref: a
            }, e.props), t), i = arguments.length, l = Array(i > 2 ? i - 2 : 0), s = 2; s < i; s++) l[s - 2] = arguments[s];
            var c = _e.apply(void 0, [ n, o ].concat(l));
            return c.ref === e.ref && (c.refs = e.refs), c;
        }
        function ke(e) {
            var t = function() {
                for (var t = arguments.length, n = Array(t), r = 0; r < t; r++) n[r] = arguments[r];
                return _e.apply(void 0, [ e ].concat(n));
            };
            return t.type = e, t;
        }
        function we(e) {
            if (be(e)) return e;
            throw new Error("expect only one child");
        }
        function Ee(e, t, n) {
            if (null == e) return e;
            var r = 0;
            if (wt(e)) oe(e, function(e) {
                var a = typeof e;
                "undefined" !== a && "boolean" !== a || (e = null), t.call(n, e, r++);
            }); else {
                var a = typeof e;
                "undefined" !== a && "boolean" !== a || (e = null), t.call(n, e, r);
            }
        }
        function Ne(e, t, n) {
            if (null == e) return e;
            var r = [], a = {};
            Ee(e, function(e, o) {
                var i = {};
                i.child = t.call(n, e, o) || e, i.isEqual = i.child === e;
                var l = i.key = Oe(e, o);
                a.hasOwnProperty(l) ? a[l] += 1 : a[l] = 0, i.index = a[l], ae(r, i);
            });
            var o = [];
            return r.forEach(function(e) {
                var t = e.child, n = e.key, r = e.index, i = e.isEqual;
                if (null != t && "boolean" != typeof t) {
                    if (!be(t) || null == n) return void ae(o, t);
                    0 !== a[n] && (n += ":" + r), i || (n = Se(t.key || "") + "/" + n), t = xe(t, {
                        key: n
                    }), ae(o, t);
                }
            }), o;
        }
        function Ce(e) {
            var t = 0;
            return Ee(e, function() {
                t++;
            }), t;
        }
        function Pe(e) {
            return Ne(e, ne) || [];
        }
        function Oe(e, t) {
            var n = void 0;
            return n = be(e) && "string" == typeof e.key ? ".$" + e.key : "." + t.toString(36);
        }
        function Se(e) {
            return ("" + e).replace(Lt, "//");
        }
        function Te(e, t) {
            e.forEach(function(e) {
                e && (wt(e.mixins) && Te(e.mixins, t), t(e));
            });
        }
        function Ie(e, t) {
            for (var n in t) if (t.hasOwnProperty(n)) {
                var r = t[n];
                if ("getInitialState" !== n) {
                    var a = e[n];
                    ee(a) && ee(r) ? e[n] = re(a, r) : e[n] = r;
                } else ae(e.$getInitialStates, r);
            }
        }
        function Ae(e, t) {
            t.propTypes && (e.propTypes = e.propTypes || {}, ie(e.propTypes, t.propTypes)), 
            t.contextTypes && (e.contextTypes = e.contextTypes || {}, ie(e.contextTypes, t.contextTypes)), 
            ie(e, t.statics), ee(t.getDefaultProps) && (e.defaultProps = e.defaultProps || {}, 
            ie(e.defaultProps, t.getDefaultProps()));
        }
        function Le(e, t) {
            for (var n in t) t.hasOwnProperty(n) && ee(t[n]) && (e[n] = t[n].bind(e));
        }
        function Re() {
            var e = this, t = {}, n = this.setState;
            return this.setState = Mt, this.$getInitialStates.forEach(function(n) {
                ee(n) && ie(t, n.call(e));
            }), this.setState = n, t;
        }
        function Me(e) {
            function t(n, r) {
                M.call(this, n, r), this.constructor = t, e.autobind !== !1 && Le(this, t.prototype), 
                this.state = this.getInitialState() || this.state;
            }
            if (!ee(e.render)) throw new Error("createClass: spec.render is not function");
            var n = e.mixins || [], r = n.concat(e);
            e.mixins = null, t.displayName = e.displayName;
            var a = t.prototype = new Mt();
            return a.$getInitialStates = [], Te(r, function(e) {
                Ie(a, e), Ae(t, e);
            }), a.getInitialState = Re, e.mixins = n, t;
        }
        function Ue(e, t) {
            if (e === t) return !0;
            if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
            var n = Object.keys(e), r = Object.keys(t);
            if (n.length !== r.length) return !1;
            for (var a = 0; a < n.length; a++) if (!t.hasOwnProperty(n[a]) || e[n[a]] !== t[n[a]]) return !1;
            return !0;
        }
        function De(e, t) {
            M.call(this, e, t);
        }
        function Fe(e, t) {
            return !Ue(this.props, e) || !Ue(this.state, t);
        }
        var je = "dangerouslySetInnerHTML", ze = "http://www.w3.org/2000/svg", Be = "liteid", Ve = 2, We = 3, $e = 4, qe = 5, Ge = 1, He = 9, Ye = 11, Xe = null, Je = [], Ke = [], Ze = {
            updaters: [],
            isPending: !1,
            add: function(e) {
                ae(this.updaters, e);
            },
            batchUpdate: function() {
                if (!this.isPending) {
                    this.isPending = !0;
                    for (var e = this.updaters, t = void 0; t = e.pop(); ) t.updateComponent();
                    this.isPending = !1;
                }
            }
        };
        R.prototype = {
            emitUpdate: function(e, t) {
                this.nextProps = e, this.nextContext = t, e || !Ze.isPending ? this.updateComponent() : Ze.add(this);
            },
            updateComponent: function() {
                var e = this.instance, t = this.pendingStates, n = this.nextProps, r = this.nextContext;
                (n || t.length > 0) && (n = n || e.props, r = r || e.context, this.nextProps = this.nextContext = null, 
                U(e, n, this.getState(), r, this.clearCallbacks));
            },
            addState: function(e) {
                e && (ae(this.pendingStates, e), this.isPending || this.emitUpdate());
            },
            replaceState: function(e) {
                var t = this.pendingStates;
                t.pop(), ae(t, [ e ]);
            },
            getState: function() {
                var e = this.instance, t = this.pendingStates, n = e.state, r = e.props;
                return t.length && (n = ie({}, n), t.forEach(function(t) {
                    var a = wt(t);
                    a && (t = t[0]), ee(t) && (t = t.call(e, n, r)), a ? n = ie({}, t) : ie(n, t);
                }), t.length = 0), n;
            },
            clearCallbacks: function() {
                var e = this.pendingCallbacks, t = this.instance;
                e.length > 0 && (this.pendingCallbacks = [], e.forEach(function(e) {
                    return e.call(t);
                }));
            },
            addCallback: function(e) {
                ee(e) && ae(this.pendingCallbacks, e);
            }
        };
        var Qe = {};
        M.prototype = {
            constructor: M,
            isReactComponent: Qe,
            forceUpdate: function(e) {
                var t = this.$updater, n = this.$cache, r = this.props, a = this.state, o = this.context;
                if (n.isMounted) {
                    if (t.isPending) return void t.addState(a);
                    var i = n.props || r, l = n.state || a, s = n.context || o, c = n.parentContext, u = n.node, p = n.vnode;
                    n.props = n.state = n.context = null, t.isPending = !0, this.componentWillUpdate && this.componentWillUpdate(i, l, s), 
                    this.state = l, this.props = i, this.context = s;
                    var d = w(this), f = O(p, d, u, E(this, c));
                    f !== u && (f.cache = f.cache || {}, A(f.cache, u.cache, f)), n.vnode = d, n.node = f, 
                    P(), this.componentDidUpdate && this.componentDidUpdate(r, a, o), e && e.call(this), 
                    t.isPending = !1, t.emitUpdate();
                }
            },
            setState: function(e, t) {
                var n = this.$updater;
                n.addCallback(t), n.addState(e);
            },
            replaceState: function(e, t) {
                var n = this.$updater;
                n.addCallback(t), n.replaceState(e);
            },
            getDOMNode: function() {
                var e = this.$cache.node;
                return e && "#comment" === e.nodeName ? null : e;
            },
            isMounted: function() {
                return this.$cache.isMounted;
            }
        };
        var et = {
            onmousemove: 1,
            ontouchmove: 1,
            onmouseleave: 1,
            onmouseenter: 1,
            onload: 1,
            onunload: 1,
            onscroll: 1,
            onfocus: 1,
            onblur: 1,
            onrowexit: 1,
            onbeforeunload: 1,
            onstop: 1,
            ondragdrop: 1,
            ondragenter: 1,
            ondragexit: 1,
            ondraggesture: 1,
            ondragover: 1,
            oncontextmenu: 1,
            onerror: 1,
            onabort: 1,
            oncanplay: 1,
            oncanplaythrough: 1,
            ondurationchange: 1,
            onemptied: 1,
            onended: 1,
            onloadeddata: 1,
            onloadedmetadata: 1,
            onloadstart: 1,
            onencrypted: 1,
            onpause: 1,
            onplay: 1,
            onplaying: 1,
            onprogress: 1,
            onratechange: 1,
            onseeking: 1,
            onseeked: 1,
            onstalled: 1,
            onsuspend: 1,
            ontimeupdate: 1,
            onvolumechange: 1,
            onwaiting: 1
        }, tt = "ontouchstart" in document, nt = function() {}, rt = "onclick", at = {}, ot = {
            animationIterationCount: 1,
            borderImageOutset: 1,
            borderImageSlice: 1,
            borderImageWidth: 1,
            boxFlex: 1,
            boxFlexGroup: 1,
            boxOrdinalGroup: 1,
            columnCount: 1,
            flex: 1,
            flexGrow: 1,
            flexPositive: 1,
            flexShrink: 1,
            flexNegative: 1,
            flexOrder: 1,
            gridRow: 1,
            gridColumn: 1,
            fontWeight: 1,
            lineClamp: 1,
            lineHeight: 1,
            opacity: 1,
            order: 1,
            orphans: 1,
            tabSize: 1,
            widows: 1,
            zIndex: 1,
            zoom: 1,
            fillOpacity: 1,
            floodOpacity: 1,
            stopOpacity: 1,
            strokeDasharray: 1,
            strokeDashoffset: 1,
            strokeMiterlimit: 1,
            strokeOpacity: 1,
            strokeWidth: 1
        }, it = [ "Webkit", "ms", "Moz", "O" ];
        Object.keys(ot).forEach(function(e) {
            it.forEach(function(t) {
                ot[H(t, e)] = 1;
            });
        });
        var lt = /^-?\d+(\.\d+)?$/, st = ":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD", ct = st + "\\-.0-9\\uB7\\u0300-\\u036F\\u203F-\\u2040", ut = new RegExp("^[" + st + "][" + ct + "]*$"), pt = RegExp.prototype.test.bind(new RegExp("^(data|aria)-[" + ct + "]*$")), dt = {}, ft = 1, mt = 4, ht = 8, gt = 24, vt = 32, yt = {
            props: {
                accept: 0,
                acceptCharset: 0,
                accessKey: 0,
                action: 0,
                allowFullScreen: mt,
                allowTransparency: 0,
                alt: 0,
                async: mt,
                autoComplete: 0,
                autoFocus: mt,
                autoPlay: mt,
                capture: mt,
                cellPadding: 0,
                cellSpacing: 0,
                charSet: 0,
                challenge: 0,
                checked: ft | mt,
                cite: 0,
                classID: 0,
                className: 0,
                cols: gt,
                colSpan: 0,
                content: 0,
                contentEditable: 0,
                contextMenu: 0,
                controls: mt,
                coords: 0,
                crossOrigin: 0,
                data: 0,
                dateTime: 0,
                default: mt,
                defaultValue: ft,
                defaultChecked: ft | mt,
                defer: mt,
                dir: 0,
                disabled: mt,
                download: vt,
                draggable: 0,
                encType: 0,
                form: 0,
                formAction: 0,
                formEncType: 0,
                formMethod: 0,
                formNoValidate: mt,
                formTarget: 0,
                frameBorder: 0,
                headers: 0,
                height: 0,
                hidden: mt,
                high: 0,
                href: 0,
                hrefLang: 0,
                htmlFor: 0,
                httpEquiv: 0,
                icon: 0,
                id: 0,
                inputMode: 0,
                integrity: 0,
                is: 0,
                keyParams: 0,
                keyType: 0,
                kind: 0,
                label: 0,
                lang: 0,
                list: 0,
                loop: mt,
                low: 0,
                manifest: 0,
                marginHeight: 0,
                marginWidth: 0,
                max: 0,
                maxLength: 0,
                media: 0,
                mediaGroup: 0,
                method: 0,
                min: 0,
                minLength: 0,
                multiple: ft | mt,
                muted: ft | mt,
                name: 0,
                nonce: 0,
                noValidate: mt,
                open: mt,
                optimum: 0,
                pattern: 0,
                placeholder: 0,
                poster: 0,
                preload: 0,
                profile: 0,
                radioGroup: 0,
                readOnly: mt,
                referrerPolicy: 0,
                rel: 0,
                required: mt,
                reversed: mt,
                role: 0,
                rows: gt,
                rowSpan: ht,
                sandbox: 0,
                scope: 0,
                scoped: mt,
                scrolling: 0,
                seamless: mt,
                selected: ft | mt,
                shape: 0,
                size: gt,
                sizes: 0,
                span: gt,
                spellCheck: 0,
                src: 0,
                srcDoc: 0,
                srcLang: 0,
                srcSet: 0,
                start: ht,
                step: 0,
                style: 0,
                summary: 0,
                tabIndex: 0,
                target: 0,
                title: 0,
                type: 0,
                useMap: 0,
                value: ft,
                width: 0,
                wmode: 0,
                wrap: 0,
                about: 0,
                datatype: 0,
                inlist: 0,
                prefix: 0,
                property: 0,
                playsInline: mt,
                resource: 0,
                typeof: 0,
                vocab: 0,
                autoCapitalize: 0,
                autoCorrect: 0,
                autoSave: 0,
                color: 0,
                itemProp: 0,
                itemScope: mt,
                itemType: 0,
                itemID: 0,
                itemRef: 0,
                results: 0,
                security: 0,
                unselectable: 0
            },
            attrNS: {},
            domAttrs: {
                acceptCharset: "accept-charset",
                className: "class",
                htmlFor: "for",
                httpEquiv: "http-equiv"
            },
            domProps: {}
        }, _t = "http://www.w3.org/1999/xlink", bt = "http://www.w3.org/XML/1998/namespace", xt = {
            accentHeight: "accent-height",
            accumulate: 0,
            additive: 0,
            alignmentBaseline: "alignment-baseline",
            allowReorder: "allowReorder",
            alphabetic: 0,
            amplitude: 0,
            arabicForm: "arabic-form",
            ascent: 0,
            attributeName: "attributeName",
            attributeType: "attributeType",
            autoReverse: "autoReverse",
            azimuth: 0,
            baseFrequency: "baseFrequency",
            baseProfile: "baseProfile",
            baselineShift: "baseline-shift",
            bbox: 0,
            begin: 0,
            bias: 0,
            by: 0,
            calcMode: "calcMode",
            capHeight: "cap-height",
            clip: 0,
            clipPath: "clip-path",
            clipRule: "clip-rule",
            clipPathUnits: "clipPathUnits",
            colorInterpolation: "color-interpolation",
            colorInterpolationFilters: "color-interpolation-filters",
            colorProfile: "color-profile",
            colorRendering: "color-rendering",
            contentScriptType: "contentScriptType",
            contentStyleType: "contentStyleType",
            cursor: 0,
            cx: 0,
            cy: 0,
            d: 0,
            decelerate: 0,
            descent: 0,
            diffuseConstant: "diffuseConstant",
            direction: 0,
            display: 0,
            divisor: 0,
            dominantBaseline: "dominant-baseline",
            dur: 0,
            dx: 0,
            dy: 0,
            edgeMode: "edgeMode",
            elevation: 0,
            enableBackground: "enable-background",
            end: 0,
            exponent: 0,
            externalResourcesRequired: "externalResourcesRequired",
            fill: 0,
            fillOpacity: "fill-opacity",
            fillRule: "fill-rule",
            filter: 0,
            filterRes: "filterRes",
            filterUnits: "filterUnits",
            floodColor: "flood-color",
            floodOpacity: "flood-opacity",
            focusable: 0,
            fontFamily: "font-family",
            fontSize: "font-size",
            fontSizeAdjust: "font-size-adjust",
            fontStretch: "font-stretch",
            fontStyle: "font-style",
            fontVariant: "font-variant",
            fontWeight: "font-weight",
            format: 0,
            from: 0,
            fx: 0,
            fy: 0,
            g1: 0,
            g2: 0,
            glyphName: "glyph-name",
            glyphOrientationHorizontal: "glyph-orientation-horizontal",
            glyphOrientationVertical: "glyph-orientation-vertical",
            glyphRef: "glyphRef",
            gradientTransform: "gradientTransform",
            gradientUnits: "gradientUnits",
            hanging: 0,
            horizAdvX: "horiz-adv-x",
            horizOriginX: "horiz-origin-x",
            ideographic: 0,
            imageRendering: "image-rendering",
            in: 0,
            in2: 0,
            intercept: 0,
            k: 0,
            k1: 0,
            k2: 0,
            k3: 0,
            k4: 0,
            kernelMatrix: "kernelMatrix",
            kernelUnitLength: "kernelUnitLength",
            kerning: 0,
            keyPoints: "keyPoints",
            keySplines: "keySplines",
            keyTimes: "keyTimes",
            lengthAdjust: "lengthAdjust",
            letterSpacing: "letter-spacing",
            lightingColor: "lighting-color",
            limitingConeAngle: "limitingConeAngle",
            local: 0,
            markerEnd: "marker-end",
            markerMid: "marker-mid",
            markerStart: "marker-start",
            markerHeight: "markerHeight",
            markerUnits: "markerUnits",
            markerWidth: "markerWidth",
            mask: 0,
            maskContentUnits: "maskContentUnits",
            maskUnits: "maskUnits",
            mathematical: 0,
            mode: 0,
            numOctaves: "numOctaves",
            offset: 0,
            opacity: 0,
            operator: 0,
            order: 0,
            orient: 0,
            orientation: 0,
            origin: 0,
            overflow: 0,
            overlinePosition: "overline-position",
            overlineThickness: "overline-thickness",
            paintOrder: "paint-order",
            panose1: "panose-1",
            pathLength: "pathLength",
            patternContentUnits: "patternContentUnits",
            patternTransform: "patternTransform",
            patternUnits: "patternUnits",
            pointerEvents: "pointer-events",
            points: 0,
            pointsAtX: "pointsAtX",
            pointsAtY: "pointsAtY",
            pointsAtZ: "pointsAtZ",
            preserveAlpha: "preserveAlpha",
            preserveAspectRatio: "preserveAspectRatio",
            primitiveUnits: "primitiveUnits",
            r: 0,
            radius: 0,
            refX: "refX",
            refY: "refY",
            renderingIntent: "rendering-intent",
            repeatCount: "repeatCount",
            repeatDur: "repeatDur",
            requiredExtensions: "requiredExtensions",
            requiredFeatures: "requiredFeatures",
            restart: 0,
            result: 0,
            rotate: 0,
            rx: 0,
            ry: 0,
            scale: 0,
            seed: 0,
            shapeRendering: "shape-rendering",
            slope: 0,
            spacing: 0,
            specularConstant: "specularConstant",
            specularExponent: "specularExponent",
            speed: 0,
            spreadMethod: "spreadMethod",
            startOffset: "startOffset",
            stdDeviation: "stdDeviation",
            stemh: 0,
            stemv: 0,
            stitchTiles: "stitchTiles",
            stopColor: "stop-color",
            stopOpacity: "stop-opacity",
            strikethroughPosition: "strikethrough-position",
            strikethroughThickness: "strikethrough-thickness",
            string: 0,
            stroke: 0,
            strokeDasharray: "stroke-dasharray",
            strokeDashoffset: "stroke-dashoffset",
            strokeLinecap: "stroke-linecap",
            strokeLinejoin: "stroke-linejoin",
            strokeMiterlimit: "stroke-miterlimit",
            strokeOpacity: "stroke-opacity",
            strokeWidth: "stroke-width",
            surfaceScale: "surfaceScale",
            systemLanguage: "systemLanguage",
            tableValues: "tableValues",
            targetX: "targetX",
            targetY: "targetY",
            textAnchor: "text-anchor",
            textDecoration: "text-decoration",
            textRendering: "text-rendering",
            textLength: "textLength",
            to: 0,
            transform: 0,
            u1: 0,
            u2: 0,
            underlinePosition: "underline-position",
            underlineThickness: "underline-thickness",
            unicode: 0,
            unicodeBidi: "unicode-bidi",
            unicodeRange: "unicode-range",
            unitsPerEm: "units-per-em",
            vAlphabetic: "v-alphabetic",
            vHanging: "v-hanging",
            vIdeographic: "v-ideographic",
            vMathematical: "v-mathematical",
            values: 0,
            vectorEffect: "vector-effect",
            version: 0,
            vertAdvY: "vert-adv-y",
            vertOriginX: "vert-origin-x",
            vertOriginY: "vert-origin-y",
            viewBox: "viewBox",
            viewTarget: "viewTarget",
            visibility: 0,
            widths: 0,
            wordSpacing: "word-spacing",
            writingMode: "writing-mode",
            x: 0,
            xHeight: "x-height",
            x1: 0,
            x2: 0,
            xChannelSelector: "xChannelSelector",
            xlinkActuate: "xlink:actuate",
            xlinkArcrole: "xlink:arcrole",
            xlinkHref: "xlink:href",
            xlinkRole: "xlink:role",
            xlinkShow: "xlink:show",
            xlinkTitle: "xlink:title",
            xlinkType: "xlink:type",
            xmlBase: "xml:base",
            xmlns: 0,
            xmlnsXlink: "xmlns:xlink",
            xmlLang: "xml:lang",
            xmlSpace: "xml:space",
            y: 0,
            y1: 0,
            y2: 0,
            yChannelSelector: "yChannelSelector",
            z: 0,
            zoomAndPan: "zoomAndPan"
        }, kt = {
            props: {},
            attrNS: {
                xlinkActuate: _t,
                xlinkArcrole: _t,
                xlinkHref: _t,
                xlinkRole: _t,
                xlinkShow: _t,
                xlinkTitle: _t,
                xlinkType: _t,
                xmlBase: bt,
                xmlLang: bt,
                xmlSpace: bt
            },
            domAttrs: {},
            domProps: {}
        };
        Object.keys(xt).map(function(e) {
            kt.props[e] = 0, xt[e] && (kt.domAttrs[e] = xt[e]);
        }), X(yt), X(kt);
        var wt = Array.isArray, Et = 0, Nt = /^on/i;
        Object.freeze || (Object.freeze = ne);
        var Ct = {}, Pt = {}, Ot = Object.freeze({
            render: he,
            unstable_renderSubtreeIntoContainer: ge,
            unmountComponentAtNode: ve,
            findDOMNode: ye
        }), St = "a|abbr|address|area|article|aside|audio|b|base|bdi|bdo|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|data|datalist|dd|del|details|dfn|dialog|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|main|map|mark|menu|menuitem|meta|meter|nav|noscript|object|ol|optgroup|option|output|p|param|picture|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|source|span|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|u|ul|var|video|wbr|circle|clipPath|defs|ellipse|g|image|line|linearGradient|mask|path|pattern|polygon|polyline|radialGradient|rect|stop|svg|text|tspan", Tt = {};
        St.split("|").forEach(function(e) {
            Tt[e] = ke(e);
        });
        var It = function e() {
            return e;
        };
        It.isRequired = It;
        var At = {
            array: It,
            bool: It,
            func: It,
            number: It,
            object: It,
            string: It,
            any: It,
            arrayOf: It,
            element: It,
            instanceOf: It,
            node: It,
            objectOf: It,
            oneOf: It,
            oneOfType: It,
            shape: It
        }, Lt = /\/(?!\/)/g, Rt = Object.freeze({
            only: we,
            forEach: Ee,
            map: Ne,
            count: Ce,
            toArray: Pe
        }), Mt = function() {};
        Mt.prototype = M.prototype, De.prototype = Object.create(M.prototype), De.prototype.constructor = De, 
        De.prototype.isPureReactComponent = !0, De.prototype.shouldComponentUpdate = Fe;
        var Ut = ie({
            version: "0.15.1",
            cloneElement: xe,
            isValidElement: be,
            createElement: _e,
            createFactory: ke,
            Component: M,
            PureComponent: De,
            createClass: Me,
            Children: Rt,
            PropTypes: At,
            DOM: Tt
        }, Ot);
        return Ut.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = Ot, Ut;
    });
}, function(e, t, n) {
    "use strict";
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    function a(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }
    function o(e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !t || "object" != typeof t && "function" != typeof t ? e : t;
    }
    function i(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }
    var l = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), s = n(2), c = r(s), u = n(3), p = r(u), d = n(5), f = r(d), m = n(6), h = c.default.gettext, g = function(e) {
        function t() {
            a(this, t);
            var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
            return e.state = {
                progress: null
            }, e;
        }
        return i(t, e), l(t, [ {
            key: "render",
            value: function() {
                function e(e, t, n) {
                    l.setState({
                        progress_title: n
                    }), e(t, function(e) {
                        return l.setState({
                            progress: e
                        });
                    }).always(function() {
                        return l.setState({
                            progress: null
                        });
                    }).fail(m.show_error);
                }
                function t() {
                    e(f.default.install, s.pkgname, h("Installing"));
                }
                function n() {
                    e(f.default.remove, s.file, h("Removing"));
                }
                var r, a, o, i = this, l = this, s = l.props.comp, u = l.state;
                return r = s.installed ? p.default.createElement("a", {
                    onClick: (0, m.left_click)(function() {
                        return (0, m.launch)(s);
                    })
                }, s.name) : s.name, u.progress ? (a = p.default.createElement(m.ProgressBar, {
                    title: u.progress_title,
                    data: u.progress
                }), o = p.default.createElement(m.CancelButton, {
                    data: u.progress
                })) : (a = u.error ? p.default.createElement("div", null, s.summary, p.default.createElement("div", {
                    className: "alert alert-danger alert-dismissable"
                }, p.default.createElement("button", {
                    className: "close",
                    onClick: (0, m.left_click)(function() {
                        i.setState({
                            error: null
                        });
                    })
                }, p.default.createElement("span", {
                    className: "pficon pficon-close"
                })), p.default.createElement("span", {
                    className: "pficon pficon-error-circle-o"
                }), u.error)) : s.summary, o = s.installed ? p.default.createElement("button", {
                    className: "btn btn-danger",
                    onClick: (0, m.left_click)(n)
                }, h("Remove")) : p.default.createElement("button", {
                    className: "btn btn-default",
                    onClick: (0, m.left_click)(t)
                }, h("Install"))), p.default.createElement("tr", {
                    onClick: (0, m.left_click)(function() {
                        return c.default.location.go(s.id);
                    })
                }, p.default.createElement("td", null, p.default.createElement("img", {
                    src: (0, m.icon_url)(s.icon)
                })), p.default.createElement("td", null, r), p.default.createElement("td", null, a), p.default.createElement("td", null, o));
            }
        } ]), t;
    }(p.default.Component), v = function(e) {
        function t() {
            a(this, t);
            var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
            return e.state = {
                progress: !1
            }, e;
        }
        return i(t, e), l(t, [ {
            key: "render",
            value: function() {
                function e() {
                    f.default.refresh(t.props.metainfo_db.origin_files, function(e) {
                        return t.setState({
                            progress: e
                        });
                    }).always(function() {
                        return t.setState({
                            progress: !1
                        });
                    }).fail(m.show_error);
                }
                var t = this, n = [];
                for (var r in this.props.metainfo_db.components) n.push(this.props.metainfo_db.components[r]);
                n.sort(function(e, t) {
                    return e.name.localeCompare(t.name);
                });
                var a, o, i, l, s;
                return this.state.progress ? (a = p.default.createElement(m.ProgressBar, {
                    title: h("Checking for new applications"),
                    data: this.state.progress
                }), o = p.default.createElement(m.CancelButton, {
                    data: this.state.progress
                })) : (a = null, o = p.default.createElement("button", {
                    className: "btn btn-default fa fa-refresh",
                    onClick: (0, m.left_click)(e)
                })), s = "table app-list", 0 === n.length ? (i = this.props.metainfo_db.ready ? h("No applications installed or available") : p.default.createElement("div", {
                    className: "spinner spinner-sm"
                }), l = p.default.createElement("tr", {
                    className: "app-list-empty"
                }, p.default.createElement("td", null, i))) : (s += " table-hover", l = n.map(function(e) {
                    return p.default.createElement(g, {
                        comp: e
                    });
                })), p.default.createElement("table", {
                    className: s
                }, p.default.createElement("caption", null, p.default.createElement("table", null, p.default.createElement("tr", null, p.default.createElement("td", null, p.default.createElement("h2", null, h("Applications"))), p.default.createElement("td", null, a), p.default.createElement("td", null, o)))), p.default.createElement("tbody", null, l));
            }
        } ]), t;
    }(p.default.Component);
    e.exports = {
        ApplicationList: v
    };
}, function(e, t, n) {
    "use strict";
    function r(e, t, n, r) {
        var a = u.defer();
        return p.call("/org/freedesktop/PackageKit", "org.freedesktop.PackageKit", "CreateTransaction", []).done(function(o) {
            function i() {
                s.Cancel(), c = !0;
            }
            function l() {
                if (n && "pending" == a.promise().state()) {
                    var e = {
                        waiting: !1,
                        percentage: 0,
                        cancel: null
                    };
                    !u || s.Status != d && s.Status != f || (e.waiting = !0), void 0 !== s.Percentage && 101 !== s.Percentage && (e.percentage = s.Percentage), 
                    s.AllowCancel && (e.cancel = i), n(e);
                }
            }
            var s = p.proxy("org.freedesktop.PackageKit.Transaction", o[0]), c = !1, u = !1;
            l(), s.addEventListener("changed", l), window.setTimeout(function() {
                u = !0, l();
            }, 1e3), s.addEventListener("ErrorCode", function(e, t, n) {
                a.reject(n, c ? "cancelled" : t);
            }), s.addEventListener("Package", function(e, t, n, o) {
                r && "pending" == a.promise().state() && r(t, n, o);
            }), s.addEventListener("Finished", function(e, t, n) {
                a.resolve(t);
            }), s.call(e, t).fail(function(e) {
                console.log("Error", e), a.reject(e, null);
            });
        }).fail(function(e) {
            a.reject(e, null);
        }), a.promise();
    }
    function a(e, t, n) {
        if (n) return function(r) {
            r.percentage >= 0 && (r.percentage = e + r.percentage / 100 * t), n(r);
        };
    }
    function o(e, t, n, a) {
        function o(e, t) {
            l.push(t);
        }
        var i = u.defer(), l = [];
        return r(e, [ t, [ n ] ], a, o).done(function() {
            0 === l.length ? i.reject("Can't resolve package", "not-found") : i.resolve(l[0]);
        }).fail(function(e) {
            i.reject(e, null);
        }), i.promise();
    }
    function i() {
        return u.dbus(null, {
            bus: "internal"
        }).call("/packages", "cockpit.Packages", "Reload", []);
    }
    function l(e, t) {
        return o("Resolve", g | v | h, e, a(0, 1, t)).then(function(e) {
            return r("InstallPackages", [ 0, [ e ] ], a(1, 99, t)).then(i);
        });
    }
    function s(e, t) {
        return o("SearchFiles", m, e, a(0, 1, t)).then(function(e) {
            return r("RemovePackages", [ 0, [ e ], !0, !1 ], a(1, 99, t)).then(i);
        });
    }
    function c(e, t) {
        function n(e, t) {
            var n = t.split(";")[0];
            i[n] = !0;
        }
        function o(e, t) {
            var n = t.split(";")[0];
            n in i && l.push(t);
        }
        var i = {}, l = [];
        return r("SearchFiles", [ m, e ], a(0, 5, t), n).then(function() {
            return r("RefreshCache", [ !0 ], a(5, 70, t)).then(function() {
                return r("GetUpdates", [ 0 ], a(75, 5, t), o).then(function() {
                    if (l.length > 0) return r("UpdatePackages", [ 0, l ], a(80, 20, t));
                });
            });
        });
    }
    var u = n(2), p = u.dbus("org.freedesktop.PackageKit", {
        superuser: "try"
    }), d = 1, f = 30, m = 4, h = 65536, g = 1 << 18, v = 1 << 21;
    e.exports = {
        install: l,
        remove: s,
        refresh: c
    };
}, function(e, t, n) {
    "use strict";
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    function a(e) {
        return function(t) {
            if (t && 0 === t.button) return t.stopPropagation(), e(t);
        };
    }
    function o(e) {
        if (!e) return "default.png";
        if ("/" != e[0]) return e;
        var t = window.btoa(JSON.stringify({
            payload: "fsread1",
            binary: "raw",
            path: e,
            external: {
                "content-type": "image/png"
            }
        }));
        return "/cockpit/channel/" + l.default.transport.csrf_token + "?" + t;
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.launch = t.show_error = t.CancelButton = t.ProgressBar = void 0, t.left_click = a, 
    t.icon_url = o;
    var i = n(2), l = r(i), s = n(3), c = r(s), u = n(7), p = l.default.gettext;
    c.default;
    t.ProgressBar = function(e) {
        var t = e.title, n = e.data;
        return n.waiting ? c.default.createElement("div", null, c.default.createElement("div", {
            className: "pull-right spinner spinner-sm"
        }), c.default.createElement("div", {
            className: "progress-title"
        }, p("Waiting for other programs to finish using the package manager..."))) : c.default.createElement("div", null, c.default.createElement("div", {
            className: "progress-title"
        }, t), c.default.createElement("div", {
            className: "progress"
        }, c.default.createElement("div", {
            className: "progress-bar",
            style: {
                width: n.percentage + "%"
            }
        })));
    }, t.CancelButton = function(e) {
        var t = e.data;
        return c.default.createElement("button", {
            className: "btn btn-default",
            disabled: !t.cancel,
            onClick: a(t.cancel)
        }, p("Cancel"));
    }, t.show_error = function(e, t) {
        "cancelled" != t && ("not-found" == t && (e = p("No installation package found for this application.")), 
        (0, u.show_modal_dialog)({
            title: p("Error"),
            body: c.default.createElement("div", {
                className: "modal-body"
            }, c.default.createElement("p", null, e))
        }, {
            cancel_caption: p("Close"),
            actions: []
        }));
    }, t.launch = function(e) {
        var t;
        for (t = 0; t < e.launchables.length; t++) if ("cockpit-manifest" == e.launchables[t].type) return void l.default.jump([ e.launchables[t].name ]);
    };
}, function(e, t, n) {
    "use strict";
    var r = n(2), a = n(3), o = r.gettext;
    n(8);
    var i = a.createClass({
        displayName: "DialogFooter",
        propTypes: {
            cancel_clicked: a.PropTypes.func,
            cancel_caption: a.PropTypes.string,
            actions: a.PropTypes.array,
            static_error: a.PropTypes.string,
            dialog_done: a.PropTypes.func
        },
        getInitialState: function() {
            return {
                action_in_progress: !1,
                action_in_progress_promise: null,
                action_progress_message: "",
                action_canceled: !1,
                error_message: null
            };
        },
        keyUpHandler: function(e) {
            27 == e.keyCode && (this.cancel_click(), e.stopPropagation());
        },
        componentDidMount: function() {
            document.body.classList.add("modal-in"), document.addEventListener("keyup", this.keyUpHandler.bind(this));
        },
        componentWillUnmount: function() {
            document.body.classList.remove("modal-in"), document.removeEventListener("keyup", this.keyUpHandler.bind(this));
        },
        update_progress: function(e) {
            this.setState({
                action_progress_message: e
            });
        },
        action_click: function(e, t) {
            if (!t || 0 === t.button) {
                var n = this;
                this.setState({
                    error_message: null,
                    action_progress_message: "",
                    action_in_progress: !0,
                    action_canceled: !1
                }), this.state.action_in_progress_promise = e(this.update_progress.bind(this)).done(function() {
                    n.setState({
                        action_in_progress: !1,
                        error_message: null
                    }), n.props.dialog_done && n.props.dialog_done(!0);
                }).fail(function(e) {
                    n.state.action_canceled && n.props.dialog_done && n.props.dialog_done(!1), console.warn(e), 
                    n.setState({
                        action_in_progress: !1,
                        error_message: e
                    });
                }).progress(this.update_progress.bind(this)), t && t.stopPropagation();
            }
        },
        cancel_click: function(e) {
            if (!e || 0 === e.button) {
                if (this.setState({
                    action_canceled: !0
                }), this.props.cancel_clicked && this.props.cancel_clicked(), this.state.action_in_progress && "cancel" in this.state.action_in_progress_promise) return void this.state.action_in_progress_promise.cancel();
                this.props.dialog_done && this.props.dialog_done(!1), e && e.stopPropagation();
            }
        },
        render: function() {
            var e, t;
            e = "cancel_caption" in this.props ? this.props.cancel_caption : o("Cancel"), t = "cancel_style" in this.props ? this.props.cancel_style : "cancel", 
            t = "btn btn-default " + t;
            var n, r;
            this.state.action_in_progress && (r = "disabled", n = a.createElement("div", {
                className: "dialog-wait-ct pull-left"
            }, a.createElement("div", {
                className: "spinner spinner-sm"
            }), a.createElement("span", null, this.state.action_progress_message)));
            var i, l, s = this, c = this.props.actions.map(function(e) {
                var t;
                t = "caption" in e ? e.caption : o("Ok");
                var n = "btn-default", i = {
                    primary: "btn-primary",
                    danger: "btn-danger"
                };
                "style" in e && e.style in i && (n = i[e.style]), n = "btn " + n + " apply";
                var l = r || "disabled" in e && e.disabled;
                return a.createElement("button", {
                    key: t,
                    className: n,
                    onClick: s.action_click.bind(s, e.clicked),
                    disabled: l
                }, t);
            });
            return l = void 0 !== this.props.static_error && null !== this.props.static_error ? this.props.static_error : this.state.error_message, 
            l && (i = a.createElement("div", {
                className: "alert alert-danger dialog-error"
            }, a.createElement("span", {
                className: "fa fa-exclamation-triangle"
            }), a.createElement("span", null, l))), a.createElement("div", {
                className: "modal-footer"
            }, i, n, a.createElement("button", {
                className: t,
                onClick: this.cancel_click.bind(this)
            }, e), c);
        }
    }), l = a.createClass({
        displayName: "Dialog",
        propTypes: {
            title: a.PropTypes.string.isRequired,
            no_backdrop: a.PropTypes.bool,
            body: a.PropTypes.element.isRequired,
            footer: a.PropTypes.element.isRequired,
            id: a.PropTypes.string
        },
        componentDidMount: function() {
            document.activeElement && document.activeElement.blur();
        },
        render: function() {
            var e;
            return this.props.no_backdrop || (e = a.createElement("div", {
                className: "modal-backdrop fade in"
            })), a.createElement("div", null, e, a.createElement("div", {
                className: "modal fade in dialog-ct-visible",
                tabindex: "-1"
            }, a.createElement("div", {
                id: this.props.id,
                className: "modal-dialog"
            }, a.createElement("div", {
                className: "modal-content"
            }, a.createElement("div", {
                className: "modal-header"
            }, a.createElement("h4", {
                className: "modal-title"
            }, this.props.title)), this.props.body, this.props.footer))));
        }
    }), s = function(e, t) {
        function n() {
            null !== u.props && void 0 !== u.props || (u.props = {}), u.props.footer = a.createElement(i, u.footerProps), 
            u.render();
        }
        var r = "cockpit_modal_dialog";
        if (document.getElementById(r)) return void console.warn("Unable to create nested dialog");
        var o = document.createElement("div");
        o.id = r, document.body.appendChild(o);
        var s, c = function() {
            s && s.apply(this, arguments), a.unmountComponentAtNode(o), o.remove();
        }, u = {};
        return u.props = null, u.footerProps = null, u.render = function() {
            u.props.footer = a.createElement(i, u.footerProps), a.render(a.createElement(l, u.props), o);
        }, u.setFooterProps = function(e) {
            e.static_error && console.warn(e.static_error), u.footerProps = e, null !== u.footerProps && void 0 !== u.footerProps || (u.footerProps = {}), 
            u.footerProps.dialog_done != c && (s = u.footerProps.dialog_done, u.footerProps.dialog_done = c), 
            n();
        }, u.setProps = function(e) {
            u.props = e, n();
        }, u.setFooterProps(t), u.setProps(e), u.render(), u;
    };
    e.exports = {
        Dialog: l,
        DialogFooter: i,
        show_modal_dialog: s
    };
}, function(e, t) {}, , function(e, t, n) {
    "use strict";
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    function a(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }
    function o(e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !t || "object" != typeof t && "function" != typeof t ? e : t;
    }
    function i(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }
    var l = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), s = n(2), c = r(s), u = n(3), p = r(u), d = n(5), f = r(d), m = n(6);
    n(11);
    var h = c.default.gettext, g = function(e) {
        function t() {
            a(this, t);
            var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
            return e.state = {
                error: null,
                progress: null
            }, e;
        }
        return i(t, e), l(t, [ {
            key: "render",
            value: function() {
                function e(e, t, n) {
                    s.setState({
                        progress_title: n
                    }), e(t, function(e) {
                        return s.setState({
                            progress: e
                        });
                    }).always(function() {
                        return s.setState({
                            progress: null
                        });
                    }).fail(m.show_error);
                }
                function t() {
                    e(f.default.install, l.pkgname, h("Installing"));
                }
                function n() {
                    e(f.default.remove, l.file, h("Removing"));
                }
                function r(e) {
                    return e.map(function(e) {
                        if ("homepage" == e.type) return p.default.createElement("div", {
                            className: "app-links"
                        }, p.default.createElement("a", {
                            href: e.link,
                            target: "_blank",
                            rel: "noopener",
                            "data-linkedhost": e.link
                        }, "View Project Website ", p.default.createElement("i", {
                            className: "fa fa-external-link",
                            "aria-hidden": "true"
                        })));
                    });
                }
                function a(e) {
                    return e ? e.map(function(e) {
                        return "ul" == e.tag ? p.default.createElement("ul", null, e.items.map(function(e) {
                            return p.default.createElement("li", null, e);
                        })) : "ol" == e.tag ? p.default.createElement("ol", null, e.items.map(function(e) {
                            return p.default.createElement("li", null, e);
                        })) : p.default.createElement("p", null, e);
                    }) : p.default.createElement("p", null, h("No description provided."));
                }
                function o() {
                    if (!l) return d.ready ? p.default.createElement("div", null, h("Unknown Application")) : p.default.createElement("div", {
                        className: "spinner"
                    });
                    var e, o;
                    return u.progress ? (e = p.default.createElement(m.ProgressBar, {
                        title: s.state.progress_title,
                        data: s.state.progress
                    }), o = p.default.createElement(m.CancelButton, {
                        data: s.state.progress
                    })) : l.installed ? (e = p.default.createElement("a", {
                        onClick: (0, m.left_click)(function() {
                            return (0, m.launch)(l);
                        })
                    }, h("Go to Application")), o = p.default.createElement("button", {
                        className: "btn btn-danger",
                        onClick: (0, m.left_click)(n)
                    }, h("Remove"))) : (e = null, o = p.default.createElement("button", {
                        className: "btn btn-default",
                        onClick: (0, m.left_click)(t)
                    }, h("Install"))), p.default.createElement("div", null, p.default.createElement("table", {
                        className: "table app"
                    }, p.default.createElement("tbody", null, p.default.createElement("tr", null, p.default.createElement("td", null, p.default.createElement("img", {
                        src: (0, m.icon_url)(l.icon)
                    })), p.default.createElement("td", null, l.summary), p.default.createElement("td", null, e), p.default.createElement("td", null, o)))), r(l.urls), p.default.createElement("div", {
                        className: "app-description"
                    }, a(l.description)), p.default.createElement("center", null, l.screenshots.map(function(e) {
                        return p.default.createElement("img", {
                            className: "app-screenshot",
                            src: e.full
                        });
                    })));
                }
                function i() {
                    c.default.location.go("/");
                }
                var l, s = this, u = this.state, d = this.props.metainfo_db;
                return this.props.id ? (l = d.components[this.props.id], p.default.createElement("div", null, p.default.createElement("ol", {
                    className: "breadcrumb"
                }, p.default.createElement("li", null, p.default.createElement("a", {
                    onClick: (0, m.left_click)(i)
                }, h("Applications"))), p.default.createElement("li", {
                    className: "active"
                }, l ? l.name : this.props.id)), o())) : null;
            }
        } ]), t;
    }(p.default.Component);
    e.exports = {
        Application: g
    };
}, function(e, t) {}, , function(e, t, n) {
    "use strict";
    function r() {
        if (!s) {
            s = a.event_target({
                ready: !1,
                components: [],
                origin_files: []
            });
            var e = "";
            o.spawn([ i, l ], [], {
                environ: [ "LANGUAGE=" + (a.language || "en") ]
            }).stream(function(t) {
                var n, r;
                e += t, n = e.split("\n"), e = n[n.length - 1], n.length >= 2 && (r = JSON.parse(n[n.length - 2]), 
                s.components = r.components, s.origin_files = r.origin_files, s.ready = !0, s.dispatchEvent("changed"));
            }).fail(function(e) {
                "closed" != e && console.warn(e);
            });
        }
        return s;
    }
    var a = n(2), o = n(14), i = n(15), l = n(16), s = null;
    e.exports = {
        get_metainfo_db: r
    };
}, function(e, t, n) {
    "use strict";
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    function a(e, t, n) {
        var r;
        return r = "string" == typeof e ? e : e.join("\n"), i.default.spawn(l.concat(t), n).input(r);
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.spawn = a;
    var o = n(2), i = r(o), l = [ "sh", "-ec", "exec $(which python3 2>/dev/null || which python) $@", "--", "-" ];
}, function(e, t) {
    e.exports = "#\n# This file is part of Cockpit.\n#\n# Copyright (C) 2017 Red Hat, Inc.\n#\n# Cockpit is free software; you can redistribute it and/or modify it\n# under the terms of the GNU Lesser General Public License as published by\n# the Free Software Foundation; either version 2.1 of the License, or\n# (at your option) any later version.\n#\n# Cockpit is distributed in the hope that it will be useful, but\n# WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n# Lesser General Public License for more details.\n#\n# You should have received a copy of the GNU Lesser General Public License\n# along with Cockpit; If not, see <http://www.gnu.org/licenses/>.\n\nimport os\nimport ctypes\nimport struct\nimport subprocess\nimport traceback\n\nIN_CLOSE_WRITE = 0x00000008\nIN_MOVED_FROM  = 0x00000040\nIN_MOVED_TO    = 0x00000080\nIN_CREATE      = 0x00000100\nIN_DELETE      = 0x00000200\nIN_DELETE_SELF = 0x00000400\nIN_MOVE_SELF   = 0x00000800\nIN_IGNORED     = 0x00008000\n\nclass Inotify:\n    def __init__(self):\n        self._libc = ctypes.CDLL(None, use_errno=True)\n        self._get_errno_func = ctypes.get_errno\n\n        self._libc.inotify_init.argtypes = []\n        self._libc.inotify_init.restype = ctypes.c_int\n        self._libc.inotify_add_watch.argtypes = [ctypes.c_int, ctypes.c_char_p,\n                                                 ctypes.c_uint32]\n        self._libc.inotify_add_watch.restype = ctypes.c_int\n        self._libc.inotify_rm_watch.argtypes = [ctypes.c_int, ctypes.c_int]\n        self._libc.inotify_rm_watch.restype = ctypes.c_int\n\n        self.fd = self._libc.inotify_init()\n\n    def add_watch(self, path, mask):\n        path = ctypes.create_string_buffer(path.encode(sys.getfilesystemencoding()))\n        wd = self._libc.inotify_add_watch(self.fd, path, mask)\n        if wd < 0:\n            sys.stderr.write(\"can't add watch for %s: %s\\n\" % (path, os.strerror(self._get_errno_func())))\n        return wd\n\n    def rem_watch(self, wd):\n        if self._libc.inotify_rm_watch(self.fd, wd) < 0:\n            sys.stderr.write(\"can't remove watch: %s\\n\" % (os.strerror(self._get_errno_func())))\n\n    def process(self, callback):\n        buf = os.read(self.fd, 4096)\n        pos = 0\n        while pos < len(buf):\n            (wd, mask, cookie, name_len) = struct.unpack('iIII', buf[pos:pos+16])\n            pos += 16\n            (name,) = struct.unpack('%ds' % name_len, buf[pos:pos + name_len])\n            pos += name_len\n            callback(wd, mask, name.decode().rstrip('\\0'))\n\n    def run(self, callback):\n        while True:\n            self.process(callback)\n";
}, function(e, t) {
    e.exports = "import os\nimport sys\nimport time\nimport traceback\n\nimport gzip\nimport xml.etree.ElementTree as ET\nimport json\n\n# Our own little abstraction on top of inotify.  This only supports\n# watching directories non-recursively, but it also supports watching\n# directories that come and go into and out of existence.\n#\n# We could use pyinotify for this, but it would only be able to\n# replace the Inotify class; we would still need all the logic in the\n# Watcher class.\n\nclass Watcher:\n\n    def __init__(self):\n        self.inotify = Inotify()\n        self.watches = { } # path -> wd\n        self.handlers = { } # wd -> set of callbacks\n\n    def __add_watch(self, path, mask, handler):\n        if path in self.watches:\n            wd = self.watches[path]\n            self.handlers[wd] = self.handlers[wd] | frozenset([ handler ])\n        else:\n            wd = self.inotify.add_watch(path, mask)\n            if wd >= 0:\n                self.watches[path] = wd\n                self.handlers[wd] = frozenset([ handler ])\n\n    def __rem_watch(self, path, handler):\n        wd = self.watches[path]\n        self.handlers[wd] = self.handlers[wd] - frozenset([ handler ])\n        if len(self.handlers[wd]) == 0:\n            self.inotify.rem_watch(wd)\n            del self.handlers[wd]\n            del self.watches[path]\n\n    def watch_directory(self, path, callback):\n\n        events = (IN_CREATE |\n                  IN_MOVED_TO |\n                  IN_MOVED_FROM |\n                  IN_DELETE_SELF |\n                  IN_CLOSE_WRITE |\n                  IN_DELETE |\n                  IN_MOVE_SELF)\n\n        def handler(mask, name):\n            if ((mask & IN_CREATE or mask & IN_MOVED_TO) and\n                cur_wait and name == cur_wait):\n                reset()\n            elif mask & (IN_DELETE_SELF | IN_MOVE_SELF):\n                reset()\n            elif not cur_wait and len(name) > 0:\n                if mask & (IN_CLOSE_WRITE | IN_MOVED_TO | IN_DELETE | IN_MOVED_FROM):\n                    callback(os.path.join(path, name))\n\n        def reset():\n            self.__rem_watch(cur_path, handler)\n            self.watch_directory(path, callback)\n\n        cur_path = path\n        cur_wait = None\n        while not os.path.exists(cur_path):\n            cur_wait = os.path.basename(cur_path)\n            cur_path = os.path.dirname(cur_path)\n\n        self.__add_watch(cur_path, events, handler)\n\n        if not cur_wait:\n            for f in os.listdir(cur_path):\n                callback(os.path.join(cur_path, f))\n\n    def run(self):\n        def event(wd, mask, name):\n            if wd in self.handlers:\n                for h in self.handlers[wd]:\n                    h(mask, name)\n        self.inotify.run(event)\n\nlang = os.environ.get('LANGUAGE')\n\ndef attr_lang(elt):\n    return elt.attrib.get('{http://www.w3.org/XML/1998/namespace}lang')\n\ndef element(xml, tag):\n    if lang:\n        for elt in xml.iter(tag):\n            if attr_lang(elt) == lang:\n                return elt\n    return xml.find(tag)\n\ndef element_value(xml, tag):\n    elt = element(xml, tag)\n    return elt.text if elt is not None else None\n\ndef convert_description(xml, use_lang = True):\n    if xml is None:\n        return None\n\n    want_lang = lang if use_lang else None\n\n    # Only the following constructs are allowed, and they all appear\n    # at the top level:\n    #\n    # <p>text</p>\n    # <ul><li>text</li>...</ul>\n    # <ol><li>text</li>...</ol>\n\n    # A description can have 'lang' attributes both on the actual\n    # <description> element and on the contained <p>, <ul>, and <ol>\n    # elements, but probably not on the <li> elements.\n\n    def text(xml):\n        return \" \".join(xml.itertext())\n\n    res = [ ]\n    for c in xml:\n        if attr_lang(c) != want_lang:\n            continue\n        if c.tag == 'p':\n            res.append(text(c))\n        elif c.tag == 'ul' or c.tag == 'ol':\n            res.append({ 'tag': c.tag, 'items': list(map(text, c.findall('li'))) })\n\n    # If we found nothing that matches lang, fall back to default\n    if lang is not None and len(res) == 0:\n        res = convert_description(xml, False)\n\n    return res\n\ndef convert_cached_icon(dir, origin, xml):\n    icon = xml.text\n\n    def try_size(sz):\n        path = os.path.join(dir, \"..\", \"icons\", origin, sz, icon)\n        return path if os.path.exists(path) else None\n\n    return try_size(\"64x64\") or try_size(\"128x128\")\n\ndef convert_remote_icon(xml):\n    url = xml.text\n    if url.startswith(\"http://\") or url.startswith(\"https://\"):\n        return url\n    return None\n\ndef convert_local_icon(xml):\n    path = xml.text\n    if path.startswith(\"/\"):\n        return path\n    return None\n\ndef find_and_convert_icon(dir, origin, xml):\n    if xml is None:\n        return None\n\n    # Just use the first icon.\n    icon = xml.find('icon')\n\n    if icon is not None:\n        if icon.attrib['type'] == 'cached':\n            return convert_cached_icon(dir, origin, icon)\n        elif icon.attrib['type'] == 'remote':\n            return convert_remote_icon(icon)\n        elif icon.attrib['type'] == 'local':\n            return convert_local_icon(icon)\n\n    return None\n\ndef convert_screenshots(xml):\n    if xml is None:\n        return [ ]\n\n    shots = [ ]\n    for sh in xml.iter('screenshot'):\n        for img in sh.iter('image'):\n            if img.attrib['type'] == 'source':\n                shots.append({ 'full': img.text })\n\n    return shots\n\ndef convert_launchables(xml):\n    ables = [ ]\n\n    for elt in xml.iter('launchable'):\n        type = elt.attrib['type']\n        if type == \"cockpit-manifest\":\n            ables.append({ 'name': elt.text, 'type': type })\n\n    return ables\n\ndef convert_urls(xml):\n    urls = [ ]\n\n    for url in xml.iter('url'):\n        urls.append({ 'type': url.attrib['type'], 'link': url.text })\n\n    return urls\n\ndef convert_collection_component(dir, origin, xml):\n    id = element_value(xml, 'id')\n    pkgname = element_value(xml, 'pkgname')\n    launchables = convert_launchables(xml)\n    urls = convert_urls(xml)\n\n    if not id or not pkgname or len(launchables) == 0:\n        return None\n\n    return {\n        'id': id,\n        'pkgname': pkgname,\n        'name': element_value(xml, 'name'),\n        'summary': element_value(xml, 'summary'),\n        'description': convert_description(element(xml, 'description')),\n        'icon': find_and_convert_icon(dir, origin, xml),\n        'screenshots': convert_screenshots(element(xml, 'screenshots')),\n        'launchables': launchables,\n        'urls': urls\n    }\n\ndef convert_upstream_component(file, xml):\n    if xml.tag != 'component':\n        return None\n\n    launchables = convert_launchables(xml)\n    if len(launchables) ==  0:\n        return None\n\n    urls = convert_urls(xml)\n\n    return {\n        'id': element_value(xml, 'id'),\n        'name': element_value(xml, 'name'),\n        'summary': element_value(xml, 'summary'),\n        'description': convert_description(element(xml, 'description')),\n        'icon': find_and_convert_icon(dir, '', xml),\n        'screenshots': convert_screenshots(element(xml, 'screenshots')),\n        'launchables': launchables,\n        'installed': True,\n        'file': file,\n        'urls': urls\n    }\n\nclass MetainfoDB:\n    def __init__(self):\n        self.dumping = False\n        self.installed_by_file = { }\n        self.available_by_file = { }\n\n    def notice_installed(self, file, xml_root):\n        if xml_root is not None:\n            comp = convert_upstream_component(file, xml_root)\n            if comp is not None:\n                self.installed_by_file[file] = comp;\n        elif file in self.installed_by_file:\n            del self.installed_by_file[file];\n        if self.dumping:\n            self.dump()\n\n    def notice_available(self, file, xml_root):\n        if xml_root is not None:\n            info = { }\n            origin = xml_root.attrib['origin']\n            for xml_comp in xml_root.iter('component'):\n                comp = convert_collection_component(os.path.dirname(file), origin, xml_comp)\n                if comp is not None:\n                    if comp['id'] in info:\n                        pass # warning: duplicate id\n                    else:\n                        info[comp['id']] = comp\n            self.available_by_file[file] = info\n        elif file in self.available_by_file:\n            del self.available_by_file[file]\n        if self.dumping:\n            self.dump()\n\n    def dump(self):\n        comps = { }\n        for file in self.installed_by_file:\n            comp = self.installed_by_file[file]\n            if comp['id'] in comps:\n                pass # warn dup\n            else:\n                comps[comp['id']] = comp;\n        for file in self.available_by_file:\n            for id in self.available_by_file[file]:\n                comp = self.available_by_file[file][id]\n                if not comp['id'] in comps:\n                    comps[comp['id']] = comp;\n                else:\n                    z = comps[comp['id']].copy()\n                    z.update(comp)\n                    comps[comp['id']] = z;\n\n        data = {\n            'components': comps,\n            'origin_files': list(self.available_by_file.keys())\n        }\n\n        sys.stdout.write(json.dumps(data) + '\\n')\n        sys.stdout.flush()\n\n    def start_dumping(self):\n        self.dump()\n        self.dumping = True\n\ndef watch_db():\n    watcher = Watcher()\n\n    db = MetainfoDB()\n\n    def process_file(path, callback):\n        try:\n            if not os.path.exists(path):\n                callback(path, None)\n            elif path.endswith('.xml'):\n                callback(path, ET.parse(path).getroot())\n            elif path.endswith('.xml.gz'):\n                callback(path, ET.parse(gzip.open(path)).getroot())\n        except:\n            # If we hit an exception during handling a file, pretend\n            # that it doesn't exist instead of keeping old data.  This\n            # makes the behavior consistent across restarts of this\n            # watcher.\n            callback(path, None)\n            sys.stderr.write(\"%s: \" % path)\n            sys.stderr.write(\"\".join(traceback.format_exception_only(sys.exc_info()[0], sys.exc_info()[1])))\n            sys.stderr.flush()\n\n    def installed_callback(path):\n        process_file(path, lambda path, xml: db.notice_installed(path, xml))\n\n    def available_callback(path):\n        process_file(path, lambda path, xml: db.notice_available(path, xml))\n\n    watcher.watch_directory('/usr/share/metainfo',      installed_callback)\n    watcher.watch_directory('/usr/share/app-info/xmls', available_callback)\n    watcher.watch_directory('/var/cache/app-info/xmls', available_callback)\n    db.start_dumping()\n    watcher.run()\n\nwatch_db()\n";
} ]);
//# sourceMappingURL=apps.min.js.map