!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n){e.exports=jQuery},function(e,n){e.exports=cockpit},function(e,n){e.exports='#! /bin/bash\n\npresent () {\n    which "$1" >/dev/null 2>/dev/null\n}\n\nif present sosreport; then\n    exec sosreport "$@"\nelif present atomic; then\n\n    # HACK - sosreport inside the container does not behave as\n    #        advertised, so we fix it via --sysroot and --tmp-dir.\n    #\n    # https://bugzilla.redhat.com/show_bug.cgi?id=1299794\n    # https://bugzilla.redhat.com/show_bug.cgi?id=1277223\n\n    exec atomic run rhel7/support-tools -- sosreport --sysroot /host --tmp-dir /host/var/tmp "$@"\nelse\n    echo >&2 "The sosreport utility is not installed.  This should not happen.  Please complain to your distribution vendor."\n    exit 1\nfi\n'},function(e,n,t){t(4),e.exports=t(5)},function(e,n,t){"use strict";t.r(n);var o,r,s,a=t(1),i=t.n(a),l=t(0),c=t.n(l),u=t(2),p=t.n(u),d=i.a.gettext;function f(){!function(){c()("#sos-progress .progress-bar").css("width","0%"),c()("#sos-download, #sos-error").hide(),c()("#sos-cancel").text(d("Cancel")),r=null,s=[];var e=i.a.script(p.a,["--batch"],{superuser:!0,err:"out",pty:!0});o=e;var n="",t=0,a=/Running ([0-9]+)\/([0-9]+):/,l=/Finishing plugins.*\[Running: (.*)\]/,u=/Starting ([0-9]+)\/([0-9]+).*\[Running: (.*)\]/,f=/Your sosreport has been generated and saved in:[ \r\n]+(\/[^\r\n]+)/;e.stream(function(r){if(o==e){var s,i;i=0;for(var p=(n+=r).split("\n"),d=p.length-1;d>=0;d--){if(s=u.exec(p[d])){t=parseInt(s[2],10),i=(parseInt(s[1],10)-s[3].split(" ").length)/t*100;break}if(s=l.exec(p[d])){i=t?(t-s[1].split(" ").length)/t*100:100;break}if(s=a.exec(p[d])){i=parseInt(s[1],10)/parseInt(s[2],10)*100;break}}c()("#sos-alert, #sos-progress").show(),c()("#sos-progress .progress-bar").css("width",i.toString()+"%")}}),e.done(function(){if(o==e){var t=f.exec(n);if(t){var a=t[1],l=a.replace(/.*\//,"");0===a.indexOf("/host")&&(a=a.substr(5)),s=[a,a+".md5"];var u=window.btoa(JSON.stringify({payload:"fsread1",binary:"raw",path:a,superuser:!0,max_read_size:157286400,external:{"content-disposition":'attachment; filename="'+l+'"',"content-type":"application/x-xz, application/octet-stream"}})),p=new URL(i.a.transport.uri("channel/"+i.a.transport.csrf_token)).pathname;r=p+"?"+u,c()("#sos-progress, #sos-error").hide(),c()("#sos-alert, #sos-download").show(),c()("#sos-cancel").text(d("Close"))}else h(d("No archive has been created."),n);o=null}}),e.fail(function(t){o==e&&(h(t.toString(),n),o=null)})}()}function h(e,n){c()("#sos-alert, #sos-progress, #sos-download").hide(),c()("#sos-error .alert-message").text(e),n?(c()("#sos-error-extra").text(n),c()("#sos-error-extra").show()):c()("#sos-error-extra").hide(),c()("#sos-error").show(),c()("#sos-cancel").text(d("Close"))}function g(){o&&(o.close("cancelled"),o=null),s.length>0&&i.a.spawn(["rm"].concat(s),{superuser:!0,err:"message"}).fail(function(e){console.log("failed to remove",s,e)}),r=null,s=[],c()("#sos").modal("hide")}function b(){var e=c()("<iframe>").attr("src",r).hide();e.on("load",function(n){var t=e.get(0).contentDocument.title;t&&h(t)}),c()("body").append(e)}c()(function(){c()("#sos").on("show.bs.modal",f),c()("#sos-cancel").on("click",g),c()("#sos-download button").on("click",b),i.a.translate(),c()("body").show(),i.a.transport.wait(function(){})})},function(e,n){}]);
//# sourceMappingURL=sosreport.min.js.map