!function(e){var o={};function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(n,r,function(o){return e[o]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=3)}([function(e,o){e.exports=jQuery},function(e,o){e.exports=cockpit},function(e,o){e.exports='#! /bin/bash\n\npresent () {\n    which "$1" >/dev/null 2>/dev/null\n}\n\nif present sosreport; then\n    exec sosreport "$@"\nelif present atomic; then\n\n    # HACK - sosreport inside the container does not behave as\n    #        advertised, so we fix it via --sysroot and --tmp-dir.\n    #\n    # https://bugzilla.redhat.com/show_bug.cgi?id=1299794\n    # https://bugzilla.redhat.com/show_bug.cgi?id=1277223\n\n    exec atomic run rhel7/rhel-tools -- sosreport --sysroot /host --tmp-dir /host/var/tmp "$@"\nelse\n    echo >&2 "The sosreport utility is not installed.  This should not happen.  Please complain to your distribution vendor."\n    exit 1\nfi\n'},function(e,o,t){t(4),e.exports=t(5)},function(e,o,t){"use strict";t.r(o);var n=t(1),r=t.n(n),s=t(0),a=t.n(s),i=t(2),c=t.n(i);const l=r.a.gettext;var u,d,p;function f(){!function(){a()("#sos-progress .progress-bar").css("width","0%"),a()("#sos-download, #sos-error").hide(),a()("#sos-cancel").text(l("Cancel")),d=null,p=[];var e=r.a.script(c.a,["--batch"],{superuser:!0,err:"out",pty:!0});u=e;var o="",t=/Running ([0-9]+)\/([0-9]+):/g,n=/Your sosreport has been generated and saved in:[ \r\n]+(\/[^\r\n]+)/;e.stream(function(n){if(u==e){var r,s;for(o+=n,s=0;r=t.exec(o);)s=parseInt(r[1],10)/parseInt(r[2],10)*100;a()("#sos-alert, #sos-progress").show(),a()("#sos-progress .progress-bar").css("width",s.toString()+"%")}}),e.done(function(){if(u==e){var t=n.exec(o);if(t){var s=t[1],i=s.replace(/.*\//,"");0===s.indexOf("/host")&&(s=s.substr(5)),p=[s,s+".md5"];var c=window.btoa(JSON.stringify({payload:"fsread1",binary:"raw",path:s,superuser:!0,max_read_size:157286400,external:{"content-disposition":'attachment; filename="'+i+'"',"content-type":"application/x-xz, application/octet-stream"}}));d="/cockpit/channel/"+r.a.transport.csrf_token+"?"+c,a()("#sos-progress, #sos-error").hide(),a()("#sos-alert, #sos-download").show(),a()("#sos-cancel").text(l("Close"))}else h(l("No archive has been created."),o);u=null}}),e.fail(function(t){u==e&&(h(t.toString(),o),u=null)})}()}function h(e,o){a()("#sos-alert, #sos-progress, #sos-download").hide(),a()("#sos-error .alert-message").text(e),o?(a()("#sos-error-extra").text(o),a()("#sos-error-extra").show()):a()("#sos-error-extra").hide(),a()("#sos-error").show(),a()("#sos-cancel").text(l("Close"))}function b(){u&&(u.close("cancelled"),u=null),p.length>0&&r.a.spawn(["rm"].concat(p),{superuser:!0,err:"message"}).fail(function(e){console.log("failed to remove",p,e)}),d=null,p=[],a()("#sos").modal("hide")}function g(){var e=a()("<iframe>").attr("src",d).hide();e.on("load",function(o){var t=e.get(0).contentDocument.title;t&&h(t)}),a()("body").append(e)}a()(function(){a()("#sos").on("show.bs.modal",f),a()("#sos-cancel").on("click",b),a()("#sos-download button").on("click",g),r.a.translate(),a()("body").show(),r.a.transport.wait(function(){})})},function(e,o){}]);
//# sourceMappingURL=sosreport.min.js.map