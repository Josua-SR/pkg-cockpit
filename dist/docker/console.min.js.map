{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///external \"cockpit\"","webpack:///../node_modules/xterm/lib/common/EventEmitter2.js","webpack:///../node_modules/xterm/lib/common/Lifecycle.js","webpack:///../node_modules/xterm/lib/Buffer.js","webpack:///../node_modules/xterm/lib/renderer/atlas/Types.js","webpack:///../node_modules/xterm/lib/BufferLine.js","webpack:///../pkg/docker/docker.js","webpack:///../node_modules/xterm/lib/common/Platform.js","webpack:///../node_modules/xterm/lib/ui/Lifecycle.js","webpack:///../node_modules/xterm/lib/common/data/EscapeSequences.js","webpack:///../node_modules/xterm/lib/renderer/BaseRenderLayer.js","webpack:///../node_modules/xterm/lib/core/input/TextDecoder.js","webpack:///../node_modules/xterm/lib/renderer/atlas/CharAtlasUtils.js","webpack:///../node_modules/xterm/lib/renderer/atlas/BaseCharAtlas.js","webpack:///../node_modules/xterm/lib/renderer/ColorManager.js","webpack:///../node_modules/xterm/lib/renderer/CharacterJoinerRegistry.js","webpack:///../node_modules/xterm/lib/ui/RenderDebouncer.js","webpack:///../node_modules/xterm/lib/Strings.js","webpack:///../node_modules/xterm/lib/CharWidth.js","webpack:///../node_modules/xterm/lib/common/TypedArrayUtils.js","webpack:///../node_modules/xterm/lib/renderer/atlas/CharAtlasCache.js","webpack:///../node_modules/xterm/lib/renderer/atlas/CharAtlasGenerator.js","webpack:///../node_modules/xterm/lib/ui/ScreenDprMonitor.js","webpack:///../node_modules/xterm/lib/MouseZoneManager.js","webpack:///../node_modules/xterm/lib/MouseHelper.js","webpack:///../node_modules/xterm/lib/public/Terminal.js","webpack:///../node_modules/xterm/lib/Terminal.js","webpack:///../node_modules/xterm/lib/BufferSet.js","webpack:///../node_modules/xterm/lib/common/CircularList.js","webpack:///../node_modules/xterm/lib/BufferReflow.js","webpack:///../node_modules/xterm/lib/CompositionHelper.js","webpack:///../node_modules/xterm/lib/common/EventEmitter.js","webpack:///../node_modules/xterm/lib/Viewport.js","webpack:///../node_modules/xterm/lib/Clipboard.js","webpack:///../node_modules/xterm/lib/InputHandler.js","webpack:///../node_modules/xterm/lib/core/data/Charsets.js","webpack:///../node_modules/xterm/lib/EscapeSequenceParser.js","webpack:///../node_modules/xterm/lib/renderer/Renderer.js","webpack:///../node_modules/xterm/lib/renderer/TextRenderLayer.js","webpack:///../node_modules/xterm/lib/renderer/GridCache.js","webpack:///../node_modules/xterm/lib/renderer/atlas/DynamicCharAtlas.js","webpack:///../node_modules/xterm/lib/renderer/atlas/LRUMap.js","webpack:///../node_modules/xterm/lib/renderer/atlas/NoneCharAtlas.js","webpack:///../node_modules/xterm/lib/renderer/atlas/StaticCharAtlas.js","webpack:///../node_modules/xterm/lib/renderer/SelectionRenderLayer.js","webpack:///../node_modules/xterm/lib/renderer/CursorRenderLayer.js","webpack:///../node_modules/xterm/lib/renderer/LinkRenderLayer.js","webpack:///../node_modules/xterm/lib/Linkifier.js","webpack:///../node_modules/xterm/lib/SelectionManager.js","webpack:///../node_modules/xterm/lib/SelectionModel.js","webpack:///../node_modules/xterm/lib/handlers/AltClickHandler.js","webpack:///../node_modules/xterm/lib/CharMeasure.js","webpack:///../node_modules/xterm/lib/SoundManager.js","webpack:///../node_modules/xterm/lib/AccessibilityManager.js","webpack:///../node_modules/xterm/lib/renderer/dom/DomRenderer.js","webpack:///../node_modules/xterm/lib/renderer/dom/DomRendererRowFactory.js","webpack:///../node_modules/xterm/lib/core/input/Keyboard.js","webpack:///../node_modules/xterm/lib/common/Clone.js","webpack:///../node_modules/xterm/lib/WindowsMode.js","webpack:///../pkg/docker/console.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","cockpit","EventEmitter2","this","_listeners","_this","_event","listener","push","dispose","length","splice","configurable","fire","data","queue","undefined","Disposable","_disposables","_isDisposed","forEach","register","unregister","index","indexOf","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","constructor","CircularList_1","BufferLine_1","BufferReflow_1","Types_1","EventEmitter2_1","Lifecycle_1","DEFAULT_ATTR","DEFAULT_COLOR","DEFAULT_ATTR_DATA","AttributeData","CHAR_DATA_ATTR_INDEX","CHAR_DATA_CHAR_INDEX","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CODE_INDEX","MAX_BUFFER_SIZE","NULL_CELL_CHAR","NULL_CELL_WIDTH","NULL_CELL_CODE","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","Buffer","_terminal","_hasScrollback","savedCurAttrData","clone","markers","_nullCell","CellData","fromCharData","_whitespaceCell","_cols","cols","_rows","rows","clear","getNullCell","attr","fg","bg","getWhitespaceCell","getBlankLine","isWrapped","BufferLine","lines","maxLength","relativeY","ybase","y","ydisp","_getCorrectBufferLength","correctBufferLength","options","scrollback","fillViewportRows","fillAttr","x","CircularList","scrollTop","scrollBottom","setupTabStops","resize","newCols","newRows","nullCell","newMaxLength","addToY","pop","amountToTrim","trimStart","Math","max","min","savedY","savedX","_isReflowEnabled","_reflow","windowsMode","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","nextLine","getTrimmedLength","wrappedLines","unshift","absoluteY","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","trimmedLines","newLines","newLine","start","apply","destLineIndex","destCol","srcLineIndex","srcCol","cellsToCopy","copyCellsFrom","wrappedLinesIndex","getWrappedLineTrimmedLength","setCell","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","set","amount","insertCountEmitted","onInsertEmitter","onTrimEmitter","stringIndexToBufferIndex","lineIndex","stringIndex","trimRight","line","length_1","translateBufferLineToString","startCol","endCol","translateToString","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","addMarker","marker","Marker","onTrim","onInsert","event","onDelete","onDispose","_removeMarker","iterator","startIndex","endIndex","startOverscan","endOverscan","BufferStringIterator","_super","_id","_nextId","isDisposed","_onDispose","_buffer","_trimRight","_startIndex","_endIndex","_startOverscan","_endOverscan","_current","hasNext","next","range","result","content","INVERTED_DEFAULT_COLOR","DIM_OPACITY","CHAR_ATLAS_CELL_SPACING","Buffer_1","TextDecoder_1","CELL_SIZE","toColorRGB","fromColorRGB","newObj","isInverse","isBold","isUnderline","isBlink","isInvisible","isItalic","isDim","getFgColorMode","getBgColorMode","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","getFgColor","getBgColor","arguments","combinedData","obj","setFromCharData","isCombined","getWidth","getChars","stringFromCodePoint","getCode","charCodeAt","combined","code","second","getAsCharData","fillCellData","_data","_combined","Uint32Array","cell","cp","hasWidth","getFg","getBg","hasContent","getCodePoint","getString","loadCell","setCellFromCodePoint","codePoint","width","addCodepointToCell","insertCells","pos","deleteCells","replaceCells","end","subarray","keys","parseInt","fill","copyFrom","el","src","applyInReverse","srcData","srcCombinedKeys","docker","docker_debug","window","debugging","console","debug","http","superuser","DockerTerminal","parent","channel","self","term","Terminal","screenKeys","cursorBlink","fontSize","fontFamily","screenReaderMode","enable_input","decoder","utf8_decoder","encoder","utf8_encoder","empty","open","typeable","yes","cursorHidden","refresh","focus","close","destroy","write","$","on","ev","problem","off","process","buffer","decode","send","encode","DockerLogs","wait","pre","append","writing","setTimeout","at_bottom","scrollHeight","outerHeight","span","text","join","prop","control","batch","latency","size","block","at","slice","stream","reason","pull","repo","tag","registry","dfd","Deferred","error","method","path","body","params","fromImage","req","request","json_skip","progress","JSON","parse","substring","status","notify","fail","ex","reject","done","Error","resolve","promise","cancel","inspect_image","image","encodeURIComponent","container_id","command","addClass","connected","exec","tty","want_typeable","focused","view","isArray","headers","stringify","prep","failure","message","attach","opts","extend","callback","parts","ret","seq","find","f","fl","sl","sequence_find","split","update_typeable","connect","always","resp","Detach","Tty","Id","prepare","string","ch","any","depth","inword","instr","quote_cmdline","words","map","word","quote_char","unquote_cmdline","is_whitespace","skip_whitespace","parse_word","byte_suffixes","bytes_from_format","formatted","separate","format","toUpperCase","spot","num","parseFloat","isNaN","pow","truncate_id","id","substr","isNode","navigator","userAgent","platform","contains","arr","isFirefox","isSafari","test","isMSIE","isMac","isIpad","isIphone","isMSWindows","isLinux","addDisposableDomListener","node","type","handler","useCapture","addEventListener","removeEventListener","C0","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL","C1","PAD","HOP","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","CharAtlasCache_1","CharacterJoinerRegistry_1","BaseRenderLayer","_container","zIndex","_alpha","_colors","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","chars","bold","dim","italic","_canvas","document","createElement","classList","add","style","toString","_initCanvas","appendChild","removeChild","_charAtlas","_ctx","getContext","alpha","clearAll","onOptionsChanged","terminal","onBlur","onFocus","onCursorMove","onGridChanged","startRow","endRow","onSelectionChanged","columnSelectMode","onThemeChanged","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","acquireCharAtlas","warmUp","scaledCellWidth","scaledCellHeight","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","scaledCanvasWidth","height","scaledCanvasHeight","canvasWidth","canvasHeight","fillCells","fillRect","fillBottomLineAtCells","devicePixelRatio","fillLeftLineAtCell","strokeRectAtCell","lineWidth","strokeRect","clearRect","fillStyle","background","css","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","JoinedCellData","_drawUncachedChars","drawBoldTextInBrightColors","enableBold","draw","save","ansi","foreground","globalAlpha","restore","beginPath","rect","clip","fontWeightBold","fontWeight","StringToUtf32","_interim","input","target","startPos","String","fromCharCode","utf32ToString","codepoint","generateConfig","colors","clonedColors","cursor","cursorAccent","selection","experimentalCharAtlas","allowTransparency","configEquals","a","rgba","is256Color","colorCode","BaseCharAtlas","_didWarmUp","_doWarmUp","beginFrame","default","DEFAULT_FOREGROUND","fromHex","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","toPaddedHex","DEFAULT_ANSI_COLORS","v","g","ColorManager","canvas","globalCompositeOperation","_litmusColor","createLinearGradient","setTheme","theme","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","warn","getImageData","firstCell","_width","CharacterJoinerRegistry","_characterJoiners","_nextCharacterJoinerId","_workCell","registerCharacterJoiner","joiner","deregisterCharacterJoiner","joinerId","getJoinedCharacters","row","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","joinedRanges","_getJoinedRanges","lineData","joinerRanges","j","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","newRange","inRange","RenderDebouncer","_renderCallback","_animationFrame","cancelAnimationFrame","rowStart","rowEnd","rowCount","_rowCount","_rowStart","_rowEnd","requestAnimationFrame","_innerRefresh","blankLine","promptLabel","tooMuchOutput","TypedArrayUtils_1","wcwidth","COMBINING_BMP","COMBINING_HIGH","table","Uint8Array","nul","ucs","mid","bisearch","getStringCellWidth","fillFallback","array","concat","CharAtlasUtils_1","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","charAtlasImplementations","charAtlasCache","newConfig","ownedByIndex","entry","ownedBy","config","atlas","newEntry","removeTerminalFromCache","Platform_1","clearColor","imageData","color","isEmpty","offset","getFont","generateStaticCharAtlasTexture","context","canvasFactory","cellWidth","cellHeight","ctx","colorIndex","charAtlasImageData","createImageBitmap","ScreenDprMonitor","_currentDevicePixelRatio","setListener","_listener","clearListener","_outerListener","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","Lifecycle_2","MouseZoneManager","_zones","_areZonesActive","_tooltipTimeout","_currentZone","_lastHoverCoords","element","e","_onMouseDown","_mouseMoveListener","_onMouseMove","_mouseLeaveListener","_onMouseLeave","_clickListener","_onClick","_deactivate","zone","_activate","y1","y2","leaveCallback","pageX","pageY","_onHover","_findZoneEventAt","clearTimeout","hoverCallback","_onTooltip","tooltipCallback","_initialSelectionLength","getSelection","willLinkActivate","preventDefault","stopImmediatePropagation","currentSelectionLength","clickCallback","coords","mouseHelper","getCoords","screenElement","charMeasure","x1","x2","MouseZone","MouseHelper","_renderer","setRenderer","renderer","getCoordsRelativeToElement","getBoundingClientRect","clientX","left","clientY","top","colCount","isSelection","ceil","dimensions","actualCellWidth","actualCellHeight","getRawByteCoords","Terminal_1","Strings","_core","onLineFeed","onSelectionChange","onData","onTitleChange","onScroll","onKey","onRender","onResize","textarea","blur","emit","addDisposableListener","columns","writeln","attachCustomKeyEventHandler","customKeyEventHandler","addCsiHandler","flag","addOscHandler","ident","registerLinkMatcher","regex","deregisterLinkMatcher","matcherId","cursorYOffset","hasSelection","clearSelection","selectAll","selectLines","scrollLines","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","getOption","setOption","reset","applyAddon","addon","BufferSet_1","CompositionHelper_1","EventEmitter_1","Viewport_1","Clipboard_1","EscapeSequences_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","Browser","MouseHelper_1","SoundManager_1","MouseZoneManager_1","AccessibilityManager_1","ScreenDprMonitor_1","DomRenderer_1","Keyboard_1","Clone_1","WindowsMode_1","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","convertEol","termName","cursorStyle","bellSound","DEFAULT_BELL_SOUND","bellStyle","lineHeight","letterSpacing","macOptionIsMeta","macOptionClickForcesSelection","cancelEvents","disableStdin","useFlowControl","rightClickSelectsWord","rendererType","browser","_blankLine","_onCursorMove","_onData","_onKey","_onLineFeed","_onRender","_onResize","_onScroll","_onSelectionChange","_onTitleChange","_setup","domEvent","_windowsMode","_customKeyEventHandler","parentNode","_parent","cursorState","applicationKeypad","applicationCursor","originMode","insertMode","wraparoundMode","bracketedPasteMode","charset","gcharset","glevel","charsets","curAttrData","_eraseAttrData","currentParam","writeBuffer","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","InputHandler","selectionManager","linkifier","Linkifier","_mouseZoneManager","soundManager","SoundManager","buffers","BufferSet","initBuffersListeners","applyWindowsMode","active","eraseAttrData","preventScroll","activeElement","hasFocus","_setTheme","newBufferLength","needsRefresh","measure","_setupRenderer","onCharSizeChanged","_theme","viewport","syncScrollArea","_accessibilityManager","AccessibilityManager","_onTextAreaFocus","sendFocus","updateCursorStyle","showCursor","_onTextAreaBlur","remove","_initGlobal","_bindKeys","copyHandler","pasteHandlerWrapper","pasteHandler","button","rightClickHandler","moveTextAreaUnderMouseCursor","_keyDown","_keyPress","keyCode","wasModifierKeyOnlyEvent","_keyUp","_compositionHelper","compositionstart","compositionupdate","compositionend","updateCompositionElements","_queueLinkification","_context","ownerDocument","defaultView","_document","_screenDprMonitor","dir","setAttribute","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","attachToDom","tabIndex","_compositionView","CompositionHelper","CharMeasure","Viewport","colorManager","onWindowResize","onCanvasResize","SelectionManager","onMouseDown","onRedrawRequest","onLinuxMouseSelection","select","toggle","mouseEvents","disable","enable","bindMouse","Renderer","DomRenderer","pressed","sendButton","shift","meta","ctrl","mod","overrideType","which","detail","deltaY","shiftKey","metaKey","ctrlKey","vt200Mouse","normalMouse","getButton","sendEvent","utfMouse","_vt300Mouse","data_1","_decLocator","page","urxvtMouse","sgrMouse","shouldForceSelection","moveHandler","sendMove","x10Mouse","hasScrollback","getLinesScrolled","sequence","abs","onWheel","onTouchStart","onTouchMove","refreshRows","linkifyRows","shouldColumnSelect","scroll","eraseAttr","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","scrollRegionHeight","shiftElements","updateRange","disp","suppressScrollEvent","oldYdisp","scrollAmount","_innerWrite","bufferOffset","startTime","Date","now","_refreshStart","_refreshEnd","normal","selectionText","keydown","evaluateKeyboardEvent","scrollCount","_isThirdLevelShift","thirdLevelKey","altKey","setgLevel","setgCharset","charCode","bell","_soundBell","playBellSound","_visualBell","_visualBellTimer","log","maxRange","is","handleTitle","title","reverseIndex","inputHandler","tabSet","force","stopPropagation","EventEmitter","_onBufferActivate","_normal","_alt","_activeBuffer","activateNormalBuffer","activeBuffer","inactiveBuffer","activateAltBuffer","_maxLength","onDeleteEmitter","_array","_length","newArray","_getCyclicIndex","newLength","deleteCount","items","_i","countToTrim","count","expandListBy","endsInNull","followingLineStartsWithWide","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","i_1","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","reduce","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","lineLength","_textarea","_isComposing","_isSendingComposition","_compositionPosition","textContent","_finalizeComposition","_handleAnyTextareaChanges","waitForPropagation","_clearTextareaPosition","currentCompositionPosition_1","oldValue","diff","replace","dontRecurse","isCursorInViewport","cursorTop","cursorLeft","compositionViewBounds","_events","disposed","removeAllListeners","args","emitMayRemoveListeners","listeners","FALLBACK_SCROLL_BAR_WIDTH","_scrollArea","_charMeasure","scrollBarWidth","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastScrollTop","_wheelPartialScroll","_refreshAnimationFrame","_ignoreNextScrollEvent","offsetWidth","backgroundColor","_refresh","offsetHeight","newBufferHeight","round","newScrollTop","offsetParent","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","floor","_lastTouchY","touches","prepareTextForTerminal","bracketTextForPaste","position","clipboardData","setData","dispatchPaste","getData","shouldSelectWord","isClickInSelection","selectWordAtCursor","Charsets_1","CharWidth_1","EscapeSequenceParser_1","GLEVEL","DECRQSS","hook","collect","put","unhook","pt","_parser","EscapeSequenceParser","_parseBuffer","_stringDecoder","setCsiHandlerFallback","setEscHandlerFallback","setExecuteHandlerFallback","setOscHandlerFallback","identifier","setPrintHandler","print","setCsiHandler","insertChars","cursorUp","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributes","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","resetMode","charAttributes","deviceStatus","softReset","setCursorStyle","setScrollRegion","saveCursor","restoreCursor","setExecuteHandler","lineFeed","carriageReturn","backspace","tab","shiftOut","shiftIn","setOscHandler","setTitle","setEscHandler","keypadApplicationMode","keypadNumericMode","selectDefaultCharset","_loop_1","this_1","selectCharset","CHARSETS","setErrorHandler","state","setDcsHandler","cursorStartX","cursorStartY","chWidth","curAttr","bufferRow","originalX","param","col","_eraseInBufferLine","clearWrap","_resetBufferLine","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","DEFAULT_CHARSET","savedCols","isBlinking","collectAndFlag","level","low","high","TransitionTable","action","addMany","codes","PRINTABLES","EXECUTABLES","VT500_TRANSITION_TABLE","states","DcsDummy","TRANSITIONS","initialState","currentState","_osc","_params","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","clearPrintHandler","clearExecuteHandler","handlerList","handlerIndex","clearCsiHandler","clearEscHandler","clearOscHandler","clearDcsHandler","setDcsHandlerFallback","clearErrorHandler","transition","dcs","osc","dcsHandler","abort","handlers","j_1","idx","handlers_1","j_2","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","ColorManager_1","LinkRenderLayer_1","RenderDebouncer_1","_isPaused","_needsFullRefresh","_onCanvasResize","_characterJoinerRegistry","_renderLayers","TextRenderLayer","SelectionRenderLayer","LinkRenderLayer","CursorRenderLayer","_devicePixelRatio","_updateDimensions","_renderDebouncer","_renderRows","observer_1","IntersectionObserver","onIntersectionChange","threshold","observe","disconnect","intersectionRatio","_runOperation","operation","GridCache_1","BaseRenderLayer_1","container","characterJoinerRegistry","_characterOverlapCache","_state","GridCache","terminalFont","_characterWidth","_characterFont","_forEachCell","firstRow","lastRow","joinerRegistry","isJoined","lastCharX","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","cache","overlaps","measureText","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TEXTURE_WIDTH","TEXTURE_HEIGHT","TRANSPARENT_COLOR","getGlyphCacheKey","glyph","DynamicCharAtlas","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","_height","capacity","_cacheMap","prealloc","_canCache","glyphKey","cacheValue","_drawFromCache","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","_getBackgroundColor","_getForegroundColor","fontStyle","putImageData","_addGlyphToBitmap","_generateBitmap","glyphsMovingToBitmap","then","bitmap","LRUMap","_map","_head","_tail","_nodePool","_unlinkNode","prev","_appendNode","tail","nodePool","peekValue","head","NoneCharAtlas","StaticCharAtlas","_canvasFactory","HTMLCanvasElement","_texture","texture","_isCached","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","charAtlasCellHeight","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","startRowEndCol","middleRowsCount","_areCoordinatesEqual","coord1","coord2","_cell","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorY","viewportRelativeCursorY","_renderBlurCursor","isCursorVisible","strokeStyle","_restartInterval","_blinkStartTimeout","_blinkInterval","clearInterval","_animationTimeRestarted","timeToStart","time","setInterval","onLinkHover","_onLinkHover","onLinkLeave","_onLinkLeave","_clearCurrentLink","middleRowCount","_linkMatchers","_nextLinkMatcherId","_onLinkTooltip","_rowsToLinkify","mouseZoneManager","_rowsTimeoutId","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_doLinkifyRow","matcher","matchIndex","validationCallback","hoverTooltipCallback","hoverLeaveCallback","priority","_addLinkMatcherToList","rowIndex","match","rex","RegExp","source","flags","uri","lastIndex","bufferIndex","isValid","_addLink","_createLinkHoverEvent","SelectionModel_1","AltClickHandler_1","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","_enabled","_onLinuxMouseSelection","_onRedrawRequest","_initListeners","_model","SelectionModel","_activeSelectionMode","_removeMouseDownListeners","_mouseUpListener","_onMouseUp","_trimListener","_onTrim","onBufferActivate","finalSelectionStart","finalSelectionEnd","lineText","bufferLine","isLinuxMouseSelection","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","selectionEnd","isSelectAllActive","selectionStart","_getMouseEventScrollAmount","terminalHeight","_mouseDownTimeStamp","timeStamp","_dragScrollAmount","_onIncrementalClick","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","_dragScrollIntervalTimer","_dragScroll","selectionStartLength","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","_convertViewportColToCharacterIndex","charIndex","setSelection","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","charAt","length_2","_isCharWordSeparator","length_3","length_4","trim","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","areSelectionValuesReversed","wrappedRange","startPlusLength","_mouseEvent","_a","_lines","_startCol","_startRow","coordinates","coordinate","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","repeat","_bufferLine","_wrappedRowsForRow","_sequence","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","currentRow","lineWraps","forward","currentCol","bufferStr","str","rpt","parentElement","_onCharSizeChanged","_parentElement","_measureElement","geometry","adjustedHeight","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","destination","base64","binaryString","atob","len","bytes","dataURI","_liveRegionLineCount","_charsToConsume","_accessibilityTreeRoot","_rowContainer","_rowElements","_createAccessibilityTreeNode","_topBoundaryFocusListener","_onBoundaryFocus","_bottomBoundaryFocusListener","_refreshRowsDimensions","_renderRowsDebouncer","_refreshRows","_liveRegion","insertAdjacentElement","char","_onChar","spaceCount","_onTab","_clearLiveRegion","boundaryElement","beforeBoundaryElement","getAttribute","relatedTarget","topBoundaryElement","bottomBoundaryElement","newElement","children","_refreshRowDimensions","MAX_ROWS_TO_READ","_announceCharacter","keyChar","setSize","posInSet","innerHTML","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","SELECTION_CLASS","nextTerminalId","_terminalClass","_refreshRowElements","_selectionContainer","_rowFactory","DomRendererRowFactory","_themeStyleElement","_dimensionsStyleElement","overflow","styles","_terminalSelector","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","cursorAbsoluteY","cursorX","rowElement","createRow","_setCellUnderline","enabled","textDecoration","DIM_CLASS","UNDERLINE_CLASS","_terminalOptions","isCursorRow","charElement","swapColor","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","applicationCursorMode","modifiers","keyMapping","val","clonedObject","lastChar","box","update","location","show"],"mappings":"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","file":"docker/console.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 215);\n","module.exports = jQuery;","module.exports = cockpit;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n//# sourceMappingURL=EventEmitter2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar BufferLine_1 = require(\"./BufferLine\");\nvar BufferReflow_1 = require(\"./BufferReflow\");\nvar Types_1 = require(\"./renderer/atlas/Types\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../lib/common/Lifecycle\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.DEFAULT_ATTR_DATA = new BufferLine_1.AttributeData();\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.MAX_BUFFER_SIZE = 4294967295;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = exports.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, exports.WHITESPACE_CELL_CHAR, exports.WHITESPACE_CELL_WIDTH, exports.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = exports.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(exports.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(exports.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[exports.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[exports.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n//# sourceMappingURL=Buffer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n//# sourceMappingURL=Types.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[Buffer_1.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[Buffer_1.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._data = null;\n        this._combined = {};\n        if (cols) {\n            this._data = new Uint32Array(cols * CELL_SIZE);\n            var cell = fillCellData || CellData.fromCharData([0, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n            for (var i = 0; i < cols; ++i) {\n                this.setCell(i, cell);\n            }\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[Buffer_1.CHAR_DATA_ATTR_INDEX];\n        if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = null;\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : Buffer_1.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n//# sourceMappingURL=BufferLine.js.map","/*\n * This file is part of Cockpit.\n *\n * Copyright (C) 2014 Red Hat, Inc.\n *\n * Cockpit is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation; either version 2.1 of the License, or\n * (at your option) any later version.\n *\n * Cockpit is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with Cockpit; If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from \"jquery\";\nimport cockpit from \"cockpit\";\n\nimport { Terminal } from \"xterm\";\n\nexport var docker = { };\n\nfunction docker_debug() {\n    if (window.debugging == \"all\" || window.debugging == \"docker\")\n        console.debug.apply(console, arguments);\n}\n\n/* This doesn't create a channel until a request */\nvar http = cockpit.http(\"/var/run/docker.sock\", { superuser: true });\n\n/**\n * pull:\n * @repo: the image repository\n * @tag: the tag to pull\n *\n * Pull an image from the registry. If no @tag is specified\n * then the \"latest\" tag will be used.\n *\n * A Promise is returned. It completes when the image has\n * been downloaded, or fails with an error. The progress callbacks\n * on the download are called with status updates from docker.\n */\ndocker.pull = function pull(repo, tag, registry) {\n    var dfd = $.Deferred();\n\n    if (!tag)\n        tag = \"latest\";\n\n    /*\n     * Although in theory the docker images/create API has\n     * a registry parameter, when you use it the resulting\n     * image is labeled completely wrong.\n     */\n\n    if (registry)\n        repo = registry + \"/\" + repo;\n\n    docker_debug(\"pulling: \" + repo + \":\" + tag);\n\n    var options = {\n        method: \"POST\",\n        path: \"/v1.12/images/create\",\n        body: \"\",\n        params: {\n            fromImage: repo,\n            tag: tag\n        }\n    };\n\n    var error;\n\n    var buffer = \"\";\n    var req = http.request(options)\n            .stream(function(data) {\n                buffer += data;\n                var next = docker.json_skip(buffer, 0);\n                if (next === 0)\n                    return; /* not enough data yet */\n                var progress = JSON.parse(buffer.substring(0, next));\n                buffer = buffer.substring(next);\n                if (progress.error)\n                    error = progress.error;\n                else if (progress.status)\n                    dfd.notify(progress.status, progress);\n            })\n            .fail(function(ex) {\n                dfd.reject(ex);\n            })\n            .done(function() {\n                if (error)\n                    dfd.reject(new Error(error));\n                else\n                    dfd.resolve();\n            });\n\n    var promise = dfd.promise();\n    promise.cancel = function cancel() {\n        req.close(\"cancelled\");\n        return promise;\n    };\n\n    return promise;\n};\n\n/* Gets image info locally */\ndocker.inspect_image = function inspect_image(image) {\n    var dfd = $.Deferred();\n    http.get(\"/v1.12/images/\" + encodeURIComponent(image) + \"/json\")\n            .done(function(data) {\n                dfd.resolve(JSON.parse(data));\n            })\n            .fail(function(ex) {\n                dfd.reject(ex);\n            });\n    var promise = dfd.promise();\n    promise.cancel = function cancel() {\n        return promise;\n    };\n    return promise;\n};\n\nfunction DockerTerminal(parent, channel) {\n    var self = this;\n\n    var term = new Terminal({\n        cols: 80,\n        rows: 24,\n        screenKeys: true,\n        cursorBlink: true,\n        fontSize: 12,\n        fontFamily: 'Menlo, Monaco, Consolas, monospace',\n        screenReaderMode: true\n    });\n\n    var enable_input = true;\n    var decoder = cockpit.utf8_decoder();\n    var encoder = cockpit.utf8_encoder();\n\n    /* term.js wants the parent element to build its terminal inside of */\n    parent.empty();\n    term.open(parent[0]);\n\n    /* Shows and hides the cursor */\n    self.typeable = function typeable(yes) {\n        term.cursorHidden = !yes;\n        term.refresh(term.y, term.y);\n        enable_input = yes;\n    };\n\n    self.focus = function focus() {\n        term.focus();\n    };\n\n    /* Allows caller to cleanup nicely */\n    self.close = function close() {\n        term.destroy();\n    };\n\n    if (typeof channel == \"string\") {\n        term.write('\\x1b[31m' + channel + '\\x1b[m\\r\\n');\n        self.close = function() { };\n        self.typeable(false);\n        return self;\n    }\n\n    $(channel)\n            .on(\"close\", function(ev, options) {\n                var problem = options.problem || \"disconnected\";\n                term.write('\\x1b[31m' + problem + '\\x1b[m\\r\\n');\n                self.typeable(false);\n                $(channel).off(\"message\");\n                channel = null;\n            });\n\n    self.process = function process(buffer) {\n        term.write(decoder.decode(buffer));\n        return buffer.length;\n    };\n\n    term.on('data', function(data) {\n        /* Send typed input back through channel */\n        if (enable_input && channel)\n            channel.send(encoder.encode(data));\n    });\n\n    return self;\n}\n\nfunction DockerLogs(parent, channel) {\n    var self = this;\n\n    var pre = $(\"<pre>\");\n    parent.empty();\n    parent.append(pre);\n\n    var wait;\n    var writing = [];\n    function write(data) {\n        writing.push(data);\n        if (!wait) {\n            wait = window.setTimeout(function() {\n                wait = null;\n                var at_bottom = pre[0].scrollHeight - pre.scrollTop() <= pre.outerHeight();\n                var span = $(\"<span>\").text(writing.join(\"\"));\n                writing.length = 0;\n                pre.append(span);\n                if (at_bottom)\n                    pre.scrollTop(pre.prop(\"scrollHeight\"));\n            }, 50);\n        }\n    }\n\n    /* Just display the failure */\n    if (typeof channel == \"string\") {\n        write(channel);\n        self.close = function() { };\n        return self;\n    }\n\n    channel.control({ batch: 16384, latency: 50 });\n\n    var decoder = cockpit.utf8_decoder(false);\n\n    self.process = function process(buffer) {\n        var at = 0;\n        var size, block;\n        var length = buffer.length;\n        while (true) {\n            if (length < at + 8)\n                return at; /* more data */\n\n            size = ((buffer[at + 4] & 0xFF) << 24) | ((buffer[at + 5] & 0xFF) << 16) |\n                   ((buffer[at + 6] & 0xFF) << 8) | (buffer[at + 7] & 0xFF);\n\n            if (length < at + 8 + size)\n                return at; /* more data */\n\n            /* Output the data */\n            if (buffer.subarray)\n                block = buffer.subarray(at + 8, at + 8 + size);\n            else\n                block = buffer.slice(at + 8, at + 8 + size);\n            write(decoder.decode(block, { stream: true }));\n            at += 8 + size;\n        }\n    };\n\n    self.focus = function() {\n        /* Nothing to do */\n    };\n\n    self.close = function() {\n        /* Nothing to do */\n    };\n\n    /*\n     * A raw channel over which we speak Docker's even stranger /logs\n     * protocol. It starts with a HTTP GET, and then quickly\n     * degenerates into a stream with framing.\n     */\n    $(channel)\n            .on(\"close\", function(ev, options) {\n                write(options.reason || \"disconnected\");\n                $(channel).off();\n                channel = null;\n            });\n\n    return self;\n}\n\nfunction sequence_find(seq, find) {\n    var f;\n    var fl = find.length;\n    var s;\n    var sl = (seq.length - fl) + 1;\n    for (s = 0; s < sl; s++) {\n        for (f = 0; f < fl; f++) {\n            if (seq[s + f] !== find[f])\n                break;\n        }\n        if (f == fl)\n            return s;\n    }\n\n    return -1;\n}\n\n/**\n * docker.console(container_id, options)\n * docker.console(container_id, command, options):\n *\n * @container_id: full docker container id\n * @command: optional array of command argv to exec\n * @options: other options, including 'tty' true/false\n *\n * Creates a docker console/logs element and returns it. If options.tty is true\n * then creates a full term.js terminal. Otherwise creates a logs output\n * area. If options.tty is null/undefined autodetect whether to use tty or not.\n *\n * The returned element needs to have its .connect() method called to start the\n * connection process.\n *\n * The returned value is an HTMLElement with the following extra methods/properties:\n *\n * cons.connected: true/false if connected or not\n * cons.connect(): connect or reconnect\n * cons.typeable(true/false): set typeable state or not, only applies to console\n * cons.close(): disconnect and close\n */\ndocker.console = function console_(container_id, command, options) {\n    var self = $(\"<div>\").addClass(\"console-ct\");\n    self.connected = false;\n    var want_typeable = false;\n    var focused = false;\n    var channel = null;\n    var view = null;\n    var exec;\n    var tty;\n\n    /* If there's a command, then we have to exec it in the container */\n    if (Array.isArray(command)) {\n        if (!options)\n            options = { };\n\n        /* When executing default to having a tty */\n        tty = options.tty;\n        if (tty === undefined || tty === null)\n            tty = true;\n\n        exec = {\n            method: \"POST\",\n            path: \"/v1.15/containers/\" + encodeURIComponent(container_id) + \"/exec\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n                \"AttachStdin\": tty,\n                \"AttachStdout\": true,\n                \"AttachStderr\": true,\n                \"Tty\": tty,\n                \"Cmd\": command\n            })\n        };\n\n        docker_debug(\"preparing to exec:\", command);\n\n    /* Just connect to the main container console */\n    } else {\n        docker_debug(\"preparing to attach\");\n        options = command || { };\n        tty = options.tty;\n    }\n\n    delete options.tty;\n\n    /* A promise being prepared */\n    var prep = null;\n\n    function failure(message) {\n        if (tty)\n            view = new DockerTerminal(self, message);\n        else\n            view = new DockerLogs(self, message);\n    }\n\n    function prepare() {\n        self.connected = false;\n\n        /* Nothing to prepare? Connect diretly to container? */\n        if (!exec) {\n            if (tty === false) {\n                return attach(\"GET /v1.15/containers/\" + encodeURIComponent(container_id) +\n                              \"/logs?follow=1&stdout=1&stderr=1&tail=1000&timestamps=0 HTTP/1.0\\r\\n\" +\n                              \"Content-Length: 0\\r\\n\\r\\n\");\n            } else {\n                return attach(\"POST /v1.15/containers/\" + encodeURIComponent(container_id) +\n                              \"/attach?logs=1&stream=1&stdin=1&stdout=1&stderr=1 HTTP/1.0\\r\\n\" +\n                              \"Content-Length: 0\\r\\n\\r\\n\");\n            }\n        }\n\n        /* Prepare the command to be executed */\n        prep = http.request($.extend({ }, options, exec))\n                .always(function() {\n                    prep = null;\n                })\n                .done(function(data) {\n                    var resp = JSON.parse(data);\n                    var body = JSON.stringify({ Detach: false, Tty: tty });\n                    return attach(\"POST /v1.15/exec/\" + encodeURIComponent(resp.Id) +\n                              \"/start HTTP/1.0\\r\\n\" +\n                              \"Content-Length: \" + body.length + \"\\r\\n\\r\\n\" + body);\n                })\n                .fail(function(ex) {\n                    failure(ex.message);\n                });\n    }\n\n    /*\n     * A raw channel over which we speak Docker's strange /attach\n     * protocol. It starts with a HTTP POST, and then quickly\n     * degenerates into a stream sometimes binary.\n     *\n     * See: http://docs.docker.io/en/latest/reference/api/docker_remote_api_v1.8/#attach-to-a-container\n     */\n    function attach(request) {\n        if (view)\n            view.close();\n        view = null;\n\n        var opts = $.extend({ }, options, {\n            \"payload\": \"stream\",\n            \"unix\": \"/var/run/docker.sock\",\n            \"superuser\": true,\n            \"binary\": true\n        });\n\n        channel = cockpit.channel(opts);\n\n        docker_debug(request);\n        channel.send(request);\n\n        $(channel)\n                .on(\"close.attach\", function(ev, options) {\n                    docker_debug(container_id + \": console close: \", options);\n                    $(channel).off(\".attach\");\n                    channel = null;\n\n                    /*\n                 * HACK: If we're disconnected unceremoniously, try\n                 * and reconnect. Certain versions of docker do this\n                 * during container startup.\n                 */\n                    if (self.connected && !options.problem) {\n                        window.setTimeout(function() {\n                            if (self.connected && !channel)\n                                attach(request);\n                        }, 1000);\n                    }\n                });\n\n        var headers = null;\n        var buffer = channel.buffer();\n        buffer.callback = function(data) {\n            var ret = 0;\n            var pos = 0;\n            var parts;\n\n            /* Look for end of headers first */\n            if (headers === null) {\n                pos = sequence_find(data, [ 13, 10, 13, 10 ]);\n                if (pos == -1)\n                    return ret;\n\n                if (data.subarray)\n                    headers = cockpit.utf8_decoder().decode(data.subarray(0, pos));\n                else\n                    headers = cockpit.utf8_decoder().decode(data.slice(0, pos));\n                docker_debug(container_id + \": console headers: \", headers);\n\n                parts = headers.split(\"\\r\\n\", 1)[0].split(\" \");\n                if (parts[1] != \"200\") {\n                    failure(parts.slice(2).join(\" \"));\n                    buffer.callback = null;\n                    return;\n                } else if (data.subarray) {\n                    data = data.subarray(pos + 4);\n                    ret += pos + 4;\n                } else {\n                    data = data.slice(pos + 4);\n                    ret += pos + 4;\n                }\n            }\n\n            /* We need at least two bytes to determine stream type */\n            if (tty === undefined || tty === null) {\n                if (data.length < 2)\n                    return ret;\n                tty = !((data[0] === 0 || data[0] === 1 || data[0] === 2) && data[1] === 0);\n                docker_debug(container_id + \": mode tty: \" + tty);\n            }\n\n            if (tty)\n                view = new DockerTerminal(self, channel);\n            else\n                view = new DockerLogs(self, channel);\n            self.typeable(want_typeable);\n            self.connected = true;\n\n            buffer.callback = view.process;\n            var consumed = view.process(data);\n            return ret + consumed;\n        };\n    }\n\n    /* Allows caller to cleanup nicely */\n    self.close = function close(problem) {\n        self.connected = false;\n        if (prep)\n            prep.close(problem);\n        if (channel)\n            channel.close(problem);\n        if (view) {\n            view.close();\n            view = null;\n        }\n    };\n\n    /* Allows the curser to restart the attach request */\n    self.connect = function connect() {\n        self.close(\"disconnected\");\n        prepare();\n    };\n\n    function update_typeable() {\n        if (view && view.typeable)\n            view.typeable(want_typeable && focused);\n    }\n\n    $(self)\n            .on(\"focusin\", function() {\n                focused = true;\n                update_typeable();\n                view.focus();\n            })\n            .on(\"focusout\", function() {\n                focused = false;\n                update_typeable();\n            });\n\n    self.typeable = function typeable(yes) {\n        want_typeable = yes;\n        update_typeable();\n    };\n\n    return self;\n};\n\n/*\n * docker.json_skip(string, pos = 0)\n * @string: the JSON string\n * @pos: optionally, the starting position in string, or zero\n *\n * Sometimes docker returns multiple JSON strings concatenated.\n *\n * Skip over one item in a stream of JSON things, like objects,\n * numbers, strings, etc... The things can be separated by whitespace\n * or in some cases (strings, objects, arrays) be right next to\n * each other.\n *\n * We do not validate the JSON. It's assumed that a later parse\n * will check for validity.\n *\n * Returns: the number of characters to skip over next json block\n * or zero if no complete json block found.\n */\n\ndocker.json_skip = function(string, pos) {\n    var any = false;\n    var end = string.length;\n    var depth = 0;\n    var inword = false;\n    var instr = false;\n    var endword = \" \\t\\n\\r\\v[{}]\\\"\";\n    var spaces = \" \\t\\n\\r\\v\";\n    var ch;\n\n    if (pos === undefined)\n        pos = 0;\n\n    for (end = string.length; pos != end; pos++) {\n        if (any && depth <= 0)\n            break; /* skipped over one thing */\n\n        ch = string[pos];\n        if (inword) {\n            if (endword.indexOf(ch) != -1) {\n                inword = false;\n                depth--;\n                pos--;\n            }\n            continue;\n        }\n\n        if (spaces.indexOf(ch) != -1)\n            continue;\n\n        if (instr) {\n            switch (ch) {\n            case '\\\\':\n                if (pos + 1 == end)\n                    continue;\n                pos++; /* skip char after bs */\n                break;\n            case '\"':\n                instr = false;\n                depth--;\n                break;\n            default:\n                break;\n            }\n            continue;\n        }\n\n        any = true;\n        switch (ch) {\n        case '[':\n        case '{':\n            depth++;\n            break;\n        case ']':\n        case '}':\n            depth--;\n            break;\n        case '\"':\n            instr = true;\n            depth++;\n            break;\n        default:\n            inword = true;\n            depth++;\n            break;\n        }\n    }\n\n    if (inword && depth == 1)\n        depth = 0;\n\n    /* No complete JSON blocks found */\n    if (!any || depth > 0)\n        return 0;\n\n    /* The position at which we found th eend */\n    return pos;\n};\n\n/*\n * The functions docker.quote_cmdline and docker.unquote_cmdline implement\n * a simple shell-like quoting syntax.  They are used when letting the\n * user edit a sequence of words as a single string.\n *\n * When parsing, words are separated by whitespace.  Single and double\n * quotes can be used to protect a sequence of characters that\n * contains whitespace or the other quote character.  A backslash can\n * be used to protect any character.  Quotes can appear in the middle\n * of a word.\n */\n\ndocker.quote_cmdline = function quote_cmdline(words) {\n    words = words || [];\n\n    function is_whitespace(c) {\n        return c == ' ';\n    }\n\n    function quote(word) {\n        var text = \"\";\n        var quote_char = \"\";\n        var i;\n        for (i = 0; i < word.length; i++) {\n            if (word[i] == '\\\\' || word[i] == quote_char)\n                text += '\\\\';\n            else if (quote_char === \"\") {\n                if (word[i] == \"'\" || is_whitespace(word[i]))\n                    quote_char = '\"';\n                else if (word[i] == '\"')\n                    quote_char = \"'\";\n            }\n            text += word[i];\n        }\n\n        return quote_char + text + quote_char;\n    }\n\n    return words.map(quote).join(' ');\n};\n\ndocker.unquote_cmdline = function unquote_cmdline(text) {\n    var words = [ ];\n    var next;\n\n    function is_whitespace(c) {\n        return c == ' ';\n    }\n\n    function skip_whitespace() {\n        while (next < text.length && is_whitespace(text[next]))\n            next++;\n    }\n\n    function parse_word() {\n        var word = \"\";\n        var quote_char = null;\n\n        while (next < text.length) {\n            if (text[next] == '\\\\') {\n                next++;\n                if (next < text.length) {\n                    word += text[next];\n                }\n            } else if (text[next] == quote_char) {\n                quote_char = null;\n            } else if (quote_char) {\n                word += text[next];\n            } else if (text[next] == '\"' || text[next] == \"'\") {\n                quote_char = text[next];\n            } else if (is_whitespace(text[next])) {\n                break;\n            } else\n                word += text[next];\n            next++;\n        }\n        return word;\n    }\n\n    next = 0;\n    skip_whitespace();\n    while (next < text.length) {\n        words.push(parse_word());\n        skip_whitespace();\n    }\n\n    return words;\n};\n\nvar byte_suffixes = [ null, \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\" ];\n\ndocker.bytes_from_format = function bytes_from_format(formatted, separate) {\n    var factor = 1024;\n\n    if (separate === undefined)\n        separate = \" \";\n\n    var format = formatted.split(separate).pop()\n            .toUpperCase();\n    var spot = byte_suffixes.indexOf(format);\n\n    /* TODO: Make the decimal separator translatable */\n    var num = parseFloat(formatted);\n\n    if (spot > 0 && !isNaN(num))\n        return num * Math.pow(factor, spot);\n    return num;\n};\n\n/*\n * Returns the short id of a docker container or image id.\n */\ndocker.truncate_id = function (id) {\n    var c = id.indexOf(':');\n    if (c >= 0)\n        id = id.slice(c + 1);\n    return id.substr(0, 12);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n//# sourceMappingURL=Platform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n//# sourceMappingURL=EscapeSequences.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar BufferLine_1 = require(\"../BufferLine\");\nvar Buffer_1 = require(\"../Buffer\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.onThemeChanged = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB() || cell instanceof CharacterJoinerRegistry_1.JoinedCellData) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_1.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_1.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_1.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || Buffer_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || Buffer_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n//# sourceMappingURL=BaseRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\n//# sourceMappingURL=TextDecoder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n//# sourceMappingURL=CharAtlasUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n//# sourceMappingURL=BaseCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        this._ctx = canvas.getContext('2d');\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (!css) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n//# sourceMappingURL=ColorManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"../BufferLine\");\nvar Buffer_1 = require(\"../Buffer\");\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || Buffer_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || Buffer_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n//# sourceMappingURL=CharacterJoinerRegistry.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n//# sourceMappingURL=RenderDebouncer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n//# sourceMappingURL=Strings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n//# sourceMappingURL=CharWidth.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n//# sourceMappingURL=TypedArrayUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n//# sourceMappingURL=CharAtlasCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../common/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n//# sourceMappingURL=CharAtlasGenerator.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n//# sourceMappingURL=ScreenDprMonitor.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n//# sourceMappingURL=MouseZoneManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderer) {\n        this._renderer = _renderer;\n    }\n    MouseHelper.prototype.setRenderer = function (renderer) {\n        this._renderer = renderer;\n    };\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderer.dimensions.actualCellWidth / 2 : 0)) / this._renderer.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderer.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n//# sourceMappingURL=MouseHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./CharMeasure\");\nvar Browser = require(\"./common/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar Clone_1 = require(\"./common/Clone\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar WindowsMode_1 = require(\"./WindowsMode\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: null,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = Buffer_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = Buffer_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this.register(this._inputHandler);\n        this.renderer = this.renderer || null;\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                if (this.renderer) {\n                    this._setTheme(value);\n                    return;\n                }\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this.renderer) {\n                    this.renderer.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this.renderer) {\n                    this.renderer.clear();\n                    this.renderer.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this.renderer) {\n                    this.unregister(this.renderer);\n                    this.renderer.dispose();\n                    this.renderer = null;\n                }\n                this._setupRenderer();\n                this.renderer.onCharSizeChanged();\n                if (this._theme) {\n                    this.renderer.setTheme(this._theme);\n                }\n                this.mouseHelper.setRenderer(this.renderer);\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this.renderer) {\n            this.renderer.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        this._screenDprMonitor.setListener(function () { return _this.emit('dprchange', window.devicePixelRatio); });\n        this.register(this._screenDprMonitor);\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._setupRenderer();\n        this._theme = this.options.theme;\n        this.options.theme = null;\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure);\n        this.viewport.onThemeChanged(this.renderer.colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this.renderer.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this.renderer.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this.renderer.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this.renderer.onFocus(); }));\n        this.register(this.addDisposableListener('dprchange', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));\n        this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this.renderer.onCharSizeChanged(); }));\n        this.register(this.renderer.onCanvasResize(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this.renderer.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this.renderer);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._setupRenderer = function () {\n        var _this = this;\n        switch (this.options.rendererType) {\n            case 'canvas':\n                this.renderer = new Renderer_1.Renderer(this, this.options.theme);\n                break;\n            case 'dom':\n                this.renderer = new DomRenderer_1.DomRenderer(this, this.options.theme);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n        this.renderer.onRender(function (e) { return _this._onRender.fire(e); });\n        this.register(this.renderer);\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        var colors = this.renderer.setTheme(theme);\n        if (this.viewport) {\n            this.viewport.onThemeChanged(colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this.renderer) {\n            this.renderer.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this.renderer.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this.renderer.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n//# sourceMappingURL=BufferSet.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./EventEmitter2\");\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n//# sourceMappingURL=CircularList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n//# sourceMappingURL=BufferReflow.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n//# sourceMappingURL=CompositionHelper.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onThemeChanged = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._terminal.renderer.dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._terminal.renderer.dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n//# sourceMappingURL=Viewport.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n//# sourceMappingURL=Clipboard.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar BufferLine_1 = require(\"./BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, Buffer_1.NULL_CELL_CODE, Buffer_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(Buffer_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = Buffer_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = Buffer_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = Buffer_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = Buffer_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= Buffer_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= Buffer_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~255;\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~255;\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= Buffer_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= Buffer_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = Buffer_1.DEFAULT_ATTR_DATA;\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n//# sourceMappingURL=InputHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': '£'\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '£',\n    '@': '¾',\n    '[': 'ij',\n    '\\\\': '½',\n    ']': '|',\n    '{': '¨',\n    '|': 'f',\n    '}': '¼',\n    '~': '´'\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['R'] = {\n    '#': '£',\n    '@': 'à',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': '§',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': '¨'\n};\nexports.CHARSETS['Q'] = {\n    '@': 'à',\n    '[': 'â',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '`': 'ô',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': 'û'\n};\nexports.CHARSETS['K'] = {\n    '@': '§',\n    '[': 'Ä',\n    '\\\\': 'Ö',\n    ']': 'Ü',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'ß'\n};\nexports.CHARSETS['Y'] = {\n    '#': '£',\n    '@': '§',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': 'é',\n    '`': 'ù',\n    '{': 'à',\n    '|': 'ò',\n    '}': 'è',\n    '~': 'ì'\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': 'Ä',\n        '[': 'Æ',\n        '\\\\': 'Ø',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'ä',\n        '{': 'æ',\n        '|': 'ø',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['Z'] = {\n    '#': '£',\n    '@': '§',\n    '[': '¡',\n    '\\\\': 'Ñ',\n    ']': '¿',\n    '{': '°',\n    '|': 'ñ',\n    '}': 'ç'\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': 'É',\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['='] = {\n    '#': 'ù',\n    '@': 'à',\n    '[': 'é',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '_': 'è',\n    '`': 'ô',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'û'\n};\n//# sourceMappingURL=Charsets.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n//# sourceMappingURL=EscapeSequenceParser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar ColorManager_1 = require(\"./ColorManager\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar EventEmitter2_1 = require(\"../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, theme) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._onCanvasResize = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        if (theme) {\n            _this.colorManager.setTheme(theme);\n        }\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this.colorManager.colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this.colorManager.colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this.colorManager.colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this.colorManager.colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this.onWindowResize(window.devicePixelRatio); });\n        _this.register(_this._screenDprMonitor);\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this.onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(_this._terminal.element);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(Renderer.prototype, \"onCanvasResize\", {\n        get: function () { return this._onCanvasResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    Renderer.prototype.onWindowResize = function (devicePixelRatio) {\n        if (this._devicePixelRatio !== devicePixelRatio) {\n            this._devicePixelRatio = devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setTheme = function (theme) {\n        var _this = this;\n        this.colorManager.setTheme(theme);\n        this._renderLayers.forEach(function (l) {\n            l.onThemeChanged(_this._terminal, _this.colorManager.colors);\n            l.reset(_this._terminal);\n        });\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n        }\n        return this.colorManager.colors;\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n        }\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n        this._onCanvasResize.fire({\n            width: this.dimensions.canvasWidth,\n            height: this.dimensions.canvasHeight\n        });\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this.colorManager.allowTransparency = this._terminal.options.allowTransparency;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._renderLayers.forEach(function (l) { return operation(l); });\n        }\n    };\n    Renderer.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    Renderer.prototype._renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n        this._onRender.fire({ start: start, end: end });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n//# sourceMappingURL=Renderer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../Buffer\");\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../BufferLine\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === Buffer_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n            _this.drawChars(terminal, cell, x, y);\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n//# sourceMappingURL=TextRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n//# sourceMappingURL=GridCache.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../common/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n//# sourceMappingURL=DynamicCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n//# sourceMappingURL=LRUMap.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n//# sourceMappingURL=NoneCharAtlas.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_1.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_1.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_1.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n//# sourceMappingURL=StaticCharAtlas.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n//# sourceMappingURL=SelectionRenderLayer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../BufferLine\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n//# sourceMappingURL=CursorRenderLayer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n//# sourceMappingURL=LinkRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n//# sourceMappingURL=Linkifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar Browser = require(\"./common/Platform\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar BufferLine_1 = require(\"./BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n//# sourceMappingURL=SelectionModel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n//# sourceMappingURL=AltClickHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n//# sourceMappingURL=CharMeasure.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n//# sourceMappingURL=SoundManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./common/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this.register(_this._terminal.addDisposableListener('dprchange', function () { return _this._refreshRowsDimensions(); }));\n        _this.register(_this._terminal.renderer.onCanvasResize(function () { return _this._refreshRowsDimensions(); }));\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._announceCharacter(char);\n                }\n            }\n            else {\n                this._announceCharacter(char);\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._terminal.renderer.dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._terminal.renderer.dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacter = function (char) {\n        if (char === ' ') {\n            this._liveRegion.innerHTML += '&nbsp;';\n        }\n        else {\n            this._liveRegion.textContent += char;\n        }\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n//# sourceMappingURL=AccessibilityManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ColorManager_1 = require(\"../ColorManager\");\nvar RenderDebouncer_1 = require(\"../../ui/RenderDebouncer\");\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar EventEmitter2_1 = require(\"../../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, theme) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._onCanvasResize = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);\n        _this.setTheme(theme);\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    Object.defineProperty(DomRenderer.prototype, \"onCanvasResize\", {\n        get: function () { return this._onCanvasResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DomRenderer.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setTheme = function (theme) {\n        var _this = this;\n        if (theme) {\n            this.colorManager.setTheme(theme);\n        }\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this.colorManager.colors.foreground.css + \";\") +\n            (\" background-color: \" + this.colorManager.colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.getOption('fontFamily') + \";\") +\n            (\" font-size: \" + this._terminal.getOption('fontSize') + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this.colorManager.colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this.colorManager.colors.cursor.css + \";\") +\n                (\" color: \" + this.colorManager.colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this.colorManager.colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this.colorManager.colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this.colorManager.colors.selection.css + \";\") +\n                \"}\";\n        this.colorManager.colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this.colorManager.colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this.colorManager.colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n        return this.colorManager.colors;\n    };\n    DomRenderer.prototype.onWindowResize = function (devicePixelRatio) {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n        this._onCanvasResize.fire({\n            width: this.dimensions.canvasWidth,\n            height: this.dimensions.canvasHeight\n        });\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this.setTheme(undefined);\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.refreshRows = function (start, end) {\n        this._renderDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    DomRenderer.prototype._renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n        this._onRender.fire({ start: start, end: end });\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n//# sourceMappingURL=DomRenderer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../../Buffer\");\nvar Types_1 = require(\"../atlas/Types\");\nvar BufferLine_1 = require(\"../../BufferLine\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== Buffer_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || Buffer_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n//# sourceMappingURL=DomRendererRowFactory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n//# sourceMappingURL=Keyboard.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n//# sourceMappingURL=Clone.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        if (lastChar[Buffer_1.CHAR_DATA_CODE_INDEX] !== Buffer_1.NULL_CELL_CODE && lastChar[Buffer_1.CHAR_DATA_CODE_INDEX] !== Buffer_1.WHITESPACE_CELL_CODE) {\n            var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n            nextLine.isWrapped = true;\n        }\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n//# sourceMappingURL=WindowsMode.js.map","import $ from \"jquery\";\nimport cockpit from \"cockpit\";\nimport { docker } from \"./docker\";\n\nvar box;\n\nfunction update() {\n    if (box && box.close)\n        box.close();\n\n    var path = cockpit.location.path;\n    if (path.length === 0) {\n        box = $(\"<pre>\").text(\"usage: console.html#/container_id\");\n    } else if (path.length !== 1) {\n        console.warn(\"not a container id: \" + path);\n        cockpit.location = '';\n    } else {\n        box = docker.console(path[0]);\n        $(\"title\").text(path[0]);\n\n        /*\n         * TODO: Once we get more code into the docker module this\n         * should reflect the actual docker container state and\n         * become typable when the container is running.\n         */\n        box.typeable(true);\n        box.connect();\n    }\n\n    $(\"#container\").empty()\n            .append(box);\n    $(\"body\").show();\n}\n\n$(cockpit).on(\"locationchanged\", update);\n$(update);\n"],"sourceRoot":""}