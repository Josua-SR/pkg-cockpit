!function(t) {
    function e(i) {
        if (n[i]) return n[i].exports;
        var r = n[i] = {
            exports: {},
            id: i,
            loaded: !1
        };
        return t[i].call(r.exports, r, r.exports, e), r.loaded = !0, r.exports;
    }
    var n = {};
    return e.m = t, e.c = n, e.p = "", e(0);
}([ function(t, e, n) {
    n(10), t.exports = n(82);
}, , , , , , , , , , function(t, e, n) {
    "use strict";
    !function() {
        document.addEventListener("DOMContentLoaded", function() {
            var t = n(11);
            t.appMain();
        });
    }();
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r() {
        s.default.render(s.default.createElement(g.default, {
            store: l.default
        }), document.getElementById("app"));
    }
    function a() {
        console.log("loading ovirt package"), (0, d.logDebug)("index.es6: initial state: " + JSON.stringify(l.default.getState())), 
        (0, m.setVirtProvider)(f.default), l.default.subscribe(r), r(), l.default.dispatch((0, 
        u.getAllVms)());
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.appMain = a;
    var o = n(12), s = i(o), c = n(13), l = i(c), u = n(22), d = n(19), h = n(25), f = i(h), p = n(52), g = i(p), m = n(24);
}, function(t, e, n) {
    /*!
	 * react-lite.js v0.15.39
	 * (c) 2017 Jade Gu
	 * Released under the MIT License.
	 */
    !function(e, n) {
        t.exports = n();
    }(this, function() {
        "use strict";
        function t(t, e, n, i, r) {
            var a = {
                vtype: t,
                type: e,
                props: n,
                refs: Kt,
                key: i,
                ref: r
            };
            return t !== zt && t !== Bt || (a.uid = st()), a;
        }
        function e(t, e, n) {
            var i = t.vtype, r = null;
            return i ? i === Ut ? r = c(t, e, n) : i === Bt ? r = x(t, e, n) : i === zt ? r = g(t, e, n) : i === Xt && (r = document.createComment("react-text: " + (t.uid || st()))) : r = document.createTextNode(t), 
            r;
        }
        function n(t, e, n, r) {
            var a = t.vtype;
            if (a === Bt) return _(t, e, n, r);
            if (a === zt) return m(t, e, n, r);
            if (a !== Ut) return n;
            var o = t.props[Ft] && t.props[Ft].__html;
            return null != o ? (f(t, e, n, r), l(e, n, r)) : (i(t, e, n, r), f(t, e, n, r)), 
            n;
        }
        function i(t, e, n, i) {
            var s = {
                removes: [],
                updates: [],
                creates: []
            };
            h(s, t, e, n, i), at(s.removes, a), at(s.updates, r), at(s.creates, o);
        }
        function r(t) {
            if (t) {
                var e = t.vnode, n = t.node;
                t.shouldIgnore || (e.vtype ? e.vtype === Ut ? f(e, t.newVnode, n, t.parentContext) : e.vtype === zt ? n = m(e, t.newVnode, n, t.parentContext) : e.vtype === Bt && (n = _(e, t.newVnode, n, t.parentContext)) : n.replaceData(0, n.length, t.newVnode));
                var i = n.parentNode.childNodes[t.index];
                return i !== n && n.parentNode.insertBefore(n, i), n;
            }
        }
        function a(t) {
            s(t.vnode, t.node), t.node.parentNode.removeChild(t.node);
        }
        function o(t) {
            var n = e(t.vnode, t.parentContext, t.parentNode.namespaceURI);
            t.parentNode.insertBefore(n, t.parentNode.childNodes[t.index]);
        }
        function s(t, e) {
            var n = t.vtype;
            n === Ut ? p(t, e) : n === Bt ? b(t, e) : n === zt && v(t, e);
        }
        function c(t, e, n) {
            var i = t.type, r = t.props, a = null;
            "svg" === i || n === jt ? (a = document.createElementNS(jt, i), n = jt) : a = document.createElement(i), 
            l(t, a, e);
            var o = i.indexOf("-") >= 0 || null != r.is;
            return dt(a, r, o), null != t.ref && (rt(Jt, t), rt(Jt, a)), a;
        }
        function l(t, n, i) {
            for (var r = n.vchildren = u(t), a = n.namespaceURI, o = 0, s = r.length; o < s; o++) n.appendChild(e(r[o], i, a));
        }
        function u(t) {
            var e = t.props.children, n = [];
            return Se(e) ? at(e, d, n) : d(e, n), n;
        }
        function d(t, e) {
            if (null != t && "boolean" != typeof t) {
                if (!t.vtype) {
                    if (t.toJS) return t = t.toJS(), void (Se(t) ? at(t, d, e) : d(t, e));
                    t = "" + t;
                }
                e[e.length] = t;
            }
        }
        function h(t, e, n, i, r) {
            if (i.vchildren) {
                var a = i.childNodes, o = i.vchildren, s = i.vchildren = u(n), c = o.length, l = s.length;
                if (0 !== c) if (0 !== l) {
                    for (var d = Array(l), f = null, p = null, g = 0; g < c; g++) for (var m = o[g], v = 0; v < l; v++) if (!d[v]) {
                        var y = s[v];
                        if (m === y) {
                            d[v] = {
                                shouldIgnore: V(i),
                                vnode: m,
                                newVnode: y,
                                node: a[g],
                                parentContext: r,
                                index: v
                            }, o[g] = null;
                            break;
                        }
                    }
                    for (var g = 0; g < c; g++) {
                        var x = o[g];
                        if (null !== x) {
                            for (var _ = !0, v = 0; v < l; v++) if (!d[v]) {
                                var b = s[v];
                                if (b.type === x.type && b.key === x.key && b.refs === x.refs) {
                                    d[v] = {
                                        vnode: x,
                                        newVnode: b,
                                        node: a[g],
                                        parentContext: r,
                                        index: v
                                    }, _ = !1;
                                    break;
                                }
                            }
                            _ && (f || (f = []), rt(f, {
                                vnode: x,
                                node: a[g]
                            }));
                        }
                    }
                    for (var g = 0; g < l; g++) {
                        var w = d[g];
                        w ? w.vnode.vtype === Ut && h(t, w.vnode, w.newVnode, w.node, w.parentContext) : (p || (p = []), 
                        rt(p, {
                            vnode: s[g],
                            parentNode: i,
                            parentContext: r,
                            index: g
                        }));
                    }
                    f && rt(t.removes, f), p && rt(t.creates, p), rt(t.updates, d);
                } else for (var g = 0; g < c; g++) rt(t.removes, {
                    vnode: o[g],
                    node: a[g]
                }); else if (l > 0) for (var g = 0; g < l; g++) rt(t.creates, {
                    vnode: s[g],
                    parentNode: i,
                    parentContext: r,
                    index: g
                });
            }
        }
        function f(t, e, n) {
            var i = t.type.indexOf("-") >= 0 || null != t.props.is;
            return ht(n, t.props, e.props, i), t.ref !== e.ref && (O(t.refs, t.ref, n), M(e.refs, e.ref, n)), 
            n;
        }
        function p(t, e) {
            var n = (t.props, e.vchildren), i = e.childNodes;
            if (n) for (var r = 0, a = n.length; r < a; r++) s(n[r], i[r]);
            O(t.refs, t.ref, e), e.eventStore = e.vchildren = null;
        }
        function g(t, n, i) {
            var r = y(t, n), a = e(r, n, i);
            return a.cache = a.cache || {}, a.cache[t.uid] = r, a;
        }
        function m(t, e, n, i) {
            var r = t.uid, a = n.cache[r];
            delete n.cache[r];
            var o = y(e, i), s = P(a, o, n, i);
            return s.cache = s.cache || {}, s.cache[e.uid] = o, s !== n && N(s.cache, n.cache, s), 
            s;
        }
        function v(t, e) {
            var n = t.uid, i = e.cache[n];
            delete e.cache[n], s(i, e);
        }
        function y(e, n) {
            var i = e.type, r = e.props, a = w(n, i.contextTypes), o = i(r, a);
            if (o && o.render && (o = o.render()), null === o || o === !1) o = t(Xt); else if (!o || !o.vtype) throw new Error("@" + i.name + "#render:You may have returned undefined, an array or some other invalid object");
            return o;
        }
        function x(t, n, i) {
            var r = t.type, a = t.props, o = t.uid, s = w(n, r.contextTypes), c = new r(a, s), l = c.$updater, u = c.$cache;
            u.parentContext = n, l.isPending = !0, c.props = c.props || a, c.context = c.context || s, 
            c.componentWillMount && (c.componentWillMount(), c.state = l.getState());
            var d = S(c), h = e(d, T(c, n), i);
            return h.cache = h.cache || {}, h.cache[o] = c, u.vnode = d, u.node = h, u.isMounted = !0, 
            rt(Qt, c), null != t.ref && (rt(Jt, t), rt(Jt, c)), h;
        }
        function _(t, e, n, i) {
            var r = t.uid, a = n.cache[r], o = a.$updater, s = a.$cache, c = e.type, l = e.props, u = w(i, c.contextTypes);
            if (delete n.cache[r], n.cache[e.uid] = a, s.parentContext = i, a.componentWillReceiveProps) {
                var d = !o.isPending;
                d && (o.isPending = !0), a.componentWillReceiveProps(l, u), d && (o.isPending = !1);
            }
            return t.ref !== e.ref && (O(t.refs, t.ref, a), M(e.refs, e.ref, a)), o.emitUpdate(l, u), 
            s.node;
        }
        function b(t, e) {
            var n = t.uid, i = e.cache[n], r = i.$cache;
            delete e.cache[n], O(t.refs, t.ref, i), i.setState = i.forceUpdate = et, i.componentWillUnmount && i.componentWillUnmount(), 
            s(r.vnode, e), delete i.setState, r.isMounted = !1, r.node = r.parentContext = r.vnode = i.refs = i.context = null;
        }
        function w(t, e) {
            var n = {};
            if (!e || !t) return n;
            for (var i in e) e.hasOwnProperty(i) && (n[i] = t[i]);
            return n;
        }
        function S(e, n) {
            Kt = e.refs;
            var i = e.render();
            if (null === i || i === !1) i = t(Xt); else if (!i || !i.vtype) throw new Error("@" + e.constructor.name + "#render:You may have returned undefined, an array or some other invalid object");
            return Kt = null, i;
        }
        function T(t, e) {
            if (t.getChildContext) {
                var n = t.getChildContext();
                n && (e = ot(ot({}, e), n));
            }
            return e;
        }
        function E() {
            var t = Qt.length;
            if (t) {
                var e = Qt;
                Qt = [];
                for (var n = -1; t--; ) {
                    var i = e[++n], r = i.$updater;
                    i.componentDidMount && i.componentDidMount(), r.isPending = !1, r.emitUpdate();
                }
            }
        }
        function A() {
            var t = Jt.length;
            if (t) {
                var e = Jt;
                Jt = [];
                for (var n = 0; n < t; n += 2) {
                    var i = e[n], r = e[n + 1];
                    M(i.refs, i.ref, r);
                }
            }
        }
        function C() {
            A(), E();
        }
        function P(t, i, r, a) {
            var o = r;
            return null == i ? (s(t, r), r.parentNode.removeChild(r)) : t.type !== i.type || t.key !== i.key ? (s(t, r), 
            o = e(i, a, r.namespaceURI), r.parentNode.replaceChild(o, r)) : (t !== i || a) && (o = n(t, i, r, a)), 
            o;
        }
        function k() {
            return this;
        }
        function M(t, e, n) {
            null != e && n && (n.nodeName && !n.getDOMNode && (n.getDOMNode = k), tt(e) ? e(n) : t && (t[e] = n));
        }
        function O(t, e, n) {
            null != e && (tt(e) ? e(null) : t && t[e] === n && delete t[e]);
        }
        function N(t, e, n) {
            for (var i in e) if (e.hasOwnProperty(i)) {
                var r = e[i];
                t[i] = r, r.forceUpdate && (r.$cache.node = n);
            }
        }
        function V(t) {
            var e = t.vchildren, n = t.children;
            if (e) for (var i = 0; i < e.length; i++) {
                var r = e[i];
                if ((r.vtype === Bt || r.vtype === zt) && r.type.contextTypes) return !1;
            }
            if (n) for (var i = 0; i < n.length; i++) if (!V(n[i])) return !1;
            return !0;
        }
        function L(t) {
            this.instance = t, this.pendingStates = [], this.pendingCallbacks = [], this.isPending = !1, 
            this.nextProps = this.nextContext = null, this.clearCallbacks = this.clearCallbacks.bind(this);
        }
        function R(t, e) {
            this.$updater = new L(this), this.$cache = {
                isMounted: !1
            }, this.props = t, this.state = {}, this.refs = {}, this.context = e;
        }
        function I(t, e, n, i, r) {
            var a = !0;
            if (t.shouldComponentUpdate && (a = t.shouldComponentUpdate(e, n, i)), a === !1) return t.props = e, 
            t.state = n, void (t.context = i || {});
            var o = t.$cache;
            o.props = e, o.state = n, o.context = i || {}, t.forceUpdate(r);
        }
        function D(t) {
            return "onDoubleClick" === t ? t = "ondblclick" : "onTouchTap" === t && (t = "onclick"), 
            t.toLowerCase();
        }
        function G(t, e, n) {
            e = D(e);
            var i = t.eventStore || (t.eventStore = {});
            if (i[e] = n, 1 === te[e]) return void (t[e] = H);
            if (re[e] || (document.addEventListener(e.substr(2), j, !1), re[e] = !0), ee && e === ie) return void t.addEventListener("click", ne, !1);
            t.nodeName;
            "onchange" === e && z(t) && G(t, "oninput", n);
        }
        function F(t, e) {
            e = D(e);
            var n = t.eventStore || (t.eventStore = {});
            if (delete n[e], 1 === te[e]) return void (t[e] = null);
            if (ee && e === ie) return void t.removeEventListener("click", ne, !1);
            t.nodeName;
            "onchange" === e && z(t) && delete n.oninput;
        }
        function j(t) {
            var e = t.target, n = t.type, i = "on" + n, r = void 0;
            for ($t.isPending = !0; e; ) {
                var a = e, o = a.eventStore, s = o && o[i];
                if (s) {
                    if (r || (r = U(t)), r.currentTarget = e, s.call(e, r), r.$cancelBubble) break;
                    e = e.parentNode;
                } else e = e.parentNode;
            }
            $t.isPending = !1, $t.batchUpdate();
        }
        function H(t) {
            var e = t.currentTarget || t.target, n = "on" + t.type, i = U(t);
            i.currentTarget = e, $t.isPending = !0;
            var r = e.eventStore, a = r && r[n];
            a && a.call(e, i), $t.isPending = !1, $t.batchUpdate();
        }
        function U(t) {
            var e = {}, n = function() {
                return e.$cancelBubble = !0;
            };
            e.nativeEvent = t, e.persist = et;
            for (var i in t) "function" != typeof t[i] ? e[i] = t[i] : "stopPropagation" === i || "stopImmediatePropagation" === i ? e[i] = n : e[i] = t[i].bind(t);
            return e;
        }
        function z(t) {
            var e = t.nodeName && t.nodeName.toLowerCase();
            return "select" !== e && !("input" === e && "file" === t.type);
        }
        function B(t, e) {
            for (var n in e) e.hasOwnProperty(n) && W(t, n, e[n]);
        }
        function X(t, e) {
            for (var n in e) e.hasOwnProperty(n) && (t[n] = "");
        }
        function Y(t, e, n) {
            if (e !== n) {
                if (!n && e) return void X(t, e);
                if (n && !e) return void B(t, n);
                for (var i in e) n.hasOwnProperty(i) ? n[i] !== e[i] && W(t, i, n[i]) : t[i] = "";
                for (var i in n) e.hasOwnProperty(i) || W(t, i, n[i]);
            }
        }
        function q(t, e) {
            return t + e.charAt(0).toUpperCase() + e.substring(1);
        }
        function W(t, e, n) {
            return !ae[e] && se.test(n) ? void (t[e] = n + "px") : ("float" === e && (e = "cssFloat"), 
            null != n && "boolean" != typeof n || (n = ""), void (t[e] = n));
        }
        function K(t) {
            var e = t.props, n = t.attrNS, i = t.domAttrs, r = t.domProps;
            for (var a in e) if (e.hasOwnProperty(a)) {
                var o = e[a];
                he[a] = {
                    attributeName: i.hasOwnProperty(a) ? i[a] : a.toLowerCase(),
                    propertyName: r.hasOwnProperty(a) ? r[a] : a,
                    attributeNamespace: n.hasOwnProperty(a) ? n[a] : null,
                    mustUseProperty: Q(o, fe),
                    hasBooleanValue: Q(o, pe),
                    hasNumericValue: Q(o, ge),
                    hasPositiveNumericValue: Q(o, me),
                    hasOverloadedBooleanValue: Q(o, ve)
                };
            }
        }
        function Q(t, e) {
            return (t & e) === e;
        }
        function J(t, e, n) {
            var i = he.hasOwnProperty(e) && he[e];
            if (i) if (null == n || i.hasBooleanValue && !n || i.hasNumericValue && isNaN(n) || i.hasPositiveNumericValue && n < 1 || i.hasOverloadedBooleanValue && n === !1) $(t, e); else if (i.mustUseProperty) t[i.propertyName] = n; else {
                var r = i.attributeName, a = i.attributeNamespace;
                a ? t.setAttributeNS(a, r, "" + n) : i.hasBooleanValue || i.hasOverloadedBooleanValue && n === !0 ? t.setAttribute(r, "") : t.setAttribute(r, "" + n);
            } else de(e) && ue.test(e) && (null == n ? t.removeAttribute(e) : t.setAttribute(e, "" + n));
        }
        function $(t, e) {
            var n = he.hasOwnProperty(e) && he[e];
            if (n) if (n.mustUseProperty) {
                var i = n.propertyName;
                n.hasBooleanValue ? t[i] = !1 : t[i] = "";
            } else t.removeAttribute(n.attributeName); else de(e) && t.removeAttribute(e);
        }
        function Z(t, e, n) {
            var i, r, a = t.options;
            if (e) {
                if (t.multiple = !0, !Array.isArray(n)) throw new Error("The value prop supplied to <select> must be an array if `multiple` is true");
                for (i = {}, r = 0; r < n.length; r++) i["" + n[r]] = !0;
                for (r = 0; r < a.length; r++) {
                    var o = i.hasOwnProperty(a[r].value);
                    a[r].selected !== o && (a[r].selected = o);
                }
            } else {
                if (t.multiple = !1, Array.isArray(n)) throw new Error("The value prop supplied to <select> must be a scalar value if `multiple` is false.");
                for (i = "" + n, r = 0; r < a.length; r++) {
                    var s = a[r];
                    s.value === i ? s.selected || (s.selected = !0) : s.selected && (s.selected = !1);
                }
                a.selectedIndex < 0 && a.length && (a[0].selected = !0);
            }
        }
        function tt(t) {
            return "function" == typeof t;
        }
        function et() {}
        function nt(t) {
            return t;
        }
        function it(t, e) {
            return function() {
                return t.apply(this, arguments), e.apply(this, arguments);
            };
        }
        function rt(t, e) {
            t[t.length] = e;
        }
        function at(t, e, n) {
            for (var i = t.length, r = -1; i--; ) {
                var a = t[++r];
                Se(a) ? at(a, e, n) : e(a, n);
            }
        }
        function ot(t, e) {
            if (!e) return t;
            for (var n = Object.keys(e), i = n.length; i--; ) t[n[i]] = e[n[i]];
            return t;
        }
        function st() {
            return ++Te;
        }
        function ct(t, e, n, i) {
            Ee.test(e) ? G(t, e, n) : "style" === e ? B(t.style, n) : e === Ft ? n && null != n.__html && (t.innerHTML = n.__html) : i ? null == n ? t.removeAttribute(e) : t.setAttribute(e, "" + n) : J(t, e, n);
        }
        function lt(t, e, n, i) {
            Ee.test(e) ? F(t, e) : "style" === e ? X(t.style, n) : e === Ft ? t.innerHTML = "" : i ? t.removeAttribute(e) : $(t, e);
        }
        function ut(t, e, n, i, r) {
            if ("value" !== e && "checked" !== e || (i = t[e]), n !== i) return void 0 === n ? void lt(t, e, i, r) : void ("style" === e ? Y(t.style, i, n) : ct(t, e, n, r));
        }
        function dt(t, e, n) {
            var i = "SELECT" === t.nodeName;
            for (var r in e) "children" !== r && (!i || "value" !== r && "defaultValue" !== r ? ct(t, r, e[r], n) : Z(t, e.multiple, e[r]));
        }
        function ht(t, e, n, i) {
            var r = "SELECT" === t.nodeName;
            for (var a in e) "children" !== a && (n.hasOwnProperty(a) ? !r || "value" !== a && "defaultValue" !== a ? ut(t, a, n[a], e[a], i) : Z(t, n.multiple, n[a]) : lt(t, a, e[a], i));
            for (var a in n) "children" === a || e.hasOwnProperty(a) || (!r || "value" !== a && "defaultValue" !== a ? ct(t, a, n[a], i) : Z(t, n.multiple, n[a]));
        }
        function ft(t) {
            return !(!t || t.nodeType !== Yt && t.nodeType !== qt && t.nodeType !== Wt);
        }
        function pt(t, n, i, r) {
            if (!t.vtype) throw new Error("cannot render " + t + " to container");
            if (!ft(n)) throw new Error("container " + n + " is not a DOM element");
            var a = n[Ht] || (n[Ht] = st()), o = Ae[a];
            if (o) return void (o === !0 ? Ae[a] = o = {
                vnode: t,
                callback: i,
                parentContext: r
            } : (o.vnode = t, o.parentContext = r, o.callback = o.callback ? it(o.callback, i) : i));
            Ae[a] = !0;
            var s = null, c = null;
            if (s = Ce[a]) c = P(s, t, n.firstChild, r); else {
                c = e(t, r, n.namespaceURI);
                for (var l = null; l = n.lastChild; ) n.removeChild(l);
                n.appendChild(c);
            }
            Ce[a] = t;
            var u = $t.isPending;
            $t.isPending = !0, C(), o = Ae[a], delete Ae[a];
            var d = null;
            return "object" == typeof o ? d = pt(o.vnode, n, o.callback, o.parentContext) : t.vtype === Ut ? d = c : t.vtype === Bt && (d = c.cache[t.uid]), 
            u || ($t.isPending = !1, $t.batchUpdate()), i && i.call(d), d;
        }
        function gt(t, e, n) {
            return pt(t, e, n);
        }
        function mt(t, e, n, i) {
            var r = t.$cache.parentContext;
            return pt(e, n, i, r);
        }
        function vt(t) {
            if (!t.nodeName) throw new Error("expect node");
            var e = t[Ht], n = null;
            return !!(n = Ce[e]) && (s(n, t.firstChild), t.removeChild(t.firstChild), delete Ce[e], 
            !0);
        }
        function yt(t) {
            if (null == t) return null;
            if (t.nodeName) return t;
            var e = t;
            if (e.getDOMNode && e.$cache.isMounted) return e.getDOMNode();
            throw new Error("findDOMNode can not find Node");
        }
        function xt(e, n, i) {
            var r = null;
            if ("string" == typeof e) r = Ut; else {
                if ("function" != typeof e) throw new Error("React.createElement: unexpect type [ " + e + " ]");
                r = e.prototype && e.prototype.isReactComponent ? Bt : zt;
            }
            var a = null, o = null, s = {};
            if (null != n) for (var c in n) n.hasOwnProperty(c) && ("key" === c ? void 0 !== n.key && (a = "" + n.key) : "ref" === c ? void 0 !== n.ref && (o = n.ref) : s[c] = n[c]);
            var l = e.defaultProps;
            if (l) for (var c in l) void 0 === s[c] && (s[c] = l[c]);
            var u = arguments.length, d = i;
            if (u > 3) {
                d = Array(u - 2);
                for (var h = 2; h < u; h++) d[h - 2] = arguments[h];
            }
            return void 0 !== d && (s.children = d), t(r, e, s, a, o);
        }
        function _t(t) {
            return null != t && !!t.vtype;
        }
        function bt(t, e) {
            for (var n = t.type, i = t.key, r = t.ref, a = ot(ot({
                key: i,
                ref: r
            }, t.props), e), o = arguments.length, s = Array(o > 2 ? o - 2 : 0), c = 2; c < o; c++) s[c - 2] = arguments[c];
            var l = xt.apply(void 0, [ n, a ].concat(s));
            return l.ref === t.ref && (l.refs = t.refs), l;
        }
        function wt(t) {
            var e = function() {
                for (var e = arguments.length, n = Array(e), i = 0; i < e; i++) n[i] = arguments[i];
                return xt.apply(void 0, [ t ].concat(n));
            };
            return e.type = t, e;
        }
        function St(t) {
            if (_t(t)) return t;
            throw new Error("expect only one child");
        }
        function Tt(t, e, n) {
            if (null == t) return t;
            var i = 0;
            if (Se(t)) at(t, function(t) {
                var r = typeof t;
                "undefined" !== r && "boolean" !== r || (t = null), e.call(n, t, i++);
            }); else {
                var r = typeof t;
                "undefined" !== r && "boolean" !== r || (t = null), e.call(n, t, i);
            }
        }
        function Et(t, e, n) {
            if (null == t) return t;
            var i = [], r = {};
            Tt(t, function(t, a) {
                var o = {};
                o.child = e.call(n, t, a) || t, o.isEqual = o.child === t;
                var s = o.key = Pt(t, a);
                r.hasOwnProperty(s) ? r[s] += 1 : r[s] = 0, o.index = r[s], rt(i, o);
            });
            var a = [];
            return i.forEach(function(t) {
                var e = t.child, n = t.key, i = t.index, o = t.isEqual;
                if (null != e && "boolean" != typeof e) {
                    if (!_t(e) || null == n) return void rt(a, e);
                    0 !== r[n] && (n += ":" + i), o || (n = kt(e.key || "") + "/" + n), e = bt(e, {
                        key: n
                    }), rt(a, e);
                }
            }), a;
        }
        function At(t) {
            var e = 0;
            return Tt(t, function() {
                e++;
            }), e;
        }
        function Ct(t) {
            return Et(t, nt) || [];
        }
        function Pt(t, e) {
            var n = void 0;
            return n = _t(t) && "string" == typeof t.key ? ".$" + t.key : "." + e.toString(36);
        }
        function kt(t) {
            return ("" + t).replace(Ve, "//");
        }
        function Mt(t, e) {
            t.forEach(function(t) {
                t && (Se(t.mixins) && Mt(t.mixins, e), e(t));
            });
        }
        function Ot(t, e) {
            for (var n in e) if (e.hasOwnProperty(n)) {
                var i = e[n];
                if ("getInitialState" !== n) {
                    var r = t[n];
                    tt(r) && tt(i) ? t[n] = it(r, i) : t[n] = i;
                } else rt(t.$getInitialStates, i);
            }
        }
        function Nt(t, e) {
            e.propTypes && (t.propTypes = t.propTypes || {}, ot(t.propTypes, e.propTypes)), 
            e.contextTypes && (t.contextTypes = t.contextTypes || {}, ot(t.contextTypes, e.contextTypes)), 
            ot(t, e.statics), tt(e.getDefaultProps) && (t.defaultProps = t.defaultProps || {}, 
            ot(t.defaultProps, e.getDefaultProps()));
        }
        function Vt(t, e) {
            for (var n in e) e.hasOwnProperty(n) && tt(e[n]) && (t[n] = e[n].bind(t));
        }
        function Lt() {
            var t = this, e = {}, n = this.setState;
            return this.setState = Re, this.$getInitialStates.forEach(function(n) {
                tt(n) && ot(e, n.call(t));
            }), this.setState = n, e;
        }
        function Rt(t) {
            function e(n, i) {
                R.call(this, n, i), this.constructor = e, t.autobind !== !1 && Vt(this, e.prototype), 
                this.state = this.getInitialState() || this.state;
            }
            if (!tt(t.render)) throw new Error("createClass: spec.render is not function");
            var n = t.mixins || [], i = n.concat(t);
            t.mixins = null, e.displayName = t.displayName;
            var r = e.prototype = new Re();
            return r.$getInitialStates = [], Mt(i, function(t) {
                Ot(r, t), Nt(e, t);
            }), r.getInitialState = Lt, t.mixins = n, e;
        }
        function It(t, e) {
            if (t === e) return !0;
            if ("object" != typeof t || null === t || "object" != typeof e || null === e) return !1;
            var n = Object.keys(t), i = Object.keys(e);
            if (n.length !== i.length) return !1;
            for (var r = 0; r < n.length; r++) if (!e.hasOwnProperty(n[r]) || t[n[r]] !== e[n[r]]) return !1;
            return !0;
        }
        function Dt(t, e) {
            R.call(this, t, e);
        }
        function Gt(t, e) {
            return !It(this.props, t) || !It(this.state, e);
        }
        var Ft = "dangerouslySetInnerHTML", jt = "http://www.w3.org/2000/svg", Ht = "liteid", Ut = 2, zt = 3, Bt = 4, Xt = 5, Yt = 1, qt = 9, Wt = 11, Kt = null, Qt = [], Jt = [], $t = {
            updaters: [],
            isPending: !1,
            add: function(t) {
                rt(this.updaters, t);
            },
            batchUpdate: function() {
                if (!this.isPending) {
                    this.isPending = !0;
                    for (var t = this.updaters, e = void 0; e = t.pop(); ) e.updateComponent();
                    this.isPending = !1;
                }
            }
        };
        L.prototype = {
            emitUpdate: function(t, e) {
                this.nextProps = t, this.nextContext = e, t || !$t.isPending ? this.updateComponent() : $t.add(this);
            },
            updateComponent: function() {
                var t = this.instance, e = this.pendingStates, n = this.nextProps, i = this.nextContext;
                (n || e.length > 0) && (n = n || t.props, i = i || t.context, this.nextProps = this.nextContext = null, 
                I(t, n, this.getState(), i, this.clearCallbacks));
            },
            addState: function(t) {
                t && (rt(this.pendingStates, t), this.isPending || this.emitUpdate());
            },
            replaceState: function(t) {
                var e = this.pendingStates;
                e.pop(), rt(e, [ t ]);
            },
            getState: function() {
                var t = this.instance, e = this.pendingStates, n = t.state, i = t.props;
                return e.length && (n = ot({}, n), e.forEach(function(e) {
                    var r = Se(e);
                    r && (e = e[0]), tt(e) && (e = e.call(t, n, i)), r ? n = ot({}, e) : ot(n, e);
                }), e.length = 0), n;
            },
            clearCallbacks: function() {
                var t = this.pendingCallbacks, e = this.instance;
                t.length > 0 && (this.pendingCallbacks = [], t.forEach(function(t) {
                    return t.call(e);
                }));
            },
            addCallback: function(t) {
                tt(t) && rt(this.pendingCallbacks, t);
            }
        };
        var Zt = {};
        R.prototype = {
            constructor: R,
            isReactComponent: Zt,
            forceUpdate: function(t) {
                var e = this.$updater, n = this.$cache, i = this.props, r = this.state, a = this.context;
                if (n.isMounted) {
                    if (e.isPending) return void e.addState(r);
                    var o = n.props || i, s = n.state || r, c = n.context || a, l = n.parentContext, u = n.node, d = n.vnode;
                    n.props = n.state = n.context = null, e.isPending = !0, this.componentWillUpdate && this.componentWillUpdate(o, s, c), 
                    this.state = s, this.props = o, this.context = c;
                    var h = S(this), f = P(d, h, u, T(this, l));
                    f !== u && (f.cache = f.cache || {}, N(f.cache, u.cache, f)), n.vnode = h, n.node = f, 
                    C(), this.componentDidUpdate && this.componentDidUpdate(i, r, a), t && t.call(this), 
                    e.isPending = !1, e.emitUpdate();
                }
            },
            setState: function(t, e) {
                var n = this.$updater;
                n.addCallback(e), n.addState(t);
            },
            replaceState: function(t, e) {
                var n = this.$updater;
                n.addCallback(e), n.replaceState(t);
            },
            getDOMNode: function() {
                var t = this.$cache.node;
                return t && "#comment" === t.nodeName ? null : t;
            },
            isMounted: function() {
                return this.$cache.isMounted;
            }
        };
        var te = {
            onmousemove: 1,
            ontouchmove: 1,
            onmouseleave: 1,
            onmouseenter: 1,
            onload: 1,
            onunload: 1,
            onscroll: 1,
            onfocus: 1,
            onblur: 1,
            onrowexit: 1,
            onbeforeunload: 1,
            onstop: 1,
            ondragdrop: 1,
            ondragenter: 1,
            ondragexit: 1,
            ondraggesture: 1,
            ondragover: 1,
            oncontextmenu: 1,
            onerror: 1,
            onabort: 1,
            oncanplay: 1,
            oncanplaythrough: 1,
            ondurationchange: 1,
            onemptied: 1,
            onended: 1,
            onloadeddata: 1,
            onloadedmetadata: 1,
            onloadstart: 1,
            onencrypted: 1,
            onpause: 1,
            onplay: 1,
            onplaying: 1,
            onprogress: 1,
            onratechange: 1,
            onseeking: 1,
            onseeked: 1,
            onstalled: 1,
            onsuspend: 1,
            ontimeupdate: 1,
            onvolumechange: 1,
            onwaiting: 1
        }, ee = "ontouchstart" in document, ne = function() {}, ie = "onclick", re = {}, ae = {
            animationIterationCount: 1,
            borderImageOutset: 1,
            borderImageSlice: 1,
            borderImageWidth: 1,
            boxFlex: 1,
            boxFlexGroup: 1,
            boxOrdinalGroup: 1,
            columnCount: 1,
            flex: 1,
            flexGrow: 1,
            flexPositive: 1,
            flexShrink: 1,
            flexNegative: 1,
            flexOrder: 1,
            gridRow: 1,
            gridColumn: 1,
            fontWeight: 1,
            lineClamp: 1,
            lineHeight: 1,
            opacity: 1,
            order: 1,
            orphans: 1,
            tabSize: 1,
            widows: 1,
            zIndex: 1,
            zoom: 1,
            fillOpacity: 1,
            floodOpacity: 1,
            stopOpacity: 1,
            strokeDasharray: 1,
            strokeDashoffset: 1,
            strokeMiterlimit: 1,
            strokeOpacity: 1,
            strokeWidth: 1
        }, oe = [ "Webkit", "ms", "Moz", "O" ];
        Object.keys(ae).forEach(function(t) {
            oe.forEach(function(e) {
                ae[q(e, t)] = 1;
            });
        });
        var se = /^-?\d+(\.\d+)?$/, ce = ":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD", le = ce + "\\-.0-9\\uB7\\u0300-\\u036F\\u203F-\\u2040", ue = new RegExp("^[" + ce + "][" + le + "]*$"), de = RegExp.prototype.test.bind(new RegExp("^(data|aria)-[" + le + "]*$")), he = {}, fe = 1, pe = 4, ge = 8, me = 24, ve = 32, ye = {
            props: {
                accept: 0,
                acceptCharset: 0,
                accessKey: 0,
                action: 0,
                allowFullScreen: pe,
                allowTransparency: 0,
                alt: 0,
                async: pe,
                autoComplete: 0,
                autoFocus: pe,
                autoPlay: pe,
                capture: pe,
                cellPadding: 0,
                cellSpacing: 0,
                charSet: 0,
                challenge: 0,
                checked: fe | pe,
                cite: 0,
                classID: 0,
                className: 0,
                cols: me,
                colSpan: 0,
                content: 0,
                contentEditable: 0,
                contextMenu: 0,
                controls: pe,
                coords: 0,
                crossOrigin: 0,
                data: 0,
                dateTime: 0,
                default: pe,
                defaultValue: fe,
                defaultChecked: fe | pe,
                defer: pe,
                dir: 0,
                disabled: pe,
                download: ve,
                draggable: 0,
                encType: 0,
                form: 0,
                formAction: 0,
                formEncType: 0,
                formMethod: 0,
                formNoValidate: pe,
                formTarget: 0,
                frameBorder: 0,
                headers: 0,
                height: 0,
                hidden: pe,
                high: 0,
                href: 0,
                hrefLang: 0,
                htmlFor: 0,
                httpEquiv: 0,
                icon: 0,
                id: 0,
                inputMode: 0,
                integrity: 0,
                is: 0,
                keyParams: 0,
                keyType: 0,
                kind: 0,
                label: 0,
                lang: 0,
                list: 0,
                loop: pe,
                low: 0,
                manifest: 0,
                marginHeight: 0,
                marginWidth: 0,
                max: 0,
                maxLength: 0,
                media: 0,
                mediaGroup: 0,
                method: 0,
                min: 0,
                minLength: 0,
                multiple: fe | pe,
                muted: fe | pe,
                name: 0,
                nonce: 0,
                noValidate: pe,
                open: pe,
                optimum: 0,
                pattern: 0,
                placeholder: 0,
                poster: 0,
                preload: 0,
                profile: 0,
                radioGroup: 0,
                readOnly: pe,
                referrerPolicy: 0,
                rel: 0,
                required: pe,
                reversed: pe,
                role: 0,
                rows: me,
                rowSpan: ge,
                sandbox: 0,
                scope: 0,
                scoped: pe,
                scrolling: 0,
                seamless: pe,
                selected: fe | pe,
                shape: 0,
                size: me,
                sizes: 0,
                span: me,
                spellCheck: 0,
                src: 0,
                srcDoc: 0,
                srcLang: 0,
                srcSet: 0,
                start: ge,
                step: 0,
                style: 0,
                summary: 0,
                tabIndex: 0,
                target: 0,
                title: 0,
                type: 0,
                useMap: 0,
                value: fe,
                width: 0,
                wmode: 0,
                wrap: 0,
                about: 0,
                datatype: 0,
                inlist: 0,
                prefix: 0,
                property: 0,
                playsInline: pe,
                resource: 0,
                typeof: 0,
                vocab: 0,
                autoCapitalize: 0,
                autoCorrect: 0,
                autoSave: 0,
                color: 0,
                itemProp: 0,
                itemScope: pe,
                itemType: 0,
                itemID: 0,
                itemRef: 0,
                results: 0,
                security: 0,
                unselectable: 0
            },
            attrNS: {},
            domAttrs: {
                acceptCharset: "accept-charset",
                className: "class",
                htmlFor: "for",
                httpEquiv: "http-equiv"
            },
            domProps: {}
        }, xe = "http://www.w3.org/1999/xlink", _e = "http://www.w3.org/XML/1998/namespace", be = {
            accentHeight: "accent-height",
            accumulate: 0,
            additive: 0,
            alignmentBaseline: "alignment-baseline",
            allowReorder: "allowReorder",
            alphabetic: 0,
            amplitude: 0,
            arabicForm: "arabic-form",
            ascent: 0,
            attributeName: "attributeName",
            attributeType: "attributeType",
            autoReverse: "autoReverse",
            azimuth: 0,
            baseFrequency: "baseFrequency",
            baseProfile: "baseProfile",
            baselineShift: "baseline-shift",
            bbox: 0,
            begin: 0,
            bias: 0,
            by: 0,
            calcMode: "calcMode",
            capHeight: "cap-height",
            clip: 0,
            clipPath: "clip-path",
            clipRule: "clip-rule",
            clipPathUnits: "clipPathUnits",
            colorInterpolation: "color-interpolation",
            colorInterpolationFilters: "color-interpolation-filters",
            colorProfile: "color-profile",
            colorRendering: "color-rendering",
            contentScriptType: "contentScriptType",
            contentStyleType: "contentStyleType",
            cursor: 0,
            cx: 0,
            cy: 0,
            d: 0,
            decelerate: 0,
            descent: 0,
            diffuseConstant: "diffuseConstant",
            direction: 0,
            display: 0,
            divisor: 0,
            dominantBaseline: "dominant-baseline",
            dur: 0,
            dx: 0,
            dy: 0,
            edgeMode: "edgeMode",
            elevation: 0,
            enableBackground: "enable-background",
            end: 0,
            exponent: 0,
            externalResourcesRequired: "externalResourcesRequired",
            fill: 0,
            fillOpacity: "fill-opacity",
            fillRule: "fill-rule",
            filter: 0,
            filterRes: "filterRes",
            filterUnits: "filterUnits",
            floodColor: "flood-color",
            floodOpacity: "flood-opacity",
            focusable: 0,
            fontFamily: "font-family",
            fontSize: "font-size",
            fontSizeAdjust: "font-size-adjust",
            fontStretch: "font-stretch",
            fontStyle: "font-style",
            fontVariant: "font-variant",
            fontWeight: "font-weight",
            format: 0,
            from: 0,
            fx: 0,
            fy: 0,
            g1: 0,
            g2: 0,
            glyphName: "glyph-name",
            glyphOrientationHorizontal: "glyph-orientation-horizontal",
            glyphOrientationVertical: "glyph-orientation-vertical",
            glyphRef: "glyphRef",
            gradientTransform: "gradientTransform",
            gradientUnits: "gradientUnits",
            hanging: 0,
            horizAdvX: "horiz-adv-x",
            horizOriginX: "horiz-origin-x",
            ideographic: 0,
            imageRendering: "image-rendering",
            in: 0,
            in2: 0,
            intercept: 0,
            k: 0,
            k1: 0,
            k2: 0,
            k3: 0,
            k4: 0,
            kernelMatrix: "kernelMatrix",
            kernelUnitLength: "kernelUnitLength",
            kerning: 0,
            keyPoints: "keyPoints",
            keySplines: "keySplines",
            keyTimes: "keyTimes",
            lengthAdjust: "lengthAdjust",
            letterSpacing: "letter-spacing",
            lightingColor: "lighting-color",
            limitingConeAngle: "limitingConeAngle",
            local: 0,
            markerEnd: "marker-end",
            markerMid: "marker-mid",
            markerStart: "marker-start",
            markerHeight: "markerHeight",
            markerUnits: "markerUnits",
            markerWidth: "markerWidth",
            mask: 0,
            maskContentUnits: "maskContentUnits",
            maskUnits: "maskUnits",
            mathematical: 0,
            mode: 0,
            numOctaves: "numOctaves",
            offset: 0,
            opacity: 0,
            operator: 0,
            order: 0,
            orient: 0,
            orientation: 0,
            origin: 0,
            overflow: 0,
            overlinePosition: "overline-position",
            overlineThickness: "overline-thickness",
            paintOrder: "paint-order",
            panose1: "panose-1",
            pathLength: "pathLength",
            patternContentUnits: "patternContentUnits",
            patternTransform: "patternTransform",
            patternUnits: "patternUnits",
            pointerEvents: "pointer-events",
            points: 0,
            pointsAtX: "pointsAtX",
            pointsAtY: "pointsAtY",
            pointsAtZ: "pointsAtZ",
            preserveAlpha: "preserveAlpha",
            preserveAspectRatio: "preserveAspectRatio",
            primitiveUnits: "primitiveUnits",
            r: 0,
            radius: 0,
            refX: "refX",
            refY: "refY",
            renderingIntent: "rendering-intent",
            repeatCount: "repeatCount",
            repeatDur: "repeatDur",
            requiredExtensions: "requiredExtensions",
            requiredFeatures: "requiredFeatures",
            restart: 0,
            result: 0,
            rotate: 0,
            rx: 0,
            ry: 0,
            scale: 0,
            seed: 0,
            shapeRendering: "shape-rendering",
            slope: 0,
            spacing: 0,
            specularConstant: "specularConstant",
            specularExponent: "specularExponent",
            speed: 0,
            spreadMethod: "spreadMethod",
            startOffset: "startOffset",
            stdDeviation: "stdDeviation",
            stemh: 0,
            stemv: 0,
            stitchTiles: "stitchTiles",
            stopColor: "stop-color",
            stopOpacity: "stop-opacity",
            strikethroughPosition: "strikethrough-position",
            strikethroughThickness: "strikethrough-thickness",
            string: 0,
            stroke: 0,
            strokeDasharray: "stroke-dasharray",
            strokeDashoffset: "stroke-dashoffset",
            strokeLinecap: "stroke-linecap",
            strokeLinejoin: "stroke-linejoin",
            strokeMiterlimit: "stroke-miterlimit",
            strokeOpacity: "stroke-opacity",
            strokeWidth: "stroke-width",
            surfaceScale: "surfaceScale",
            systemLanguage: "systemLanguage",
            tableValues: "tableValues",
            targetX: "targetX",
            targetY: "targetY",
            textAnchor: "text-anchor",
            textDecoration: "text-decoration",
            textRendering: "text-rendering",
            textLength: "textLength",
            to: 0,
            transform: 0,
            u1: 0,
            u2: 0,
            underlinePosition: "underline-position",
            underlineThickness: "underline-thickness",
            unicode: 0,
            unicodeBidi: "unicode-bidi",
            unicodeRange: "unicode-range",
            unitsPerEm: "units-per-em",
            vAlphabetic: "v-alphabetic",
            vHanging: "v-hanging",
            vIdeographic: "v-ideographic",
            vMathematical: "v-mathematical",
            values: 0,
            vectorEffect: "vector-effect",
            version: 0,
            vertAdvY: "vert-adv-y",
            vertOriginX: "vert-origin-x",
            vertOriginY: "vert-origin-y",
            viewBox: "viewBox",
            viewTarget: "viewTarget",
            visibility: 0,
            widths: 0,
            wordSpacing: "word-spacing",
            writingMode: "writing-mode",
            x: 0,
            xHeight: "x-height",
            x1: 0,
            x2: 0,
            xChannelSelector: "xChannelSelector",
            xlinkActuate: "xlink:actuate",
            xlinkArcrole: "xlink:arcrole",
            xlinkHref: "xlink:href",
            xlinkRole: "xlink:role",
            xlinkShow: "xlink:show",
            xlinkTitle: "xlink:title",
            xlinkType: "xlink:type",
            xmlBase: "xml:base",
            xmlns: 0,
            xmlnsXlink: "xmlns:xlink",
            xmlLang: "xml:lang",
            xmlSpace: "xml:space",
            y: 0,
            y1: 0,
            y2: 0,
            yChannelSelector: "yChannelSelector",
            z: 0,
            zoomAndPan: "zoomAndPan"
        }, we = {
            props: {},
            attrNS: {
                xlinkActuate: xe,
                xlinkArcrole: xe,
                xlinkHref: xe,
                xlinkRole: xe,
                xlinkShow: xe,
                xlinkTitle: xe,
                xlinkType: xe,
                xmlBase: _e,
                xmlLang: _e,
                xmlSpace: _e
            },
            domAttrs: {},
            domProps: {}
        };
        Object.keys(be).map(function(t) {
            we.props[t] = 0, be[t] && (we.domAttrs[t] = be[t]);
        }), K(ye), K(we);
        var Se = Array.isArray, Te = 0, Ee = /^on/i;
        Object.freeze || (Object.freeze = nt);
        var Ae = {}, Ce = {}, Pe = Object.freeze({
            render: gt,
            unstable_renderSubtreeIntoContainer: mt,
            unmountComponentAtNode: vt,
            findDOMNode: yt
        }), ke = "a|abbr|address|area|article|aside|audio|b|base|bdi|bdo|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|data|datalist|dd|del|details|dfn|dialog|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|main|map|mark|menu|menuitem|meta|meter|nav|noscript|object|ol|optgroup|option|output|p|param|picture|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|source|span|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|u|ul|var|video|wbr|circle|clipPath|defs|ellipse|g|image|line|linearGradient|mask|path|pattern|polygon|polyline|radialGradient|rect|stop|svg|text|tspan", Me = {};
        ke.split("|").forEach(function(t) {
            Me[t] = wt(t);
        });
        var Oe = function t() {
            return t;
        };
        Oe.isRequired = Oe;
        var Ne = {
            array: Oe,
            bool: Oe,
            func: Oe,
            number: Oe,
            object: Oe,
            string: Oe,
            any: Oe,
            arrayOf: Oe,
            element: Oe,
            instanceOf: Oe,
            node: Oe,
            objectOf: Oe,
            oneOf: Oe,
            oneOfType: Oe,
            shape: Oe
        }, Ve = /\/(?!\/)/g, Le = Object.freeze({
            only: St,
            forEach: Tt,
            map: Et,
            count: At,
            toArray: Ct
        }), Re = function() {};
        Re.prototype = R.prototype, Dt.prototype = Object.create(R.prototype), Dt.prototype.constructor = Dt, 
        Dt.prototype.isPureReactComponent = !0, Dt.prototype.shouldComponentUpdate = Gt;
        var Ie = ot({
            version: "0.15.1",
            cloneElement: bt,
            isValidElement: _t,
            createElement: xt,
            createFactory: wt,
            Component: R,
            PureComponent: Dt,
            createClass: Rt,
            Children: Le,
            PropTypes: Ne,
            DOM: Me
        }, Pe);
        return Ie.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = Pe, Ie;
    });
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        var e = o.default.getState();
        e && e.config && e.config.providerState && e.config.providerState.ovirtConfig ? t() : ((0, 
        s.logDebug)("waitForReducerSubtreeInit(): subtree not yet initialized, waiting ..."), 
        window.setTimeout(function() {
            return r(t);
        }, 500));
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.waitForReducerSubtreeInit = r;
    var a = n(14), o = i(a), s = n(19);
    e.default = o.default;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(15), a = n(17), o = i(a), s = n(21), c = (0, r.applyMiddleware)(s.thunk)(r.createStore), l = c(o.default);
    e.default = l;
}, function(t, e, n) {
    (function(t, n) {
        !function(t, n) {
            n(e);
        }(this, function(e) {
            "use strict";
            function i(t) {
                var e = y.call(t, _), n = t[_];
                try {
                    t[_] = void 0;
                    var i = !0;
                } catch (t) {}
                var r = x.call(t);
                return i && (e ? t[_] = n : delete t[_]), r;
            }
            function r(t) {
                return b.call(t);
            }
            function a(t) {
                return null == t ? void 0 === t ? S : w : T && T in Object(t) ? i(t) : r(t);
            }
            function o(t) {
                return null != t && "object" == typeof t;
            }
            function s(t) {
                if (!o(t) || a(t) != A) return !1;
                var e = E(t);
                if (null === e) return !0;
                var n = M.call(e, "constructor") && e.constructor;
                return "function" == typeof n && n instanceof n && k.call(n) == O;
            }
            function c(t, e, n) {
                function i() {
                    f === h && (f = h.slice());
                }
                function r() {
                    return d;
                }
                function a(t) {
                    if ("function" != typeof t) throw Error("Expected listener to be a function.");
                    var e = !0;
                    return i(), f.push(t), function() {
                        if (e) {
                            e = !1, i();
                            var n = f.indexOf(t);
                            f.splice(n, 1);
                        }
                    };
                }
                function o(t) {
                    if (!s(t)) throw Error("Actions must be plain objects. Use custom middleware for async actions.");
                    if (void 0 === t.type) throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
                    if (p) throw Error("Reducers may not dispatch actions.");
                    try {
                        p = !0, d = u(d, t);
                    } finally {
                        p = !1;
                    }
                    for (var e = h = f, n = 0; e.length > n; n++) (0, e[n])();
                    return t;
                }
                var l;
                if ("function" == typeof e && void 0 === n && (n = e, e = void 0), void 0 !== n) {
                    if ("function" != typeof n) throw Error("Expected the enhancer to be a function.");
                    return n(c)(t, e);
                }
                if ("function" != typeof t) throw Error("Expected the reducer to be a function.");
                var u = t, d = e, h = [], f = h, p = !1;
                return o({
                    type: V.INIT
                }), l = {
                    dispatch: o,
                    subscribe: a,
                    getState: r,
                    replaceReducer: function(t) {
                        if ("function" != typeof t) throw Error("Expected the nextReducer to be a function.");
                        u = t, o({
                            type: V.INIT
                        });
                    }
                }, l[N] = function() {
                    var t, e = a;
                    return t = {
                        subscribe: function(t) {
                            function n() {
                                t.next && t.next(r());
                            }
                            if ("object" != typeof t) throw new TypeError("Expected the observer to be an object.");
                            return n(), {
                                unsubscribe: e(n)
                            };
                        }
                    }, t[N] = function() {
                        return this;
                    }, t;
                }, l;
            }
            function l(t, e) {
                var n = e && e.type;
                return "Given action " + (n && '"' + n + '"' || "an action") + ', reducer "' + t + '" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.';
            }
            function u(t) {
                Object.keys(t).forEach(function(e) {
                    var n = t[e];
                    if (void 0 === n(void 0, {
                        type: V.INIT
                    })) throw Error('Reducer "' + e + "\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");
                    if (void 0 === n(void 0, {
                        type: "@@redux/PROBE_UNKNOWN_ACTION_" + Math.random().toString(36).substring(7).split("").join(".")
                    })) throw Error('Reducer "' + e + "\" returned undefined when probed with a random type. Don't try to handle " + V.INIT + ' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.');
                });
            }
            function d(t, e) {
                return function() {
                    return e(t.apply(void 0, arguments));
                };
            }
            function h() {
                for (var t = arguments.length, e = Array(t), n = 0; t > n; n++) e[n] = arguments[n];
                return 0 === e.length ? function(t) {
                    return t;
                } : 1 === e.length ? e[0] : e.reduce(function(t, e) {
                    return function() {
                        return t(e.apply(void 0, arguments));
                    };
                });
            }
            var f, p = "object" == typeof t && t && t.Object === Object && t, g = "object" == typeof self && self && self.Object === Object && self, m = (p || g || Function("return this")()).Symbol, v = Object.prototype, y = v.hasOwnProperty, x = v.toString, _ = m ? m.toStringTag : void 0, b = Object.prototype.toString, w = "[object Null]", S = "[object Undefined]", T = m ? m.toStringTag : void 0, E = function(t, e) {
                return function(n) {
                    return t(e(n));
                };
            }(Object.getPrototypeOf, Object), A = "[object Object]", C = Function.prototype, P = Object.prototype, k = C.toString, M = P.hasOwnProperty, O = k.call(Object), N = function(t) {
                var e, n = t.Symbol;
                return "function" == typeof n ? n.observable ? e = n.observable : (e = n("observable"), 
                n.observable = e) : e = "@@observable", e;
            }(f = "undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof t ? t : n), V = {
                INIT: "@@redux/INIT"
            }, L = Object.assign || function(t) {
                for (var e = 1; arguments.length > e; e++) {
                    var n = arguments[e];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
                }
                return t;
            };
            e.createStore = c, e.combineReducers = function(t) {
                for (var e = Object.keys(t), n = {}, i = 0; e.length > i; i++) {
                    var r = e[i];
                    "function" == typeof t[r] && (n[r] = t[r]);
                }
                var a = Object.keys(n), o = void 0;
                try {
                    u(n);
                } catch (t) {
                    o = t;
                }
                return function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, e = arguments[1];
                    if (o) throw o;
                    for (var i = !1, r = {}, s = 0; a.length > s; s++) {
                        var c = a[s], u = n[c], d = t[c], h = u(d, e);
                        if (void 0 === h) {
                            var f = l(c, e);
                            throw Error(f);
                        }
                        r[c] = h, i = i || h !== d;
                    }
                    return i ? r : t;
                };
            }, e.bindActionCreators = function(t, e) {
                if ("function" == typeof t) return d(t, e);
                if ("object" != typeof t || null === t) throw Error("bindActionCreators expected an object or a function, instead received " + (null === t ? "null" : typeof t) + '. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');
                for (var n = Object.keys(t), i = {}, r = 0; n.length > r; r++) {
                    var a = n[r], o = t[a];
                    "function" == typeof o && (i[a] = d(o, e));
                }
                return i;
            }, e.applyMiddleware = function() {
                for (var t = arguments.length, e = Array(t), n = 0; t > n; n++) e[n] = arguments[n];
                return function(t) {
                    return function(n, i, r) {
                        var a = t(n, i, r), o = a.dispatch, s = [], c = {
                            getState: a.getState,
                            dispatch: function(t) {
                                return o(t);
                            }
                        };
                        return s = e.map(function(t) {
                            return t(c);
                        }), o = h.apply(void 0, s)(a.dispatch), L({}, a, {
                            dispatch: o
                        });
                    };
                };
            }, e.compose = h, Object.defineProperty(e, "__esModule", {
                value: !0
            });
        });
    }).call(e, function() {
        return this;
    }(), n(16)(t));
}, function(t, e) {
    t.exports = function(t) {
        return t.webpackPolyfill || (t.deprecate = function() {}, t.paths = [], t.children = [], 
        t.webpackPolyfill = 1), t;
    };
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        if (Array.isArray(t)) {
            for (var e = 0, n = Array(t.length); e < t.length; e++) n[e] = t[e];
            return n;
        }
        return Array.from(t);
    }
    function a(t, e, n, i) {
        return t.findIndex(function(t) {
            return t.connectionName === i && t[e] === n;
        });
    }
    function o(t, e) {
        switch (t = t ? t : {
            provider: null,
            providerState: null,
            refreshInterval: f.default.DefaultRefreshInterval
        }, e.type) {
          case "SET_PROVIDER":
            return Object.assign({}, t, {
                provider: e.provider
            });

          case "SET_REFRESH_INTERVAL":
            var n = Object.assign({}, t);
            return n.refreshInterval = e.refreshInterval, n;

          default:
            return t;
        }
    }
    function s(t) {
        var e = t.parentReducer, n = t.getSubreducer, i = t.getSubstate, r = t.setSubstate;
        return function(t, a) {
            var o = e(t, a), s = n(o);
            if (s) {
                var c = s(i(o), a);
                c !== i(o) && (o = r(o, c));
            }
            return o;
        };
    }
    function c(t, e) {
        function n(t, e) {
            var n = e.connectionName, i = e.id, r = e.name, o = i ? a(t, "id", i, n) : a(t, "name", r, n);
            return o < 0 ? ((0, p.logDebug)("vms reducer: vm (name='" + r + "', connectionName='" + n + "') not found, skipping"), 
            null) : {
                index: o,
                vmCopy: Object.assign({}, t[o])
            };
        }
        function i(t) {
            var e = t.state, n = t.updatedVm, i = t.index;
            return e.slice(0, i).concat(n).concat(e.slice(i + 1));
        }
        switch (t = t ? t : [], (0, p.logDebug)("reducer vms: action=" + JSON.stringify(e)), 
        e.type) {
          case "UPDATE_ADD_VM":
            var o = e.vm.connectionName, s = e.vm.id ? a(t, "id", e.vm.id, o) : a(t, "name", e.vm.name, o);
            if (s < 0) return [].concat(r(t), [ e.vm ]);
            var c = Object.assign({}, t[s], e.vm);
            return i({
                state: t,
                updatedVm: c,
                index: s
            });

          case "UPDATE_VM":
            var d = n(t, e.vm);
            if (!d) return t;
            var h = void 0;
            return e.vm.actualTimeInMs < 0 ? ((0, p.logDebug)("Clearing usage data for vm '" + e.vm.name + "'"), 
            h = Object.assign(d.vmCopy, e.vm), l(h)) : (u(e.vm, d.vmCopy), h = Object.assign(d.vmCopy, e.vm)), 
            i({
                state: t,
                updatedVm: h,
                index: d.index
            });

          case "VM_ACTION_FAILED":
            var f = n(t, e.payload);
            if (!f) return t;
            var g = Object.assign(f.vmCopy, {
                lastMessage: e.payload.message,
                lastMessageDetail: e.payload.detail
            });
            return i({
                state: t,
                updatedVm: g,
                index: f.index
            });

          case "UNDEFINE_VM":
            return t.filter(function(t) {
                return e.connectionName !== t.connectionName || e.name != t.name || e.transientOnly && t.persistent;
            });

          case "DELETE_UNLISTED_VMS":
            return t.filter(function(t) {
                return e.connectionName !== t.connectionName || e.vmNames.indexOf(t.name) >= 0;
            });

          default:
            return t;
        }
    }
    function l(t) {
        t.actualTimeInMs = void 0, t.cpuTime = void 0, t.cpuUsage = void 0, t.rssMemory = void 0;
    }
    function u(t, e) {
        if (t.actualTimeInMs) {
            if (e.actualTimeInMs) {
                var n = 1e6 * (t.actualTimeInMs - e.actualTimeInMs);
                if (n <= 0) return void (0, p.logDebug)("-- timeSampleUsageData(): no time difference");
                var i = t.cpuTime - e.cpuTime;
                return void (t.cpuUsage = (100 * i / n).toFixed(1));
            }
            (0, p.logDebug)("timeSampleUsageData(): can't compute diff - missing previous record"), 
            t.cpuUsage = 0;
        }
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var d = n(15), h = n(18), f = i(h), p = n(19);
    Array.prototype.findIndex || (Array.prototype.findIndex = function(t) {
        if (null === this) throw new TypeError("Array.prototype.findIndex called on null or undefined");
        if ("function" != typeof t) throw new TypeError("predicate must be a function");
        for (var e, n = Object(this), i = n.length >>> 0, r = arguments[1], a = 0; a < i; a++) if (e = n[a], 
        t.call(r, e, a, n)) return a;
        return -1;
    }), e.default = (0, d.combineReducers)({
        config: s({
            parentReducer: o,
            getSubreducer: function(t) {
                return t.provider && t.provider.reducer ? t.provider.reducer : void 0;
            },
            getSubstate: function(t) {
                return t.providerState;
            },
            setSubstate: function(t, e) {
                return Object.assign({}, t, {
                    providerState: e
                });
            }
        }),
        vms: c
    });
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var n = {
        DefaultRefreshInterval: 1e4,
        Virsh: {
            connections: {
                system: {
                    params: [ "-c", "qemu:///system" ]
                },
                session: {
                    params: [ "-c", "qemu:///session" ]
                }
            }
        },
        isDev: !1
    };
    e.default = n;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        var n = void 0;
        switch (e) {
          case "B":
            n = t / 1024 / 1024 / 1024;
            break;

          case "KiB":
            n = t / 1024 / 1024;
            break;

          default:
            console.error("toGigaBytes(): unknown unit: " + e), n = t / 1;
        }
        if (n < 1) n = n.toFixed(2); else {
            var i = n.toFixed(1);
            n = n - i === 0 ? n.toFixed(0) : i;
        }
        return n;
    }
    function a(t, e) {
        var n = void 0;
        switch (e) {
          case "B":
            n = t / 1024;
            break;

          case "KiB":
            n = t;
            break;

          case "MiB":
            n = 1024 * t;
            break;

          case "GiB":
            n = 1024 * t;
            break;

          default:
            console.error("toKiloBytes(): unknown unit: " + e), n = t / 1;
        }
        return n;
    }
    function o(t) {
        return !t || 0 === t.length;
    }
    function s(t, e) {
        if (t.length !== e.length) return !1;
        var n = t.filter(function(t, n) {
            return t !== e[n];
        });
        return 0 === n.length;
    }
    function c(t) {
        if (y.default.isDev) {
            for (var e, n = arguments.length, i = Array(n > 1 ? n - 1 : 0), r = 1; r < n; r++) i[r - 1] = arguments[r];
            (e = console).log.apply(e, [ t ].concat(i));
        }
    }
    function l(t) {
        for (var e, n = arguments.length, i = Array(n > 1 ? n - 1 : 0), r = 1; r < n; r++) i[r - 1] = arguments[r];
        (e = console).error.apply(e, [ t ].concat(i));
    }
    function u(t, e) {
        return t in _ ? e in _[t] ? _[t][e] : (c("rephraseUI(key='" + t + "', original='" + e + "'): unknown original value"), 
        e) : (c("rephraseUI(key='" + t + "', original='" + e + "'): unknown key"), e);
    }
    function d(t, e) {
        e = e || 0;
        var n = Math.pow(10, e), i = Math.abs(Math.round(t * n)), r = (t < 0 ? "-" : "") + String(Math.floor(i / n));
        if (e > 0) {
            var a = String(i % n), o = new Array(Math.max(e - a.length, 0) + 1).join("0");
            r += "." + o + a;
        }
        return r;
    }
    function h() {
        return window.navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
    }
    function f(t) {
        var e = t.data, n = t.fileName, i = void 0 === n ? "myFile.dat" : n, r = t.mimeType, a = void 0 === r ? "application/octet-stream" : r;
        if (!e) return console.error("fileDownload(): no data to download"), !1;
        var o = document.createElement("a");
        if (o.id = "dynamically-generated-file", o.href = "data:" + a + "," + encodeURIComponent(e), 
        document.body.appendChild(o), !h() && "download" in o) c("fileDownload() is using A.HREF"), 
        o.setAttribute("download", i), o.click(); else {
            c("fileDownload() is using IFRAME");
            var s = document.createElement("iframe");
            s.width = "1", s.height = "1", document.body.appendChild(s);
            var l = "\n[...............................GraphicsConsole]\n";
            s.src = "data:" + a + "," + encodeURIComponent(e + l), window.setTimeout(function() {
                return document.body.removeChild(s);
            }, 333);
        }
        return window.setTimeout(function() {
            c("removing temporary A.HREF for filedownload"), document.body.removeChild(o);
        }, 5e3), !0;
    }
    function p(t) {
        return "vm-" + t;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.toGigaBytes = r, e.toKiloBytes = a, e.isEmpty = o, e.arrayEquals = s, e.logDebug = c, 
    e.logError = l, e.rephraseUI = u, e.toFixedPrecision = d, e.fileDownload = f, e.vmId = p;
    var g = n(20), m = i(g), v = n(18), y = i(v), x = m.default.gettext, _ = {
        autostart: {
            disable: x("disabled"),
            enable: x("enabled")
        },
        connections: {
            system: x("System"),
            session: x("Session")
        },
        vmStates: {
            running: x("running"),
            idle: x("idle"),
            paused: x("paused"),
            shutdown: x("shutdown"),
            "shut off": x("shut off"),
            crashed: x("crashed"),
            dying: x("dying"),
            pmsuspended: x("suspended (PM)")
        },
        bootableDisk: {
            disk: x("disk"),
            cdrom: x("cdrom"),
            interface: x("network"),
            hd: x("disk")
        },
        cpuMode: {
            custom: x("custom"),
            "host-model": x("host")
        },
        networkType: {
            direct: x("direct"),
            network: x("network"),
            bridge: x("bridge"),
            user: x("user"),
            ethernet: x("ethernet"),
            hostdev: x("hostdev"),
            mcast: x("mcast"),
            server: x("server"),
            udp: x("udp"),
            vhostuser: x("vhostuser")
        },
        networkManaged: {
            yes: x("yes"),
            no: x("no")
        },
        networkState: {
            up: x("up"),
            down: x("down")
        }
    };
}, function(t, e) {
    t.exports = cockpit;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        var e = t.dispatch, n = t.getState;
        return (0, r.logDebug)("thunk-middleware"), function(t) {
            return function(i) {
                return "function" == typeof i ? i.then || i.done ? i : i(e, n) : t(i);
            };
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.thunk = i;
    var r = n(19);
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        return (0, N.virt)("GET_ALL_VMS", {
            connectionName: t
        });
    }
    function a(t, e) {
        return (0, N.virt)("GET_VM", {
            lookupId: e,
            connectionName: t
        });
    }
    function o(t) {
        return (0, N.virt)("SHUTDOWN_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function s(t) {
        return (0, N.virt)("FORCEOFF_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function c(t) {
        return (0, N.virt)("REBOOT_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function l(t) {
        return (0, N.virt)("FORCEREBOOT_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function u(t) {
        return (0, N.virt)("START_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function d(t, e) {
        return (0, N.virt)("DELETE_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName,
            options: e
        });
    }
    function h(t, e) {
        return (0, N.virt)("CONSOLE_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName,
            consoleDetail: e
        });
    }
    function f(t) {
        return (0, N.virt)("USAGE_START_POLLING", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function p(t) {
        return (0, N.virt)("USAGE_STOP_POLLING", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function g(t) {
        return (0, N.virt)("SENDNMI_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName
        });
    }
    function m(t, e, n) {
        return (0, N.virt)("CHANGE_NETWORK_STATE", {
            name: t.name,
            networkMac: e,
            state: n,
            connectionName: t.connectionName
        });
    }
    function v(t, e) {
        return function(n, i) {
            e = e || (0, P.getRefreshInterval)(i()), e > 0 && !C.default.hidden ? ((0, O.logDebug)("Scheduling " + e + " ms delayed action"), 
            window.setTimeout(function() {
                (0, O.logDebug)("Executing delayed action"), n(t);
            }, e)) : window.setTimeout(function() {
                return n(v(t, e));
            }, M.default.DefaultRefreshInterval);
        };
    }
    function y(t) {
        return {
            type: "SET_PROVIDER",
            provider: t
        };
    }
    function x(t) {
        return {
            type: "SET_REFRESH_INTERVAL",
            refreshInterval: t
        };
    }
    function _(t) {
        return {
            type: "UPDATE_ADD_VM",
            vm: t
        };
    }
    function b(t) {
        return {
            type: "UPDATE_VM",
            vm: t
        };
    }
    function w(t) {
        var e = t.name, n = t.connectionName, i = t.message, r = t.detail, a = t.extraPayload;
        return {
            type: "VM_ACTION_FAILED",
            payload: {
                name: e,
                connectionName: n,
                message: i,
                detail: r,
                extraPayload: a
            }
        };
    }
    function S(t) {
        var e = t.name, n = t.connectionName;
        return w({
            name: e,
            connectionName: n,
            message: null,
            detail: null,
            extraPayload: null
        });
    }
    function T(t, e, n) {
        return {
            type: "UNDEFINE_VM",
            name: e,
            connectionName: t,
            transientOnly: n
        };
    }
    function E(t, e) {
        return {
            type: "DELETE_UNLISTED_VMS",
            vmNames: e,
            connectionName: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getAllVms = r, e.getVm = a, e.shutdownVm = o, e.forceVmOff = s, e.rebootVm = c, 
    e.forceRebootVm = l, e.startVm = u, e.deleteVm = d, e.vmDesktopConsole = h, e.usageStartPolling = f, 
    e.usageStopPolling = p, e.sendNMI = g, e.changeNetworkState = m, e.delayPolling = v, 
    e.setProvider = y, e.setRefreshInterval = x, e.updateOrAddVm = _, e.updateVm = b, 
    e.vmActionFailed = w, e.deleteVmMessage = S, e.undefineVm = T, e.deleteUnlistedVMs = E;
    var A = n(20), C = i(A), P = n(23), k = n(18), M = i(k), O = n(19), N = n(24);
}, function(t, e) {
    "use strict";
    function n(t) {
        return t.config.refreshInterval;
    }
    function i(t, e, n) {
        for (var i = 0; i < t.vms.length; i++) {
            var r = t.vms[i];
            if (r.connectionName === n && r.name === e) return r.usagePolling;
        }
        return !1;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getRefreshInterval = n, e.usagePollingEnabled = i;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        d = t;
    }
    function a(t) {
        var e = t.getState();
        if (e.config.provider) return c.default.resolve(e.config.provider);
        var n = c.default.defer();
        if ((0, l.logDebug)("Discovering provider"), d) if (d.init) {
            var i = d.init({
                dispatch: t.dispatch
            });
            i && i.then ? i.then(function() {
                (0, l.logDebug)("Provider's Init() is returning resolved Promise"), t.dispatch((0, 
                u.setProvider)(d)), n.resolve(d);
            }, function(t) {
                (0, l.logDebug)("Provider's Init() is returning rejected Promise"), n.reject(t);
            }) : i ? ((0, l.logDebug)("No Promise returned, but successful init: " + JSON.stringify(i)), 
            t.dispatch((0, u.setProvider)(d)), n.resolve(d)) : n.reject();
        } else (0, l.logDebug)("No init() method in the provider"), t.dispatch((0, u.setProvider)(d)), 
        n.resolve(d); else n.reject();
        return n.promise;
    }
    function o(t, e) {
        return function(n, i) {
            return a({
                dispatch: n,
                getState: i
            }).fail(function(t) {
                console.error("could not detect any virt provider");
            }).then(function(i) {
                if (t in i) return (0, l.logDebug)("Calling " + i.name + "." + t, e), n(i[t](e));
                var r = "method: '" + t + "' is not supported by provider: '" + i.name + "'";
                return console.warn(r), c.default.reject(r);
            });
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.setVirtProvider = r, e.virt = o;
    var s = n(20), c = i(s), l = n(19), u = n(22), d = null;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        P.ovirtApiMetadata.passed = t;
    }
    function a() {
        return P.ovirtApiMetadata.passed;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.setOvirtApiCheckResult = r, e.isOvirtApiCheckPassed = a;
    var o = n(20), s = i(o), c = n(26), l = i(c), u = n(19), d = n(29), h = n(30), f = n(31), p = n(32), g = n(34), m = n(33), v = n(35), y = n(42), x = n(43), _ = i(x), b = n(44), w = i(b), S = n(46), T = i(S), E = n(47), A = i(E), C = s.default.gettext, P = Object.create(l.default), k = "system";
    P.name = "oVirt", P.ovirtApiMetadata = {
        passed: void 0
    }, P.reducer = y.ovirtReducer, P.VmActions = _.default, P.VmOverviewColumn = w.default, 
    P.ConsoleClientResources = T.default, P.vmTabRenderers = [ {
        name: C("oVirt"),
        idPostfix: "ovirt",
        component: A.default
    } ], P.canDelete = function(t, e, n) {
        return !(0, v.isVmManagedByOvirt)(n, e) && l.default.canDelete(t, e);
    }, P.serialConsoleCommand = function(t) {
        t.vm;
        return !1;
    }, P.init = function(t) {
        var e = t.dispatch;
        return (0, u.logDebug)("Virtual Machines Provider used: " + this.name), (0, d.readConfiguration)({
            dispatch: e
        });
    }, P.POLL_OVIRT = function(t) {
        return (0, p.pollOvirt)();
    }, P.SHUTDOWN_VM = function(t) {
        if ((0, u.logDebug)("SHUTDOWN_VM(payload: " + JSON.stringify(t) + ")"), !a()) return (0, 
        u.logDebug)("oVirt API version does not match, redirecting the action to Libvirt"), 
        l.default.SHUTDOWN_VM(t);
        var e = t.id, n = t.name;
        return function(i) {
            return (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms/" + e + "/shutdown", "<action><async>false</async></action>", (0, 
            c.buildFailHandler)({
                dispatch: i,
                name: n,
                connectionName: t.connectionName,
                message: C("SHUTDOWN action failed")
            }));
        };
    }, P.FORCEOFF_VM = function(t) {
        if ((0, u.logDebug)("FORCEOFF_VM(payload: " + JSON.stringify(t) + ")"), !a()) return (0, 
        u.logDebug)("oVirt API version does not match, redirecting the action to Libvirt"), 
        l.default.FORCEOFF_VM(t);
        var e = t.id, n = t.name;
        return function(i) {
            return (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms/" + e + "/stop", "<action><async>false</async></action>", (0, 
            c.buildFailHandler)({
                dispatch: i,
                name: n,
                connectionName: t.connectionName,
                message: C("SHUTDOWN action failed")
            }));
        };
    }, P.REBOOT_VM = function(t) {
        if ((0, u.logDebug)("REBOOT_VM(payload: " + JSON.stringify(t) + ")"), !a()) return (0, 
        u.logDebug)("oVirt API version does not match, redirecting the action to Libvirt"), 
        l.default.REBOOT_VM(t);
        var e = t.name, n = t.id;
        return function(i) {
            return (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms/" + n + "/reboot", "<action><async>false</async></action>", (0, 
            c.buildFailHandler)({
                dispatch: i,
                name: e,
                connectionName: t.connectionName,
                message: C("REBOOT action failed")
            }));
        };
    }, P.FORCEREBOOT_VM = function(t) {
        return (0, u.logDebug)("FORCEREBOOT_VM(payload: " + JSON.stringify(t) + ")"), P.REBOOT_VM(t);
    }, P.START_VM = function(t) {
        if ((0, u.logDebug)("START_VM(payload: " + JSON.stringify(t) + ")"), !a()) return (0, 
        u.logDebug)("oVirt API version does not match, redirecting the action to Libvirt"), 
        l.default.START_VM(t);
        var e = t.id, n = t.name, i = t.hostName, r = i ? "<action><async>false</async><vm><placement_policy><hosts><host><name>" + i + "</name></host></hosts></placement_policy></vm></action>" : "<action><async>false</async></action>";
        return function(i) {
            return (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms/" + e + "/start", r, (0, 
            c.buildFailHandler)({
                dispatch: i,
                name: n,
                connectionName: t.connectionName,
                message: C("START action failed")
            }));
        };
    }, P.CREATE_VM_FROM_TEMPLATE = function(t) {
        if ((0, u.logDebug)("CREATE_VM: payload = " + JSON.stringify(t)), !a()) return (0, 
        u.logDebug)("oVirt API version does not match, but CREATE_VM action is not supported by the Libvirt provider. Skipping."), 
        function() {};
        var e = t.templateName || "blank", n = t.clusterName || "default", i = t.vm, r = "<name>" + i.name + "</name>", o = "<template><name>" + e + "</name></template>", s = "<cluster><name>" + n + "</name></cluster>", l = "<vm>" + r + s + o + "</vm>";
        return function(t) {
            return (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms", l, (0, c.buildFailHandler)({
                dispatch: t,
                name: i.name,
                connectionName: k,
                message: C("CREATE VM action failed"),
                extraPayload: {
                    templateName: e
                }
            }));
        };
    }, P.MIGRATE_VM = function(t) {
        var e = t.vmId, n = t.vmName, i = t.hostId;
        if ((0, u.logDebug)('MIGRATE_VM(payload: {vmId: "' + e + '", hostId: "' + i + '"}'), 
        !a()) return (0, u.logDebug)("oVirt API version does not match but the MIGRATE action is not supported by Libvirt provider, skipping"), 
        function() {};
        var r = i ? '<action><async>false</async><host id="' + i + '"/></action>' : "<action/>";
        return function(t) {
            (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiPost)("vms/" + e + "/migrate", r, (0, 
            c.buildFailHandler)({
                dispatch: t,
                name: n,
                connectionName: void 0,
                message: C("MIGRATE action failed")
            }));
        };
    }, P.SUSPEND_VM = function(t) {
        var e = t.id, n = t.name;
        return (0, u.logDebug)("SUSPEND_VM(id=" + e + ")"), a() ? function(t) {
            return (0, f.ovirtApiPost)("vms/" + e + "/suspend", "<action><async>false</async></action>", (0, 
            c.buildFailHandler)({
                dispatch: t,
                name: n,
                connectionName: void 0,
                message: C("SUSPEND action failed")
            })).then(function(t) {
                (0, u.logDebug)("SUSPEND_VM finished", t), window.setTimeout(p.forceNextOvirtPoll, 5e3);
            });
        } : ((0, u.logDebug)("oVirt API version does not match, but SUSPEND_VM action is not supported by the Libvirt provider. Skipping."), 
        function() {});
    }, P.DOWNLOAD_ICON = function(t) {
        var e = t.iconId;
        return (0, u.logDebug)("DOWNLOAD_ICON(iconId=" + e + ")"), function(t) {
            return (0, f.ovirtApiGet)("icons/" + e).then(function(e) {
                var n = JSON.parse(e);
                n && n.media_type && n.data && t((0, m.updateIcon)((0, g.oVirtIconToInternal)(n)));
            });
        };
    }, P.DOWNLOAD_ICONS = function(t) {
        var e = t.iconIds, n = t.forceReload;
        return (0, u.logDebug)("DOWNLOAD_ICONS(forceReload=" + n + ") called for " + e.length + " icon ids"), 
        function(t, i) {
            var r = n ? {} : (0, v.getAllIcons)(i()), a = Object.getOwnPropertyNames(e).filter(function(t) {
                return !r[t];
            });
            a.forEach(function(e) {
                return t((0, m.downloadIcon)({
                    iconId: e
                }));
            });
        };
    }, P.onConsoleAboutToShow = function(t) {
        var e = t.type, n = t.vm, i = t.providerState;
        (0, u.logDebug)('onConsoleAboutToShow(payload: {vmId: "' + n.id + '", type: "' + e + '"}');
        var r = n.id, o = n.displays[e];
        if (!(0, v.isVmManagedByOvirt)(i, r) || !a()) return s.default.resolve(o);
        var c = Object.assign({}, o), l = h.CONSOLE_TYPE_ID_MAP[e];
        return (0, f.ovirtApiGet)("vms/" + r + "/graphicsconsoles/" + l, {
            Accept: "application/x-virt-viewer"
        }).then(function(t) {
            var e = t.match(/[^\r\n]+/g).filter(function(t) {
                return t.trim().startsWith("password=");
            });
            return e && (c.password = e[0].substring("password=".length)), c;
        });
    }, P.CONSOLE_VM = function(t) {
        if (!a()) return (0, u.logDebug)("oVirt API version does not match, redirecting CONSOLE_VM action to Libvirt"), 
        l.default.CONSOLE_VM(t);
        var e = t.consoleDetail.type, n = t.id, i = h.CONSOLE_TYPE_ID_MAP[e];
        return i ? function(r, a) {
            return (0, v.isVmManagedByOvirt)(a().config.providerState, n) ? ((0, u.logDebug)("CONSOLE_VM: requesting .vv file from oVirt for vmId: " + n + ", type: " + e), 
            (0, p.forceNextOvirtPoll)(), (0, f.ovirtApiGet)("vms/" + n + "/graphicsconsoles/" + i, {
                Accept: "application/x-virt-viewer"
            }).then(function(t) {
                (0, u.fileDownload)({
                    data: t,
                    fileName: e + "Console.vv",
                    mimeType: "application/x-virt-viewer"
                });
            })) : ((0, u.logDebug)("CONSOLE_VM: vmId: " + n + " is not managed by oVirt, redirecting to Libvirt"), 
            l.default.CONSOLE_VM(t)(r, a));
        } : void (0, u.logError)("CONSOLE_VM: unable to map console type to id. Payload: " + JSON.stringify(t));
    }, P.HOST_TO_MAINTENANCE = function(t) {
        var e = t.hostId;
        return (0, u.logDebug)("HOST_TO_MAINTENANCE(hostId=" + e + ")"), a() ? function(t) {
            (0, p.forceNextOvirtPoll)();
            var n = s.default.defer();
            return n.notify(C("Switching host to maintenance mode in progress ...")), (0, f.ovirtApiPost)("hosts/" + e + "/deactivate", "<action/>", function(t) {
                var e = t.data;
                t.exception;
                n.reject(C("Switching host to maintenance mode failed. Received error: ") + e);
            }).then(function() {
                n.resolve();
            }), n.promise;
        } : ((0, u.logDebug)("oVirt API version does not match but the HOST_TO_MAINTENANCE action is not supported by Libvirt provider, skipping"), 
        function() {});
    }, e.default = P;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        if (Array.isArray(t)) {
            for (var e = 0, n = Array(t.length); e < t.length; e++) n[e] = t[e];
            return n;
        }
        return Array.from(t);
    }
    function a(t) {
        return t.match(/[^\r\n]+/g);
    }
    function o(t, e) {
        var n = t.filter(function(t) {
            return t.trim().startsWith(e);
        });
        return (0, I.isEmpty)(n) ? void 0 : n.toString().trim().substring(e.length).trim();
    }
    function s(t) {
        var e = t.dispatch, n = t.name, i = t.connectionName, r = t.message, a = t.extraPayload;
        return function(t) {
            var o = t.exception, s = t.data;
            return e((0, V.vmActionFailed)({
                name: n,
                connectionName: i,
                message: r,
                detail: {
                    exception: o,
                    data: s
                },
                extraPayload: a
            }));
        };
    }
    function c(t, e) {
        return "session" !== t || "root" !== e.name;
    }
    function l(t, e) {
        var n = G.default.Virsh.connections[e];
        return (0, R.spawnScript)({
            script: "virsh " + n.params.join(" ") + " -r list --all | awk '$1 == \"-\" || $1+0 > 0 { print $2 }'"
        }).then(function(n) {
            var i = n.trim().split(/\r?\n/);
            return i.forEach(function(t, e) {
                i[e] = t.trim();
            }), (0, I.logDebug)("GET_ALL_VMS: vmNames: " + JSON.stringify(i)), t((0, V.deleteUnlistedVMs)(e, i)), 
            M.default.all(i.map(function(n) {
                return t((0, V.getVm)(e, n));
            }));
        });
    }
    function u(t) {
        var e = t.connectionName, n = t.method, i = t.failHandler, r = t.args;
        return (0, R.spawnProcess)({
            cmd: "virsh",
            args: G.default.Virsh.connections[e].params.concat(r),
            failHandler: i
        }).fail(function(t, e, r) {
            var a = n + "() exception: '" + t + "', data: '" + e + "', output: '" + r + "'";
            return i ? void (0, I.logDebug)(a) : void console.warn(a);
        });
    }
    function d(t) {
        var e = t.connectionName, n = t.method, i = t.name, r = t.failHandler;
        return u({
            connectionName: e,
            method: n,
            args: [ "-r", n, i ],
            failHandler: r
        });
    }
    function h(t, e, n) {
        var i = N.default.parseXML(n);
        if (!i) return void console.warn("Can't parse dumpxml, input: \"" + n + '"');
        var r = i.getElementsByTagName("domain")[0], a = r.getElementsByTagName("os")[0], o = r.getElementsByTagName("currentMemory")[0], s = r.getElementsByTagName("vcpu")[0], c = r.getElementsByTagName("cpu")[0], l = s.attributes.getNamedItem("current"), u = r.getElementsByTagName("devices")[0], d = a.getElementsByTagName("type")[0], h = r.getElementsByTagName("name")[0].childNodes[0].nodeValue, f = r.getElementsByTagName("uuid")[0].childNodes[0].nodeValue, m = d.nodeValue, _ = d.getAttribute("machine"), b = o.getAttribute("unit"), w = (0, 
        I.toKiloBytes)(o.childNodes[0].nodeValue, b), S = l && l.value ? l.value : s.childNodes[0].nodeValue, T = p(u), E = v(a, u), A = y(c), C = x(u), P = g(u);
        t((0, V.updateOrAddVm)({
            connectionName: e,
            name: h,
            id: f,
            osType: m,
            currentMemory: w,
            vcpus: S,
            disks: T,
            emulatedMachine: _,
            cpuModel: A,
            bootOrder: E,
            displays: C,
            interfaces: P
        }));
    }
    function f(t, e) {
        var n = t.getElementsByTagName(e);
        return n.length > 0 ? n[0] : void 0;
    }
    function p(t) {
        var e = {}, n = t.getElementsByTagName("disk");
        if (n) for (var i = 0; i < n.length; i++) {
            var r = n[i], a = r.getElementsByTagName("target")[0], o = f(r, "driver"), s = f(r, "source"), c = f(r, "serial"), l = f(r, "alias"), u = f(r, "readonly"), d = f(r, "boot"), h = s ? f(s, "host") : void 0, p = {
                target: a.getAttribute("dev"),
                driver: {
                    name: o ? o.getAttribute("name") : void 0,
                    type: o ? o.getAttribute("type") : void 0
                },
                bootOrder: d ? d.getAttribute("order") : void 0,
                type: r.getAttribute("type"),
                device: r.getAttribute("device"),
                source: {
                    file: s ? s.getAttribute("file") : void 0,
                    dev: s ? s.getAttribute("dev") : void 0,
                    pool: s ? s.getAttribute("pool") : void 0,
                    volume: s ? s.getAttribute("volumne") : void 0,
                    protocol: s ? s.getAttribute("protocol") : void 0,
                    host: {
                        name: h ? h.getAttribute("name") : void 0,
                        port: h ? h.getAttribute("port") : void 0
                    }
                },
                bus: a.getAttribute("bus"),
                serial: c ? c.getAttribute("serial") : void 0,
                aliasName: l ? l.getAttribute("name") : void 0,
                readonly: !!u
            };
            p.target ? (e[p.target] = p, (0, I.logDebug)("parseDumpxmlForDisks(): disk device found: " + JSON.stringify(p))) : console.warn("parseDumpxmlForDisks(): mandatory properties are missing in dumpxml, found: " + JSON.stringify(p));
        }
        return e;
    }
    function g(t) {
        var e = [], n = t.getElementsByTagName("interface");
        if (n) for (var i = 0; i < n.length; i++) {
            var r = n[i], a = r.getElementsByTagName("target")[0], o = f(r, "mac"), s = f(r, "model"), c = f(r, "alias"), l = f(r, "source"), u = f(r, "driver"), d = f(r, "virtualport"), h = f(r, "address"), p = f(r, "link"), g = f(r, "mtu"), m = h ? f(h, "local") : null, v = {
                type: r.getAttribute("type"),
                managed: r.getAttribute("managed"),
                name: r.getAttribute("name") ? r.getAttribute("name") : void 0,
                target: a ? a.getAttribute("dev") : void 0,
                mac: o.getAttribute("address"),
                model: s.getAttribute("type"),
                aliasName: c ? c.getAttribute("name") : void 0,
                virtualportType: d ? d.getAttribute("type") : void 0,
                driverName: u ? u.getAttribute("name") : void 0,
                state: p ? p.getAttribute("state") : "up",
                mtu: g ? g.getAttribute("size") : void 0,
                source: {
                    bridge: l ? l.getAttribute("bridge") : void 0,
                    network: l ? l.getAttribute("network") : void 0,
                    portgroup: l ? l.getAttribute("portgroup") : void 0,
                    dev: l ? l.getAttribute("dev") : void 0,
                    mode: l ? l.getAttribute("mode") : void 0,
                    address: l ? l.getAttribute("address") : void 0,
                    port: l ? l.getAttribute("port") : void 0,
                    local: {
                        address: m ? m.getAttribute("address") : void 0,
                        port: m ? m.getAttribute("port") : void 0
                    }
                },
                address: {
                    bus: h ? h.getAttribute("bus") : void 0,
                    function: h ? h.getAttribute("function") : void 0
                }
            };
            e.push(v);
        }
        return e;
    }
    function m(t) {
        var e = t.tagName, n = F("other");
        switch (e) {
          case "disk":
            n = (0, I.rephraseUI)("bootableDisk", t.getAttribute("device"));
            break;

          case "interface":
            n = (0, I.rephraseUI)("bootableDisk", "interface");
            break;

          default:
            console.info("Unrecognized type of bootable device: " + e);
        }
        return n;
    }
    function v(t, e) {
        var n = {
            devices: []
        }, i = t.getElementsByTagName("boot");
        if (i.length > 0) {
            for (var r = 0; r < i.length; r++) {
                var a = i[r], o = a.getAttribute("dev");
                o && n.devices.push({
                    order: r,
                    type: (0, I.rephraseUI)("bootableDisk", o)
                });
            }
            return n;
        }
        for (var s = [], c = 0; c < e.childNodes.length; c++) {
            var l = e.childNodes[c];
            if (1 === l.nodeType) {
                var u = f(l, "boot");
                u && u.getAttribute("order") && s.push({
                    order: parseInt(u.getAttribute("order")),
                    type: m(l)
                });
            }
        }
        return n.devices = s.sort(function(t, e) {
            return t.order - e.order;
        }), n;
    }
    function y(t) {
        if (t) {
            var e = t.getAttribute("mode"), n = "";
            if (e && "custom" === e) {
                var i = f(t, "model");
                i && (n = i.childNodes[0].nodeValue);
            }
            return (0, I.rephraseUI)("cpuMode", e) + (n ? " (" + n + ")" : "");
        }
    }
    function x(t) {
        var e = {}, n = t.getElementsByTagName("graphics");
        if (n) for (var i = 0; i < n.length; i++) {
            var r = n[i], a = {
                type: r.getAttribute("type"),
                port: r.getAttribute("port"),
                tlsPort: r.getAttribute("tlsPort"),
                address: r.getAttribute("listen"),
                autoport: r.getAttribute("autoport")
            };
            a.type && (a.autoport || a.address && (a.port || a.tlsPort)) ? (e[a.type] = a, (0, 
            I.logDebug)("parseDumpxmlForConsoles(): graphics device found: " + JSON.stringify(a))) : console.warn("parseDumpxmlForConsoles(): mandatory properties are missing in dumpxml, found: " + JSON.stringify(a));
        }
        var o = t.getElementsByTagName("console");
        if (o) for (var s = 0; s < o.length; s++) {
            var c = o[s];
            "pty" === c.getAttribute("type") && (e.pty = {});
        }
        return e;
    }
    function _(t, e, n, i) {
        var r = a(i), s = o(r, "State:"), c = o(r, "Autostart:"), l = "yes" == o(r, "Persistent:");
        return t(j.isRunning(s) ? (0, V.updateVm)({
            connectionName: e,
            name: n,
            state: s,
            persistent: l,
            autostart: c
        }) : (0, V.updateVm)({
            connectionName: e,
            name: n,
            state: s,
            autostart: c,
            persistent: l,
            actualTimeInMs: -1
        })), s;
    }
    function b(t, e, n, i) {
        var r = a(i), s = o(r, "rss");
        s && t((0, V.updateVm)({
            connectionName: e,
            name: n,
            rssMemory: s
        }));
    }
    function w(t, e, n, i) {
        var r = Date.now(), s = a(i), c = o(s, "cpu.time=");
        c && t((0, V.updateVm)({
            connectionName: e,
            name: n,
            actualTimeInMs: r,
            cpuTime: c
        })), t((0, V.updateVm)({
            connectionName: e,
            name: n,
            disksStats: S(s)
        }));
    }
    function S(t) {
        var e = o(t, "block.count=");
        if (e) {
            for (var n = {}, i = 0; i < e; i++) {
                var r = o(t, "block." + i + ".name="), a = o(t, "block." + i + ".physical=") || NaN, s = o(t, "block." + i + ".capacity=") || NaN, c = o(t, "block." + i + ".allocation=") || NaN;
                r ? n[r] = {
                    physical: a,
                    capacity: s,
                    allocation: c
                } : console.warn("parseDomstatsForDisks(): mandatory property is missing in domstats (block." + i + ".name)");
            }
            return n;
        }
    }
    function T(t) {
        return "[virt-viewer]\n" + ("type=" + t.type + "\n") + ("host=" + t.address + "\n") + ("port=" + t.port + "\n") + "delete-this-file=1\nfullscreen=0\n";
    }
    function E(t, e) {
        (0, I.logDebug)("doUsagePolling(" + t + ", " + e + ")");
        var n = function(t) {
            var e = t.exception, n = t.data;
            return console.info("The 'virsh' command failed, as expected: \"" + JSON.stringify(e) + '", data: "' + JSON.stringify(n) + '"'), 
            M.default.resolve();
        };
        return function(i, r) {
            return (0, L.usagePollingEnabled)(r(), t, e) ? d({
                connectionName: e,
                method: "dommemstat",
                name: t,
                failHandler: n
            }).then(function(r) {
                if (r) return b(i, e, t, r), d({
                    connectionName: e,
                    method: "domstats",
                    name: t,
                    failHandler: n
                });
            }).then(function(n) {
                n && w(i, e, t, n);
            }).then(function() {
                return i((0, V.delayPolling)(E(t, e), null, t, e));
            }) : void (0, I.logDebug)("doUsagePolling(" + t + ", " + e + "): usage polling disabled, stopping loop");
        };
    }
    function A(t, e, n) {
        var i = /event '([a-z-]+)' .* domain ([^:]+)(?:: (.*))?$/, r = i.exec(n);
        if (!r) return void console.warn("Unable to parse event, ignoring:", n);
        var a = r.slice(1), o = P(a, 3), s = o[0], c = o[1], l = o[2];
        switch ((0, I.logDebug)("handleEvent(" + e + "): domain " + c + ": got event " + s + "; details: " + l), 
        s) {
          case "lifecycle":
            var u = l.split(" ")[0];
            switch (u) {
              case "Undefined":
                t((0, V.undefineVm)(e, c));
                break;

              case "Defined":
              case "Started":
                t((0, V.getVm)(e, c));
                break;

              case "Stopped":
                t((0, V.updateVm)({
                    connectionName: e,
                    name: c,
                    state: "shut off",
                    actualTimeInMs: -1
                })), t((0, V.undefineVm)(e, c, !0));
                break;

              case "Suspended":
                t((0, V.updateVm)({
                    connectionName: e,
                    name: c,
                    state: "paused"
                }));
                break;

              case "Resumed":
                t((0, V.updateVm)({
                    connectionName: e,
                    name: c,
                    state: "running"
                }));
                break;

              default:
                (0, I.logDebug)("Unhandled lifecycle event type " + u + " in event: " + n);
            }
            break;

          case "metadata-change":
          case "device-added":
          case "device-removed":
          case "disk-change":
          case "tray-change":
          case "control-error":
            t((0, V.getVm)(e, c));
            break;

          default:
            (0, I.logDebug)("handleEvent " + e + " " + c + ": ignoring event " + n);
        }
    }
    function C(t, e) {
        var n = "";
        M.default.spawn([ "virsh" ].concat(G.default.Virsh.connections[e].params).concat([ "-r", "event", "--all", "--loop" ]), {
            err: "message",
            pty: !0
        }).stream(function(i) {
            n += i;
            for (var r = n.split("\n"); r.length > 1; ) A(t, e, r.shift().trim());
            n = r[0];
        }).fail(function(n) {
            console.log("virsh event failed:", n), t((0, V.deleteUnlistedVMs)(e, [])), t((0, 
            V.delayPolling)((0, V.getAllVms)(e)));
        });
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var P = function() {
        function t(t, e) {
            var n = [], i = !0, r = !1, a = void 0;
            try {
                for (var o, s = t[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), 
                !e || n.length !== e); i = !0) ;
            } catch (t) {
                r = !0, a = t;
            } finally {
                try {
                    !i && s.return && s.return();
                } finally {
                    if (r) throw a;
                }
            }
            return n;
        }
        return function(e, n) {
            if (Array.isArray(e)) return e;
            if (Symbol.iterator in Object(e)) return t(e, n);
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        };
    }();
    e.buildFailHandler = s;
    var k = n(20), M = i(k), O = n(27), N = i(O), V = n(22), L = n(23), R = n(28), I = n(19), D = n(18), G = i(D), F = M.default.gettext;
    String.prototype.startsWith || (String.prototype.startsWith = function(t, e) {
        return e = e || 0, this.substr(e, t.length) === t;
    });
    var j = {};
    j = {
        name: "Libvirt",
        init: function(t) {
            return !0;
        },
        canReset: function(t) {
            return "running" == t || "idle" == t || "paused" == t;
        },
        canShutdown: function(t) {
            return j.canReset(t);
        },
        canDelete: function(t, e, n) {
            return !0;
        },
        isRunning: function(t) {
            return j.canReset(t);
        },
        canRun: function(t) {
            return "shut off" == t;
        },
        canConsole: function(t) {
            return "running" == t;
        },
        canSendNMI: function(t) {
            return j.canReset(t);
        },
        serialConsoleCommand: function(t) {
            var e = t.vm;
            return !!e.displays.pty && [ "virsh" ].concat(r(G.default.Virsh.connections[e.connectionName].params), [ "console", e.name ]);
        },
        GET_VM: function(t) {
            var e = t.lookupId, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".GET_VM()"), function(t) {
                if (!(0, I.isEmpty)(e)) return d({
                    connectionName: n,
                    method: "dumpxml",
                    name: e
                }).then(function(i) {
                    return h(t, n, i), d({
                        connectionName: n,
                        method: "dominfo",
                        name: e
                    });
                }).then(function(i) {
                    _(t, n, e, i);
                });
            };
        },
        GET_ALL_VMS: function(t) {
            var e = t.connectionName;
            return (0, I.logDebug)(this.name + ".GET_ALL_VMS(connectionName='" + e + "'):"), 
            e ? function(t) {
                C(t, e), l(t, e);
            } : function(t) {
                return M.default.user().done(function(e) {
                    var n = Object.getOwnPropertyNames(G.default.Virsh.connections).filter(function(t) {
                        return c(t, e);
                    }).map(function(e) {
                        return t((0, V.getAllVms)(e));
                    });
                    return M.default.all(n);
                });
            };
        },
        SHUTDOWN_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".SHUTDOWN_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "SHUTDOWN_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM SHUT DOWN action failed")
                    }),
                    args: [ "shutdown", e ]
                });
            };
        },
        FORCEOFF_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".FORCEOFF_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "FORCEOFF_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM FORCE OFF action failed")
                    }),
                    args: [ "destroy", e ]
                });
            };
        },
        REBOOT_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".REBOOT_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "REBOOT_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM REBOOT action failed")
                    }),
                    args: [ "reboot", e ]
                });
            };
        },
        FORCEREBOOT_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".FORCEREBOOT_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "FORCEREBOOT_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM FORCE REBOOT action failed")
                    }),
                    args: [ "reset", e ]
                });
            };
        },
        START_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".START_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "START_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM START action failed")
                    }),
                    args: [ "start", e ]
                });
            };
        },
        DELETE_VM: function(t) {
            function e() {
                return u({
                    connectionName: r,
                    method: "DELETE_VM",
                    args: [ "destroy", i ]
                });
            }
            function n() {
                var t = [ "undefine", i, "--managed-save" ];
                return a.storage && (t.push("--storage"), t.push(a.storage.join(","))), u({
                    connectionName: r,
                    method: "DELETE_VM",
                    args: t
                });
            }
            var i = t.name, r = t.connectionName, a = t.options;
            return (0, I.logDebug)(this.name + ".DELETE_VM(" + i + ", " + JSON.stringify(a) + "):"), 
            function(t) {
                return a.destroy ? e().then(n) : n();
            };
        },
        CHANGE_NETWORK_STATE: function(t) {
            var e = t.name, n = t.networkMac, i = t.state, r = t.connectionName;
            return (0, I.logDebug)(this.name + ".CHANGE_NETWORK_STATE(" + e + "." + n + " " + i + "):"), 
            function(t) {
                u({
                    connectionName: r,
                    method: "CHANGE_NETWORK_STATE",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: r,
                        message: F("CHANGE NETWORK STATE action failed")
                    }),
                    args: [ "domif-setlink", e, n, i ]
                }).then(function() {
                    t((0, V.getVm)(r, e));
                });
            };
        },
        USAGE_START_POLLING: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".USAGE_START_POLLING(" + e + "):"), function(t) {
                t((0, V.updateVm)({
                    connectionName: n,
                    name: e,
                    usagePolling: !0
                })), t(E(e, n));
            };
        },
        USAGE_STOP_POLLING: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".USAGE_STOP_POLLING(" + e + "):"), function(t) {
                return t((0, V.updateVm)({
                    connectionName: n,
                    name: e,
                    usagePolling: !1
                }));
            };
        },
        CONSOLE_VM: function(t) {
            var e = t.name, n = t.consoleDetail;
            return (0, I.logDebug)(this.name + ".CONSOLE_VM(name='" + e + "'), detail = ", n), 
            function(t) {
                (0, I.fileDownload)({
                    data: T(n),
                    fileName: "console.vv",
                    mimeType: "application/x-virt-viewer"
                });
            };
        },
        SENDNMI_VM: function(t) {
            var e = t.name, n = t.connectionName;
            return (0, I.logDebug)(this.name + ".SENDNMI_VM(" + e + "):"), function(t) {
                return u({
                    connectionName: n,
                    method: "SENDNMI_VM",
                    failHandler: s({
                        dispatch: t,
                        name: e,
                        connectionName: n,
                        message: F("VM SEND Non-Maskable Interrrupt action failed")
                    }),
                    args: [ "inject-nmi", e ]
                });
            };
        }
    }, e.default = j;
}, function(t, e) {
    t.exports = jQuery;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        if (Array.isArray(t)) {
            for (var e = 0, n = Array(t.length); e < t.length; e++) n[e] = t[e];
            return n;
        }
        return Array.from(t);
    }
    function a(t) {
        var e = t.cmd, n = t.args, i = void 0 === n ? [] : n, a = t.stdin, o = t.failHandler, c = [ e ].concat(r(i));
        return (0, u.logDebug)("spawn process args: " + c), s(l.default.spawn(c, {
            err: "message",
            environ: [ "LC_ALL=C" ]
        }).input(a)).fail(function(t, n) {
            return o ? o({
                exception: t,
                data: n,
                spawnArgs: c
            }) : void console.warn("spawn '" + e + "' process returned error: \"" + JSON.stringify(t) + '", data: "' + JSON.stringify(n) + '"');
        });
    }
    function o(t) {
        var e = t.script, n = [ e ];
        return (0, u.logDebug)("spawn script args: " + n), s(l.default.script(n, [], {
            err: "message",
            environ: [ "LC_ALL=C" ]
        })).fail(function(t, n) {
            return console.warn("spawn '" + e + "' script error: \"" + JSON.stringify(t) + '", data: "' + JSON.stringify(n) + '"');
        });
    }
    function s(t) {
        var e = l.default.defer(), n = "";
        return t.stream(function(t) {
            n += t;
        }).done(function() {
            e.resolve(n);
        }).fail(function(t, i) {
            e.reject(t, i, n);
        }), e.promise;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.spawnProcess = a, e.spawnScript = o;
    var c = n(20), l = i(c), u = n(19);
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        var e = t.dispatch;
        (0, g.logDebug)("readConfiguration() called for configUrl='" + m.OVIRT_CONF_FILE + "'");
        var n = [];
        return n.push(a({
            dispatch: e
        })), n.push(s({
            dispatch: e
        })), p.default.all(n);
    }
    function a(t) {
        var e = t.dispatch;
        return p.default.file(m.OVIRT_CONF_FILE).read().done(function(t) {
            if (!t) return console.info("Configuration file empty, post-installation setup follows to generate: ", m.OVIRT_CONF_FILE), 
            void (0, E.default)();
            console.log("Configuration file " + m.OVIRT_CONF_FILE + " content is read ...");
            var n = JSON.parse(t);
            return console.log("... and parsed"), Object.assign(v.default, n), x.default.isDev = v.default.debug, 
            v.default.Virsh && v.default.Virsh.connections && (x.default.Virsh = v.default.Virsh, 
            v.default.Virsh = null, (0, g.logDebug)("Connection params for virsh: ", JSON.stringify(x.default.Virsh))), 
            (0, g.logDebug)("Configuration parsed, using merged result: " + JSON.stringify(v.default)), 
            c({
                dispatch: e
            });
        }).fail(function() {
            console.info("Failed to read configuration, post-installation setup follows to generate: ", m.OVIRT_CONF_FILE), 
            (0, E.default)();
        });
    }
    function o(t) {
        var e = t.href.lastIndexOf("access_token=");
        if (e >= 0) {
            var n = t.href.substr(0, e + "access_token=".length);
            (0, g.logDebug)("storeSsoUri(): ", n), window.sessionStorage.setItem("OVIRT_PROVIDER_SSO_URI", n);
        }
    }
    function s(t) {
        var e = t.dispatch, n = "";
        return p.default.spawn([ "hostname", "-f" ], {
            err: "message"
        }).stream(function(t) {
            n += t;
        }).done(function() {
            n = n.trim(), (0, g.logDebug)("hostname read: ", n), (0, A.waitForReducerSubtreeInit)(function() {
                return e((0, S.setHostname)(n));
            });
        }).fail(function(t) {
            console.error("Getting 'hostname' failed:", t);
        });
    }
    function c(t) {
        var e = t.dispatch;
        (0, g.logDebug)("doLogin() called");
        var n = window.top.location, i = n.hash.indexOf("token="), r = window.sessionStorage.getItem("OVIRT_PROVIDER_TOKEN");
        return (0, g.logDebug)("location: '" + n.toString() + "'\ntokenStart='" + i + "'\ntoken='" + r + "'"), 
        i >= 0 ? ((0, g.logDebug)("doLogin(): token from params stored to sessionStorage, now removing the token hash from the url"), 
        o(n), r = n.hash.substr(i + "token=".length), window.sessionStorage.setItem("OVIRT_PROVIDER_TOKEN", r), 
        (0, g.logDebug)("doLogin(): token from params stored to sessionStorage, now removing the token hash from the url. ", r), 
        window.top.location.hash = "", l({
            dispatch: e,
            token: r
        })) : r ? ((0, g.logDebug)("doLogin(): token found in sessionStorrage: " + r), l({
            dispatch: e,
            token: r
        })) : (u(), !1);
    }
    function l(t) {
        var e = t.dispatch, n = t.token;
        return v.default.token = n, (0, A.waitForReducerSubtreeInit)(function() {
            return e((0, S.loginInProgress)(!1));
        }), d({
            dispatch: e
        });
    }
    function u() {
        console.info("Redirecting to oVirt SSO"), C.default.dispatch((0, S.loginInProgress)(!0));
        var t = (0, m.getOvirtBaseUrl)(), e = t + "/web-ui/authorizedRedirect.jsp?redirectUrl=", n = window.sessionStorage.getItem("OVIRT_PROVIDER_SSO_URI");
        if (n) n = n.replace("#", "__hash__"), e += n + "TOKEN"; else {
            var i = "https://" + window.location.host;
            e += i + "/machines/__hash__token=TOKEN";
        }
        console.info("Redirecting to oVirt SSO: ", e), window.top.location = e;
    }
    function d(t) {
        var e = t.dispatch;
        (0, g.logDebug)("checkApiVersion() started");
        var n = function(t, e) {
            (0, g.logError)("checkApiVersion(): failed to load oVirt API metadata"), (0, _.setOvirtApiCheckResult)(!1);
        };
        return (0, b.ovirtApiGet)("", {}, n).then(function(t) {
            (0, g.logDebug)("checkApiVersion() - API metadata retrieved: ", t);
            var n = JSON.parse(t);
            if (!(n && n.product_info && n.product_info.version && n.product_info.version.major && n.product_info.version.minor)) return console.error("Incompatible oVirt API version: ", n), 
            void (0, _.setOvirtApiCheckResult)(!1);
            var i = n.product_info.version, r = h({
                major: parseInt(i.major, 10),
                minor: parseInt(i.minor, 10)
            }, m.REQUIRED_OVIRT_API_VERSION);
            (0, g.logDebug)("checkApiVersion(): ", r), (0, _.setOvirtApiCheckResult)(r), r && (0, 
            w.startOvirtPolling)({
                dispatch: e
            });
        });
    }
    function h(t, e) {
        return (0, g.logDebug)("compareVersion(), actual=" + JSON.stringify(t) + ", required=" + JSON.stringify(e)), 
        t.major >= e.major && !(t.major === e.major && t.minor < e.minor);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.readConfiguration = r, e.redirectToOvirtSSO = u;
    var f = n(20), p = i(f), g = n(19), m = n(30), v = i(m), y = n(18), x = i(y), _ = n(25), b = n(31), w = n(32), S = n(33), T = n(37), E = i(T), A = n(13), C = i(A);
}, function(t, e) {
    "use strict";
    function n() {
        return "https://" + i.OVIRT_FQDN + ":" + i.OVIRT_PORT + "/ovirt-engine";
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getOvirtBaseUrl = n;
    var i = (e.INSTALL_SH = "/usr/share/cockpit/ovirt/install.sh", e.OVIRT_CONF_FILE = "/etc/cockpit/machines-ovirt.config", 
    e.VDSM_CONF_FILE = "/etc/vdsm/vdsm.conf", e.PEM_FILE = "/etc/pki/vdsm/certs/cacert.pem", 
    e.OVIRT_DEFAULT_PORT = 443, e.CONSOLE_TYPE_ID_MAP = {
        spice: "7370696365",
        vnc: "766e63",
        rdp: "rdp_not_yet_supported"
    }, e.REQUIRED_OVIRT_API_VERSION = {
        major: 4,
        minor: 0
    }, {
        debug: !0,
        OVIRT_FQDN: "replace.by.engine.fqdn",
        OVIRT_PORT: 443,
        CONSOLE_CLIENT_RESOURCES_URL: "https://www.ovirt.org/documentation/admin-guide/virt/console-client-resources/",
        ovirt_polling_interval: 5e3,
        cockpitPort: 9090,
        Virsh: {
            connections: null
        },
        token: null
    });
    e.default = i;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r() {
        return g || (g = u.default.http({
            port: h.default.OVIRT_PORT,
            address: h.default.OVIRT_FQDN,
            tls: {
                authority: {
                    file: d.PEM_FILE
                },
                key: {
                    file: d.PEM_FILE
                },
                certificate: {
                    file: d.PEM_FILE
                }
            }
        })), g;
    }
    function a(t, e, n) {
        var i = Object.assign({}, {
            Accept: "application/json",
            "Content-Type": "application/xml",
            Authorization: "Bearer " + h.default.token
        }, e), a = "/ovirt-engine/api/" + t;
        return (0, f.logDebug)("ovirtApiGet(): resource: " + t + ", headers: " + JSON.stringify(i) + ", url: " + a), 
        r().get(a, null, i).fail(function(t, e) {
            console.info("HTTP GET failed: " + JSON.stringify(e) + ", " + JSON.stringify(t) + ", url: ", a), 
            s({
                error: e,
                exception: t,
                failHandler: n
            });
        });
    }
    function o(t, e, n) {
        (0, f.logDebug)("ovirtApiPost(): resource: " + t + ", body: " + e);
        var i = {
            Accept: "application/json",
            "Content-Type": "application/xml",
            Authorization: "Bearer " + h.default.token
        }, a = "/ovirt-engine/api/" + t;
        return r().request({
            method: "POST",
            path: a,
            headers: i,
            body: e
        }).fail(function(t, e) {
            console.info("HTTP POST failed: " + JSON.stringify(e), a), s({
                error: e,
                exception: t,
                failHandler: n
            });
        });
    }
    function s(t) {
        var e = t.error, n = t.exception, i = t.failHandler;
        if (!e) return void (0, f.logError)("oVirt operation failed but no error received");
        if (console.info("handleOvirtError, error = ", e, "exception = ", n), !n) return void (0, 
        f.logError)("oVirt operation failed but no exception received");
        switch (n.status) {
          case 401:
            return window.sessionStorage.setItem("OVIRT_PROVIDER_TOKEN", void 0), void (0, p.redirectToOvirtSSO)();

          case 404:
          default:
            if (i) {
                try {
                    e = JSON.parse(e);
                } catch (t) {
                    (0, f.logDebug)("handleOvirtError(): error is not a JSON string");
                }
                var r = e;
                e.detail ? r = e.detail : e.fault && (r = e.fault.detail || e.fault), i({
                    data: r,
                    exception: n
                });
            } else (0, f.logError)("oVirt operation failed but no failHandler defined. Error: " + JSON.stringify(e));
        }
    }
    function c(t, e, n) {
        return console.info("httpGet(): ", t, e, n), u.default.http({
            port: parseInt(e),
            address: t,
            tls: {
                authority: {
                    file: d.PEM_FILE
                },
                key: {
                    file: d.PEM_FILE
                },
                certificate: {
                    file: d.PEM_FILE
                }
            }
        }).get(n);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.ovirtApiGet = a, e.ovirtApiPost = o, e.handleOvirtError = s, e.httpGet = c;
    var l = n(20), u = i(l), d = n(30), h = i(d), f = n(19), p = n(29), g = null;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        var e = t.dispatch;
        return (0, k.isOvirtApiCheckPassed)() ? void window.setInterval(function() {
            return e((0, S.pollOvirtAction)());
        }, 1e3) : void (0, E.logDebug)("Skipping oVirt poling due to failed/unfinished oVirt API check");
    }
    function a() {
        O = -1;
    }
    function o(t) {
        var e = t.call, n = t.delay, i = t.lastCall, r = Date.now();
        return i + n <= r ? e() : null;
    }
    function s() {
        return function(t, e) {
            o({
                lastCall: O,
                delay: P.default.ovirt_polling_interval,
                call: function() {
                    return w.default.hidden ? void (0, E.logDebug)("oVirt polling skipped since the plugin is not visible") : ((0, 
                    E.logDebug)("Executing oVirt polling"), O = 1 / 0, c(t, e).always(function() {
                        (0, E.logDebug)("oVirt polling finished"), O = Date.now();
                    }));
                }
            });
        };
    }
    function c(t, e) {
        (0, E.logDebug)("doRefreshEvents() called");
        var n = !1, i = "?from=" + N;
        N < 0 && (i = "?max=1&search=sortby%20time%20desc", n = !0);
        var r = w.default.defer();
        return (0, A.ovirtApiGet)("events" + i).done(function(i) {
            var a = JSON.parse(i);
            if (a && a.event && a.event instanceof Array) {
                var o = {}, s = {}, c = {}, p = {};
                a.event.forEach(function(t) {
                    return l(t, {
                        vmsToRefresh: o,
                        templatesToRefresh: s,
                        hostsToRefresh: c,
                        clustersToRefresh: p
                    });
                });
                var g = [];
                n ? (g.push(d(t)), g.push(u(t)), g.push(h(t, e)), g.push(f(t, e))) : (Object.getOwnPropertyNames(p).forEach(function(e) {
                    return g.push(d(t, e));
                }), Object.getOwnPropertyNames(c).forEach(function(e) {
                    return g.push(u(t, e));
                }), Object.getOwnPropertyNames(o).forEach(function(n) {
                    return g.push(h(t, e, n));
                }), Object.getOwnPropertyNames(s).forEach(function(n) {
                    return g.push(f(t, e, n));
                })), w.default.all(g).then(function() {
                    return r.resolve();
                }).fail(function(t) {
                    return r.reject(t);
                });
            } else a && 0 === Object.getOwnPropertyNames(a).length ? ((0, E.logDebug)("No new oVirt events received"), 
            r.resolve()) : ((0, E.logError)("doRefreshEvents() failed, data: ", i, ", result: ", a), 
            r.reject("Array of events expected"));
        }).fail(function() {
            (0, E.logError)("Failed to retrieve oVirt events"), r.reject("Failed to retrieve oVirt events");
        }), r.promise;
    }
    function l(t, e) {
        var n = e.vmsToRefresh, i = e.templatesToRefresh, r = e.hostsToRefresh, a = e.clustersToRefresh;
        (0, E.logDebug)("parseEvent: ", t);
        var o = parseInt(t.index);
        N = N < o ? o : N, t.host && t.host.id && (r[t.host.id] = !0), t.vm && t.vm.id && (n[t.vm.id] = !0), 
        t.template && t.template.id && (i[t.template.id] = !0), t.cluster && t.cluster.id && (a[t.cluster.id] = !0);
    }
    function u(t, e) {
        return x(t, "hosts", e, m, S.removeHost);
    }
    function d(t, e) {
        return x(t, "clusters", e, v, S.removeCluster);
    }
    function h(t, e, n) {
        return _(t, e, "vms", n, p, S.removeVm, !0);
    }
    function f(t, e, n) {
        return _(t, e, "templates", n, g, S.removeTemplate, !1);
    }
    function p(t, e, n, i) {
        var r = function(t) {
            return t.cluster && t.cluster.id === i.id;
        }, a = {}, o = function(t) {
            t.large_icon && (a[t.large_icon.id] = !0), t.small_icon && (a[t.small_icon.id] = !0);
        };
        y(e, n, "vm", T.vmConverter, S.updateVm, r, t, o), n((0, S.downloadIcons)({
            iconIds: a,
            forceReload: !1
        }));
    }
    function g(t, e, n, i) {
        var r = function(t) {
            return !t.cluster || t.cluster.id === i.id;
        };
        y(e, n, "template", T.templateConverter, S.updateTemplate, r, t);
    }
    function m(t, e) {
        y(t, e, "host", T.hostConverter, S.updateHost);
    }
    function v(t, e) {
        y(t, e, "cluster", T.clusterConverter, S.updateCluster);
    }
    function y(t, e, n, i, r, a, o, s) {
        var c = function() {
            return !0;
        };
        a = a || c;
        var l = JSON.parse(t);
        l && l[n] && l[n] instanceof Array ? (l[n].filter(a).forEach(function(t) {
            s && s(t), e(r(i(t)));
        }), o && o.resolve()) : l && l.id ? (s && s(l), e(r(i(l))), o && o.resolve()) : (l && 0 === Object.getOwnPropertyNames(l).length ? (0, 
        E.logDebug)("No oVirt '" + n + "' received") : (0, E.logError)("parseResourceGeneric() failed, name: ", n, ", data:\n", t, "\n, result:\n", l), 
        o && o.reject(l));
    }
    function x(t, e, n, i, r) {
        var a = "" + e + (n ? "/" + n : "");
        return (0, E.logDebug)("doRefreshResource() called for " + a), (0, A.ovirtApiGet)(a).done(function(e) {
            return i(e, t);
        }).fail(function(i) {
            console.info("Failed to get " + a + ", ", i), n && (console.info("The " + e + " " + n + " is about to be removed from the list."), 
            t(r(n)));
        });
    }
    function _(t, e, n, i, r, a, o) {
        (0, E.logDebug)("doRefreshResourceWithCurrentCluster() called, name=" + n + ", resourceId=" + i + " ");
        var s = w.default.defer();
        return (0, M.waitForCurrentCluster)(e).done(function(e) {
            (0, E.logDebug)("Reading " + n + " for currentCluster: ", e);
            var c = o ? n + "?search=cluster%3D" + e.name : "" + n;
            i && (c = n + "/" + i), (0, E.logDebug)("doRefreshResourceWithCurrentCluster(), url: ", c), 
            (0, A.ovirtApiGet)(c).done(function(n) {
                return r(s, n, t, e);
            }).fail(function(e) {
                console.info("Failed to get " + c + ", ", e), i && (console.info("The " + n + " " + i + " is about to be removed from the list."), 
                t(a(i))), s.reject(e);
            });
        }).fail(function(t) {
            return s.reject(t);
        }), s.promise;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.startOvirtPolling = r, e.forceNextOvirtPoll = a, e.pollOvirt = s;
    var b = n(20), w = i(b), S = n(33), T = n(34), E = n(19), A = n(31), C = n(30), P = i(C), k = n(25), M = n(35), O = -1, N = -1;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        var e = t.id, n = t.name, i = t.connectionName;
        return (0, S.virt)("SUSPEND_VM", {
            id: e,
            name: n,
            connectionName: i
        });
    }
    function r(t, e, n) {
        return (0, S.virt)("MIGRATE_VM", {
            vmId: t,
            vmName: e,
            hostId: n
        });
    }
    function a() {
        return (0, S.virt)("POLL_OVIRT", {});
    }
    function o(t) {
        var e = t.iconIds, n = t.forceReload;
        return (0, S.virt)("DOWNLOAD_ICONS", {
            iconIds: e,
            forceReload: n
        });
    }
    function s(t) {
        var e = t.iconId;
        return (0, S.virt)("DOWNLOAD_ICON", {
            iconId: e
        });
    }
    function c(t, e) {
        return (0, S.virt)("START_VM", {
            name: t.name,
            id: t.id,
            connectionName: t.connectionName,
            hostName: e
        });
    }
    function l(t) {
        var e = t.templateName, n = t.clusterName, i = t.vm;
        return (0, S.virt)("CREATE_VM_FROM_TEMPLATE", {
            templateName: e,
            clusterName: n,
            vm: i
        });
    }
    function u(t) {
        var e = t.hostId;
        return (0, S.virt)("HOST_TO_MAINTENANCE", {
            hostId: e
        });
    }
    function d(t) {
        return {
            type: "OVIRT_UPDATE_HOST",
            payload: t
        };
    }
    function h(t) {
        return {
            type: "OVIRT_REMOVE_HOST",
            payload: {
                id: t
            }
        };
    }
    function f(t) {
        return {
            type: "OVIRT_UPDATE_VM",
            payload: t
        };
    }
    function p(t) {
        return {
            type: "OVIRT_REMOVE_VM",
            payload: {
                id: t
            }
        };
    }
    function g(t) {
        return {
            type: "OVIRT_UPDATE_TEMPLATE",
            payload: t
        };
    }
    function m(t) {
        return {
            type: "OVIRT_REMOVE_TEMPLATE",
            payload: {
                id: t
            }
        };
    }
    function v(t) {
        return {
            type: "OVIRT_UPDATE_CLUSTER",
            payload: t
        };
    }
    function y(t) {
        return {
            type: "OVIRT_REMOVE_CLUSTER",
            payload: {
                id: t
            }
        };
    }
    function x(t) {
        return {
            type: "OVIRT_UPDATE_ICON",
            payload: t
        };
    }
    function _(t) {
        return {
            type: "OVIRT_LOGIN_IN_PROGRESS",
            payload: {
                loginInProgress: t
            }
        };
    }
    function b(t) {
        return {
            type: "OVIRT_GOTO_SUBPAGE",
            payload: {
                target: t
            }
        };
    }
    function w(t) {
        return {
            type: "OVIRT_SET_HOSTNAME",
            payload: {
                hostname: t
            }
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.suspendVm = i, e.migrateVm = r, e.pollOvirtAction = a, e.downloadIcons = o, 
    e.downloadIcon = s, e.startVm = c, e.createVmFromTemplate = l, e.switchHostToMaintenance = u, 
    e.updateHost = d, e.removeHost = h, e.updateVm = f, e.removeVm = p, e.updateTemplate = g, 
    e.removeTemplate = m, e.updateCluster = v, e.removeCluster = y, e.updateIcon = x, 
    e.loginInProgress = _, e.goToSubpage = b, e.setHostname = w;
    var S = n(24);
}, function(t, e) {
    "use strict";
    function n(t) {
        return {
            id: t.id,
            name: t.name
        };
    }
    function i(t) {
        return {
            id: t.id,
            name: t.name,
            address: t.address,
            clusterId: t.cluster ? t.cluster.id : void 0,
            status: t.status,
            memory: t.memory,
            cpu: t.cpu ? {
                name: t.cpu.name,
                speed: t.cpu.speed,
                topology: t.cpu.topology ? {
                    sockets: t.cpu.topology.sockets,
                    cores: t.cpu.topology.cores,
                    threads: t.cpu.topology.threads
                } : void 0
            } : void 0
        };
    }
    function r(t) {
        return {
            id: t.id,
            name: t.name,
            description: t.description,
            cpu: {
                architecture: t.cpu.architecture,
                topology: {
                    sockets: t.cpu.topology.sockets,
                    cores: t.cpu.topology.cores,
                    threads: t.cpu.topology.threads
                }
            },
            memory: t.memory,
            creationTime: t.creation_time,
            highAvailability: t.high_availability,
            icons: {
                largeId: t.large_icon ? t.large_icon.id : void 0,
                smallId: t.small_icon ? t.small_icon.id : void 0
            },
            os: {
                type: t.os.type
            },
            stateless: t.stateless,
            type: t.type,
            version: {
                name: t.version ? t.version.name : void 0,
                number: t.version ? t.version.number : void 0,
                baseTemplateId: t.version && t.version.base_template ? t.version.base_template.id : void 0
            }
        };
    }
    function a(t) {
        return {
            id: t.id,
            name: t.name,
            state: o(t.status),
            description: t.description,
            highAvailability: t.high_availability,
            icons: {
                largeId: t.large_icon && t.large_icon.id || void 0,
                smallId: t.small_icon && t.small_icon.id || void 0
            },
            memory: t.memory,
            cpu: {
                architecture: t.cpu.architecture,
                topology: {
                    sockets: t.cpu.topology.sockets,
                    cores: t.cpu.topology.cores,
                    threads: t.cpu.topology.threads
                }
            },
            origin: t.origin,
            os: {
                type: t.os.type
            },
            type: t.type,
            stateless: t.stateless,
            clusterId: t.cluster.id,
            templateId: t.template.id,
            hostId: t.host ? t.host.id : void 0,
            fqdn: t.fqdn,
            startTime: t.start_time
        };
    }
    function o(t) {
        switch (t) {
          case "up":
            return "running";

          case "down":
            return "shut off";

          default:
            return t;
        }
    }
    function s(t) {
        return {
            id: t.id,
            type: t.media_type,
            data: t.data
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.clusterConverter = n, e.hostConverter = i, e.templateConverter = r, e.vmConverter = a, 
    e.oVirtIconToInternal = s;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t) {
        return t.config && t.config.providerState ? t.config.providerState.icons : {};
    }
    function a(t, e) {
        if (!t) return null;
        var n = (0, f.getHostAddress)(), i = Object.getOwnPropertyNames(t).find(function(e) {
            return t[e].address === n;
        });
        return !i && e && e.hostname && (i = Object.getOwnPropertyNames(t).find(function(n) {
            return t[n].address === e.hostname;
        })), i && t[i];
    }
    function o(t) {
        return s(t.config.providerState.hosts, t.config.providerState.clusters, t.config.providerState.ovirtConfig);
    }
    function s(t, e, n) {
        var i = a(t, n);
        return i && e && i.clusterId ? e[i.clusterId] : null;
    }
    function c(t, e) {
        return e && t && !!t.vms[e];
    }
    function l(t, e, n) {
        n <= 0 && ((0, p.logError)("waitForCurrentCluster(): timeout reached, list of hosts and/or clusters has not yet finished"), 
        t.reject()), (0, p.logDebug)("Sleeping in _waitForCurrentCluster(), ", n), window.setTimeout(function() {
            var i = o(e());
            i ? t.resolve(i) : l(t, e, n - 1);
        }, 250);
    }
    function u(t) {
        var e = o(t());
        if (e) return h.default.resolve(e);
        var n = h.default.defer();
        return (0, p.logDebug)("Waiting for list of clusters and hosts to be loaded"), l(n, t, 20), 
        n.promise;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getAllIcons = r, e.getHost = a, e.getCurrentClusterFromState = o, e.getCurrentCluster = s, 
    e.isVmManagedByOvirt = c, e.waitForCurrentCluster = u;
    var d = n(20), h = i(d), f = n(36), p = n(19);
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r() {
        var t = window.location.host, e = t.substring(0, t.indexOf(":"));
        return e;
    }
    function a(t) {
        return r() === t;
    }
    function o(t, e) {
        var n = void 0;
        switch (e) {
          case "B":
            n = t / 1024 / 1024 / 1024;
            break;

          case "KiB":
            n = t / 1024 / 1024;
            break;

          default:
            console.error("toGigaBytes(): unknown unit: " + e), n = t / 1;
        }
        if (n < 1) n = n.toFixed(2); else {
            var i = n.toFixed(1);
            n = n - i === 0 ? n.toFixed(0) : i;
        }
        return n;
    }
    function s(t, e) {
        return void 0 === t || null === t ? e : t;
    }
    function c(t) {
        return /^\d+$/.test(t);
    }
    function l(t) {
        var e = new Date(), n = new Date(t), i = e.getUTCFullYear() - n.getUTCFullYear() !== 0, r = {
            month: "long",
            year: i ? "numeric" : void 0,
            day: "numeric",
            hour: "numeric",
            hour12: !1,
            minute: "numeric"
        }, a = n.toLocaleString(d.default.language || "en", r);
        return a = a.replace(/,([^,]*)$/, "$1");
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.getHostAddress = r, e.isSameHostAddress = a, e.toGigaBytes = o, e.valueOrDefault = s, 
    e.isNumeric = c, e.formatDateTime = l;
    var u = n(20), d = i(u);
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r() {
        var t = {
            oVirtUrl: null,
            oVirtPort: d.OVIRT_DEFAULT_PORT
        }, e = (0, g.show_modal_dialog)({
            title: m("Connect to oVirt Engine"),
            body: u.default.createElement(y, {
                values: t,
                onChange: function() {
                    return e.render();
                }
            })
        }, {
            actions: [ {
                caption: m("Register oVirt"),
                style: "primary",
                clicked: function() {
                    return a(t.oVirtUrl, t.oVirtPort);
                }
            } ]
        });
    }
    function a(t, e) {
        console.info("configureOvirtUrl: ", t, e);
        var n = c.default.defer();
        n.notify(m("Registering oVirt to Cockpit"));
        var i = function(i, r) {
            return i && 302 === i.status ? void o(t, e, n) : (console.info("Unable to access oVirt engine: ", JSON.stringify(i), JSON.stringify(r)), 
            void n.reject(m("Please provide valid oVirt engine fully qualified domain name (FQDN) and port (443 by default)")));
        };
        return (0, h.httpGet)(t, e, "/ovirt-engine").then(function() {
            o(t, e, n);
        }).fail(i), n.promise;
    }
    function o(t, e, n) {
        console.info("configureOvirtUrl() - oVirt engine connection can be established", t, e), 
        c.default.spawn([ "bash", d.INSTALL_SH, t, e ], {
            superuser: "try"
        }).done(function() {
            console.info("oVirt installation script was successful"), window.location.reload(), 
            n.resolve();
        }).fail(function(t, e) {
            (0, f.logError)("oVirt installation script failed. Exception: ", JSON.stringify(t), ", output: ", JSON.stringify(e));
            var i = m("oVirt installation script failed with following output: ") + (t.message || e);
            t.exit_status && t.exit_status >= 1 && (i = v[t.exit_status] || i), n.reject(i);
        });
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = n(20), c = i(s), l = n(12), u = i(l), d = n(30), h = n(31), f = n(19), p = n(36), g = n(38);
    n(41);
    var m = c.default.gettext;
    u.default;
    var v = {
        "1": m("oVirt Provider installation script failed due to missing arguments."),
        "3": m("oVirt Provider installation script failed: Can't write to /etc/cockpit/machines-ovirt.config, try as root.")
    }, y = function(t) {
        var e = t.values, n = t.onChange;
        return u.default.createElement("div", {
            className: "modal-body"
        }, u.default.createElement("table", {
            className: "form-table-ct"
        }, u.default.createElement("tr", null, u.default.createElement("td", {
            className: "top"
        }, u.default.createElement("label", {
            className: "control-label",
            for: "ovirt-provider-install-dialog-engine-fqdn"
        }, m("FQDN"))), u.default.createElement("td", null, u.default.createElement("input", {
            id: "ovirt-provider-install-dialog-engine-fqdn",
            className: "form-control",
            type: "text",
            placeholder: "engine.mydomain.com",
            onChange: function(t) {
                e.oVirtUrl = t.target.value, n();
            }
        }))), u.default.createElement("tr", null, u.default.createElement("td", {
            className: "top"
        }, u.default.createElement("label", {
            className: "control-label",
            for: "ovirt-provider-install-dialog-engine-port"
        }, m("Port"))), u.default.createElement("td", null, u.default.createElement("input", {
            id: "ovirt-provider-install-dialog-engine-fqdn",
            className: "form-control",
            type: "text",
            placeholder: d.OVIRT_DEFAULT_PORT,
            onChange: function(t) {
                e.oVirtPort = (0, p.isNumeric)(t.target.value) ? t.target.value : e.oVirtPort, n();
            }
        }))), u.default.createElement("tr", null, u.default.createElement("td", {
            colSpan: "2"
        }, u.default.createElement("p", null, m("Please provide fully qualified domain name and port of the oVirt engine."))))));
    };
    e.default = r;
}, function(t, e, n) {
    "use strict";
    var i = n(20), r = n(12), a = i.gettext;
    n(39);
    var o = r.createClass({
        displayName: "DialogFooter",
        propTypes: {
            cancel_clicked: r.PropTypes.func,
            cancel_caption: r.PropTypes.string,
            actions: r.PropTypes.array,
            static_error: r.PropTypes.string,
            dialog_done: r.PropTypes.func
        },
        getInitialState: function() {
            return {
                action_in_progress: !1,
                action_in_progress_promise: null,
                action_progress_message: "",
                action_canceled: !1,
                error_message: null
            };
        },
        keyUpHandler: function(t) {
            27 == t.keyCode && (this.cancel_click(), t.stopPropagation());
        },
        componentDidMount: function() {
            document.body.classList.add("modal-in"), document.addEventListener("keyup", this.keyUpHandler.bind(this));
        },
        componentWillUnmount: function() {
            document.body.classList.remove("modal-in"), document.removeEventListener("keyup", this.keyUpHandler.bind(this));
        },
        update_progress: function(t) {
            this.setState({
                action_progress_message: t
            });
        },
        action_click: function(t, e) {
            if (!e || 0 === e.button) {
                var n = this;
                this.setState({
                    error_message: null,
                    action_progress_message: "",
                    action_in_progress: !0,
                    action_canceled: !1
                }), this.state.action_in_progress_promise = t(this.update_progress.bind(this)).done(function() {
                    n.setState({
                        action_in_progress: !1,
                        error_message: null
                    }), n.props.dialog_done && n.props.dialog_done(!0);
                }).fail(function(t) {
                    n.state.action_canceled && n.props.dialog_done && n.props.dialog_done(!1), console.warn(t), 
                    n.setState({
                        action_in_progress: !1,
                        error_message: t
                    });
                }).progress(this.update_progress.bind(this)), e && e.stopPropagation();
            }
        },
        cancel_click: function(t) {
            if (!t || 0 === t.button) {
                if (this.setState({
                    action_canceled: !0
                }), this.props.cancel_clicked && this.props.cancel_clicked(), this.state.action_in_progress && "cancel" in this.state.action_in_progress_promise) return void this.state.action_in_progress_promise.cancel();
                this.props.dialog_done && this.props.dialog_done(!1), t && t.stopPropagation();
            }
        },
        render: function() {
            var t, e;
            t = "cancel_caption" in this.props ? this.props.cancel_caption : a("Cancel"), e = "cancel_style" in this.props ? this.props.cancel_style : "cancel", 
            e = "btn btn-default " + e;
            var n, i;
            this.state.action_in_progress && (i = "disabled", n = r.createElement("div", {
                className: "dialog-wait-ct pull-left"
            }, r.createElement("div", {
                className: "spinner spinner-sm"
            }), r.createElement("span", null, this.state.action_progress_message)));
            var o, s, c = this, l = this.props.actions.map(function(t) {
                var e;
                e = "caption" in t ? t.caption : a("Ok");
                var n = "btn-default", o = {
                    primary: "btn-primary",
                    danger: "btn-danger"
                };
                "style" in t && t.style in o && (n = o[t.style]), n = "btn " + n + " apply";
                var s = i || "disabled" in t && t.disabled;
                return r.createElement("button", {
                    key: e,
                    className: n,
                    onClick: c.action_click.bind(c, t.clicked),
                    disabled: s
                }, e);
            });
            return s = void 0 !== this.props.static_error && null !== this.props.static_error ? this.props.static_error : this.state.error_message, 
            s && (o = r.createElement("div", {
                className: "alert alert-danger dialog-error"
            }, r.createElement("span", {
                className: "fa fa-exclamation-triangle"
            }), r.createElement("span", null, s))), r.createElement("div", {
                className: "modal-footer"
            }, o, n, r.createElement("button", {
                className: e,
                onClick: this.cancel_click.bind(this)
            }, t), l);
        }
    }), s = r.createClass({
        displayName: "Dialog",
        propTypes: {
            title: r.PropTypes.string.isRequired,
            no_backdrop: r.PropTypes.bool,
            body: r.PropTypes.element.isRequired,
            footer: r.PropTypes.element.isRequired,
            id: r.PropTypes.string
        },
        componentDidMount: function() {
            document.activeElement && document.activeElement.blur();
        },
        render: function() {
            var t;
            return this.props.no_backdrop || (t = r.createElement("div", {
                className: "modal-backdrop fade in"
            })), r.createElement("div", null, t, r.createElement("div", {
                className: "modal fade in dialog-ct-visible",
                tabindex: "-1"
            }, r.createElement("div", {
                id: this.props.id,
                className: "modal-dialog"
            }, r.createElement("div", {
                className: "modal-content"
            }, r.createElement("div", {
                className: "modal-header"
            }, r.createElement("h4", {
                className: "modal-title"
            }, this.props.title)), this.props.body, this.props.footer))));
        }
    }), c = function(t, e) {
        function n() {
            null !== u.props && void 0 !== u.props || (u.props = {}), u.props.footer = r.createElement(o, u.footerProps), 
            u.render();
        }
        var i = "cockpit_modal_dialog";
        if (document.getElementById(i)) return void console.warn("Unable to create nested dialog");
        var a = document.createElement("div");
        a.id = i, document.body.appendChild(a);
        var c, l = function() {
            c && c.apply(this, arguments), r.unmountComponentAtNode(a), a.remove();
        }, u = {};
        return u.props = null, u.footerProps = null, u.render = function() {
            u.props.footer = r.createElement(o, u.footerProps), r.render(r.createElement(s, u.props), a);
        }, u.setFooterProps = function(t) {
            t.static_error && console.warn(t.static_error), u.footerProps = t, null !== u.footerProps && void 0 !== u.footerProps || (u.footerProps = {}), 
            u.footerProps.dialog_done != l && (c = u.footerProps.dialog_done, u.footerProps.dialog_done = l), 
            n();
        }, u.setProps = function(t) {
            u.props = t, n();
        }, u.setFooterProps(e), u.setProps(t), u.render(), u;
    };
    t.exports = {
        Dialog: s,
        DialogFooter: o,
        show_modal_dialog: c
    };
}, function(t, e) {}, , function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t, e) {
        if (t[e]) {
            var n = Object.assign({}, t);
            return delete n[e], n;
        }
        return t;
    }
    function r(t, e) {
        switch (t = t || {}, e.type) {
          case "OVIRT_UPDATE_HOST":
            var n = Object.assign({}, t);
            return n[e.payload.id] = n[e.payload.id] || {}, Object.assign(n[e.payload.id], e.payload), 
            n;

          case "OVIRT_REMOVE_HOST":
            return i(t, e.payload.id);

          default:
            return t;
        }
    }
    function a(t, e) {
        switch (t = t || {}, e.type) {
          case "OVIRT_UPDATE_CLUSTER":
            var n = Object.assign({}, t);
            return n[e.payload.id] = n[e.payload.id] || {}, Object.assign(n[e.payload.id], e.payload), 
            n;

          case "OVIRT_REMOVE_CLUSTER":
            return i(t, e.payload.id);

          default:
            return t;
        }
    }
    function o(t, e) {
        switch (t = t || {}, e.type) {
          case "OVIRT_UPDATE_ICON":
            var n = Object.assign({}, t);
            return n[e.payload.id] = n[e.payload.id] || {}, Object.assign(n[e.payload.id], e.payload), 
            n;

          default:
            return t;
        }
    }
    function s(t, e) {
        switch (t = t || {
            loginInProgress: !0
        }, e.type) {
          case "OVIRT_LOGIN_IN_PROGRESS":
            return Object.assign({}, t, {
                loginInProgress: e.payload.loginInProgress
            });

          case "OVIRT_SET_HOSTNAME":
            return Object.assign({}, t, {
                hostname: e.payload.hostname
            });

          default:
            return t;
        }
    }
    function c(t, e) {
        switch (t = t || {}, e.type) {
          case "OVIRT_UPDATE_VM":
            var n = Object.assign({}, t);
            return n[e.payload.id] = n[e.payload.id] || {}, Object.assign(n[e.payload.id], e.payload), 
            n;

          case "OVIRT_REMOVE_VM":
            return i(t, e.payload.id);

          case "VM_ACTION_FAILED":
            var r = Object.getOwnPropertyNames(t).filter(function(n) {
                return t[n].name === e.payload.name;
            });
            if (!r || 0 === r.length) return t;
            var a = Object.assign({}, t[r], {
                lastMessage: e.payload.message,
                lastMessageDetail: e.payload.detail
            }), o = {};
            o[r] = a;
            var s = Object.assign({}, t, o);
            return s;

          default:
            return t;
        }
    }
    function l(t, e) {
        switch (t = t || {}, e.type) {
          case "OVIRT_UPDATE_TEMPLATE":
            var n = Object.assign({}, t);
            return n[e.payload.id] = n[e.payload.id] || {}, Object.assign(n[e.payload.id], e.payload), 
            n;

          case "OVIRT_REMOVE_TEMPLATE":
            return i(t, e.payload.id);

          case "VM_ACTION_FAILED":
            if ((0, f.logDebug)("templateReducer() VM_ACTION_FAILED payload: " + JSON.stringify(e.payload)), 
            e.payload.extraPayload && e.payload.extraPayload.templateName) {
                var r = Object.getOwnPropertyNames(t).filter(function(n) {
                    return t[n].name === e.payload.extraPayload.templateName;
                }), a = Object.assign({}, t[r], {
                    lastMessage: e.payload.message,
                    lastMessageDetail: e.payload.detail
                }), o = {};
                o[r] = a;
                var s = Object.assign({}, t, o);
                return (0, f.logDebug)("templateReducer() VM_ACTION_FAILED: " + JSON.stringify(s)), 
                s;
            }
            return t;

          default:
            return t;
        }
    }
    function u(t, e) {
        switch (t = t || {
            route: "hostvms"
        }, e.type) {
          case "OVIRT_GOTO_SUBPAGE":
            return Object.assign({}, t, {
                route: e.payload.target
            });

          default:
            return t;
        }
    }
    function d(t, e, n, i) {
        var r = n(t[i], e);
        if (t[i] !== r) {
            var a = {};
            a[i] = r, t = Object.assign({}, t, a);
        }
        return t;
    }
    function h(t, e) {
        t = t || {
            hosts: {}
        };
        var n = t;
        return n = d(n, e, r, "hosts"), n = d(n, e, c, "vms"), n = d(n, e, l, "templates"), 
        n = d(n, e, a, "clusters"), n = d(n, e, o, "icons"), n = d(n, e, s, "ovirtConfig"), 
        n = d(n, e, u, "router");
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.ovirtReducer = h;
    var f = n(19);
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(20), a = i(r), o = n(12), s = i(o), c = n(33), l = n(19);
    s.default;
    var u = a.default.gettext, d = function(t) {
        var e = t.vm, n = t.providerState, i = t.dispatch, r = n.vms[e.id];
        if (!r) return null;
        var a = (0, l.vmId)(e.name) + "-ovirt";
        return s.default.createElement("div", {
            className: "btn-group"
        }, s.default.createElement("button", {
            className: "btn btn-default",
            id: a + "-suspendbutton",
            onClick: function() {
                return i((0, c.suspendVm)({
                    id: r.id,
                    name: r.name,
                    connectionName: e.connectionName
                }));
            }
        }, u("Suspend")));
    };
    e.default = d;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(20), a = i(r), o = n(12), s = i(o), c = n(19), l = n(36);
    n(45), s.default;
    var u = a.default.gettext, d = function(t) {
        var e = t.title, n = t.value, i = t.id;
        return s.default.createElement("tr", null, s.default.createElement("td", null, s.default.createElement("label", {
            className: "control-label"
        }, e)), s.default.createElement("td", {
            id: i
        }, n));
    }, h = function(t) {
        var e = t.icons, n = t.iconId;
        if (!(n && e && e[n] && e[n].data)) return null;
        var i = e[n], r = "data:" + i.type + ";base64," + i.data;
        return s.default.createElement("img", {
            src: r,
            className: "ovirt-provider-overview-icon",
            alt: u("VM icon")
        });
    }, f = function(t) {
        var e = t.vm, n = t.providerState, i = n.vms[e.id];
        if (!i) return null;
        var r = (0, c.vmId)(e.name) + "-ovirt";
        return s.default.createElement("td", {
            className: "ovirt-provider-listing-top-column"
        }, s.default.createElement("div", {
            className: "ovirt-provider-columns-container"
        }, s.default.createElement("div", {
            className: "ovirt-provider-columns-one"
        }, s.default.createElement("table", {
            className: "form-table-ct"
        }, s.default.createElement(d, {
            title: u("Description:"),
            value: i.description,
            id: r + "-description"
        }), s.default.createElement(d, {
            title: u("Address:"),
            value: i.fqdn,
            id: r + "-fqdn"
        }), s.default.createElement(d, {
            title: u("Running Since:"),
            value: (0, l.formatDateTime)(i.startTime),
            id: r + "-starttime"
        }))), s.default.createElement("div", {
            className: "ovirt-provider-columns-two"
        }, s.default.createElement(h, {
            icons: n.icons,
            iconId: i.icons.largeId
        }))));
    };
    e.default = f;
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(20), a = i(r), o = n(12), s = i(o), c = n(30), l = i(c);
    s.default;
    var u = a.default.gettext, d = function(t) {
        var e = t.vm, n = t.providerState, i = n.vms[e.id];
        if (!i) return null;
        var r = a.default.format(u("Please refer to oVirt's $0 for more information about Remote Viewer setup."), '<a href="' + l.default.CONSOLE_CLIENT_RESOURCES_URL + '" target="_blank">Console Client Resources</a>');
        return s.default.createElement("div", {
            dangerouslySetInnerHTML: {
                __html: r
            }
        });
    };
    e.default = d;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    function s(t) {
        var e = t.host;
        return "up" === e.status;
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var c = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), l = n(20), u = i(l), d = n(12), h = i(d), f = n(36), p = n(19), g = n(33), m = n(48), v = i(m), y = n(49), x = i(y), _ = n(50), b = i(_);
    n(51), h.default;
    var w = u.default.gettext, S = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                confirmAction: !1,
                selectedHostId: null
            }, n;
        }
        return o(e, t), c(e, [ {
            key: "render",
            value: function() {
                var t = this, e = this.props, n = e.vm, i = e.hosts, r = e.dispatch, a = function(e) {
                    t.setState({
                        selectedHostId: e.target.value
                    });
                }, o = function() {
                    t.setState({
                        confirmAction: !0
                    });
                }, c = function() {
                    t.setState({
                        confirmAction: !1
                    });
                }, l = function() {
                    t.setState({
                        confirmAction: !1
                    }), r((0, g.migrateVm)(n.id, n.name, t.state.selectedHostId));
                }, u = (0, p.vmId)(n.name) + "-ovirt";
                return h.default.createElement("tr", null, h.default.createElement("td", null, this.state.confirmAction ? h.default.createElement(v.default, {
                    confirmText: w("Confirm migration"),
                    dismissText: w("Cancel"),
                    onYes: l,
                    onNo: c
                }) : h.default.createElement("button", {
                    className: "btn btn-default btn-danger",
                    onClick: o,
                    id: u + "-migratetobutton"
                }, w("Migrate To:"))), h.default.createElement("td", null, h.default.createElement("select", {
                    className: "combobox form-control ovirt-provider-migrateto-combo",
                    onChange: a,
                    disabled: this.state.confirmAction,
                    id: u + "-migratetoselect"
                }, h.default.createElement("option", {
                    value: null,
                    selected: !this.state.selectedHostId
                }, h.default.createElement("i", null, w("Automatically selected host"))), Object.getOwnPropertyNames(i).filter(function(t) {
                    return s({
                        host: i[t]
                    });
                }).map(function(e) {
                    return h.default.createElement("option", {
                        value: e,
                        selected: e === t.state.selectedHostId,
                        disabled: (0, f.isSameHostAddress)(i[e].address)
                    }, i[e].name);
                }))));
            }
        } ]), e;
    }(h.default.Component), T = function(t) {
        var e = t.clusterVm, n = t.templates, i = t.id;
        if (!n || !e) return null;
        var r = n[e.templateId];
        if (!r) return h.default.createElement(x.default, {
            descr: w("Base template:"),
            value: ""
        });
        var a = r.version;
        return h.default.createElement(x.default, {
            descr: w("Base template:"),
            value: a.name ? a.name + " (" + r.name + ")" : r.name,
            id: i
        });
    }, E = function(t) {
        var e = t.clusterVm, n = t.id, i = w("disabled");
        return e.highAvailability && "true" === e.highAvailability.enabled && (i = w("enabled")), 
        h.default.createElement(x.default, {
            descr: w("HA:"),
            value: i,
            id: n
        });
    }, A = function(t) {
        var e = t.vm, n = t.providerState, i = t.dispatch, r = n.vms[e.id];
        if (!r) return h.default.createElement("div", null, w("This virtual machine is not managed by oVirt"));
        var a = (0, p.vmId)(e.name) + "-ovirt";
        return h.default.createElement("table", {
            className: "machines-width-max"
        }, h.default.createElement("tr", {
            className: "machines-listing-ct-body-detail"
        }, h.default.createElement("td", {
            className: "ovirt-provider-listing-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(x.default, {
            descr: w("Description:"),
            value: r.description,
            id: a + "-description"
        }), h.default.createElement(T, {
            clusterVm: r,
            templates: n.templates,
            id: a + "-template"
        }), h.default.createElement(x.default, {
            descr: w("OS Type:"),
            value: r.os.type,
            id: a + "-ostype"
        }))), h.default.createElement("td", {
            className: "ovirt-provider-listing-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(E, {
            clusterVm: r,
            id: a + "-ha"
        }), h.default.createElement(x.default, {
            descr: w("Stateless:"),
            value: (0, b.default)("stateless", r.stateless),
            id: a + "-stateless"
        }), h.default.createElement(x.default, {
            descr: w("Optimized for:"),
            value: r.type,
            id: a + "-optimizedfor"
        }))), h.default.createElement("td", {
            className: "ovirt-provider-listing-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(S, {
            vm: e,
            hosts: n.hosts,
            dispatch: i
        })))));
    };
    e.default = A;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r);
    a.default;
    var o = function(t) {
        var e = t.confirmText, n = t.dismissText, i = t.onYes, r = t.onNo;
        return a.default.createElement("span", null, a.default.createElement("button", {
            className: "btn btn-danger btn-xs",
            type: "button",
            onClick: i
        }, e), " ", a.default.createElement("button", {
            className: "btn btn-primary btn-xs",
            type: "button",
            onClick: r
        }, n));
    };
    e.default = o;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r);
    a.default;
    var o = function(t) {
        var e = t.id, n = t.descr, i = t.value, r = t.descrClass, o = t.valueClass;
        return a.default.createElement("tr", null, a.default.createElement("td", {
            className: r ? r : "top"
        }, a.default.createElement("label", {
            className: "control-label"
        }, n)), a.default.createElement("td", {
            id: e,
            className: o
        }, i));
    };
    o.propTypes = {
        id: r.PropTypes.string,
        descr: r.PropTypes.string.isRequired,
        descrClass: r.PropTypes.string,
        valueClass: r.PropTypes.string,
        value: r.PropTypes.oneOfType([ r.PropTypes.string, r.PropTypes.element ]).isRequired
    }, e.default = o;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        return t in l ? e in l[t] ? l[t][e] : ((0, s.logDebug)("ovirt rephraseUI(key='" + t + "', original='" + e + "'): unknown original value"), 
        e) : ((0, s.logDebug)("ovirt rephraseUI(key='" + t + "', original='" + e + "'): unknown key"), 
        e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var a = n(20), o = i(a), s = n(19), c = o.default.gettext, l = {
        hostStatus: {
            preparing_for_maintenance: c("Preparing for Maintenance"),
            up: c("up"),
            down: c("down"),
            error: c("error"),
            initializing: c("initializing"),
            install_failed: c("installation failed"),
            maintenance: c("maintenance"),
            non_operational: c("non operational"),
            non_responsive: c("non responsive"),
            pending_approval: c("pending approval"),
            connecting: c("connecting"),
            reboot: c("reboot"),
            unassigned: c("unassigned"),
            installing_os: c("installing OS"),
            kdumping: c("kdumping")
        },
        stateless: {
            true: c("yes"),
            false: c("no")
        }
    };
    e.default = r;
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(53), l = i(c), u = n(74), d = i(u), h = n(75), f = i(h), p = n(76), g = i(p), m = n(33), v = n(78), y = i(v), x = n(80), _ = i(x), b = n(35), w = s.default.gettext, S = function(t) {
        var e = t.ovirtConfig;
        return e && e.loginInProgress ? a.default.createElement("p", {
            className: "ovirt-login-in-progress"
        }, w("oVirt login in progress"), " ", a.default.createElement("span", {
            className: "spinner spinner-xs spinner-inline"
        })) : null;
    }, T = function(t) {
        var e = t.ovirtConfig, n = t.router, i = t.dispatch;
        if (!e) return null;
        var r = function(t) {
            i((0, m.goToSubpage)(t));
        }, o = function(t) {
            return n && (n.route === t || !n.route && "hostvms" === t) ? " top-menu-selected" : "";
        };
        return a.default.createElement("div", {
            className: "content-extra-header"
        }, a.default.createElement("a", {
            className: "top-menu-link" + o("hostvms"),
            href: "#",
            id: "ovirt-topnav-hostvms",
            onClick: function() {
                return r("hostvms");
            }
        }, w("Host")), a.default.createElement("a", {
            className: "top-menu-link" + o("clustervms"),
            href: "#",
            id: "ovirt-topnav-clustervms",
            onClick: function() {
                return r("clustervms");
            }
        }, w("Cluster")), a.default.createElement("a", {
            className: "top-menu-link" + o("clustertemplates"),
            href: "#",
            id: "ovirt-topnav-clustertemplates",
            onClick: function() {
                return r("clustertemplates");
            }
        }, w("Templates")), a.default.createElement("a", {
            className: "top-menu-link" + o("vdsm"),
            href: "#",
            id: "ovirt-topnav-vdsm",
            onClick: function() {
                return r("vdsm");
            }
        }, w("VDSM")), a.default.createElement(S, {
            ovirtConfig: e
        }));
    }, E = function(t) {
        var e = t.vms, n = t.config, i = t.dispatch, r = t.host, o = r && [ (0, y.default)({
            dispatch: i,
            host: r
        }) ];
        return a.default.createElement("div", {
            className: "container-fluid"
        }, a.default.createElement(_.default, {
            host: r
        }), a.default.createElement(l.default, {
            vms: e,
            config: n,
            dispatch: i,
            actions: o
        }));
    }, A = function(t) {
        var e = t.store, n = e.getState(), i = e.dispatch, r = n.vms, o = n.config, s = void 0, c = void 0, l = void 0;
        o.providerState && (s = o.providerState.ovirtConfig, c = o.providerState.hosts, 
        l = o.providerState.router);
        var u = (0, b.getHost)(c, s), h = l && l.route, p = null;
        switch (h) {
          case "clustervms":
            p = a.default.createElement(d.default, {
                config: o,
                dispatch: i
            });
            break;

          case "clustertemplates":
            p = a.default.createElement(f.default, {
                config: o,
                dispatch: i
            });
            break;

          case "vdsm":
            p = a.default.createElement(g.default, null);
            break;

          default:
            p = a.default.createElement(E, {
                vms: r,
                config: o,
                dispatch: i,
                host: u
            });
        }
        return a.default.createElement("div", {
            className: "main-app-div"
        }, p, a.default.createElement(T, {
            ovirtConfig: s,
            router: l,
            dispatch: i
        }));
    };
    A.propTypes = {
        store: a.default.PropTypes.object.isRequired
    }, e.default = A;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    function s(t) {
        return function(e) {
            if (e && 0 === e.button) return e.stopPropagation(), t(e);
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.DropdownButtons = e.StateIcon = void 0;
    var c = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), l = n(20), u = i(l), d = n(12), h = i(d), f = n(22), p = n(19), g = n(54), m = i(g), v = n(57), y = n(59), x = i(y), _ = n(60), b = i(_), w = n(61), S = i(w), T = n(70), E = n(49), A = i(E), C = n(72), P = i(C), k = u.default.gettext, M = function() {
        return h.default.createElement("div", {
            className: "cockpit-log-warning"
        }, h.default.createElement("div", {
            className: "blank-slate-pf"
        }, h.default.createElement("div", {
            className: "blank-slate-pf-icon"
        }, h.default.createElement("i", {
            className: "pficon pficon-virtual-machine"
        }), h.default.createElement("h1", null, k("No VM is running or defined on this host")))));
    }, O = function(t) {
        var e = t.vm, n = t.config, i = t.dispatch, r = t.onStart, a = t.onReboot, o = t.onForceReboot, c = t.onShutdown, l = t.onForceoff, u = t.onSendNMI, d = (0, 
        p.vmId)(e.name), f = e.state, g = null;
        n.provider.canReset(f) && (g = L({
            buttons: [ {
                title: k("Restart"),
                action: a,
                id: d + "-reboot"
            }, {
                title: k("Force Restart"),
                action: o,
                id: d + "-forceReboot"
            } ]
        }));
        var m = null;
        if (n.provider.canShutdown(f)) {
            var v = [ {
                title: k("Shut Down"),
                action: c,
                id: d + "-off"
            }, {
                title: k("Force Shut Down"),
                action: l,
                id: d + "-forceOff"
            } ];
            n.provider.canSendNMI && n.provider.canSendNMI(f) && v.push({
                title: k("Send Non-Maskable Interrupt"),
                action: u,
                id: d + "-sendNMI"
            }), m = L({
                buttons: v
            });
        }
        var y = null;
        n.provider.canRun(f) && (y = h.default.createElement("button", {
            className: "btn btn-default btn-danger",
            onClick: s(r),
            id: d + "-run"
        }, k("Run")));
        var x = null;
        if (n.provider.VmActions) {
            var _ = n.provider.VmActions;
            x = h.default.createElement(_, {
                vm: e,
                providerState: n.providerState,
                dispatch: i
            });
        }
        var b = null;
        return void 0 !== f && n.provider.canDelete && n.provider.canDelete(f, e.id, n.providerState) && (b = h.default.createElement("button", {
            className: "btn btn-danger",
            id: d + "-delete",
            onClick: s(function() {
                return (0, T.deleteDialog)(e, i);
            })
        }, k("Delete"))), h.default.createElement("div", null, g, m, y, x, b);
    };
    O.propTypes = {
        vm: d.PropTypes.object.isRequired,
        config: d.PropTypes.string.isRequired,
        dispatch: d.PropTypes.func.isRequired,
        onStart: d.PropTypes.func.isRequired,
        onReboot: d.PropTypes.func.isRequired,
        onForceReboot: d.PropTypes.func.isRequired,
        onShutdown: d.PropTypes.func.isRequired,
        onForceoff: d.PropTypes.func.isRequired,
        onSendNMI: d.PropTypes.func.isRequired
    };
    var N = function(t) {
        var e = t.onClick, n = t.className, i = t.title, r = t.state;
        return h.default.createElement("span", {
            title: i,
            "data-toggle": "tooltip",
            "data-placement": "left"
        }, r, " ", h.default.createElement("i", {
            onClick: s(e),
            className: n
        }));
    };
    N.propTypes = {
        onClick: d.PropTypes.func,
        className: d.PropTypes.string.isRequired,
        title: d.PropTypes.string.isRequired,
        state: d.PropTypes.string.isRequired
    };
    var V = e.StateIcon = function(t) {
        var e = t.state, n = t.config, i = t.valueId, r = t.extra;
        if (void 0 === e) return h.default.createElement("div", null);
        var a = {
            running: {
                className: "pficon pficon-ok icon-1x-vms",
                title: k("The VM is running.")
            },
            idle: {
                className: "pficon pficon-running icon-1x-vms",
                title: k("The VM is idle.")
            },
            paused: {
                className: "pficon pficon-pause icon-1x-vms",
                title: k("The VM is paused.")
            },
            shutdown: {
                className: "glyphicon glyphicon-wrench icon-1x-vms",
                title: k("The VM is going down.")
            },
            "shut off": {
                className: "fa fa-arrow-circle-o-down icon-1x-vms",
                title: k("The VM is down.")
            },
            crashed: {
                className: "pficon pficon-error-circle-o icon-1x-vms",
                title: k("The VM crashed.")
            },
            dying: {
                className: "pficon pficon-warning-triangle-o icon-1x-vms",
                title: k("The VM is in process of dying (shut down or crash is not completed).")
            },
            pmsuspended: {
                className: "pficon pficon-ok icon-1x-vms",
                title: k("The VM is suspended by guest power management.")
            }
        };
        return n.provider.vmStateMap && (a = Object.assign(a, n.provider.vmStateMap)), a[e] ? h.default.createElement("span", {
            title: a[e].title,
            "data-toggle": "tooltip",
            "data-placement": "left"
        }, r, h.default.createElement("span", {
            id: i
        }, (0, p.rephraseUI)("vmStates", e))) : h.default.createElement("small", null, e);
    };
    V.propTypes = {
        state: d.PropTypes.string.isRequired,
        config: d.PropTypes.string.isRequired,
        valueId: d.PropTypes.string,
        extra: d.PropTypes.any
    };
    var L = e.DropdownButtons = function(t) {
        var e = t.buttons;
        if (e.length > 1) {
            var n = e.filter(function(t) {
                return void 0 === e[0].id || e[0].id !== t.id;
            }).map(function(t) {
                return h.default.createElement("li", {
                    className: "presentation"
                }, h.default.createElement("a", {
                    role: "menuitem",
                    onClick: s(t.action),
                    id: t.id
                }, t.title));
            }), i = e[0].id ? e[0].id + "-caret" : void 0;
            return h.default.createElement("div", {
                className: "btn-group dropdown-buttons-container"
            }, h.default.createElement("button", {
                className: "btn btn-default btn-danger",
                id: e[0].id,
                onClick: s(e[0].action)
            }, e[0].title), h.default.createElement("button", {
                "data-toggle": "dropdown",
                className: "btn btn-default dropdown-toggle"
            }, h.default.createElement("span", {
                className: "caret",
                id: i
            })), h.default.createElement("ul", {
                role: "menu",
                className: "dropdown-menu"
            }, n));
        }
        return h.default.createElement("div", {
            className: "btn-group"
        }, h.default.createElement("button", {
            className: "btn btn-default btn-danger",
            onClick: s(e[0].action),
            id: e[0].id
        }, e[0].title));
    };
    L.propTypes = {
        buttons: d.PropTypes.array.isRequired
    };
    var R = function(t) {
        var e = t.vm, n = k("No boot device found");
        return e.bootOrder && e.bootOrder.devices && e.bootOrder.devices.length > 0 && (n = e.bootOrder.devices.map(function(t) {
            return t.type;
        }).join()), h.default.createElement(A.default, {
            id: (0, p.vmId)(e.name) + "-bootorder",
            descr: k("Boot Order:"),
            value: n
        });
    };
    R.propTypes = {
        vm: d.PropTypes.object.isRequired
    };
    var I = function(t) {
        var e = t.vm, n = t.config, i = t.dispatch, r = null;
        if (n.provider.VmOverviewColumn) {
            var a = n.provider.VmOverviewColumn;
            r = h.default.createElement(a, {
                vm: e,
                providerState: n.providerState
            });
        }
        return h.default.createElement("div", null, h.default.createElement(P.default, {
            vm: e,
            dispatch: i
        }), h.default.createElement("table", {
            className: "machines-width-max"
        }, h.default.createElement("tr", {
            className: "machines-listing-ct-body-detail"
        }, h.default.createElement("td", {
            className: "machines-listing-detail-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(A.default, {
            descr: k("Memory:"),
            value: u.default.format_bytes(1024 * (e.currentMemory ? e.currentMemory : 0))
        }), h.default.createElement(A.default, {
            id: (0, p.vmId)(e.name) + "-vcpus",
            descr: k("vCPUs:"),
            value: e.vcpus
        }))), h.default.createElement("td", {
            className: "machines-listing-detail-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(A.default, {
            id: (0, p.vmId)(e.name) + "-emulatedmachine",
            descr: k("Emulated Machine:"),
            value: e.emulatedMachine
        }), h.default.createElement(A.default, {
            id: (0, p.vmId)(e.name) + "-cputype",
            descr: k("CPU Type:"),
            value: e.cpuModel
        }))), h.default.createElement("td", {
            className: "machines-listing-detail-top-column"
        }, h.default.createElement("table", {
            className: "form-table-ct"
        }, h.default.createElement(R, {
            vm: e
        }), h.default.createElement(A.default, {
            id: (0, p.vmId)(e.name) + "-autostart",
            descr: k("Autostart:"),
            value: (0, p.rephraseUI)("autostart", e.autostart)
        }))), r)));
    };
    I.propTypes = {
        vm: d.PropTypes.object.isRequired,
        config: d.PropTypes.object.isRequired
    };
    var D = function(t) {
        function e() {
            return r(this, e), a(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
        }
        return o(e, t), c(e, [ {
            key: "componentDidMount",
            value: function() {
                this.props.onUsageStartPolling();
            }
        }, {
            key: "componentWillUnmount",
            value: function() {
                this.props.onUsageStopPolling();
            }
        }, {
            key: "render",
            value: function() {
                var t = this.props.vm, e = 220, n = 170, i = t.rssMemory ? t.rssMemory : 0, r = t.currentMemory ? t.currentMemory : 0, a = r - i;
                a = a < 0 ? 0 : a;
                var o = t.vcpus > 0 ? t.vcpus : 0, s = t.cpuUsage / (o > 0 ? o : 1);
                s = isNaN(s) ? 0 : s, s = (0, p.toFixedPrecision)(s, 1), (0, p.logDebug)("VmUsageTab.render(): rssMem: " + i + " KiB, memTotal: " + r + " KiB, available: " + a + " KiB, totalCpus: " + o + ", cpuUsage: " + s);
                var c = {
                    columns: [ [ k("Used"), (0, p.toGigaBytes)(i, "KiB") ], [ k("Available"), (0, p.toGigaBytes)(a, "KiB") ] ],
                    groups: [ [ "used", "available" ] ],
                    order: null
                }, l = {
                    columns: [ [ k("Used"), s ], [ k("Available"), 100 - s ] ],
                    groups: [ [ "used", "available" ] ],
                    order: null
                }, d = {
                    width: e,
                    height: n
                };
                return h.default.createElement("table", null, h.default.createElement("tr", null, h.default.createElement("td", null, h.default.createElement(m.default, {
                    data: c,
                    size: d,
                    width: "8",
                    tooltipText: " ",
                    primaryTitle: (0, p.toGigaBytes)(i, "KiB"),
                    secondaryTitle: "GB",
                    caption: "used from " + u.default.format_bytes(1024 * r) + " memory"
                })), h.default.createElement("td", null, h.default.createElement(m.default, {
                    data: l,
                    size: d,
                    width: "8",
                    tooltipText: " ",
                    primaryTitle: s,
                    secondaryTitle: "%",
                    caption: "used from " + o + " vCPUs"
                }))));
            }
        } ]), e;
    }(h.default.Component);
    D.propTypes = {
        vm: h.default.PropTypes.object.isRequired,
        onUsageStartPolling: d.PropTypes.func.isRequired,
        onUsageStopPolling: d.PropTypes.func.isRequired
    };
    var G = function(t) {
        var e = t.vm, n = t.config, i = t.hostDevices, r = t.onStart, a = t.onShutdown, o = t.onForceoff, s = t.onReboot, c = t.onForceReboot, l = t.onUsageStartPolling, u = t.onUsageStopPolling, d = t.onSendNMI, f = t.dispatch, g = e.lastMessage && h.default.createElement("span", {
            className: "pficon-warning-triangle-o machines-status-alert"
        }), m = h.default.createElement(V, {
            state: e.state,
            config: n,
            valueId: (0, p.vmId)(e.name) + "-state",
            extra: g
        }), y = h.default.createElement("div", {
            id: (0, p.vmId)(e.name) + "-usage"
        }, k("Usage")), _ = h.default.createElement("div", {
            id: (0, p.vmId)(e.name) + "-disks"
        }, k("Disks")), w = h.default.createElement("div", {
            id: (0, p.vmId)(e.name) + "-networks"
        }, k("Networks")), T = h.default.createElement("div", {
            id: (0, p.vmId)(e.name) + "-consoles"
        }, k("Consoles")), E = [ {
            name: k("Overview"),
            renderer: I,
            data: {
                vm: e,
                config: n,
                dispatch: f
            }
        }, {
            name: y,
            renderer: D,
            data: {
                vm: e,
                onUsageStartPolling: l,
                onUsageStopPolling: u
            },
            presence: "onlyActive"
        }, {
            name: _,
            renderer: x.default,
            data: {
                vm: e,
                provider: n.provider
            },
            presence: "onlyActive"
        }, {
            name: w,
            renderer: b.default,
            data: {
                vm: e,
                dispatch: f,
                hostDevices: i
            }
        }, {
            name: T,
            renderer: S.default,
            data: {
                vm: e,
                config: n,
                dispatch: f
            }
        } ];
        n.provider.vmTabRenderers && (E = E.concat(n.provider.vmTabRenderers.map(function(t) {
            var i = t.name;
            return t.idPostfix && (i = h.default.createElement("div", {
                id: (0, p.vmId)(e.name) + "-" + t.idPostfix
            }, t.name)), {
                name: i,
                renderer: t.component,
                data: {
                    vm: e,
                    providerState: n.providerState,
                    dispatch: f
                }
            };
        })));
        var A = h.default.createElement("span", {
            id: (0, p.vmId)(e.name) + "-row"
        }, e.name);
        return h.default.createElement(v.ListingRow, {
            rowId: "" + (0, p.vmId)(e.name),
            columns: [ {
                name: A,
                header: !0
            }, (0, p.rephraseUI)("connections", e.connectionName), m ],
            tabRenderers: E,
            listingActions: O({
                vm: e,
                config: n,
                dispatch: f,
                onStart: r,
                onReboot: s,
                onForceReboot: c,
                onShutdown: a,
                onForceoff: o,
                onSendNMI: d
            })
        });
    };
    G.propTypes = {
        vm: d.PropTypes.object.isRequired,
        config: d.PropTypes.object.isRequired,
        hostDevices: d.PropTypes.object.isRequired,
        onStart: d.PropTypes.func.isRequired,
        onShutdown: d.PropTypes.func.isRequired,
        onForceoff: d.PropTypes.func.isRequired,
        onReboot: d.PropTypes.func.isRequired,
        onForceReboot: d.PropTypes.func.isRequired,
        onUsageStartPolling: d.PropTypes.func.isRequired,
        onUsageStopPolling: d.PropTypes.func.isRequired,
        onSendNMI: h.default.PropTypes.func.isRequired,
        dispatch: d.PropTypes.func.isRequired
    };
    var F = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.deviceProxyHandler = n.deviceProxyHandler.bind(n), n.client = u.default.dbus("org.freedesktop.NetworkManager", {}), 
            n.deviceProxies = n.client.proxies("org.freedesktop.NetworkManager.Device"), n.deviceProxies.addEventListener("changed", n.deviceProxyHandler), 
            n.deviceProxies.addEventListener("removed", n.deviceProxyHandler), n;
        }
        return o(e, t), c(e, [ {
            key: "componentWillUnmount",
            value: function() {
                this.client.close();
            }
        }, {
            key: "deviceProxyHandler",
            value: function() {
                this.forceUpdate();
            }
        }, {
            key: "render",
            value: function() {
                var t = this, e = this.props, n = e.vms, i = e.config, r = e.dispatch, a = e.actions;
                if (0 === n.length) return h.default.createElement("div", {
                    className: "container-fluid"
                }, h.default.createElement(M, null));
                var o = function(t, e) {
                    return t.name.localeCompare(e.name);
                }, s = [];
                return a && (s = s.concat(a)), h.default.createElement("div", {
                    className: "container-fluid"
                }, h.default.createElement(v.Listing, {
                    title: k("Virtual Machines"),
                    columnTitles: [ k("Name"), k("Connection"), k("State") ],
                    actions: s
                }, n.sort(o).map(function(e) {
                    return h.default.createElement(G, {
                        vm: e,
                        config: i,
                        hostDevices: t.deviceProxies,
                        onStart: function() {
                            return r((0, f.startVm)(e));
                        },
                        onReboot: function() {
                            return r((0, f.rebootVm)(e));
                        },
                        onForceReboot: function() {
                            return r((0, f.forceRebootVm)(e));
                        },
                        onShutdown: function() {
                            return r((0, f.shutdownVm)(e));
                        },
                        onForceoff: function() {
                            return r((0, f.forceVmOff)(e));
                        },
                        onUsageStartPolling: function() {
                            return r((0, f.usageStartPolling)(e));
                        },
                        onUsageStopPolling: function() {
                            return r((0, f.usageStopPolling)(e));
                        },
                        onSendNMI: function() {
                            return r((0, f.sendNMI)(e));
                        },
                        dispatch: r
                    });
                })));
            }
        } ]), e;
    }(h.default.Component);
    F.propTypes = {
        vms: d.PropTypes.object.isRequired,
        config: d.PropTypes.object.isRequired,
        dispatch: d.PropTypes.func.isRequired
    }, e.default = F;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(27), l = i(c), u = n(12), d = i(u), h = n(55), f = i(h), p = n(19), g = 0, m = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.domId = "chart-donut-" + g++, n;
        }
        return o(e, t), s(e, [ {
            key: "prepareProps",
            value: function(t) {
                var e = {
                    data: t.data ? t.data : {},
                    size: t.size ? t.size : {
                        width: 150,
                        height: 100
                    },
                    width: t.width ? t.width : 10,
                    tooltipText: t.tooltipText,
                    primaryTitle: t.primaryTitle,
                    secondaryTitle: t.secondaryTitle,
                    caption: t.caption ? t.caption : ""
                };
                return e.data.type = "donut", e;
            }
        }, {
            key: "componentDidMount",
            value: function() {
                this._renderChart();
            }
        }, {
            key: "componentWillUnmount",
            value: function() {
                this.donutChart.destroy();
            }
        }, {
            key: "shouldComponentUpdate",
            value: function(t) {
                if (this.props.data) {
                    var e = JSON.stringify(this.props.data.columns) !== JSON.stringify(t.data.columns);
                    return (0, p.logDebug)("shouldComponentUpdate() " + e + "\nold: " + JSON.stringify(this.props.data.columns) + "\nnew: " + JSON.stringify(t.data.columns)), 
                    e;
                }
                return !0;
            }
        }, {
            key: "_renderChart",
            value: function() {
                (0, p.logDebug)("DonutChart._render() called");
                var t = "#" + this.domId, e = (0, l.default)().c3ChartDefaults(), n = e.getDefaultDonutConfig(""), i = this.prepareProps(this.props);
                n.bindto = t, n.data = i.data, n.size = i.size, n.donut.width = i.width, n.tooltip = i.tooltipText ? {
                    contents: (0, l.default)().pfGetUtilizationDonutTooltipContentsFn(i.tooltipText)
                } : n.tooltip;
                try {
                    this.donutChart = f.default.generate(n), (0, l.default)().pfSetDonutChartTitle(t, i.primaryTitle, i.secondaryTitle);
                } catch (t) {
                    (0, p.logDebug)("Exception thrown when rendering donut chart: ", t);
                }
            }
        }, {
            key: "render",
            value: function() {
                return this._renderChart(), d.default.createElement("div", null, d.default.createElement("div", {
                    id: this.domId
                }), d.default.createElement("div", {
                    className: "usage-donut-caption"
                }, this.props.caption));
            }
        } ]), e;
    }(d.default.Component);
    e.default = m;
}, function(t, e, n) {
    !function(e, n) {
        t.exports = n();
    }(this, function() {
        "use strict";
        function t(t, e) {
            var n = this;
            n.component = t, n.params = e || {}, n.d3 = t.d3, n.scale = n.d3.scale.linear(), 
            n.range, n.orient = "bottom", n.innerTickSize = 6, n.outerTickSize = this.params.withOuterTick ? 6 : 0, 
            n.tickPadding = 3, n.tickValues = null, n.tickFormat, n.tickArguments, n.tickOffset = 0, 
            n.tickCulling = !0, n.tickCentered, n.tickTextCharSize, n.tickTextRotate = n.params.tickTextRotate, 
            n.tickLength, n.axis = n.generateAxis();
        }
        function e(t, e, n) {
            this.owner = t, M.chart.internal[e] = n;
        }
        function i(t) {
            var e = this.internal = new r(this);
            e.loadConfig(t), e.beforeInit(t), e.init(), e.afterInit(t), function t(e, n, i) {
                Object.keys(e).forEach(function(r) {
                    n[r] = e[r].bind(i), Object.keys(e[r]).length > 0 && t(e[r], n[r], i);
                });
            }(P, this, this);
        }
        function r(t) {
            var e = this;
            e.d3 = window.d3 ? window.d3 : n(56), e.api = t, e.config = e.getDefaultConfig(), 
            e.data = {}, e.cache = {}, e.axes = {};
        }
        var a, o, s = {
            target: "c3-target",
            chart: "c3-chart",
            chartLine: "c3-chart-line",
            chartLines: "c3-chart-lines",
            chartBar: "c3-chart-bar",
            chartBars: "c3-chart-bars",
            chartText: "c3-chart-text",
            chartTexts: "c3-chart-texts",
            chartArc: "c3-chart-arc",
            chartArcs: "c3-chart-arcs",
            chartArcsTitle: "c3-chart-arcs-title",
            chartArcsBackground: "c3-chart-arcs-background",
            chartArcsGaugeUnit: "c3-chart-arcs-gauge-unit",
            chartArcsGaugeMax: "c3-chart-arcs-gauge-max",
            chartArcsGaugeMin: "c3-chart-arcs-gauge-min",
            selectedCircle: "c3-selected-circle",
            selectedCircles: "c3-selected-circles",
            eventRect: "c3-event-rect",
            eventRects: "c3-event-rects",
            eventRectsSingle: "c3-event-rects-single",
            eventRectsMultiple: "c3-event-rects-multiple",
            zoomRect: "c3-zoom-rect",
            brush: "c3-brush",
            focused: "c3-focused",
            defocused: "c3-defocused",
            region: "c3-region",
            regions: "c3-regions",
            title: "c3-title",
            tooltipContainer: "c3-tooltip-container",
            tooltip: "c3-tooltip",
            tooltipName: "c3-tooltip-name",
            shape: "c3-shape",
            shapes: "c3-shapes",
            line: "c3-line",
            lines: "c3-lines",
            bar: "c3-bar",
            bars: "c3-bars",
            circle: "c3-circle",
            circles: "c3-circles",
            arc: "c3-arc",
            arcs: "c3-arcs",
            area: "c3-area",
            areas: "c3-areas",
            empty: "c3-empty",
            text: "c3-text",
            texts: "c3-texts",
            gaugeValue: "c3-gauge-value",
            grid: "c3-grid",
            gridLines: "c3-grid-lines",
            xgrid: "c3-xgrid",
            xgrids: "c3-xgrids",
            xgridLine: "c3-xgrid-line",
            xgridLines: "c3-xgrid-lines",
            xgridFocus: "c3-xgrid-focus",
            ygrid: "c3-ygrid",
            ygrids: "c3-ygrids",
            ygridLine: "c3-ygrid-line",
            ygridLines: "c3-ygrid-lines",
            axis: "c3-axis",
            axisX: "c3-axis-x",
            axisXLabel: "c3-axis-x-label",
            axisY: "c3-axis-y",
            axisYLabel: "c3-axis-y-label",
            axisY2: "c3-axis-y2",
            axisY2Label: "c3-axis-y2-label",
            legendBackground: "c3-legend-background",
            legendItem: "c3-legend-item",
            legendItemEvent: "c3-legend-item-event",
            legendItemTile: "c3-legend-item-tile",
            legendItemHidden: "c3-legend-item-hidden",
            legendItemFocused: "c3-legend-item-focused",
            dragarea: "c3-dragarea",
            EXPANDED: "_expanded_",
            SELECTED: "_selected_",
            INCLUDED: "_included_"
        }, c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t;
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
        }, l = function(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
        }, u = function(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
        }, d = function(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e;
        }, h = function(t) {
            return t || 0 === t;
        }, f = function(t) {
            return "function" == typeof t;
        }, p = function(t) {
            return Array.isArray(t);
        }, g = function(t) {
            return "string" == typeof t;
        }, m = function(t) {
            return "undefined" == typeof t;
        }, v = function(t) {
            return "undefined" != typeof t;
        }, y = function(t) {
            return 10 * Math.ceil(t / 10);
        }, x = function(t) {
            return Math.ceil(t) + .5;
        }, _ = function(t) {
            return t[1] - t[0];
        }, b = function(t) {
            return "undefined" == typeof t || null === t || g(t) && 0 === t.length || "object" === ("undefined" == typeof t ? "undefined" : c(t)) && 0 === Object.keys(t).length;
        }, w = function(t) {
            return !k.isEmpty(t);
        }, S = function(t, e, n) {
            return v(t[e]) ? t[e] : n;
        }, T = function(t, e) {
            var n = !1;
            return Object.keys(t).forEach(function(i) {
                t[i] === e && (n = !0);
            }), n;
        }, E = function(t) {
            return "string" == typeof t ? t.replace(/</g, "&lt;").replace(/>/g, "&gt;") : t;
        }, A = function(t) {
            var e = t.getBoundingClientRect(), n = [ t.pathSegList.getItem(0), t.pathSegList.getItem(1) ], i = n[0].x, r = Math.min(n[0].y, n[1].y);
            return {
                x: i,
                y: r,
                width: e.width,
                height: e.height
            };
        };
        o = t.prototype, o.axisX = function(t, e, n) {
            t.attr("transform", function(t) {
                return "translate(" + Math.ceil(e(t) + n) + ", 0)";
            });
        }, o.axisY = function(t, e) {
            t.attr("transform", function(t) {
                return "translate(0," + Math.ceil(e(t)) + ")";
            });
        }, o.scaleExtent = function(t) {
            var e = t[0], n = t[t.length - 1];
            return e < n ? [ e, n ] : [ n, e ];
        }, o.generateTicks = function(t) {
            var e, n, i = this, r = [];
            if (t.ticks) return t.ticks.apply(t, i.tickArguments);
            for (n = t.domain(), e = Math.ceil(n[0]); e < n[1]; e++) r.push(e);
            return r.length > 0 && r[0] > 0 && r.unshift(r[0] - (r[1] - r[0])), r;
        }, o.copyScale = function() {
            var t, e = this, n = e.scale.copy();
            return e.params.isCategory && (t = e.scale.domain(), n.domain([ t[0], t[1] - 1 ])), 
            n;
        }, o.textFormatted = function(t) {
            var e = this, n = e.tickFormat ? e.tickFormat(t) : t;
            return "undefined" != typeof n ? n : "";
        }, o.updateRange = function() {
            var t = this;
            return t.range = t.scale.rangeExtent ? t.scale.rangeExtent() : t.scaleExtent(t.scale.range()), 
            t.range;
        }, o.updateTickTextCharSize = function(t) {
            var e = this;
            if (e.tickTextCharSize) return e.tickTextCharSize;
            var n = {
                h: 11.5,
                w: 5.5
            };
            return t.select("text").text(function(t) {
                return e.textFormatted(t);
            }).each(function(t) {
                var i = this.getBoundingClientRect(), r = e.textFormatted(t), a = i.height, o = r ? i.width / r.length : void 0;
                a && o && (n.h = a, n.w = o);
            }).text(""), e.tickTextCharSize = n, n;
        }, o.transitionise = function(t) {
            return this.params.withoutTransition ? t : this.d3.transition(t);
        }, o.isVertical = function() {
            return "left" === this.orient || "right" === this.orient;
        }, o.tspanData = function(t, e, n, i) {
            var r = this, a = r.params.tickMultiline ? r.splitTickText(t, n, i) : [].concat(r.textFormatted(t));
            return a.map(function(t) {
                return {
                    index: e,
                    splitted: t,
                    length: a.length
                };
            });
        }, o.splitTickText = function(t, e, n) {
            function i(t, e) {
                a = void 0;
                for (var n = 1; n < e.length; n++) if (" " === e.charAt(n) && (a = n), r = e.substr(0, n + 1), 
                o = s.tickTextCharSize.w * r.length, l < o) return i(t.concat(e.substr(0, a ? a : n)), e.slice(a ? a + 1 : n));
                return t.concat(e);
            }
            var r, a, o, s = this, c = s.textFormatted(t), l = s.params.tickWidth, u = [];
            return "[object Array]" === Object.prototype.toString.call(c) ? c : ((!l || l <= 0) && (l = s.isVertical() ? 95 : s.params.isCategory ? Math.ceil(n(e[1]) - n(e[0])) - 12 : 110), 
            i(u, c + ""));
        }, o.updateTickLength = function() {
            var t = this;
            t.tickLength = Math.max(t.innerTickSize, 0) + t.tickPadding;
        }, o.lineY2 = function(t) {
            var e = this, n = e.scale(t) + (e.tickCentered ? 0 : e.tickOffset);
            return e.range[0] < n && n < e.range[1] ? e.innerTickSize : 0;
        }, o.textY = function() {
            var t = this, e = t.tickTextRotate;
            return e ? 11.5 - 2.5 * (e / 15) * (e > 0 ? 1 : -1) : t.tickLength;
        }, o.textTransform = function() {
            var t = this, e = t.tickTextRotate;
            return e ? "rotate(" + e + ")" : "";
        }, o.textTextAnchor = function() {
            var t = this, e = t.tickTextRotate;
            return e ? e > 0 ? "start" : "end" : "middle";
        }, o.tspanDx = function() {
            var t = this, e = t.tickTextRotate;
            return e ? 8 * Math.sin(Math.PI * (e / 180)) : 0;
        }, o.tspanDy = function(t, e) {
            var n = this, i = n.tickTextCharSize.h;
            return 0 === e && (i = n.isVertical() ? -((t.length - 1) * (n.tickTextCharSize.h / 2) - 3) : ".71em"), 
            i;
        }, o.generateAxis = function() {
            function t(r) {
                r.each(function() {
                    var r, a, o, s = t.g = n.select(this), c = this.__chart__ || e.scale, l = this.__chart__ = e.copyScale(), u = e.tickValues ? e.tickValues : e.generateTicks(l), d = s.selectAll(".tick").data(u, l), h = d.enter().insert("g", ".domain").attr("class", "tick").style("opacity", 1e-6), f = d.exit().remove(), p = e.transitionise(d).style("opacity", 1);
                    i.isCategory ? (e.tickOffset = Math.ceil((l(1) - l(0)) / 2), a = e.tickCentered ? 0 : e.tickOffset, 
                    o = e.tickCentered ? e.tickOffset : 0) : e.tickOffset = a = 0, h.append("line"), 
                    h.append("text"), e.updateRange(), e.updateTickLength(), e.updateTickTextCharSize(s.select(".tick"));
                    var g = p.select("line"), m = p.select("text"), v = d.select("text").selectAll("tspan").data(function(t, n) {
                        return e.tspanData(t, n, u, l);
                    });
                    v.enter().append("tspan"), v.exit().remove(), v.text(function(t) {
                        return t.splitted;
                    });
                    var y = s.selectAll(".domain").data([ 0 ]), x = (y.enter().append("path").attr("class", "domain"), 
                    e.transitionise(y));
                    switch (e.orient) {
                      case "bottom":
                        r = e.axisX, g.attr("x1", a).attr("x2", a).attr("y2", function(t, n) {
                            return e.lineY2(t, n);
                        }), m.attr("x", 0).attr("y", function(t, n) {
                            return e.textY(t, n);
                        }).attr("transform", function(t, n) {
                            return e.textTransform(t, n);
                        }).style("text-anchor", function(t, n) {
                            return e.textTextAnchor(t, n);
                        }), v.attr("x", 0).attr("dy", function(t, n) {
                            return e.tspanDy(t, n);
                        }).attr("dx", function(t, n) {
                            return e.tspanDx(t, n);
                        }), x.attr("d", "M" + e.range[0] + "," + e.outerTickSize + "V0H" + e.range[1] + "V" + e.outerTickSize);
                        break;

                      case "top":
                        r = e.axisX, g.attr("x2", 0).attr("y2", -e.innerTickSize), m.attr("x", 0).attr("y", -e.tickLength).style("text-anchor", "middle"), 
                        v.attr("x", 0).attr("dy", "0em"), x.attr("d", "M" + e.range[0] + "," + -e.outerTickSize + "V0H" + e.range[1] + "V" + -e.outerTickSize);
                        break;

                      case "left":
                        r = e.axisY, g.attr("x2", -e.innerTickSize).attr("y1", o).attr("y2", o), m.attr("x", -e.tickLength).attr("y", e.tickOffset).style("text-anchor", "end"), 
                        v.attr("x", -e.tickLength).attr("dy", function(t, n) {
                            return e.tspanDy(t, n);
                        }), x.attr("d", "M" + -e.outerTickSize + "," + e.range[0] + "H0V" + e.range[1] + "H" + -e.outerTickSize);
                        break;

                      case "right":
                        r = e.axisY, g.attr("x2", e.innerTickSize).attr("y2", 0), m.attr("x", e.tickLength).attr("y", 0).style("text-anchor", "start"), 
                        v.attr("x", e.tickLength).attr("dy", function(t, n) {
                            return e.tspanDy(t, n);
                        }), x.attr("d", "M" + e.outerTickSize + "," + e.range[0] + "H0V" + e.range[1] + "H" + e.outerTickSize);
                    }
                    if (l.rangeBand) {
                        var _ = l, b = _.rangeBand() / 2;
                        c = l = function(t) {
                            return _(t) + b;
                        };
                    } else c.rangeBand ? c = l : f.call(r, l, e.tickOffset);
                    h.call(r, c, e.tickOffset), p.call(r, l, e.tickOffset);
                });
            }
            var e = this, n = e.d3, i = e.params;
            return t.scale = function(n) {
                return arguments.length ? (e.scale = n, t) : e.scale;
            }, t.orient = function(n) {
                return arguments.length ? (e.orient = n in {
                    top: 1,
                    right: 1,
                    bottom: 1,
                    left: 1
                } ? n + "" : "bottom", t) : e.orient;
            }, t.tickFormat = function(n) {
                return arguments.length ? (e.tickFormat = n, t) : e.tickFormat;
            }, t.tickCentered = function(n) {
                return arguments.length ? (e.tickCentered = n, t) : e.tickCentered;
            }, t.tickOffset = function() {
                return e.tickOffset;
            }, t.tickInterval = function() {
                var n, r;
                return i.isCategory ? n = 2 * e.tickOffset : (r = t.g.select("path.domain").node().getTotalLength() - 2 * e.outerTickSize, 
                n = r / t.g.selectAll("line").size()), n === 1 / 0 ? 0 : n;
            }, t.ticks = function() {
                return arguments.length ? (e.tickArguments = arguments, t) : e.tickArguments;
            }, t.tickCulling = function(n) {
                return arguments.length ? (e.tickCulling = n, t) : e.tickCulling;
            }, t.tickValues = function(n) {
                if ("function" == typeof n) e.tickValues = function() {
                    return n(e.scale.domain());
                }; else {
                    if (!arguments.length) return e.tickValues;
                    e.tickValues = n;
                }
                return t;
            }, t;
        };
        var C = function(e) {
            function n(e) {
                l(this, n);
                var i = {
                    fn: a,
                    internal: {
                        fn: o
                    }
                }, r = d(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, "axis", i));
                return r.d3 = e.d3, r.internal = t, r;
            }
            return u(n, e), n;
        }(e);
        a = C.prototype, a.init = function() {
            var t = this.owner, e = t.config, n = t.main;
            t.axes.x = n.append("g").attr("class", s.axis + " " + s.axisX).attr("clip-path", t.clipPathForXAxis).attr("transform", t.getTranslate("x")).style("visibility", e.axis_x_show ? "visible" : "hidden"), 
            t.axes.x.append("text").attr("class", s.axisXLabel).attr("transform", e.axis_rotated ? "rotate(-90)" : "").style("text-anchor", this.textAnchorForXAxisLabel.bind(this)), 
            t.axes.y = n.append("g").attr("class", s.axis + " " + s.axisY).attr("clip-path", e.axis_y_inner ? "" : t.clipPathForYAxis).attr("transform", t.getTranslate("y")).style("visibility", e.axis_y_show ? "visible" : "hidden"), 
            t.axes.y.append("text").attr("class", s.axisYLabel).attr("transform", e.axis_rotated ? "" : "rotate(-90)").style("text-anchor", this.textAnchorForYAxisLabel.bind(this)), 
            t.axes.y2 = n.append("g").attr("class", s.axis + " " + s.axisY2).attr("transform", t.getTranslate("y2")).style("visibility", e.axis_y2_show ? "visible" : "hidden"), 
            t.axes.y2.append("text").attr("class", s.axisY2Label).attr("transform", e.axis_rotated ? "" : "rotate(-90)").style("text-anchor", this.textAnchorForY2AxisLabel.bind(this));
        }, a.getXAxis = function(t, e, n, i, r, a, o) {
            var s = this.owner, c = s.config, l = {
                isCategory: s.isCategorized(),
                withOuterTick: r,
                tickMultiline: c.axis_x_tick_multiline,
                tickWidth: c.axis_x_tick_width,
                tickTextRotate: o ? 0 : c.axis_x_tick_rotate,
                withoutTransition: a
            }, u = new this.internal(this, l).axis.scale(t).orient(e);
            return s.isTimeSeries() && i && "function" != typeof i && (i = i.map(function(t) {
                return s.parseDate(t);
            })), u.tickFormat(n).tickValues(i), s.isCategorized() && (u.tickCentered(c.axis_x_tick_centered), 
            b(c.axis_x_tick_culling) && (c.axis_x_tick_culling = !1)), u;
        }, a.updateXAxisTickValues = function(t, e) {
            var n, i = this.owner, r = i.config;
            return (r.axis_x_tick_fit || r.axis_x_tick_count) && (n = this.generateTickValues(i.mapTargetsToUniqueXs(t), r.axis_x_tick_count, i.isTimeSeries())), 
            e ? e.tickValues(n) : (i.xAxis.tickValues(n), i.subXAxis.tickValues(n)), n;
        }, a.getYAxis = function(t, e, n, i, r, a, o) {
            var s = this.owner, c = s.config, l = {
                withOuterTick: r,
                withoutTransition: a,
                tickTextRotate: o ? 0 : c.axis_y_tick_rotate
            }, u = new this.internal(this, l).axis.scale(t).orient(e).tickFormat(n);
            return s.isTimeSeriesY() ? u.ticks(s.d3.time[c.axis_y_tick_time_value], c.axis_y_tick_time_interval) : u.tickValues(i), 
            u;
        }, a.getId = function(t) {
            var e = this.owner.config;
            return t in e.data_axes ? e.data_axes[t] : "y";
        }, a.getXAxisTickFormat = function() {
            var t = this.owner, e = t.config, n = t.isTimeSeries() ? t.defaultAxisTimeFormat : t.isCategorized() ? t.categoryName : function(t) {
                return t < 0 ? t.toFixed(0) : t;
            };
            return e.axis_x_tick_format && (f(e.axis_x_tick_format) ? n = e.axis_x_tick_format : t.isTimeSeries() && (n = function(n) {
                return n ? t.axisTimeFormat(e.axis_x_tick_format)(n) : "";
            })), f(n) ? function(e) {
                return n.call(t, e);
            } : n;
        }, a.getTickValues = function(t, e) {
            return t ? t : e ? e.tickValues() : void 0;
        }, a.getXAxisTickValues = function() {
            return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);
        }, a.getYAxisTickValues = function() {
            return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);
        }, a.getY2AxisTickValues = function() {
            return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);
        }, a.getLabelOptionByAxisId = function(t) {
            var e, n = this.owner, i = n.config;
            return "y" === t ? e = i.axis_y_label : "y2" === t ? e = i.axis_y2_label : "x" === t && (e = i.axis_x_label), 
            e;
        }, a.getLabelText = function(t) {
            var e = this.getLabelOptionByAxisId(t);
            return g(e) ? e : e ? e.text : null;
        }, a.setLabelText = function(t, e) {
            var n = this.owner, i = n.config, r = this.getLabelOptionByAxisId(t);
            g(r) ? "y" === t ? i.axis_y_label = e : "y2" === t ? i.axis_y2_label = e : "x" === t && (i.axis_x_label = e) : r && (r.text = e);
        }, a.getLabelPosition = function(t, e) {
            var n = this.getLabelOptionByAxisId(t), i = n && "object" === ("undefined" == typeof n ? "undefined" : c(n)) && n.position ? n.position : e;
            return {
                isInner: i.indexOf("inner") >= 0,
                isOuter: i.indexOf("outer") >= 0,
                isLeft: i.indexOf("left") >= 0,
                isCenter: i.indexOf("center") >= 0,
                isRight: i.indexOf("right") >= 0,
                isTop: i.indexOf("top") >= 0,
                isMiddle: i.indexOf("middle") >= 0,
                isBottom: i.indexOf("bottom") >= 0
            };
        }, a.getXAxisLabelPosition = function() {
            return this.getLabelPosition("x", this.owner.config.axis_rotated ? "inner-top" : "inner-right");
        }, a.getYAxisLabelPosition = function() {
            return this.getLabelPosition("y", this.owner.config.axis_rotated ? "inner-right" : "inner-top");
        }, a.getY2AxisLabelPosition = function() {
            return this.getLabelPosition("y2", this.owner.config.axis_rotated ? "inner-right" : "inner-top");
        }, a.getLabelPositionById = function(t) {
            return "y2" === t ? this.getY2AxisLabelPosition() : "y" === t ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();
        }, a.textForXAxisLabel = function() {
            return this.getLabelText("x");
        }, a.textForYAxisLabel = function() {
            return this.getLabelText("y");
        }, a.textForY2AxisLabel = function() {
            return this.getLabelText("y2");
        }, a.xForAxisLabel = function(t, e) {
            var n = this.owner;
            return t ? e.isLeft ? 0 : e.isCenter ? n.width / 2 : n.width : e.isBottom ? -n.height : e.isMiddle ? -n.height / 2 : 0;
        }, a.dxForAxisLabel = function(t, e) {
            return t ? e.isLeft ? "0.5em" : e.isRight ? "-0.5em" : "0" : e.isTop ? "-0.5em" : e.isBottom ? "0.5em" : "0";
        }, a.textAnchorForAxisLabel = function(t, e) {
            return t ? e.isLeft ? "start" : e.isCenter ? "middle" : "end" : e.isBottom ? "start" : e.isMiddle ? "middle" : "end";
        }, a.xForXAxisLabel = function() {
            return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());
        }, a.xForYAxisLabel = function() {
            return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());
        }, a.xForY2AxisLabel = function() {
            return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());
        }, a.dxForXAxisLabel = function() {
            return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());
        }, a.dxForYAxisLabel = function() {
            return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());
        }, a.dxForY2AxisLabel = function() {
            return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());
        }, a.dyForXAxisLabel = function() {
            var t = this.owner, e = t.config, n = this.getXAxisLabelPosition();
            return e.axis_rotated ? n.isInner ? "1.2em" : -25 - this.getMaxTickWidth("x") : n.isInner ? "-0.5em" : e.axis_x_height ? e.axis_x_height - 10 : "3em";
        }, a.dyForYAxisLabel = function() {
            var t = this.owner, e = this.getYAxisLabelPosition();
            return t.config.axis_rotated ? e.isInner ? "-0.5em" : "3em" : e.isInner ? "1.2em" : -10 - (t.config.axis_y_inner ? 0 : this.getMaxTickWidth("y") + 10);
        }, a.dyForY2AxisLabel = function() {
            var t = this.owner, e = this.getY2AxisLabelPosition();
            return t.config.axis_rotated ? e.isInner ? "1.2em" : "-2.2em" : e.isInner ? "-0.5em" : 15 + (t.config.axis_y2_inner ? 0 : this.getMaxTickWidth("y2") + 15);
        }, a.textAnchorForXAxisLabel = function() {
            var t = this.owner;
            return this.textAnchorForAxisLabel(!t.config.axis_rotated, this.getXAxisLabelPosition());
        }, a.textAnchorForYAxisLabel = function() {
            var t = this.owner;
            return this.textAnchorForAxisLabel(t.config.axis_rotated, this.getYAxisLabelPosition());
        }, a.textAnchorForY2AxisLabel = function() {
            var t = this.owner;
            return this.textAnchorForAxisLabel(t.config.axis_rotated, this.getY2AxisLabelPosition());
        }, a.getMaxTickWidth = function(t, e) {
            var n, i, r, a, o, s = this.owner, c = s.config, l = 0;
            return e && s.currentMaxTickWidths[t] ? s.currentMaxTickWidths[t] : (s.svg && (n = s.filterTargetsToShow(s.data.targets), 
            "y" === t ? (i = s.y.copy().domain(s.getYDomain(n, "y")), r = this.getYAxis(i, s.yOrient, c.axis_y_tick_format, s.yAxisTickValues, !1, !0, !0)) : "y2" === t ? (i = s.y2.copy().domain(s.getYDomain(n, "y2")), 
            r = this.getYAxis(i, s.y2Orient, c.axis_y2_tick_format, s.y2AxisTickValues, !1, !0, !0)) : (i = s.x.copy().domain(s.getXDomain(n)), 
            r = this.getXAxis(i, s.xOrient, s.xAxisTickFormat, s.xAxisTickValues, !1, !0, !0), 
            this.updateXAxisTickValues(n, r)), a = s.d3.select("body").append("div").classed("c3", !0), 
            o = a.append("svg").style("visibility", "hidden").style("position", "fixed").style("top", 0).style("left", 0), 
            o.append("g").call(r).each(function() {
                s.d3.select(this).selectAll("text").each(function() {
                    var t = this.getBoundingClientRect();
                    l < t.width && (l = t.width);
                }), a.remove();
            })), s.currentMaxTickWidths[t] = l <= 0 ? s.currentMaxTickWidths[t] : l, s.currentMaxTickWidths[t]);
        }, a.updateLabels = function(t) {
            var e = this.owner, n = e.main.select("." + s.axisX + " ." + s.axisXLabel), i = e.main.select("." + s.axisY + " ." + s.axisYLabel), r = e.main.select("." + s.axisY2 + " ." + s.axisY2Label);
            (t ? n.transition() : n).attr("x", this.xForXAxisLabel.bind(this)).attr("dx", this.dxForXAxisLabel.bind(this)).attr("dy", this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)), 
            (t ? i.transition() : i).attr("x", this.xForYAxisLabel.bind(this)).attr("dx", this.dxForYAxisLabel.bind(this)).attr("dy", this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)), 
            (t ? r.transition() : r).attr("x", this.xForY2AxisLabel.bind(this)).attr("dx", this.dxForY2AxisLabel.bind(this)).attr("dy", this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));
        }, a.getPadding = function(t, e, n, i) {
            var r = "number" == typeof t ? t : t[e];
            return h(r) ? "ratio" === t.unit ? t[e] * i : this.convertPixelsToAxisPadding(r, i) : n;
        }, a.convertPixelsToAxisPadding = function(t, e) {
            var n = this.owner, i = n.config.axis_rotated ? n.width : n.height;
            return e * (t / i);
        }, a.generateTickValues = function(t, e, n) {
            var i, r, a, o, s, c, l, u = t;
            if (e) if (i = f(e) ? e() : e, 1 === i) u = [ t[0] ]; else if (2 === i) u = [ t[0], t[t.length - 1] ]; else if (i > 2) {
                for (o = i - 2, r = t[0], a = t[t.length - 1], s = (a - r) / (o + 1), u = [ r ], 
                c = 0; c < o; c++) l = +r + s * (c + 1), u.push(n ? new Date(l) : l);
                u.push(a);
            }
            return n || (u = u.sort(function(t, e) {
                return t - e;
            })), u;
        }, a.generateTransitions = function(t) {
            var e = this.owner, n = e.axes;
            return {
                axisX: t ? n.x.transition().duration(t) : n.x,
                axisY: t ? n.y.transition().duration(t) : n.y,
                axisY2: t ? n.y2.transition().duration(t) : n.y2,
                axisSubX: t ? n.subx.transition().duration(t) : n.subx
            };
        }, a.redraw = function(t, e) {
            var n = this.owner;
            n.axes.x.style("opacity", e ? 0 : 1), n.axes.y.style("opacity", e ? 0 : 1), n.axes.y2.style("opacity", e ? 0 : 1), 
            n.axes.subx.style("opacity", e ? 0 : 1), t.axisX.call(n.xAxis), t.axisY.call(n.yAxis), 
            t.axisY2.call(n.y2Axis), t.axisSubX.call(n.subXAxis);
        };
        var P, k, M = {
            version: "0.4.18"
        };
        return M.generate = function(t) {
            return new i(t);
        }, M.chart = {
            fn: i.prototype,
            internal: {
                fn: r.prototype
            }
        }, P = M.chart.fn, k = M.chart.internal.fn, k.beforeInit = function() {}, k.afterInit = function() {}, 
        k.init = function() {
            var t = this, e = t.config;
            if (t.initParams(), e.data_url) t.convertUrlToData(e.data_url, e.data_mimeType, e.data_headers, e.data_keys, t.initWithData); else if (e.data_json) t.initWithData(t.convertJsonToData(e.data_json, e.data_keys)); else if (e.data_rows) t.initWithData(t.convertRowsToData(e.data_rows)); else {
                if (!e.data_columns) throw Error("url or json or rows or columns is required.");
                t.initWithData(t.convertColumnsToData(e.data_columns));
            }
        }, k.initParams = function() {
            var t = this, e = t.d3, n = t.config;
            t.clipId = "c3-" + +new Date() + "-clip", t.clipIdForXAxis = t.clipId + "-xaxis", 
            t.clipIdForYAxis = t.clipId + "-yaxis", t.clipIdForGrid = t.clipId + "-grid", t.clipIdForSubchart = t.clipId + "-subchart", 
            t.clipPath = t.getClipPath(t.clipId), t.clipPathForXAxis = t.getClipPath(t.clipIdForXAxis), 
            t.clipPathForYAxis = t.getClipPath(t.clipIdForYAxis), t.clipPathForGrid = t.getClipPath(t.clipIdForGrid), 
            t.clipPathForSubchart = t.getClipPath(t.clipIdForSubchart), t.dragStart = null, 
            t.dragging = !1, t.flowing = !1, t.cancelClick = !1, t.mouseover = !1, t.transiting = !1, 
            t.color = t.generateColor(), t.levelColor = t.generateLevelColor(), t.dataTimeFormat = n.data_xLocaltime ? e.time.format : e.time.format.utc, 
            t.axisTimeFormat = n.axis_x_localtime ? e.time.format : e.time.format.utc, t.defaultAxisTimeFormat = t.axisTimeFormat.multi([ [ ".%L", function(t) {
                return t.getMilliseconds();
            } ], [ ":%S", function(t) {
                return t.getSeconds();
            } ], [ "%I:%M", function(t) {
                return t.getMinutes();
            } ], [ "%I %p", function(t) {
                return t.getHours();
            } ], [ "%-m/%-d", function(t) {
                return t.getDay() && 1 !== t.getDate();
            } ], [ "%-m/%-d", function(t) {
                return 1 !== t.getDate();
            } ], [ "%-m/%-d", function(t) {
                return t.getMonth();
            } ], [ "%Y/%-m/%-d", function() {
                return !0;
            } ] ]), t.hiddenTargetIds = [], t.hiddenLegendIds = [], t.focusedTargetIds = [], 
            t.defocusedTargetIds = [], t.xOrient = n.axis_rotated ? "left" : "bottom", t.yOrient = n.axis_rotated ? n.axis_y_inner ? "top" : "bottom" : n.axis_y_inner ? "right" : "left", 
            t.y2Orient = n.axis_rotated ? n.axis_y2_inner ? "bottom" : "top" : n.axis_y2_inner ? "left" : "right", 
            t.subXOrient = n.axis_rotated ? "left" : "bottom", t.isLegendRight = "right" === n.legend_position, 
            t.isLegendInset = "inset" === n.legend_position, t.isLegendTop = "top-left" === n.legend_inset_anchor || "top-right" === n.legend_inset_anchor, 
            t.isLegendLeft = "top-left" === n.legend_inset_anchor || "bottom-left" === n.legend_inset_anchor, 
            t.legendStep = 0, t.legendItemWidth = 0, t.legendItemHeight = 0, t.currentMaxTickWidths = {
                x: 0,
                y: 0,
                y2: 0
            }, t.rotated_padding_left = 30, t.rotated_padding_right = n.axis_rotated && !n.axis_x_show ? 0 : 30, 
            t.rotated_padding_top = 5, t.withoutFadeIn = {}, t.intervalForObserveInserted = void 0, 
            t.axes.subx = e.selectAll([]);
        }, k.initChartElements = function() {
            this.initBar && this.initBar(), this.initLine && this.initLine(), this.initArc && this.initArc(), 
            this.initGauge && this.initGauge(), this.initText && this.initText();
        }, k.initWithData = function(t) {
            var e, n, i = this, r = i.d3, a = i.config, o = !0;
            i.axis = new C(i), i.initPie && i.initPie(), i.initBrush && i.initBrush(), i.initZoom && i.initZoom(), 
            a.bindto ? "function" == typeof a.bindto.node ? i.selectChart = a.bindto : i.selectChart = r.select(a.bindto) : i.selectChart = r.selectAll([]), 
            i.selectChart.empty() && (i.selectChart = r.select(document.createElement("div")).style("opacity", 0), 
            i.observeInserted(i.selectChart), o = !1), i.selectChart.html("").classed("c3", !0), 
            i.data.xs = {}, i.data.targets = i.convertDataToTargets(t), a.data_filter && (i.data.targets = i.data.targets.filter(a.data_filter)), 
            a.data_hide && i.addHiddenTargetIds(a.data_hide === !0 ? i.mapToIds(i.data.targets) : a.data_hide), 
            a.legend_hide && i.addHiddenLegendIds(a.legend_hide === !0 ? i.mapToIds(i.data.targets) : a.legend_hide), 
            i.hasType("gauge") && (a.legend_show = !1), i.updateSizes(), i.updateScales(), i.x.domain(r.extent(i.getXDomain(i.data.targets))), 
            i.y.domain(i.getYDomain(i.data.targets, "y")), i.y2.domain(i.getYDomain(i.data.targets, "y2")), 
            i.subX.domain(i.x.domain()), i.subY.domain(i.y.domain()), i.subY2.domain(i.y2.domain()), 
            i.orgXDomain = i.x.domain(), i.brush && i.brush.scale(i.subX), a.zoom_enabled && i.zoom.scale(i.x), 
            i.svg = i.selectChart.append("svg").style("overflow", "hidden").on("mouseenter", function() {
                return a.onmouseover.call(i);
            }).on("mouseleave", function() {
                return a.onmouseout.call(i);
            }), i.config.svg_classname && i.svg.attr("class", i.config.svg_classname), e = i.svg.append("defs"), 
            i.clipChart = i.appendClip(e, i.clipId), i.clipXAxis = i.appendClip(e, i.clipIdForXAxis), 
            i.clipYAxis = i.appendClip(e, i.clipIdForYAxis), i.clipGrid = i.appendClip(e, i.clipIdForGrid), 
            i.clipSubchart = i.appendClip(e, i.clipIdForSubchart), i.updateSvgSize(), n = i.main = i.svg.append("g").attr("transform", i.getTranslate("main")), 
            i.initSubchart && i.initSubchart(), i.initTooltip && i.initTooltip(), i.initLegend && i.initLegend(), 
            i.initTitle && i.initTitle(), n.append("text").attr("class", s.text + " " + s.empty).attr("text-anchor", "middle").attr("dominant-baseline", "middle"), 
            i.initRegion(), i.initGrid(), n.append("g").attr("clip-path", i.clipPath).attr("class", s.chart), 
            a.grid_lines_front && i.initGridLines(), i.initEventRect(), i.initChartElements(), 
            n.insert("rect", a.zoom_privileged ? null : "g." + s.regions).attr("class", s.zoomRect).attr("width", i.width).attr("height", i.height).style("opacity", 0).on("dblclick.zoom", null), 
            a.axis_x_extent && i.brush.extent(i.getDefaultExtent()), i.axis.init(), i.updateTargets(i.data.targets), 
            o && (i.updateDimension(), i.config.oninit.call(i), i.redraw({
                withTransition: !1,
                withTransform: !0,
                withUpdateXDomain: !0,
                withUpdateOrgXDomain: !0,
                withTransitionForAxis: !1
            })), i.bindResize(), i.api.element = i.selectChart.node();
        }, k.smoothLines = function(t, e) {
            var n = this;
            "grid" === e && t.each(function() {
                var t = n.d3.select(this), e = t.attr("x1"), i = t.attr("x2"), r = t.attr("y1"), a = t.attr("y2");
                t.attr({
                    x1: Math.ceil(e),
                    x2: Math.ceil(i),
                    y1: Math.ceil(r),
                    y2: Math.ceil(a)
                });
            });
        }, k.updateSizes = function() {
            var t = this, e = t.config, n = t.legend ? t.getLegendHeight() : 0, i = t.legend ? t.getLegendWidth() : 0, r = t.isLegendRight || t.isLegendInset ? 0 : n, a = t.hasArcType(), o = e.axis_rotated || a ? 0 : t.getHorizontalAxisHeight("x"), s = e.subchart_show && !a ? e.subchart_size_height + o : 0;
            t.currentWidth = t.getCurrentWidth(), t.currentHeight = t.getCurrentHeight(), t.margin = e.axis_rotated ? {
                top: t.getHorizontalAxisHeight("y2") + t.getCurrentPaddingTop(),
                right: a ? 0 : t.getCurrentPaddingRight(),
                bottom: t.getHorizontalAxisHeight("y") + r + t.getCurrentPaddingBottom(),
                left: s + (a ? 0 : t.getCurrentPaddingLeft())
            } : {
                top: 4 + t.getCurrentPaddingTop(),
                right: a ? 0 : t.getCurrentPaddingRight(),
                bottom: o + s + r + t.getCurrentPaddingBottom(),
                left: a ? 0 : t.getCurrentPaddingLeft()
            }, t.margin2 = e.axis_rotated ? {
                top: t.margin.top,
                right: NaN,
                bottom: 20 + r,
                left: t.rotated_padding_left
            } : {
                top: t.currentHeight - s - r,
                right: NaN,
                bottom: o + r,
                left: t.margin.left
            }, t.margin3 = {
                top: 0,
                right: NaN,
                bottom: 0,
                left: 0
            }, t.updateSizeForLegend && t.updateSizeForLegend(n, i), t.width = t.currentWidth - t.margin.left - t.margin.right, 
            t.height = t.currentHeight - t.margin.top - t.margin.bottom, t.width < 0 && (t.width = 0), 
            t.height < 0 && (t.height = 0), t.width2 = e.axis_rotated ? t.margin.left - t.rotated_padding_left - t.rotated_padding_right : t.width, 
            t.height2 = e.axis_rotated ? t.height : t.currentHeight - t.margin2.top - t.margin2.bottom, 
            t.width2 < 0 && (t.width2 = 0), t.height2 < 0 && (t.height2 = 0), t.arcWidth = t.width - (t.isLegendRight ? i + 10 : 0), 
            t.arcHeight = t.height - (t.isLegendRight ? 0 : 10), t.hasType("gauge") && !e.gauge_fullCircle && (t.arcHeight += t.height - t.getGaugeLabelHeight()), 
            t.updateRadius && t.updateRadius(), t.isLegendRight && a && (t.margin3.left = t.arcWidth / 2 + 1.1 * t.radiusExpanded);
        }, k.updateTargets = function(t) {
            var e = this;
            e.updateTargetsForText(t), e.updateTargetsForBar(t), e.updateTargetsForLine(t), 
            e.hasArcType() && e.updateTargetsForArc && e.updateTargetsForArc(t), e.updateTargetsForSubchart && e.updateTargetsForSubchart(t), 
            e.showTargets();
        }, k.showTargets = function() {
            var t = this;
            t.svg.selectAll("." + s.target).filter(function(e) {
                return t.isTargetToShow(e.id);
            }).transition().duration(t.config.transition_duration).style("opacity", 1);
        }, k.redraw = function(t, e) {
            var n, i, r, a, o, c, l, u, d, h, f, p, g, m, v, y, x, _, b, w, T, E, A, C, P, k, M, O, N, V = this, L = V.main, R = V.d3, I = V.config, D = V.getShapeIndices(V.isAreaType), G = V.getShapeIndices(V.isBarType), F = V.getShapeIndices(V.isLineType), j = V.hasArcType(), H = V.filterTargetsToShow(V.data.targets), U = V.xv.bind(V);
            if (t = t || {}, n = S(t, "withY", !0), i = S(t, "withSubchart", !0), r = S(t, "withTransition", !0), 
            c = S(t, "withTransform", !1), l = S(t, "withUpdateXDomain", !1), u = S(t, "withUpdateOrgXDomain", !1), 
            d = S(t, "withTrimXDomain", !0), g = S(t, "withUpdateXAxis", l), h = S(t, "withLegend", !1), 
            f = S(t, "withEventRect", !0), p = S(t, "withDimension", !0), a = S(t, "withTransitionForExit", r), 
            o = S(t, "withTransitionForAxis", r), b = r ? I.transition_duration : 0, w = a ? b : 0, 
            T = o ? b : 0, e = e || V.axis.generateTransitions(T), h && I.legend_show ? V.updateLegend(V.mapToIds(V.data.targets), t, e) : p && V.updateDimension(!0), 
            V.isCategorized() && 0 === H.length && V.x.domain([ 0, V.axes.x.selectAll(".tick").size() ]), 
            H.length ? (V.updateXDomain(H, l, u, d), I.axis_x_tick_values || (C = V.axis.updateXAxisTickValues(H))) : (V.xAxis.tickValues([]), 
            V.subXAxis.tickValues([])), I.zoom_rescale && !t.flow && (M = V.x.orgDomain()), 
            V.y.domain(V.getYDomain(H, "y", M)), V.y2.domain(V.getYDomain(H, "y2", M)), !I.axis_y_tick_values && I.axis_y_tick_count && V.yAxis.tickValues(V.axis.generateTickValues(V.y.domain(), I.axis_y_tick_count)), 
            !I.axis_y2_tick_values && I.axis_y2_tick_count && V.y2Axis.tickValues(V.axis.generateTickValues(V.y2.domain(), I.axis_y2_tick_count)), 
            V.axis.redraw(e, j), V.axis.updateLabels(r), (l || g) && H.length) if (I.axis_x_tick_culling && C) {
                for (P = 1; P < C.length; P++) if (C.length / P < I.axis_x_tick_culling_max) {
                    k = P;
                    break;
                }
                V.svg.selectAll("." + s.axisX + " .tick text").each(function(t) {
                    var e = C.indexOf(t);
                    e >= 0 && R.select(this).style("display", e % k ? "none" : "block");
                });
            } else V.svg.selectAll("." + s.axisX + " .tick text").style("display", "block");
            m = V.generateDrawArea ? V.generateDrawArea(D, !1) : void 0, v = V.generateDrawBar ? V.generateDrawBar(G) : void 0, 
            y = V.generateDrawLine ? V.generateDrawLine(F, !1) : void 0, x = V.generateXYForText(D, G, F, !0), 
            _ = V.generateXYForText(D, G, F, !1), n && (V.subY.domain(V.getYDomain(H, "y")), 
            V.subY2.domain(V.getYDomain(H, "y2"))), V.updateXgridFocus(), L.select("text." + s.text + "." + s.empty).attr("x", V.width / 2).attr("y", V.height / 2).text(I.data_empty_label_text).transition().style("opacity", H.length ? 0 : 1), 
            V.updateGrid(b), V.updateRegion(b), V.updateBar(w), V.updateLine(w), V.updateArea(w), 
            V.updateCircle(), V.hasDataLabel() && V.updateText(w), V.redrawTitle && V.redrawTitle(), 
            V.redrawArc && V.redrawArc(b, w, c), V.redrawSubchart && V.redrawSubchart(i, e, b, w, D, G, F), 
            L.selectAll("." + s.selectedCircles).filter(V.isBarType.bind(V)).selectAll("circle").remove(), 
            I.interaction_enabled && !t.flow && f && (V.redrawEventRect(), V.updateZoom && V.updateZoom()), 
            V.updateCircleY(), O = (V.config.axis_rotated ? V.circleY : V.circleX).bind(V), 
            N = (V.config.axis_rotated ? V.circleX : V.circleY).bind(V), t.flow && (A = V.generateFlow({
                targets: H,
                flow: t.flow,
                duration: t.flow.duration,
                drawBar: v,
                drawLine: y,
                drawArea: m,
                cx: O,
                cy: N,
                xv: U,
                xForText: x,
                yForText: _
            })), (b || A) && V.isTabVisible() ? R.transition().duration(b).each(function() {
                var e = [];
                [ V.redrawBar(v, !0), V.redrawLine(y, !0), V.redrawArea(m, !0), V.redrawCircle(O, N, !0), V.redrawText(x, _, t.flow, !0), V.redrawRegion(!0), V.redrawGrid(!0) ].forEach(function(t) {
                    t.forEach(function(t) {
                        e.push(t);
                    });
                }), E = V.generateWait(), e.forEach(function(t) {
                    E.add(t);
                });
            }).call(E, function() {
                A && A(), I.onrendered && I.onrendered.call(V);
            }) : (V.redrawBar(v), V.redrawLine(y), V.redrawArea(m), V.redrawCircle(O, N), V.redrawText(x, _, t.flow), 
            V.redrawRegion(), V.redrawGrid(), I.onrendered && I.onrendered.call(V)), V.mapToIds(V.data.targets).forEach(function(t) {
                V.withoutFadeIn[t] = !0;
            });
        }, k.updateAndRedraw = function(t) {
            var e, n = this, i = n.config;
            t = t || {}, t.withTransition = S(t, "withTransition", !0), t.withTransform = S(t, "withTransform", !1), 
            t.withLegend = S(t, "withLegend", !1), t.withUpdateXDomain = !0, t.withUpdateOrgXDomain = !0, 
            t.withTransitionForExit = !1, t.withTransitionForTransform = S(t, "withTransitionForTransform", t.withTransition), 
            n.updateSizes(), t.withLegend && i.legend_show || (e = n.axis.generateTransitions(t.withTransitionForAxis ? i.transition_duration : 0), 
            n.updateScales(), n.updateSvgSize(), n.transformAll(t.withTransitionForTransform, e)), 
            n.redraw(t, e);
        }, k.redrawWithoutRescale = function() {
            this.redraw({
                withY: !1,
                withSubchart: !1,
                withEventRect: !1,
                withTransitionForAxis: !1
            });
        }, k.isTimeSeries = function() {
            return "timeseries" === this.config.axis_x_type;
        }, k.isCategorized = function() {
            return this.config.axis_x_type.indexOf("categor") >= 0;
        }, k.isCustomX = function() {
            var t = this, e = t.config;
            return !t.isTimeSeries() && (e.data_x || w(e.data_xs));
        }, k.isTimeSeriesY = function() {
            return "timeseries" === this.config.axis_y_type;
        }, k.getTranslate = function(t) {
            var e, n, i = this, r = i.config;
            return "main" === t ? (e = x(i.margin.left), n = x(i.margin.top)) : "context" === t ? (e = x(i.margin2.left), 
            n = x(i.margin2.top)) : "legend" === t ? (e = i.margin3.left, n = i.margin3.top) : "x" === t ? (e = 0, 
            n = r.axis_rotated ? 0 : i.height) : "y" === t ? (e = 0, n = r.axis_rotated ? i.height : 0) : "y2" === t ? (e = r.axis_rotated ? 0 : i.width, 
            n = r.axis_rotated ? 1 : 0) : "subx" === t ? (e = 0, n = r.axis_rotated ? 0 : i.height2) : "arc" === t && (e = i.arcWidth / 2, 
            n = i.arcHeight / 2), "translate(" + e + "," + n + ")";
        }, k.initialOpacity = function(t) {
            return null !== t.value && this.withoutFadeIn[t.id] ? 1 : 0;
        }, k.initialOpacityForCircle = function(t) {
            return null !== t.value && this.withoutFadeIn[t.id] ? this.opacityForCircle(t) : 0;
        }, k.opacityForCircle = function(t) {
            var e = f(this.config.point_show) ? this.config.point_show(t) : this.config.point_show, n = e ? 1 : 0;
            return h(t.value) ? this.isScatterType(t) ? .5 : n : 0;
        }, k.opacityForText = function() {
            return this.hasDataLabel() ? 1 : 0;
        }, k.xx = function(t) {
            return t ? this.x(t.x) : null;
        }, k.xv = function(t) {
            var e = this, n = t.value;
            return e.isTimeSeries() ? n = e.parseDate(t.value) : e.isCategorized() && "string" == typeof t.value && (n = e.config.axis_x_categories.indexOf(t.value)), 
            Math.ceil(e.x(n));
        }, k.yv = function(t) {
            var e = this, n = t.axis && "y2" === t.axis ? e.y2 : e.y;
            return Math.ceil(n(t.value));
        }, k.subxx = function(t) {
            return t ? this.subX(t.x) : null;
        }, k.transformMain = function(t, e) {
            var n, i, r, a = this;
            e && e.axisX ? n = e.axisX : (n = a.main.select("." + s.axisX), t && (n = n.transition())), 
            e && e.axisY ? i = e.axisY : (i = a.main.select("." + s.axisY), t && (i = i.transition())), 
            e && e.axisY2 ? r = e.axisY2 : (r = a.main.select("." + s.axisY2), t && (r = r.transition())), 
            (t ? a.main.transition() : a.main).attr("transform", a.getTranslate("main")), n.attr("transform", a.getTranslate("x")), 
            i.attr("transform", a.getTranslate("y")), r.attr("transform", a.getTranslate("y2")), 
            a.main.select("." + s.chartArcs).attr("transform", a.getTranslate("arc"));
        }, k.transformAll = function(t, e) {
            var n = this;
            n.transformMain(t, e), n.config.subchart_show && n.transformContext(t, e), n.legend && n.transformLegend(t);
        }, k.updateSvgSize = function() {
            var t = this, e = t.svg.select(".c3-brush .background");
            t.svg.attr("width", t.currentWidth).attr("height", t.currentHeight), t.svg.selectAll([ "#" + t.clipId, "#" + t.clipIdForGrid ]).select("rect").attr("width", t.width).attr("height", t.height), 
            t.svg.select("#" + t.clipIdForXAxis).select("rect").attr("x", t.getXAxisClipX.bind(t)).attr("y", t.getXAxisClipY.bind(t)).attr("width", t.getXAxisClipWidth.bind(t)).attr("height", t.getXAxisClipHeight.bind(t)), 
            t.svg.select("#" + t.clipIdForYAxis).select("rect").attr("x", t.getYAxisClipX.bind(t)).attr("y", t.getYAxisClipY.bind(t)).attr("width", t.getYAxisClipWidth.bind(t)).attr("height", t.getYAxisClipHeight.bind(t)), 
            t.svg.select("#" + t.clipIdForSubchart).select("rect").attr("width", t.width).attr("height", e.size() ? e.attr("height") : 0), 
            t.svg.select("." + s.zoomRect).attr("width", t.width).attr("height", t.height), 
            t.selectChart.style("max-height", t.currentHeight + "px");
        }, k.updateDimension = function(t) {
            var e = this;
            t || (e.config.axis_rotated ? (e.axes.x.call(e.xAxis), e.axes.subx.call(e.subXAxis)) : (e.axes.y.call(e.yAxis), 
            e.axes.y2.call(e.y2Axis))), e.updateSizes(), e.updateScales(), e.updateSvgSize(), 
            e.transformAll(!1);
        }, k.observeInserted = function(t) {
            var e, n = this;
            return "undefined" == typeof MutationObserver ? void window.console.error("MutationObserver not defined.") : (e = new MutationObserver(function(i) {
                i.forEach(function(i) {
                    "childList" === i.type && i.previousSibling && (e.disconnect(), n.intervalForObserveInserted = window.setInterval(function() {
                        t.node().parentNode && (window.clearInterval(n.intervalForObserveInserted), n.updateDimension(), 
                        n.brush && n.brush.update(), n.config.oninit.call(n), n.redraw({
                            withTransform: !0,
                            withUpdateXDomain: !0,
                            withUpdateOrgXDomain: !0,
                            withTransition: !1,
                            withTransitionForTransform: !1,
                            withLegend: !0
                        }), t.transition().style("opacity", 1));
                    }, 10));
                });
            }), void e.observe(t.node(), {
                attributes: !0,
                childList: !0,
                characterData: !0
            }));
        }, k.bindResize = function() {
            var t = this, e = t.config;
            if (t.resizeFunction = t.generateResize(), t.resizeFunction.add(function() {
                e.onresize.call(t);
            }), e.resize_auto && t.resizeFunction.add(function() {
                void 0 !== t.resizeTimeout && window.clearTimeout(t.resizeTimeout), t.resizeTimeout = window.setTimeout(function() {
                    delete t.resizeTimeout, t.api.flush();
                }, 100);
            }), t.resizeFunction.add(function() {
                e.onresized.call(t);
            }), window.attachEvent) window.attachEvent("onresize", t.resizeFunction); else if (window.addEventListener) window.addEventListener("resize", t.resizeFunction, !1); else {
                var n = window.onresize;
                n ? n.add && n.remove || (n = t.generateResize(), n.add(window.onresize)) : n = t.generateResize(), 
                n.add(t.resizeFunction), window.onresize = n;
            }
        }, k.generateResize = function() {
            function t() {
                e.forEach(function(t) {
                    t();
                });
            }
            var e = [];
            return t.add = function(t) {
                e.push(t);
            }, t.remove = function(t) {
                for (var n = 0; n < e.length; n++) if (e[n] === t) {
                    e.splice(n, 1);
                    break;
                }
            }, t;
        }, k.endall = function(t, e) {
            var n = 0;
            t.each(function() {
                ++n;
            }).each("end", function() {
                --n || e.apply(this, arguments);
            });
        }, k.generateWait = function() {
            var t = [], e = function(e, n) {
                var i = setInterval(function() {
                    var e = 0;
                    t.forEach(function(t) {
                        if (t.empty()) return void (e += 1);
                        try {
                            t.transition();
                        } catch (t) {
                            e += 1;
                        }
                    }), e === t.length && (clearInterval(i), n && n());
                }, 10);
            };
            return e.add = function(e) {
                t.push(e);
            }, e;
        }, k.parseDate = function(t) {
            var e, n = this;
            return t instanceof Date ? e = t : "string" == typeof t ? e = n.dataTimeFormat(n.config.data_xFormat).parse(t) : "object" === ("undefined" == typeof t ? "undefined" : c(t)) ? e = new Date(+t) : "number" != typeof t || isNaN(t) || (e = new Date(+t)), 
            e && !isNaN(+e) || window.console.error("Failed to parse x '" + t + "' to Date object"), 
            e;
        }, k.isTabVisible = function() {
            var t;
            return "undefined" != typeof document.hidden ? t = "hidden" : "undefined" != typeof document.mozHidden ? t = "mozHidden" : "undefined" != typeof document.msHidden ? t = "msHidden" : "undefined" != typeof document.webkitHidden && (t = "webkitHidden"), 
            !document[t];
        }, k.isValue = h, k.isFunction = f, k.isString = g, k.isUndefined = m, k.isDefined = v, 
        k.ceil10 = y, k.asHalfPixel = x, k.diffDomain = _, k.isEmpty = b, k.notEmpty = w, 
        k.notEmpty = w, k.getOption = S, k.hasValue = T, k.sanitise = E, k.getPathBox = A, 
        k.CLASS = s, Function.prototype.bind || (Function.prototype.bind = function(t) {
            if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
            var e = Array.prototype.slice.call(arguments, 1), n = this, i = function() {}, r = function() {
                return n.apply(this instanceof i ? this : t, e.concat(Array.prototype.slice.call(arguments)));
            };
            return i.prototype = this.prototype, r.prototype = new i(), r;
        }), function() {
            "SVGPathSeg" in window || (window.SVGPathSeg = function(t, e, n) {
                this.pathSegType = t, this.pathSegTypeAsLetter = e, this._owningPathSegList = n;
            }, window.SVGPathSeg.prototype.classname = "SVGPathSeg", window.SVGPathSeg.PATHSEG_UNKNOWN = 0, 
            window.SVGPathSeg.PATHSEG_CLOSEPATH = 1, window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2, 
            window.SVGPathSeg.PATHSEG_MOVETO_REL = 3, window.SVGPathSeg.PATHSEG_LINETO_ABS = 4, 
            window.SVGPathSeg.PATHSEG_LINETO_REL = 5, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6, 
            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8, 
            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9, window.SVGPathSeg.PATHSEG_ARC_ABS = 10, 
            window.SVGPathSeg.PATHSEG_ARC_REL = 11, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12, 
            window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14, 
            window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16, 
            window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18, 
            window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19, window.SVGPathSeg.prototype._segmentChanged = function() {
                this._owningPathSegList && this._owningPathSegList.segmentChanged(this);
            }, window.SVGPathSegClosePath = function(t) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, "z", t);
            }, window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegClosePath.prototype.toString = function() {
                return "[object SVGPathSegClosePath]";
            }, window.SVGPathSegClosePath.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter;
            }, window.SVGPathSegClosePath.prototype.clone = function() {
                return new window.SVGPathSegClosePath(void 0);
            }, window.SVGPathSegMovetoAbs = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, "M", t), this._x = e, 
                this._y = n;
            }, window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegMovetoAbs.prototype.toString = function() {
                return "[object SVGPathSegMovetoAbs]";
            }, window.SVGPathSegMovetoAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegMovetoAbs.prototype.clone = function() {
                return new window.SVGPathSegMovetoAbs(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegMovetoRel = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, "m", t), this._x = e, 
                this._y = n;
            }, window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegMovetoRel.prototype.toString = function() {
                return "[object SVGPathSegMovetoRel]";
            }, window.SVGPathSegMovetoRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegMovetoRel.prototype.clone = function() {
                return new window.SVGPathSegMovetoRel(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegMovetoRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegMovetoRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoAbs = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, "L", t), this._x = e, 
                this._y = n;
            }, window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoAbs.prototype.toString = function() {
                return "[object SVGPathSegLinetoAbs]";
            }, window.SVGPathSegLinetoAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegLinetoAbs.prototype.clone = function() {
                return new window.SVGPathSegLinetoAbs(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoRel = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, "l", t), this._x = e, 
                this._y = n;
            }, window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoRel.prototype.toString = function() {
                return "[object SVGPathSegLinetoRel]";
            }, window.SVGPathSegLinetoRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegLinetoRel.prototype.clone = function() {
                return new window.SVGPathSegLinetoRel(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegLinetoRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegLinetoRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoCubicAbs = function(t, e, n, i, r, a, o) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, "C", t), 
                this._x = e, this._y = n, this._x1 = i, this._y1 = r, this._x2 = a, this._y2 = o;
            }, window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoCubicAbs.prototype.toString = function() {
                return "[object SVGPathSegCurvetoCubicAbs]";
            }, window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoCubicAbs.prototype.clone = function() {
                return new window.SVGPathSegCurvetoCubicAbs(void 0, this._x, this._y, this._x1, this._y1, this._x2, this._y2);
            }, Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x1", {
                get: function() {
                    return this._x1;
                },
                set: function(t) {
                    this._x1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y1", {
                get: function() {
                    return this._y1;
                },
                set: function(t) {
                    this._y1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x2", {
                get: function() {
                    return this._x2;
                },
                set: function(t) {
                    this._x2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y2", {
                get: function() {
                    return this._y2;
                },
                set: function(t) {
                    this._y2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoCubicRel = function(t, e, n, i, r, a, o) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, "c", t), 
                this._x = e, this._y = n, this._x1 = i, this._y1 = r, this._x2 = a, this._y2 = o;
            }, window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoCubicRel.prototype.toString = function() {
                return "[object SVGPathSegCurvetoCubicRel]";
            }, window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoCubicRel.prototype.clone = function() {
                return new window.SVGPathSegCurvetoCubicRel(void 0, this._x, this._y, this._x1, this._y1, this._x2, this._y2);
            }, Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x1", {
                get: function() {
                    return this._x1;
                },
                set: function(t) {
                    this._x1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y1", {
                get: function() {
                    return this._y1;
                },
                set: function(t) {
                    this._y1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x2", {
                get: function() {
                    return this._x2;
                },
                set: function(t) {
                    this._x2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y2", {
                get: function() {
                    return this._y2;
                },
                set: function(t) {
                    this._y2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoQuadraticAbs = function(t, e, n, i, r) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, "Q", t), 
                this._x = e, this._y = n, this._x1 = i, this._y1 = r;
            }, window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function() {
                return "[object SVGPathSegCurvetoQuadraticAbs]";
            }, window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function() {
                return new window.SVGPathSegCurvetoQuadraticAbs(void 0, this._x, this._y, this._x1, this._y1);
            }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "x1", {
                get: function() {
                    return this._x1;
                },
                set: function(t) {
                    this._x1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "y1", {
                get: function() {
                    return this._y1;
                },
                set: function(t) {
                    this._y1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoQuadraticRel = function(t, e, n, i, r) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, "q", t), 
                this._x = e, this._y = n, this._x1 = i, this._y1 = r;
            }, window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function() {
                return "[object SVGPathSegCurvetoQuadraticRel]";
            }, window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function() {
                return new window.SVGPathSegCurvetoQuadraticRel(void 0, this._x, this._y, this._x1, this._y1);
            }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "x1", {
                get: function() {
                    return this._x1;
                },
                set: function(t) {
                    this._x1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "y1", {
                get: function() {
                    return this._y1;
                },
                set: function(t) {
                    this._y1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegArcAbs = function(t, e, n, i, r, a, o, s) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, "A", t), this._x = e, 
                this._y = n, this._r1 = i, this._r2 = r, this._angle = a, this._largeArcFlag = o, 
                this._sweepFlag = s;
            }, window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegArcAbs.prototype.toString = function() {
                return "[object SVGPathSegArcAbs]";
            }, window.SVGPathSegArcAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y;
            }, window.SVGPathSegArcAbs.prototype.clone = function() {
                return new window.SVGPathSegArcAbs(void 0, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);
            }, Object.defineProperty(window.SVGPathSegArcAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "r1", {
                get: function() {
                    return this._r1;
                },
                set: function(t) {
                    this._r1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "r2", {
                get: function() {
                    return this._r2;
                },
                set: function(t) {
                    this._r2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "angle", {
                get: function() {
                    return this._angle;
                },
                set: function(t) {
                    this._angle = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "largeArcFlag", {
                get: function() {
                    return this._largeArcFlag;
                },
                set: function(t) {
                    this._largeArcFlag = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "sweepFlag", {
                get: function() {
                    return this._sweepFlag;
                },
                set: function(t) {
                    this._sweepFlag = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegArcRel = function(t, e, n, i, r, a, o, s) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, "a", t), this._x = e, 
                this._y = n, this._r1 = i, this._r2 = r, this._angle = a, this._largeArcFlag = o, 
                this._sweepFlag = s;
            }, window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegArcRel.prototype.toString = function() {
                return "[object SVGPathSegArcRel]";
            }, window.SVGPathSegArcRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y;
            }, window.SVGPathSegArcRel.prototype.clone = function() {
                return new window.SVGPathSegArcRel(void 0, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);
            }, Object.defineProperty(window.SVGPathSegArcRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "r1", {
                get: function() {
                    return this._r1;
                },
                set: function(t) {
                    this._r1 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "r2", {
                get: function() {
                    return this._r2;
                },
                set: function(t) {
                    this._r2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "angle", {
                get: function() {
                    return this._angle;
                },
                set: function(t) {
                    this._angle = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "largeArcFlag", {
                get: function() {
                    return this._largeArcFlag;
                },
                set: function(t) {
                    this._largeArcFlag = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "sweepFlag", {
                get: function() {
                    return this._sweepFlag;
                },
                set: function(t) {
                    this._sweepFlag = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoHorizontalAbs = function(t, e) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, "H", t), 
                this._x = e;
            }, window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function() {
                return "[object SVGPathSegLinetoHorizontalAbs]";
            }, window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x;
            }, window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function() {
                return new window.SVGPathSegLinetoHorizontalAbs(void 0, this._x);
            }, Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoHorizontalRel = function(t, e) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, "h", t), 
                this._x = e;
            }, window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoHorizontalRel.prototype.toString = function() {
                return "[object SVGPathSegLinetoHorizontalRel]";
            }, window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x;
            }, window.SVGPathSegLinetoHorizontalRel.prototype.clone = function() {
                return new window.SVGPathSegLinetoHorizontalRel(void 0, this._x);
            }, Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoVerticalAbs = function(t, e) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, "V", t), 
                this._y = e;
            }, window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoVerticalAbs.prototype.toString = function() {
                return "[object SVGPathSegLinetoVerticalAbs]";
            }, window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._y;
            }, window.SVGPathSegLinetoVerticalAbs.prototype.clone = function() {
                return new window.SVGPathSegLinetoVerticalAbs(void 0, this._y);
            }, Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegLinetoVerticalRel = function(t, e) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, "v", t), 
                this._y = e;
            }, window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegLinetoVerticalRel.prototype.toString = function() {
                return "[object SVGPathSegLinetoVerticalRel]";
            }, window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._y;
            }, window.SVGPathSegLinetoVerticalRel.prototype.clone = function() {
                return new window.SVGPathSegLinetoVerticalRel(void 0, this._y);
            }, Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoCubicSmoothAbs = function(t, e, n, i, r) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, "S", t), 
                this._x = e, this._y = n, this._x2 = i, this._y2 = r;
            }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function() {
                return "[object SVGPathSegCurvetoCubicSmoothAbs]";
            }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function() {
                return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0, this._x, this._y, this._x2, this._y2);
            }, Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "x2", {
                get: function() {
                    return this._x2;
                },
                set: function(t) {
                    this._x2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "y2", {
                get: function() {
                    return this._y2;
                },
                set: function(t) {
                    this._y2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoCubicSmoothRel = function(t, e, n, i, r) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, "s", t), 
                this._x = e, this._y = n, this._x2 = i, this._y2 = r;
            }, window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function() {
                return "[object SVGPathSegCurvetoCubicSmoothRel]";
            }, window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function() {
                return new window.SVGPathSegCurvetoCubicSmoothRel(void 0, this._x, this._y, this._x2, this._y2);
            }, Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "x2", {
                get: function() {
                    return this._x2;
                },
                set: function(t) {
                    this._x2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "y2", {
                get: function() {
                    return this._y2;
                },
                set: function(t) {
                    this._y2 = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoQuadraticSmoothAbs = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, "T", t), 
                this._x = e, this._y = n;
            }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function() {
                return "[object SVGPathSegCurvetoQuadraticSmoothAbs]";
            }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function() {
                return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathSegCurvetoQuadraticSmoothRel = function(t, e, n) {
                window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, "t", t), 
                this._x = e, this._y = n;
            }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype), 
            window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function() {
                return "[object SVGPathSegCurvetoQuadraticSmoothRel]";
            }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function() {
                return this.pathSegTypeAsLetter + " " + this._x + " " + this._y;
            }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function() {
                return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0, this._x, this._y);
            }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, "x", {
                get: function() {
                    return this._x;
                },
                set: function(t) {
                    this._x = t, this._segmentChanged();
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, "y", {
                get: function() {
                    return this._y;
                },
                set: function(t) {
                    this._y = t, this._segmentChanged();
                },
                enumerable: !0
            }), window.SVGPathElement.prototype.createSVGPathSegClosePath = function() {
                return new window.SVGPathSegClosePath(void 0);
            }, window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function(t, e) {
                return new window.SVGPathSegMovetoAbs(void 0, t, e);
            }, window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function(t, e) {
                return new window.SVGPathSegMovetoRel(void 0, t, e);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function(t, e) {
                return new window.SVGPathSegLinetoAbs(void 0, t, e);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function(t, e) {
                return new window.SVGPathSegLinetoRel(void 0, t, e);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function(t, e, n, i, r, a) {
                return new window.SVGPathSegCurvetoCubicAbs(void 0, t, e, n, i, r, a);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function(t, e, n, i, r, a) {
                return new window.SVGPathSegCurvetoCubicRel(void 0, t, e, n, i, r, a);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function(t, e, n, i) {
                return new window.SVGPathSegCurvetoQuadraticAbs(void 0, t, e, n, i);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function(t, e, n, i) {
                return new window.SVGPathSegCurvetoQuadraticRel(void 0, t, e, n, i);
            }, window.SVGPathElement.prototype.createSVGPathSegArcAbs = function(t, e, n, i, r, a, o) {
                return new window.SVGPathSegArcAbs(void 0, t, e, n, i, r, a, o);
            }, window.SVGPathElement.prototype.createSVGPathSegArcRel = function(t, e, n, i, r, a, o) {
                return new window.SVGPathSegArcRel(void 0, t, e, n, i, r, a, o);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function(t) {
                return new window.SVGPathSegLinetoHorizontalAbs(void 0, t);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function(t) {
                return new window.SVGPathSegLinetoHorizontalRel(void 0, t);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function(t) {
                return new window.SVGPathSegLinetoVerticalAbs(void 0, t);
            }, window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function(t) {
                return new window.SVGPathSegLinetoVerticalRel(void 0, t);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function(t, e, n, i) {
                return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0, t, e, n, i);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function(t, e, n, i) {
                return new window.SVGPathSegCurvetoCubicSmoothRel(void 0, t, e, n, i);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function(t, e) {
                return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0, t, e);
            }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function(t, e) {
                return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0, t, e);
            }, "getPathSegAtLength" in window.SVGPathElement.prototype || (window.SVGPathElement.prototype.getPathSegAtLength = function(t) {
                if (void 0 === t || !isFinite(t)) throw "Invalid arguments.";
                var e = document.createElementNS("http://www.w3.org/2000/svg", "path");
                e.setAttribute("d", this.getAttribute("d"));
                var n = e.pathSegList.numberOfItems - 1;
                if (n <= 0) return 0;
                do {
                    if (e.pathSegList.removeItem(n), t > e.getTotalLength()) break;
                    n--;
                } while (n > 0);
                return n;
            })), "SVGPathSegList" in window || (window.SVGPathSegList = function(t) {
                this._pathElement = t, this._list = this._parsePath(this._pathElement.getAttribute("d")), 
                this._mutationObserverConfig = {
                    attributes: !0,
                    attributeFilter: [ "d" ]
                }, this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this)), 
                this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
            }, window.SVGPathSegList.prototype.classname = "SVGPathSegList", Object.defineProperty(window.SVGPathSegList.prototype, "numberOfItems", {
                get: function() {
                    return this._checkPathSynchronizedToList(), this._list.length;
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathElement.prototype, "pathSegList", {
                get: function() {
                    return this._pathSegList || (this._pathSegList = new window.SVGPathSegList(this)), 
                    this._pathSegList;
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathElement.prototype, "normalizedPathSegList", {
                get: function() {
                    return this.pathSegList;
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathElement.prototype, "animatedPathSegList", {
                get: function() {
                    return this.pathSegList;
                },
                enumerable: !0
            }), Object.defineProperty(window.SVGPathElement.prototype, "animatedNormalizedPathSegList", {
                get: function() {
                    return this.pathSegList;
                },
                enumerable: !0
            }), window.SVGPathSegList.prototype._checkPathSynchronizedToList = function() {
                this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());
            }, window.SVGPathSegList.prototype._updateListFromPathMutations = function(t) {
                if (this._pathElement) {
                    var e = !1;
                    t.forEach(function(t) {
                        "d" == t.attributeName && (e = !0);
                    }), e && (this._list = this._parsePath(this._pathElement.getAttribute("d")));
                }
            }, window.SVGPathSegList.prototype._writeListToPath = function() {
                this._pathElementMutationObserver.disconnect(), this._pathElement.setAttribute("d", window.SVGPathSegList._pathSegArrayAsString(this._list)), 
                this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
            }, window.SVGPathSegList.prototype.segmentChanged = function(t) {
                this._writeListToPath();
            }, window.SVGPathSegList.prototype.clear = function() {
                this._checkPathSynchronizedToList(), this._list.forEach(function(t) {
                    t._owningPathSegList = null;
                }), this._list = [], this._writeListToPath();
            }, window.SVGPathSegList.prototype.initialize = function(t) {
                return this._checkPathSynchronizedToList(), this._list = [ t ], t._owningPathSegList = this, 
                this._writeListToPath(), t;
            }, window.SVGPathSegList.prototype._checkValidIndex = function(t) {
                if (isNaN(t) || t < 0 || t >= this.numberOfItems) throw "INDEX_SIZE_ERR";
            }, window.SVGPathSegList.prototype.getItem = function(t) {
                return this._checkPathSynchronizedToList(), this._checkValidIndex(t), this._list[t];
            }, window.SVGPathSegList.prototype.insertItemBefore = function(t, e) {
                return this._checkPathSynchronizedToList(), e > this.numberOfItems && (e = this.numberOfItems), 
                t._owningPathSegList && (t = t.clone()), this._list.splice(e, 0, t), t._owningPathSegList = this, 
                this._writeListToPath(), t;
            }, window.SVGPathSegList.prototype.replaceItem = function(t, e) {
                return this._checkPathSynchronizedToList(), t._owningPathSegList && (t = t.clone()), 
                this._checkValidIndex(e), this._list[e] = t, t._owningPathSegList = this, this._writeListToPath(), 
                t;
            }, window.SVGPathSegList.prototype.removeItem = function(t) {
                this._checkPathSynchronizedToList(), this._checkValidIndex(t);
                var e = this._list[t];
                return this._list.splice(t, 1), this._writeListToPath(), e;
            }, window.SVGPathSegList.prototype.appendItem = function(t) {
                return this._checkPathSynchronizedToList(), t._owningPathSegList && (t = t.clone()), 
                this._list.push(t), t._owningPathSegList = this, this._writeListToPath(), t;
            }, window.SVGPathSegList._pathSegArrayAsString = function(t) {
                var e = "", n = !0;
                return t.forEach(function(t) {
                    n ? (n = !1, e += t._asPathString()) : e += " " + t._asPathString();
                }), e;
            }, window.SVGPathSegList.prototype._parsePath = function(t) {
                if (!t || 0 == t.length) return [];
                var e = this, n = function() {
                    this.pathSegList = [];
                };
                n.prototype.appendSegment = function(t) {
                    this.pathSegList.push(t);
                };
                var i = function(t) {
                    this._string = t, this._currentIndex = 0, this._endIndex = this._string.length, 
                    this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN, this._skipOptionalSpaces();
                };
                i.prototype._isCurrentSpace = function() {
                    var t = this._string[this._currentIndex];
                    return t <= " " && (" " == t || "\n" == t || "\t" == t || "\r" == t || "\f" == t);
                }, i.prototype._skipOptionalSpaces = function() {
                    for (;this._currentIndex < this._endIndex && this._isCurrentSpace(); ) this._currentIndex++;
                    return this._currentIndex < this._endIndex;
                }, i.prototype._skipOptionalSpacesOrDelimiter = function() {
                    return !(this._currentIndex < this._endIndex && !this._isCurrentSpace() && "," != this._string.charAt(this._currentIndex)) && (this._skipOptionalSpaces() && this._currentIndex < this._endIndex && "," == this._string.charAt(this._currentIndex) && (this._currentIndex++, 
                    this._skipOptionalSpaces()), this._currentIndex < this._endIndex);
                }, i.prototype.hasMoreData = function() {
                    return this._currentIndex < this._endIndex;
                }, i.prototype.peekSegmentType = function() {
                    var t = this._string[this._currentIndex];
                    return this._pathSegTypeFromChar(t);
                }, i.prototype._pathSegTypeFromChar = function(t) {
                    switch (t) {
                      case "Z":
                      case "z":
                        return window.SVGPathSeg.PATHSEG_CLOSEPATH;

                      case "M":
                        return window.SVGPathSeg.PATHSEG_MOVETO_ABS;

                      case "m":
                        return window.SVGPathSeg.PATHSEG_MOVETO_REL;

                      case "L":
                        return window.SVGPathSeg.PATHSEG_LINETO_ABS;

                      case "l":
                        return window.SVGPathSeg.PATHSEG_LINETO_REL;

                      case "C":
                        return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;

                      case "c":
                        return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;

                      case "Q":
                        return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;

                      case "q":
                        return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;

                      case "A":
                        return window.SVGPathSeg.PATHSEG_ARC_ABS;

                      case "a":
                        return window.SVGPathSeg.PATHSEG_ARC_REL;

                      case "H":
                        return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;

                      case "h":
                        return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;

                      case "V":
                        return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;

                      case "v":
                        return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;

                      case "S":
                        return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;

                      case "s":
                        return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;

                      case "T":
                        return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;

                      case "t":
                        return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;

                      default:
                        return window.SVGPathSeg.PATHSEG_UNKNOWN;
                    }
                }, i.prototype._nextCommandHelper = function(t, e) {
                    return ("+" == t || "-" == t || "." == t || t >= "0" && t <= "9") && e != window.SVGPathSeg.PATHSEG_CLOSEPATH ? e == window.SVGPathSeg.PATHSEG_MOVETO_ABS ? window.SVGPathSeg.PATHSEG_LINETO_ABS : e == window.SVGPathSeg.PATHSEG_MOVETO_REL ? window.SVGPathSeg.PATHSEG_LINETO_REL : e : window.SVGPathSeg.PATHSEG_UNKNOWN;
                }, i.prototype.initialCommandIsMoveTo = function() {
                    if (!this.hasMoreData()) return !0;
                    var t = this.peekSegmentType();
                    return t == window.SVGPathSeg.PATHSEG_MOVETO_ABS || t == window.SVGPathSeg.PATHSEG_MOVETO_REL;
                }, i.prototype._parseNumber = function() {
                    var t = 0, e = 0, n = 1, i = 0, r = 1, a = 1, o = this._currentIndex;
                    if (this._skipOptionalSpaces(), this._currentIndex < this._endIndex && "+" == this._string.charAt(this._currentIndex) ? this._currentIndex++ : this._currentIndex < this._endIndex && "-" == this._string.charAt(this._currentIndex) && (this._currentIndex++, 
                    r = -1), !(this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") && "." != this._string.charAt(this._currentIndex))) {
                        for (var s = this._currentIndex; this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9"; ) this._currentIndex++;
                        if (this._currentIndex != s) for (var c = this._currentIndex - 1, l = 1; c >= s; ) e += l * (this._string.charAt(c--) - "0"), 
                        l *= 10;
                        if (this._currentIndex < this._endIndex && "." == this._string.charAt(this._currentIndex)) {
                            if (this._currentIndex++, this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") return;
                            for (;this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9"; ) n *= 10, 
                            i += (this._string.charAt(this._currentIndex) - "0") / n, this._currentIndex += 1;
                        }
                        if (this._currentIndex != o && this._currentIndex + 1 < this._endIndex && ("e" == this._string.charAt(this._currentIndex) || "E" == this._string.charAt(this._currentIndex)) && "x" != this._string.charAt(this._currentIndex + 1) && "m" != this._string.charAt(this._currentIndex + 1)) {
                            if (this._currentIndex++, "+" == this._string.charAt(this._currentIndex) ? this._currentIndex++ : "-" == this._string.charAt(this._currentIndex) && (this._currentIndex++, 
                            a = -1), this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") return;
                            for (;this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9"; ) t *= 10, 
                            t += this._string.charAt(this._currentIndex) - "0", this._currentIndex++;
                        }
                        var u = e + i;
                        if (u *= r, t && (u *= Math.pow(10, a * t)), o != this._currentIndex) return this._skipOptionalSpacesOrDelimiter(), 
                        u;
                    }
                }, i.prototype._parseArcFlag = function() {
                    if (!(this._currentIndex >= this._endIndex)) {
                        var t = !1, e = this._string.charAt(this._currentIndex++);
                        if ("0" == e) t = !1; else {
                            if ("1" != e) return;
                            t = !0;
                        }
                        return this._skipOptionalSpacesOrDelimiter(), t;
                    }
                }, i.prototype.parseSegment = function() {
                    var t = this._string[this._currentIndex], n = this._pathSegTypeFromChar(t);
                    if (n == window.SVGPathSeg.PATHSEG_UNKNOWN) {
                        if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;
                        if (n = this._nextCommandHelper(t, this._previousCommand), n == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;
                    } else this._currentIndex++;
                    switch (this._previousCommand = n, n) {
                      case window.SVGPathSeg.PATHSEG_MOVETO_REL:
                        return new window.SVGPathSegMovetoRel(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_MOVETO_ABS:
                        return new window.SVGPathSegMovetoAbs(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_REL:
                        return new window.SVGPathSegLinetoRel(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_ABS:
                        return new window.SVGPathSegLinetoAbs(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:
                        return new window.SVGPathSegLinetoHorizontalRel(e, this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:
                        return new window.SVGPathSegLinetoHorizontalAbs(e, this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:
                        return new window.SVGPathSegLinetoVerticalRel(e, this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:
                        return new window.SVGPathSegLinetoVerticalAbs(e, this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_CLOSEPATH:
                        return this._skipOptionalSpaces(), new window.SVGPathSegClosePath(e);

                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            x2: this._parseNumber(),
                            y2: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoCubicRel(e, i.x, i.y, i.x1, i.y1, i.x2, i.y2);

                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            x2: this._parseNumber(),
                            y2: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoCubicAbs(e, i.x, i.y, i.x1, i.y1, i.x2, i.y2);

                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:
                        var i = {
                            x2: this._parseNumber(),
                            y2: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoCubicSmoothRel(e, i.x, i.y, i.x2, i.y2);

                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:
                        var i = {
                            x2: this._parseNumber(),
                            y2: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoCubicSmoothAbs(e, i.x, i.y, i.x2, i.y2);

                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoQuadraticRel(e, i.x, i.y, i.x1, i.y1);

                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegCurvetoQuadraticAbs(e, i.x, i.y, i.x1, i.y1);

                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:
                        return new window.SVGPathSegCurvetoQuadraticSmoothRel(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:
                        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e, this._parseNumber(), this._parseNumber());

                      case window.SVGPathSeg.PATHSEG_ARC_REL:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            arcAngle: this._parseNumber(),
                            arcLarge: this._parseArcFlag(),
                            arcSweep: this._parseArcFlag(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegArcRel(e, i.x, i.y, i.x1, i.y1, i.arcAngle, i.arcLarge, i.arcSweep);

                      case window.SVGPathSeg.PATHSEG_ARC_ABS:
                        var i = {
                            x1: this._parseNumber(),
                            y1: this._parseNumber(),
                            arcAngle: this._parseNumber(),
                            arcLarge: this._parseArcFlag(),
                            arcSweep: this._parseArcFlag(),
                            x: this._parseNumber(),
                            y: this._parseNumber()
                        };
                        return new window.SVGPathSegArcAbs(e, i.x, i.y, i.x1, i.y1, i.arcAngle, i.arcLarge, i.arcSweep);

                      default:
                        throw "Unknown path seg type.";
                    }
                };
                var r = new n(), a = new i(t);
                if (!a.initialCommandIsMoveTo()) return [];
                for (;a.hasMoreData(); ) {
                    var o = a.parseSegment();
                    if (!o) return [];
                    r.appendSegment(o);
                }
                return r.pathSegList;
            });
        }(), P.axis = function() {}, P.axis.labels = function(t) {
            var e = this.internal;
            arguments.length && (Object.keys(t).forEach(function(n) {
                e.axis.setLabelText(n, t[n]);
            }), e.axis.updateLabels());
        }, P.axis.max = function(t) {
            var e = this.internal, n = e.config;
            return arguments.length ? ("object" === ("undefined" == typeof t ? "undefined" : c(t)) ? (h(t.x) && (n.axis_x_max = t.x), 
            h(t.y) && (n.axis_y_max = t.y), h(t.y2) && (n.axis_y2_max = t.y2)) : n.axis_y_max = n.axis_y2_max = t, 
            void e.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0
            })) : {
                x: n.axis_x_max,
                y: n.axis_y_max,
                y2: n.axis_y2_max
            };
        }, P.axis.min = function(t) {
            var e = this.internal, n = e.config;
            return arguments.length ? ("object" === ("undefined" == typeof t ? "undefined" : c(t)) ? (h(t.x) && (n.axis_x_min = t.x), 
            h(t.y) && (n.axis_y_min = t.y), h(t.y2) && (n.axis_y2_min = t.y2)) : n.axis_y_min = n.axis_y2_min = t, 
            void e.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0
            })) : {
                x: n.axis_x_min,
                y: n.axis_y_min,
                y2: n.axis_y2_min
            };
        }, P.axis.range = function(t) {
            return arguments.length ? (v(t.max) && this.axis.max(t.max), void (v(t.min) && this.axis.min(t.min))) : {
                max: this.axis.max(),
                min: this.axis.min()
            };
        }, P.category = function(t, e) {
            var n = this.internal, i = n.config;
            return arguments.length > 1 && (i.axis_x_categories[t] = e, n.redraw()), i.axis_x_categories[t];
        }, P.categories = function(t) {
            var e = this.internal, n = e.config;
            return arguments.length ? (n.axis_x_categories = t, e.redraw(), n.axis_x_categories) : n.axis_x_categories;
        }, P.resize = function(t) {
            var e = this.internal, n = e.config;
            n.size_width = t ? t.width : null, n.size_height = t ? t.height : null, this.flush();
        }, P.flush = function() {
            var t = this.internal;
            t.updateAndRedraw({
                withLegend: !0,
                withTransition: !1,
                withTransitionForTransform: !1
            });
        }, P.destroy = function() {
            var t = this.internal;
            if (window.clearInterval(t.intervalForObserveInserted), void 0 !== t.resizeTimeout && window.clearTimeout(t.resizeTimeout), 
            window.detachEvent) window.detachEvent("onresize", t.resizeFunction); else if (window.removeEventListener) window.removeEventListener("resize", t.resizeFunction); else {
                var e = window.onresize;
                e && e.add && e.remove && e.remove(t.resizeFunction);
            }
            return t.selectChart.classed("c3", !1).html(""), Object.keys(t).forEach(function(e) {
                t[e] = null;
            }), null;
        }, P.color = function(t) {
            var e = this.internal;
            return e.color(t);
        }, P.data = function(t) {
            var e = this.internal.data.targets;
            return "undefined" == typeof t ? e : e.filter(function(e) {
                return [].concat(t).indexOf(e.id) >= 0;
            });
        }, P.data.shown = function(t) {
            return this.internal.filterTargetsToShow(this.data(t));
        }, P.data.values = function(t) {
            var e, n = null;
            return t && (e = this.data(t), n = e[0] ? e[0].values.map(function(t) {
                return t.value;
            }) : null), n;
        }, P.data.names = function(t) {
            return this.internal.clearLegendItemTextBoxCache(), this.internal.updateDataAttributes("names", t);
        }, P.data.colors = function(t) {
            return this.internal.updateDataAttributes("colors", t);
        }, P.data.axes = function(t) {
            return this.internal.updateDataAttributes("axes", t);
        }, P.flow = function(t) {
            var e, n, i, r, a, o, s, c, l = this.internal, u = [], d = l.getMaxDataCount(), f = 0, p = 0;
            if (t.json) n = l.convertJsonToData(t.json, t.keys); else if (t.rows) n = l.convertRowsToData(t.rows); else {
                if (!t.columns) return;
                n = l.convertColumnsToData(t.columns);
            }
            e = l.convertDataToTargets(n, !0), l.data.targets.forEach(function(t) {
                var n, i, r = !1;
                for (n = 0; n < e.length; n++) if (t.id === e[n].id) {
                    for (r = !0, t.values[t.values.length - 1] && (p = t.values[t.values.length - 1].index + 1), 
                    f = e[n].values.length, i = 0; i < f; i++) e[n].values[i].index = p + i, l.isTimeSeries() || (e[n].values[i].x = p + i);
                    t.values = t.values.concat(e[n].values), e.splice(n, 1);
                    break;
                }
                r || u.push(t.id);
            }), l.data.targets.forEach(function(t) {
                var e, n;
                for (e = 0; e < u.length; e++) if (t.id === u[e]) for (p = t.values[t.values.length - 1].index + 1, 
                n = 0; n < f; n++) t.values.push({
                    id: t.id,
                    index: p + n,
                    x: l.isTimeSeries() ? l.getOtherTargetX(p + n) : p + n,
                    value: null
                });
            }), l.data.targets.length && e.forEach(function(t) {
                var e, n = [];
                for (e = l.data.targets[0].values[0].index; e < p; e++) n.push({
                    id: t.id,
                    index: e,
                    x: l.isTimeSeries() ? l.getOtherTargetX(e) : e,
                    value: null
                });
                t.values.forEach(function(t) {
                    t.index += p, l.isTimeSeries() || (t.x += p);
                }), t.values = n.concat(t.values);
            }), l.data.targets = l.data.targets.concat(e), i = l.getMaxDataCount(), a = l.data.targets[0], 
            o = a.values[0], v(t.to) ? (f = 0, c = l.isTimeSeries() ? l.parseDate(t.to) : t.to, 
            a.values.forEach(function(t) {
                t.x < c && f++;
            })) : v(t.length) && (f = t.length), d ? 1 === d && l.isTimeSeries() && (s = (a.values[a.values.length - 1].x - o.x) / 2, 
            r = [ new Date(+o.x - s), new Date(+o.x + s) ], l.updateXDomain(null, !0, !0, !1, r)) : (s = l.isTimeSeries() ? a.values.length > 1 ? a.values[a.values.length - 1].x - o.x : o.x - l.getXDomain(l.data.targets)[0] : 1, 
            r = [ o.x - s, o.x ], l.updateXDomain(null, !0, !0, !1, r)), l.updateTargets(l.data.targets), 
            l.redraw({
                flow: {
                    index: o.index,
                    length: f,
                    duration: h(t.duration) ? t.duration : l.config.transition_duration,
                    done: t.done,
                    orgDataCount: d
                },
                withLegend: !0,
                withTransition: d > 1,
                withTrimXDomain: !1,
                withUpdateXAxis: !0
            });
        }, k.generateFlow = function(t) {
            var e = this, n = e.config, i = e.d3;
            return function() {
                var r, a, o, c = t.targets, l = t.flow, u = t.drawBar, d = t.drawLine, h = t.drawArea, f = t.cx, p = t.cy, g = t.xv, m = t.xForText, v = t.yForText, y = t.duration, x = 1, b = l.index, w = l.length, S = e.getValueOnIndex(e.data.targets[0].values, b), T = e.getValueOnIndex(e.data.targets[0].values, b + w), E = e.x.domain(), A = l.duration || y, C = l.done || function() {}, P = e.generateWait(), k = e.xgrid || i.selectAll([]), M = e.xgridLines || i.selectAll([]), O = e.mainRegion || i.selectAll([]), N = e.mainText || i.selectAll([]), V = e.mainBar || i.selectAll([]), L = e.mainLine || i.selectAll([]), R = e.mainArea || i.selectAll([]), I = e.mainCircle || i.selectAll([]);
                e.flowing = !0, e.data.targets.forEach(function(t) {
                    t.values.splice(0, w);
                }), o = e.updateXDomain(c, !0, !0), e.updateXGrid && e.updateXGrid(!0), l.orgDataCount ? r = 1 === l.orgDataCount || (S && S.x) === (T && T.x) ? e.x(E[0]) - e.x(o[0]) : e.isTimeSeries() ? e.x(E[0]) - e.x(o[0]) : e.x(S.x) - e.x(T.x) : 1 !== e.data.targets[0].values.length ? r = e.x(E[0]) - e.x(o[0]) : e.isTimeSeries() ? (S = e.getValueOnIndex(e.data.targets[0].values, 0), 
                T = e.getValueOnIndex(e.data.targets[0].values, e.data.targets[0].values.length - 1), 
                r = e.x(S.x) - e.x(T.x)) : r = _(o) / 2, x = _(E) / _(o), a = "translate(" + r + ",0) scale(" + x + ",1)", 
                e.hideXGridFocus(), i.transition().ease("linear").duration(A).each(function() {
                    P.add(e.axes.x.transition().call(e.xAxis)), P.add(V.transition().attr("transform", a)), 
                    P.add(L.transition().attr("transform", a)), P.add(R.transition().attr("transform", a)), 
                    P.add(I.transition().attr("transform", a)), P.add(N.transition().attr("transform", a)), 
                    P.add(O.filter(e.isRegionOnX).transition().attr("transform", a)), P.add(k.transition().attr("transform", a)), 
                    P.add(M.transition().attr("transform", a));
                }).call(P, function() {
                    var t, i = [], r = [], a = [];
                    if (w) {
                        for (t = 0; t < w; t++) i.push("." + s.shape + "-" + (b + t)), r.push("." + s.text + "-" + (b + t)), 
                        a.push("." + s.eventRect + "-" + (b + t));
                        e.svg.selectAll("." + s.shapes).selectAll(i).remove(), e.svg.selectAll("." + s.texts).selectAll(r).remove(), 
                        e.svg.selectAll("." + s.eventRects).selectAll(a).remove(), e.svg.select("." + s.xgrid).remove();
                    }
                    k.attr("transform", null).attr(e.xgridAttr), M.attr("transform", null), M.select("line").attr("x1", n.axis_rotated ? 0 : g).attr("x2", n.axis_rotated ? e.width : g), 
                    M.select("text").attr("x", n.axis_rotated ? e.width : 0).attr("y", g), V.attr("transform", null).attr("d", u), 
                    L.attr("transform", null).attr("d", d), R.attr("transform", null).attr("d", h), 
                    I.attr("transform", null).attr("cx", f).attr("cy", p), N.attr("transform", null).attr("x", m).attr("y", v).style("fill-opacity", e.opacityForText.bind(e)), 
                    O.attr("transform", null), O.select("rect").filter(e.isRegionOnX).attr("x", e.regionX.bind(e)).attr("width", e.regionWidth.bind(e)), 
                    n.interaction_enabled && e.redrawEventRect(), C(), e.flowing = !1;
                });
            };
        }, P.focus = function(t) {
            var e, n = this.internal;
            t = n.mapToTargetIds(t), e = n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow, n))), 
            this.revert(), this.defocus(), e.classed(s.focused, !0).classed(s.defocused, !1), 
            n.hasArcType() && n.expandArc(t), n.toggleFocusLegend(t, !0), n.focusedTargetIds = t, 
            n.defocusedTargetIds = n.defocusedTargetIds.filter(function(e) {
                return t.indexOf(e) < 0;
            });
        }, P.defocus = function(t) {
            var e, n = this.internal;
            t = n.mapToTargetIds(t), e = n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow, n))), 
            e.classed(s.focused, !1).classed(s.defocused, !0), n.hasArcType() && n.unexpandArc(t), 
            n.toggleFocusLegend(t, !1), n.focusedTargetIds = n.focusedTargetIds.filter(function(e) {
                return t.indexOf(e) < 0;
            }), n.defocusedTargetIds = t;
        }, P.revert = function(t) {
            var e, n = this.internal;
            t = n.mapToTargetIds(t), e = n.svg.selectAll(n.selectorTargets(t)), e.classed(s.focused, !1).classed(s.defocused, !1), 
            n.hasArcType() && n.unexpandArc(t), n.config.legend_show && (n.showLegend(t.filter(n.isLegendToShow.bind(n))), 
            n.legend.selectAll(n.selectorLegends(t)).filter(function() {
                return n.d3.select(this).classed(s.legendItemFocused);
            }).classed(s.legendItemFocused, !1)), n.focusedTargetIds = [], n.defocusedTargetIds = [];
        }, P.xgrids = function(t) {
            var e = this.internal, n = e.config;
            return t ? (n.grid_x_lines = t, e.redrawWithoutRescale(), n.grid_x_lines) : n.grid_x_lines;
        }, P.xgrids.add = function(t) {
            var e = this.internal;
            return this.xgrids(e.config.grid_x_lines.concat(t ? t : []));
        }, P.xgrids.remove = function(t) {
            var e = this.internal;
            e.removeGridLines(t, !0);
        }, P.ygrids = function(t) {
            var e = this.internal, n = e.config;
            return t ? (n.grid_y_lines = t, e.redrawWithoutRescale(), n.grid_y_lines) : n.grid_y_lines;
        }, P.ygrids.add = function(t) {
            var e = this.internal;
            return this.ygrids(e.config.grid_y_lines.concat(t ? t : []));
        }, P.ygrids.remove = function(t) {
            var e = this.internal;
            e.removeGridLines(t, !1);
        }, P.groups = function(t) {
            var e = this.internal, n = e.config;
            return m(t) ? n.data_groups : (n.data_groups = t, e.redraw(), n.data_groups);
        }, P.legend = function() {}, P.legend.show = function(t) {
            var e = this.internal;
            e.showLegend(e.mapToTargetIds(t)), e.updateAndRedraw({
                withLegend: !0
            });
        }, P.legend.hide = function(t) {
            var e = this.internal;
            e.hideLegend(e.mapToTargetIds(t)), e.updateAndRedraw({
                withLegend: !0
            });
        }, P.load = function(t) {
            var e = this.internal, n = e.config;
            return t.xs && e.addXs(t.xs), "names" in t && P.data.names.bind(this)(t.names), 
            "classes" in t && Object.keys(t.classes).forEach(function(e) {
                n.data_classes[e] = t.classes[e];
            }), "categories" in t && e.isCategorized() && (n.axis_x_categories = t.categories), 
            "axes" in t && Object.keys(t.axes).forEach(function(e) {
                n.data_axes[e] = t.axes[e];
            }), "colors" in t && Object.keys(t.colors).forEach(function(e) {
                n.data_colors[e] = t.colors[e];
            }), "cacheIds" in t && e.hasCaches(t.cacheIds) ? void e.load(e.getCaches(t.cacheIds), t.done) : void ("unload" in t ? e.unload(e.mapToTargetIds("boolean" == typeof t.unload && t.unload ? null : t.unload), function() {
                e.loadFromArgs(t);
            }) : e.loadFromArgs(t));
        }, P.unload = function(t) {
            var e = this.internal;
            t = t || {}, t instanceof Array ? t = {
                ids: t
            } : "string" == typeof t && (t = {
                ids: [ t ]
            }), e.unload(e.mapToTargetIds(t.ids), function() {
                e.redraw({
                    withUpdateOrgXDomain: !0,
                    withUpdateXDomain: !0,
                    withLegend: !0
                }), t.done && t.done();
            });
        }, P.regions = function(t) {
            var e = this.internal, n = e.config;
            return t ? (n.regions = t, e.redrawWithoutRescale(), n.regions) : n.regions;
        }, P.regions.add = function(t) {
            var e = this.internal, n = e.config;
            return t ? (n.regions = n.regions.concat(t), e.redrawWithoutRescale(), n.regions) : n.regions;
        }, P.regions.remove = function(t) {
            var e, n, i, r = this.internal, a = r.config;
            return t = t || {}, e = r.getOption(t, "duration", a.transition_duration), n = r.getOption(t, "classes", [ s.region ]), 
            i = r.main.select("." + s.regions).selectAll(n.map(function(t) {
                return "." + t;
            })), (e ? i.transition().duration(e) : i).style("opacity", 0).remove(), a.regions = a.regions.filter(function(t) {
                var e = !1;
                return !t.class || (t.class.split(" ").forEach(function(t) {
                    n.indexOf(t) >= 0 && (e = !0);
                }), !e);
            }), a.regions;
        }, P.selected = function(t) {
            var e = this.internal, n = e.d3;
            return n.merge(e.main.selectAll("." + s.shapes + e.getTargetSelectorSuffix(t)).selectAll("." + s.shape).filter(function() {
                return n.select(this).classed(s.SELECTED);
            }).map(function(t) {
                return t.map(function(t) {
                    var e = t.__data__;
                    return e.data ? e.data : e;
                });
            }));
        }, P.select = function(t, e, n) {
            var i = this.internal, r = i.d3, a = i.config;
            a.data_selection_enabled && i.main.selectAll("." + s.shapes).selectAll("." + s.shape).each(function(o, c) {
                var l = r.select(this), u = o.data ? o.data.id : o.id, d = i.getToggle(this, o).bind(i), h = a.data_selection_grouped || !t || t.indexOf(u) >= 0, f = !e || e.indexOf(c) >= 0, p = l.classed(s.SELECTED);
                l.classed(s.line) || l.classed(s.area) || (h && f ? a.data_selection_isselectable(o) && !p && d(!0, l.classed(s.SELECTED, !0), o, c) : v(n) && n && p && d(!1, l.classed(s.SELECTED, !1), o, c));
            });
        }, P.unselect = function(t, e) {
            var n = this.internal, i = n.d3, r = n.config;
            r.data_selection_enabled && n.main.selectAll("." + s.shapes).selectAll("." + s.shape).each(function(a, o) {
                var c = i.select(this), l = a.data ? a.data.id : a.id, u = n.getToggle(this, a).bind(n), d = r.data_selection_grouped || !t || t.indexOf(l) >= 0, h = !e || e.indexOf(o) >= 0, f = c.classed(s.SELECTED);
                c.classed(s.line) || c.classed(s.area) || d && h && r.data_selection_isselectable(a) && f && u(!1, c.classed(s.SELECTED, !1), a, o);
            });
        }, P.show = function(t, e) {
            var n, i = this.internal;
            t = i.mapToTargetIds(t), e = e || {}, i.removeHiddenTargetIds(t), n = i.svg.selectAll(i.selectorTargets(t)), 
            n.transition().style("opacity", 1, "important").call(i.endall, function() {
                n.style("opacity", null).style("opacity", 1);
            }), e.withLegend && i.showLegend(t), i.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0,
                withLegend: !0
            });
        }, P.hide = function(t, e) {
            var n, i = this.internal;
            t = i.mapToTargetIds(t), e = e || {}, i.addHiddenTargetIds(t), n = i.svg.selectAll(i.selectorTargets(t)), 
            n.transition().style("opacity", 0, "important").call(i.endall, function() {
                n.style("opacity", null).style("opacity", 0);
            }), e.withLegend && i.hideLegend(t), i.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0,
                withLegend: !0
            });
        }, P.toggle = function(t, e) {
            var n = this, i = this.internal;
            i.mapToTargetIds(t).forEach(function(t) {
                i.isTargetToShow(t) ? n.hide(t, e) : n.show(t, e);
            });
        }, P.tooltip = function() {}, P.tooltip.show = function(t) {
            var e, n, i = this.internal;
            t.mouse && (n = t.mouse), t.data ? i.isMultipleX() ? (n = [ i.x(t.data.x), i.getYScale(t.data.id)(t.data.value) ], 
            e = null) : e = h(t.data.index) ? t.data.index : i.getIndexByX(t.data.x) : "undefined" != typeof t.x ? e = i.getIndexByX(t.x) : "undefined" != typeof t.index && (e = t.index), 
            i.dispatchEvent("mouseover", e, n), i.dispatchEvent("mousemove", e, n), i.config.tooltip_onshow.call(i, t.data);
        }, P.tooltip.hide = function() {
            this.internal.dispatchEvent("mouseout", 0), this.internal.config.tooltip_onhide.call(this);
        }, P.transform = function(t, e) {
            var n = this.internal, i = [ "pie", "donut" ].indexOf(t) >= 0 ? {
                withTransform: !0
            } : null;
            n.transformTo(e, t, i);
        }, k.transformTo = function(t, e, n) {
            var i = this, r = !i.hasArcType(), a = n || {
                withTransitionForAxis: r
            };
            a.withTransitionForTransform = !1, i.transiting = !1, i.setTargetType(t, e), i.updateTargets(i.data.targets), 
            i.updateAndRedraw(a);
        }, P.x = function(t) {
            var e = this.internal;
            return arguments.length && (e.updateTargetX(e.data.targets, t), e.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0
            })), e.data.xs;
        }, P.xs = function(t) {
            var e = this.internal;
            return arguments.length && (e.updateTargetXs(e.data.targets, t), e.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0
            })), e.data.xs;
        }, P.zoom = function(t) {
            var e = this.internal;
            return t && (e.isTimeSeries() && (t = t.map(function(t) {
                return e.parseDate(t);
            })), e.brush.extent(t), e.redraw({
                withUpdateXDomain: !0,
                withY: e.config.zoom_rescale
            }), e.config.zoom_onzoom.call(this, e.x.orgDomain())), e.brush.extent();
        }, P.zoom.enable = function(t) {
            var e = this.internal;
            e.config.zoom_enabled = t, e.updateAndRedraw();
        }, P.unzoom = function() {
            var t = this.internal;
            t.brush.clear().update(), t.redraw({
                withUpdateXDomain: !0
            });
        }, P.zoom.max = function(t) {
            var e = this.internal, n = e.config, i = e.d3;
            return 0 === t || t ? void (n.zoom_x_max = i.max([ e.orgXDomain[1], t ])) : n.zoom_x_max;
        }, P.zoom.min = function(t) {
            var e = this.internal, n = e.config, i = e.d3;
            return 0 === t || t ? void (n.zoom_x_min = i.min([ e.orgXDomain[0], t ])) : n.zoom_x_min;
        }, P.zoom.range = function(t) {
            return arguments.length ? (v(t.max) && this.domain.max(t.max), void (v(t.min) && this.domain.min(t.min))) : {
                max: this.domain.max(),
                min: this.domain.min()
            };
        }, k.initPie = function() {
            var t = this, e = t.d3;
            t.pie = e.layout.pie().value(function(t) {
                return t.values.reduce(function(t, e) {
                    return t + e.value;
                }, 0);
            }), t.pie.sort(t.getOrderFunction() || null);
        }, k.updateRadius = function() {
            var t = this, e = t.config, n = e.gauge_width || e.donut_width;
            t.radiusExpanded = Math.min(t.arcWidth, t.arcHeight) / 2, t.radius = .95 * t.radiusExpanded, 
            t.innerRadiusRatio = n ? (t.radius - n) / t.radius : .6, t.innerRadius = t.hasType("donut") || t.hasType("gauge") ? t.radius * t.innerRadiusRatio : 0;
        }, k.updateArc = function() {
            var t = this;
            t.svgArc = t.getSvgArc(), t.svgArcExpanded = t.getSvgArcExpanded(), t.svgArcExpandedSub = t.getSvgArcExpanded(.98);
        }, k.updateAngle = function(t) {
            var e, n, i, r, a = this, o = a.config, s = !1, c = 0;
            return o ? (a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(e) {
                s || e.data.id !== t.data.id || (s = !0, t = e, t.index = c), c++;
            }), isNaN(t.startAngle) && (t.startAngle = 0), isNaN(t.endAngle) && (t.endAngle = t.startAngle), 
            a.isGaugeType(t.data) && (e = o.gauge_min, n = o.gauge_max, i = Math.PI * (o.gauge_fullCircle ? 2 : 1) / (n - e), 
            r = t.value < e ? 0 : t.value < n ? t.value - e : n - e, t.startAngle = o.gauge_startingAngle, 
            t.endAngle = t.startAngle + i * r), s ? t : null) : null;
        }, k.getSvgArc = function() {
            var t = this, e = t.d3.svg.arc().outerRadius(t.radius).innerRadius(t.innerRadius), n = function(n, i) {
                var r;
                return i ? e(n) : (r = t.updateAngle(n), r ? e(r) : "M 0 0");
            };
            return n.centroid = e.centroid, n;
        }, k.getSvgArcExpanded = function(t) {
            var e = this, n = e.d3.svg.arc().outerRadius(e.radiusExpanded * (t ? t : 1)).innerRadius(e.innerRadius);
            return function(t) {
                var i = e.updateAngle(t);
                return i ? n(i) : "M 0 0";
            };
        }, k.getArc = function(t, e, n) {
            return n || this.isArcType(t.data) ? this.svgArc(t, e) : "M 0 0";
        }, k.transformForArcLabel = function(t) {
            var e, n, i, r, a, o = this, s = o.config, c = o.updateAngle(t), l = "";
            return c && !o.hasType("gauge") && (e = this.svgArc.centroid(c), n = isNaN(e[0]) ? 0 : e[0], 
            i = isNaN(e[1]) ? 0 : e[1], r = Math.sqrt(n * n + i * i), a = o.hasType("donut") && s.donut_label_ratio ? f(s.donut_label_ratio) ? s.donut_label_ratio(t, o.radius, r) : s.donut_label_ratio : o.hasType("pie") && s.pie_label_ratio ? f(s.pie_label_ratio) ? s.pie_label_ratio(t, o.radius, r) : s.pie_label_ratio : o.radius && r ? (36 / o.radius > .375 ? 1.175 - 36 / o.radius : .8) * o.radius / r : 0, 
            l = "translate(" + n * a + "," + i * a + ")"), l;
        }, k.getArcRatio = function(t) {
            var e = this, n = e.config, i = Math.PI * (e.hasType("gauge") && !n.gauge_fullCircle ? 1 : 2);
            return t ? (t.endAngle - t.startAngle) / i : null;
        }, k.convertToArcData = function(t) {
            return this.addName({
                id: t.data.id,
                value: t.value,
                ratio: this.getArcRatio(t),
                index: t.index
            });
        }, k.textForArcLabel = function(t) {
            var e, n, i, r, a, o = this;
            return o.shouldShowArcLabel() ? (e = o.updateAngle(t), n = e ? e.value : null, i = o.getArcRatio(e), 
            r = t.data.id, o.hasType("gauge") || o.meetsArcLabelThreshold(i) ? (a = o.getArcLabelFormat(), 
            a ? a(n, i, r) : o.defaultArcValueFormat(n, i)) : "") : "";
        }, k.textForGaugeMinMax = function(t, e) {
            var n = this, i = n.getGaugeLabelExtents();
            return i ? i(t, e) : t;
        }, k.expandArc = function(t) {
            var e, n = this;
            return n.transiting ? void (e = window.setInterval(function() {
                n.transiting || (window.clearInterval(e), n.legend.selectAll(".c3-legend-item-focused").size() > 0 && n.expandArc(t));
            }, 10)) : (t = n.mapToTargetIds(t), void n.svg.selectAll(n.selectorTargets(t, "." + s.chartArc)).each(function(t) {
                n.shouldExpand(t.data.id) && n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d", n.svgArcExpanded).transition().duration(2 * n.expandDuration(t.data.id)).attr("d", n.svgArcExpandedSub).each(function(t) {
                    n.isDonutType(t.data);
                });
            }));
        }, k.unexpandArc = function(t) {
            var e = this;
            e.transiting || (t = e.mapToTargetIds(t), e.svg.selectAll(e.selectorTargets(t, "." + s.chartArc)).selectAll("path").transition().duration(function(t) {
                return e.expandDuration(t.data.id);
            }).attr("d", e.svgArc), e.svg.selectAll("." + s.arc));
        }, k.expandDuration = function(t) {
            var e = this, n = e.config;
            return e.isDonutType(t) ? n.donut_expand_duration : e.isGaugeType(t) ? n.gauge_expand_duration : e.isPieType(t) ? n.pie_expand_duration : 50;
        }, k.shouldExpand = function(t) {
            var e = this, n = e.config;
            return e.isDonutType(t) && n.donut_expand || e.isGaugeType(t) && n.gauge_expand || e.isPieType(t) && n.pie_expand;
        }, k.shouldShowArcLabel = function() {
            var t = this, e = t.config, n = !0;
            return t.hasType("donut") ? n = e.donut_label_show : t.hasType("pie") && (n = e.pie_label_show), 
            n;
        }, k.meetsArcLabelThreshold = function(t) {
            var e = this, n = e.config, i = e.hasType("donut") ? n.donut_label_threshold : n.pie_label_threshold;
            return t >= i;
        }, k.getArcLabelFormat = function() {
            var t = this, e = t.config, n = e.pie_label_format;
            return t.hasType("gauge") ? n = e.gauge_label_format : t.hasType("donut") && (n = e.donut_label_format), 
            n;
        }, k.getGaugeLabelExtents = function() {
            var t = this, e = t.config;
            return e.gauge_label_extents;
        }, k.getArcTitle = function() {
            var t = this;
            return t.hasType("donut") ? t.config.donut_title : "";
        }, k.updateTargetsForArc = function(t) {
            var e, n, i = this, r = i.main, a = i.classChartArc.bind(i), o = i.classArcs.bind(i), c = i.classFocus.bind(i);
            e = r.select("." + s.chartArcs).selectAll("." + s.chartArc).data(i.pie(t)).attr("class", function(t) {
                return a(t) + c(t.data);
            }), n = e.enter().append("g").attr("class", a), n.append("g").attr("class", o), 
            n.append("text").attr("dy", i.hasType("gauge") ? "-.1em" : ".35em").style("opacity", 0).style("text-anchor", "middle").style("pointer-events", "none");
        }, k.initArc = function() {
            var t = this;
            t.arcs = t.main.select("." + s.chart).append("g").attr("class", s.chartArcs).attr("transform", t.getTranslate("arc")), 
            t.arcs.append("text").attr("class", s.chartArcsTitle).style("text-anchor", "middle").text(t.getArcTitle());
        }, k.redrawArc = function(t, e, n) {
            var i, r = this, a = r.d3, o = r.config, c = r.main;
            i = c.selectAll("." + s.arcs).selectAll("." + s.arc).data(r.arcData.bind(r)), i.enter().append("path").attr("class", r.classArc.bind(r)).style("fill", function(t) {
                return r.color(t.data);
            }).style("cursor", function(t) {
                return o.interaction_enabled && o.data_selection_isselectable(t) ? "pointer" : null;
            }).each(function(t) {
                r.isGaugeType(t.data) && (t.startAngle = t.endAngle = o.gauge_startingAngle), this._current = t;
            }), i.attr("transform", function(t) {
                return !r.isGaugeType(t.data) && n ? "scale(0)" : "";
            }).on("mouseover", o.interaction_enabled ? function(t) {
                var e, n;
                r.transiting || (e = r.updateAngle(t), e && (n = r.convertToArcData(e), r.expandArc(e.data.id), 
                r.api.focus(e.data.id), r.toggleFocusLegend(e.data.id, !0), r.config.data_onmouseover(n, this)));
            } : null).on("mousemove", o.interaction_enabled ? function(t) {
                var e, n, i = r.updateAngle(t);
                i && (e = r.convertToArcData(i), n = [ e ], r.showTooltip(n, this));
            } : null).on("mouseout", o.interaction_enabled ? function(t) {
                var e, n;
                r.transiting || (e = r.updateAngle(t), e && (n = r.convertToArcData(e), r.unexpandArc(e.data.id), 
                r.api.revert(), r.revertLegend(), r.hideTooltip(), r.config.data_onmouseout(n, this)));
            } : null).on("click", o.interaction_enabled ? function(t, e) {
                var n, i = r.updateAngle(t);
                i && (n = r.convertToArcData(i), r.toggleShape && r.toggleShape(this, n, e), r.config.data_onclick.call(r.api, n, this));
            } : null).each(function() {
                r.transiting = !0;
            }).transition().duration(t).attrTween("d", function(t) {
                var e, n = r.updateAngle(t);
                return n ? (isNaN(this._current.startAngle) && (this._current.startAngle = 0), isNaN(this._current.endAngle) && (this._current.endAngle = this._current.startAngle), 
                e = a.interpolate(this._current, n), this._current = e(0), function(n) {
                    var i = e(n);
                    return i.data = t.data, r.getArc(i, !0);
                }) : function() {
                    return "M 0 0";
                };
            }).attr("transform", n ? "scale(1)" : "").style("fill", function(t) {
                return r.levelColor ? r.levelColor(t.data.values[0].value) : r.color(t.data.id);
            }).call(r.endall, function() {
                r.transiting = !1;
            }), i.exit().transition().duration(e).style("opacity", 0).remove(), c.selectAll("." + s.chartArc).select("text").style("opacity", 0).attr("class", function(t) {
                return r.isGaugeType(t.data) ? s.gaugeValue : "";
            }).text(r.textForArcLabel.bind(r)).attr("transform", r.transformForArcLabel.bind(r)).style("font-size", function(t) {
                return r.isGaugeType(t.data) ? Math.round(r.radius / 5) + "px" : "";
            }).transition().duration(t).style("opacity", function(t) {
                return r.isTargetToShow(t.data.id) && r.isArcType(t.data) ? 1 : 0;
            }), c.select("." + s.chartArcsTitle).style("opacity", r.hasType("donut") || r.hasType("gauge") ? 1 : 0), 
            r.hasType("gauge") && (r.arcs.select("." + s.chartArcsBackground).attr("d", function() {
                var t = {
                    data: [ {
                        value: o.gauge_max
                    } ],
                    startAngle: o.gauge_startingAngle,
                    endAngle: -1 * o.gauge_startingAngle
                };
                return r.getArc(t, !0, !0);
            }), r.arcs.select("." + s.chartArcsGaugeUnit).attr("dy", ".75em").text(o.gauge_label_show ? o.gauge_units : ""), 
            r.arcs.select("." + s.chartArcsGaugeMin).attr("dx", -1 * (r.innerRadius + (r.radius - r.innerRadius) / (o.gauge_fullCircle ? 1 : 2)) + "px").attr("dy", "1.2em").text(o.gauge_label_show ? r.textForGaugeMinMax(o.gauge_min, !1) : ""), 
            r.arcs.select("." + s.chartArcsGaugeMax).attr("dx", r.innerRadius + (r.radius - r.innerRadius) / (o.gauge_fullCircle ? 1 : 2) + "px").attr("dy", "1.2em").text(o.gauge_label_show ? r.textForGaugeMinMax(o.gauge_max, !0) : ""));
        }, k.initGauge = function() {
            var t = this.arcs;
            this.hasType("gauge") && (t.append("path").attr("class", s.chartArcsBackground), 
            t.append("text").attr("class", s.chartArcsGaugeUnit).style("text-anchor", "middle").style("pointer-events", "none"), 
            t.append("text").attr("class", s.chartArcsGaugeMin).style("text-anchor", "middle").style("pointer-events", "none"), 
            t.append("text").attr("class", s.chartArcsGaugeMax).style("text-anchor", "middle").style("pointer-events", "none"));
        }, k.getGaugeLabelHeight = function() {
            return this.config.gauge_label_show ? 20 : 0;
        }, k.hasCaches = function(t) {
            for (var e = 0; e < t.length; e++) if (!(t[e] in this.cache)) return !1;
            return !0;
        }, k.addCache = function(t, e) {
            this.cache[t] = this.cloneTarget(e);
        }, k.getCaches = function(t) {
            var e, n = [];
            for (e = 0; e < t.length; e++) t[e] in this.cache && n.push(this.cloneTarget(this.cache[t[e]]));
            return n;
        }, k.categoryName = function(t) {
            var e = this.config;
            return t < e.axis_x_categories.length ? e.axis_x_categories[t] : t;
        }, k.generateClass = function(t, e) {
            return " " + t + " " + t + this.getTargetSelectorSuffix(e);
        }, k.classText = function(t) {
            return this.generateClass(s.text, t.index);
        }, k.classTexts = function(t) {
            return this.generateClass(s.texts, t.id);
        }, k.classShape = function(t) {
            return this.generateClass(s.shape, t.index);
        }, k.classShapes = function(t) {
            return this.generateClass(s.shapes, t.id);
        }, k.classLine = function(t) {
            return this.classShape(t) + this.generateClass(s.line, t.id);
        }, k.classLines = function(t) {
            return this.classShapes(t) + this.generateClass(s.lines, t.id);
        }, k.classCircle = function(t) {
            return this.classShape(t) + this.generateClass(s.circle, t.index);
        }, k.classCircles = function(t) {
            return this.classShapes(t) + this.generateClass(s.circles, t.id);
        }, k.classBar = function(t) {
            return this.classShape(t) + this.generateClass(s.bar, t.index);
        }, k.classBars = function(t) {
            return this.classShapes(t) + this.generateClass(s.bars, t.id);
        }, k.classArc = function(t) {
            return this.classShape(t.data) + this.generateClass(s.arc, t.data.id);
        }, k.classArcs = function(t) {
            return this.classShapes(t.data) + this.generateClass(s.arcs, t.data.id);
        }, k.classArea = function(t) {
            return this.classShape(t) + this.generateClass(s.area, t.id);
        }, k.classAreas = function(t) {
            return this.classShapes(t) + this.generateClass(s.areas, t.id);
        }, k.classRegion = function(t, e) {
            return this.generateClass(s.region, e) + " " + ("class" in t ? t.class : "");
        }, k.classEvent = function(t) {
            return this.generateClass(s.eventRect, t.index);
        }, k.classTarget = function(t) {
            var e = this, n = e.config.data_classes[t], i = "";
            return n && (i = " " + s.target + "-" + n), e.generateClass(s.target, t) + i;
        }, k.classFocus = function(t) {
            return this.classFocused(t) + this.classDefocused(t);
        }, k.classFocused = function(t) {
            return " " + (this.focusedTargetIds.indexOf(t.id) >= 0 ? s.focused : "");
        }, k.classDefocused = function(t) {
            return " " + (this.defocusedTargetIds.indexOf(t.id) >= 0 ? s.defocused : "");
        }, k.classChartText = function(t) {
            return s.chartText + this.classTarget(t.id);
        }, k.classChartLine = function(t) {
            return s.chartLine + this.classTarget(t.id);
        }, k.classChartBar = function(t) {
            return s.chartBar + this.classTarget(t.id);
        }, k.classChartArc = function(t) {
            return s.chartArc + this.classTarget(t.data.id);
        }, k.getTargetSelectorSuffix = function(t) {
            return t || 0 === t ? ("-" + t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g, "-") : "";
        }, k.selectorTarget = function(t, e) {
            return (e || "") + "." + s.target + this.getTargetSelectorSuffix(t);
        }, k.selectorTargets = function(t, e) {
            var n = this;
            return t = t || [], t.length ? t.map(function(t) {
                return n.selectorTarget(t, e);
            }) : null;
        }, k.selectorLegend = function(t) {
            return "." + s.legendItem + this.getTargetSelectorSuffix(t);
        }, k.selectorLegends = function(t) {
            var e = this;
            return t && t.length ? t.map(function(t) {
                return e.selectorLegend(t);
            }) : null;
        }, k.getClipPath = function(t) {
            var e = window.navigator.appVersion.toLowerCase().indexOf("msie 9.") >= 0;
            return "url(" + (e ? "" : document.URL.split("#")[0]) + "#" + t + ")";
        }, k.appendClip = function(t, e) {
            return t.append("clipPath").attr("id", e).append("rect");
        }, k.getAxisClipX = function(t) {
            var e = Math.max(30, this.margin.left);
            return t ? -(1 + e) : -(e - 1);
        }, k.getAxisClipY = function(t) {
            return t ? -20 : -this.margin.top;
        }, k.getXAxisClipX = function() {
            var t = this;
            return t.getAxisClipX(!t.config.axis_rotated);
        }, k.getXAxisClipY = function() {
            var t = this;
            return t.getAxisClipY(!t.config.axis_rotated);
        }, k.getYAxisClipX = function() {
            var t = this;
            return t.config.axis_y_inner ? -1 : t.getAxisClipX(t.config.axis_rotated);
        }, k.getYAxisClipY = function() {
            var t = this;
            return t.getAxisClipY(t.config.axis_rotated);
        }, k.getAxisClipWidth = function(t) {
            var e = this, n = Math.max(30, e.margin.left), i = Math.max(30, e.margin.right);
            return t ? e.width + 2 + n + i : e.margin.left + 20;
        }, k.getAxisClipHeight = function(t) {
            return (t ? this.margin.bottom : this.margin.top + this.height) + 20;
        }, k.getXAxisClipWidth = function() {
            var t = this;
            return t.getAxisClipWidth(!t.config.axis_rotated);
        }, k.getXAxisClipHeight = function() {
            var t = this;
            return t.getAxisClipHeight(!t.config.axis_rotated);
        }, k.getYAxisClipWidth = function() {
            var t = this;
            return t.getAxisClipWidth(t.config.axis_rotated) + (t.config.axis_y_inner ? 20 : 0);
        }, k.getYAxisClipHeight = function() {
            var t = this;
            return t.getAxisClipHeight(t.config.axis_rotated);
        }, k.generateColor = function() {
            var t = this, e = t.config, n = t.d3, i = e.data_colors, r = w(e.color_pattern) ? e.color_pattern : n.scale.category10().range(), a = e.data_color, o = [];
            return function(t) {
                var e, n = t.id || t.data && t.data.id || t;
                return i[n] instanceof Function ? e = i[n](t) : i[n] ? e = i[n] : (o.indexOf(n) < 0 && o.push(n), 
                e = r[o.indexOf(n) % r.length], i[n] = e), a instanceof Function ? a(e, t) : e;
            };
        }, k.generateLevelColor = function() {
            var t = this, e = t.config, n = e.color_pattern, i = e.color_threshold, r = "value" === i.unit, a = i.values && i.values.length ? i.values : [], o = i.max || 100;
            return w(e.color_threshold) ? function(t) {
                var e, i, s = n[n.length - 1];
                for (e = 0; e < a.length; e++) if (i = r ? t : 100 * t / o, i < a[e]) {
                    s = n[e];
                    break;
                }
                return s;
            } : null;
        }, k.getDefaultConfig = function() {
            var t = {
                bindto: "#chart",
                svg_classname: void 0,
                size_width: void 0,
                size_height: void 0,
                padding_left: void 0,
                padding_right: void 0,
                padding_top: void 0,
                padding_bottom: void 0,
                resize_auto: !0,
                zoom_enabled: !1,
                zoom_extent: void 0,
                zoom_privileged: !1,
                zoom_rescale: !1,
                zoom_onzoom: function() {},
                zoom_onzoomstart: function() {},
                zoom_onzoomend: function() {},
                zoom_x_min: void 0,
                zoom_x_max: void 0,
                interaction_brighten: !0,
                interaction_enabled: !0,
                onmouseover: function() {},
                onmouseout: function() {},
                onresize: function() {},
                onresized: function() {},
                oninit: function() {},
                onrendered: function() {},
                transition_duration: 350,
                data_x: void 0,
                data_xs: {},
                data_xFormat: "%Y-%m-%d",
                data_xLocaltime: !0,
                data_xSort: !0,
                data_idConverter: function(t) {
                    return t;
                },
                data_names: {},
                data_classes: {},
                data_groups: [],
                data_axes: {},
                data_type: void 0,
                data_types: {},
                data_labels: {},
                data_order: "desc",
                data_regions: {},
                data_color: void 0,
                data_colors: {},
                data_hide: !1,
                data_filter: void 0,
                data_selection_enabled: !1,
                data_selection_grouped: !1,
                data_selection_isselectable: function() {
                    return !0;
                },
                data_selection_multiple: !0,
                data_selection_draggable: !1,
                data_onclick: function() {},
                data_onmouseover: function() {},
                data_onmouseout: function() {},
                data_onselected: function() {},
                data_onunselected: function() {},
                data_url: void 0,
                data_headers: void 0,
                data_json: void 0,
                data_rows: void 0,
                data_columns: void 0,
                data_mimeType: void 0,
                data_keys: void 0,
                data_empty_label_text: "",
                subchart_show: !1,
                subchart_size_height: 60,
                subchart_axis_x_show: !0,
                subchart_onbrush: function() {},
                color_pattern: [],
                color_threshold: {},
                legend_show: !0,
                legend_hide: !1,
                legend_position: "bottom",
                legend_inset_anchor: "top-left",
                legend_inset_x: 10,
                legend_inset_y: 0,
                legend_inset_step: void 0,
                legend_item_onclick: void 0,
                legend_item_onmouseover: void 0,
                legend_item_onmouseout: void 0,
                legend_equally: !1,
                legend_padding: 0,
                legend_item_tile_width: 10,
                legend_item_tile_height: 10,
                axis_rotated: !1,
                axis_x_show: !0,
                axis_x_type: "indexed",
                axis_x_localtime: !0,
                axis_x_categories: [],
                axis_x_tick_centered: !1,
                axis_x_tick_format: void 0,
                axis_x_tick_culling: {},
                axis_x_tick_culling_max: 10,
                axis_x_tick_count: void 0,
                axis_x_tick_fit: !0,
                axis_x_tick_values: null,
                axis_x_tick_rotate: 0,
                axis_x_tick_outer: !0,
                axis_x_tick_multiline: !0,
                axis_x_tick_width: null,
                axis_x_max: void 0,
                axis_x_min: void 0,
                axis_x_padding: {},
                axis_x_height: void 0,
                axis_x_extent: void 0,
                axis_x_label: {},
                axis_y_show: !0,
                axis_y_type: void 0,
                axis_y_max: void 0,
                axis_y_min: void 0,
                axis_y_inverted: !1,
                axis_y_center: void 0,
                axis_y_inner: void 0,
                axis_y_label: {},
                axis_y_tick_format: void 0,
                axis_y_tick_outer: !0,
                axis_y_tick_values: null,
                axis_y_tick_rotate: 0,
                axis_y_tick_count: void 0,
                axis_y_tick_time_value: void 0,
                axis_y_tick_time_interval: void 0,
                axis_y_padding: {},
                axis_y_default: void 0,
                axis_y2_show: !1,
                axis_y2_max: void 0,
                axis_y2_min: void 0,
                axis_y2_inverted: !1,
                axis_y2_center: void 0,
                axis_y2_inner: void 0,
                axis_y2_label: {},
                axis_y2_tick_format: void 0,
                axis_y2_tick_outer: !0,
                axis_y2_tick_values: null,
                axis_y2_tick_count: void 0,
                axis_y2_padding: {},
                axis_y2_default: void 0,
                grid_x_show: !1,
                grid_x_type: "tick",
                grid_x_lines: [],
                grid_y_show: !1,
                grid_y_lines: [],
                grid_y_ticks: 10,
                grid_focus_show: !0,
                grid_lines_front: !0,
                point_show: !0,
                point_r: 2.5,
                point_sensitivity: 10,
                point_focus_expand_enabled: !0,
                point_focus_expand_r: void 0,
                point_select_r: void 0,
                line_connectNull: !1,
                line_step_type: "step",
                bar_width: void 0,
                bar_width_ratio: .6,
                bar_width_max: void 0,
                bar_zerobased: !0,
                bar_space: 0,
                area_zerobased: !0,
                area_above: !1,
                pie_label_show: !0,
                pie_label_format: void 0,
                pie_label_threshold: .05,
                pie_label_ratio: void 0,
                pie_expand: {},
                pie_expand_duration: 50,
                gauge_fullCircle: !1,
                gauge_label_show: !0,
                gauge_label_format: void 0,
                gauge_min: 0,
                gauge_max: 100,
                gauge_startingAngle: -1 * Math.PI / 2,
                gauge_label_extents: void 0,
                gauge_units: void 0,
                gauge_width: void 0,
                gauge_expand: {},
                gauge_expand_duration: 50,
                donut_label_show: !0,
                donut_label_format: void 0,
                donut_label_threshold: .05,
                donut_label_ratio: void 0,
                donut_width: void 0,
                donut_title: "",
                donut_expand: {},
                donut_expand_duration: 50,
                spline_interpolation_type: "cardinal",
                regions: [],
                tooltip_show: !0,
                tooltip_grouped: !0,
                tooltip_order: void 0,
                tooltip_format_title: void 0,
                tooltip_format_name: void 0,
                tooltip_format_value: void 0,
                tooltip_position: void 0,
                tooltip_contents: function(t, e, n, i) {
                    return this.getTooltipContent ? this.getTooltipContent(t, e, n, i) : "";
                },
                tooltip_init_show: !1,
                tooltip_init_x: 0,
                tooltip_init_position: {
                    top: "0px",
                    left: "50px"
                },
                tooltip_onshow: function() {},
                tooltip_onhide: function() {},
                title_text: void 0,
                title_padding: {
                    top: 0,
                    right: 0,
                    bottom: 0,
                    left: 0
                },
                title_position: "top-center"
            };
            return Object.keys(this.additionalConfig).forEach(function(e) {
                t[e] = this.additionalConfig[e];
            }, this), t;
        }, k.additionalConfig = {}, k.loadConfig = function(t) {
            function e() {
                var t = i.shift();
                return t && n && "object" === ("undefined" == typeof n ? "undefined" : c(n)) && t in n ? (n = n[t], 
                e()) : t ? void 0 : n;
            }
            var n, i, r, a = this.config;
            Object.keys(a).forEach(function(o) {
                n = t, i = o.split("_"), r = e(), v(r) && (a[o] = r);
            });
        }, k.convertUrlToData = function(t, e, n, i, r) {
            var a = this, o = e ? e : "csv", s = a.d3.xhr(t);
            n && Object.keys(n).forEach(function(t) {
                s.header(t, n[t]);
            }), s.get(function(t, e) {
                var n, s = e.response || e.responseText;
                if (!e) throw new Error(t.responseURL + " " + t.status + " (" + t.statusText + ")");
                n = "json" === o ? a.convertJsonToData(JSON.parse(s), i) : "tsv" === o ? a.convertTsvToData(s) : a.convertCsvToData(s), 
                r.call(a, n);
            });
        }, k.convertXsvToData = function(t, e) {
            var n, i = e.parseRows(t);
            return 1 === i.length ? (n = [ {} ], i[0].forEach(function(t) {
                n[0][t] = null;
            })) : n = e.parse(t), n;
        }, k.convertCsvToData = function(t) {
            return this.convertXsvToData(t, this.d3.csv);
        }, k.convertTsvToData = function(t) {
            return this.convertXsvToData(t, this.d3.tsv);
        }, k.convertJsonToData = function(t, e) {
            var n, i, r = this, a = [];
            return e ? (e.x ? (n = e.value.concat(e.x), r.config.data_x = e.x) : n = e.value, 
            a.push(n), t.forEach(function(t) {
                var e = [];
                n.forEach(function(n) {
                    var i = r.findValueInJson(t, n);
                    m(i) && (i = null), e.push(i);
                }), a.push(e);
            }), i = r.convertRowsToData(a)) : (Object.keys(t).forEach(function(e) {
                a.push([ e ].concat(t[e]));
            }), i = r.convertColumnsToData(a)), i;
        }, k.findValueInJson = function(t, e) {
            e = e.replace(/\[(\w+)\]/g, ".$1"), e = e.replace(/^\./, "");
            for (var n = e.split("."), i = 0; i < n.length; ++i) {
                var r = n[i];
                if (!(r in t)) return;
                t = t[r];
            }
            return t;
        }, k.convertRowsToData = function(t) {
            for (var e = [], n = t[0], i = 1; i < t.length; i++) {
                for (var r = {}, a = 0; a < t[i].length; a++) {
                    if (m(t[i][a])) throw new Error("Source data is missing a component at (" + i + "," + a + ")!");
                    r[n[a]] = t[i][a];
                }
                e.push(r);
            }
            return e;
        }, k.convertColumnsToData = function(t) {
            for (var e = [], n = 0; n < t.length; n++) for (var i = t[n][0], r = 1; r < t[n].length; r++) {
                if (m(e[r - 1]) && (e[r - 1] = {}), m(t[n][r])) throw new Error("Source data is missing a component at (" + n + "," + r + ")!");
                e[r - 1][i] = t[n][r];
            }
            return e;
        }, k.convertDataToTargets = function(t, e) {
            var n, i = this, r = i.config, a = i.d3.keys(t[0]).filter(i.isNotX, i), o = i.d3.keys(t[0]).filter(i.isX, i);
            return a.forEach(function(n) {
                var a = i.getXKey(n);
                i.isCustomX() || i.isTimeSeries() ? o.indexOf(a) >= 0 ? i.data.xs[n] = (e && i.data.xs[n] ? i.data.xs[n] : []).concat(t.map(function(t) {
                    return t[a];
                }).filter(h).map(function(t, e) {
                    return i.generateTargetX(t, n, e);
                })) : r.data_x ? i.data.xs[n] = i.getOtherTargetXs() : w(r.data_xs) && (i.data.xs[n] = i.getXValuesOfXKey(a, i.data.targets)) : i.data.xs[n] = t.map(function(t, e) {
                    return e;
                });
            }), a.forEach(function(t) {
                if (!i.data.xs[t]) throw new Error('x is not defined for id = "' + t + '".');
            }), n = a.map(function(e, n) {
                var a = r.data_idConverter(e);
                return {
                    id: a,
                    id_org: e,
                    values: t.map(function(t, o) {
                        var s, c = i.getXKey(e), l = t[c], u = null === t[e] || isNaN(t[e]) ? null : +t[e];
                        return i.isCustomX() && i.isCategorized() && !m(l) ? (0 === n && 0 === o && (r.axis_x_categories = []), 
                        s = r.axis_x_categories.indexOf(l), s === -1 && (s = r.axis_x_categories.length, 
                        r.axis_x_categories.push(l))) : s = i.generateTargetX(l, e, o), (m(t[e]) || i.data.xs[e].length <= o) && (s = void 0), 
                        {
                            x: s,
                            value: u,
                            id: a
                        };
                    }).filter(function(t) {
                        return v(t.x);
                    })
                };
            }), n.forEach(function(t) {
                var e;
                r.data_xSort && (t.values = t.values.sort(function(t, e) {
                    var n = t.x || 0 === t.x ? t.x : 1 / 0, i = e.x || 0 === e.x ? e.x : 1 / 0;
                    return n - i;
                })), e = 0, t.values.forEach(function(t) {
                    t.index = e++;
                }), i.data.xs[t.id].sort(function(t, e) {
                    return t - e;
                });
            }), i.hasNegativeValue = i.hasNegativeValueInTargets(n), i.hasPositiveValue = i.hasPositiveValueInTargets(n), 
            r.data_type && i.setTargetType(i.mapToIds(n).filter(function(t) {
                return !(t in r.data_types);
            }), r.data_type), n.forEach(function(t) {
                i.addCache(t.id_org, t);
            }), n;
        }, k.isX = function(t) {
            var e = this, n = e.config;
            return n.data_x && t === n.data_x || w(n.data_xs) && T(n.data_xs, t);
        }, k.isNotX = function(t) {
            return !this.isX(t);
        }, k.getXKey = function(t) {
            var e = this, n = e.config;
            return n.data_x ? n.data_x : w(n.data_xs) ? n.data_xs[t] : null;
        }, k.getXValuesOfXKey = function(t, e) {
            var n, i = this, r = e && w(e) ? i.mapToIds(e) : [];
            return r.forEach(function(e) {
                i.getXKey(e) === t && (n = i.data.xs[e]);
            }), n;
        }, k.getIndexByX = function(t) {
            var e = this, n = e.filterByX(e.data.targets, t);
            return n.length ? n[0].index : null;
        }, k.getXValue = function(t, e) {
            var n = this;
            return t in n.data.xs && n.data.xs[t] && h(n.data.xs[t][e]) ? n.data.xs[t][e] : e;
        }, k.getOtherTargetXs = function() {
            var t = this, e = Object.keys(t.data.xs);
            return e.length ? t.data.xs[e[0]] : null;
        }, k.getOtherTargetX = function(t) {
            var e = this.getOtherTargetXs();
            return e && t < e.length ? e[t] : null;
        }, k.addXs = function(t) {
            var e = this;
            Object.keys(t).forEach(function(n) {
                e.config.data_xs[n] = t[n];
            });
        }, k.hasMultipleX = function(t) {
            return this.d3.set(Object.keys(t).map(function(e) {
                return t[e];
            })).size() > 1;
        }, k.isMultipleX = function() {
            return w(this.config.data_xs) || !this.config.data_xSort || this.hasType("scatter");
        }, k.addName = function(t) {
            var e, n = this;
            return t && (e = n.config.data_names[t.id], t.name = void 0 !== e ? e : t.id), t;
        }, k.getValueOnIndex = function(t, e) {
            var n = t.filter(function(t) {
                return t.index === e;
            });
            return n.length ? n[0] : null;
        }, k.updateTargetX = function(t, e) {
            var n = this;
            t.forEach(function(t) {
                t.values.forEach(function(i, r) {
                    i.x = n.generateTargetX(e[r], t.id, r);
                }), n.data.xs[t.id] = e;
            });
        }, k.updateTargetXs = function(t, e) {
            var n = this;
            t.forEach(function(t) {
                e[t.id] && n.updateTargetX([ t ], e[t.id]);
            });
        }, k.generateTargetX = function(t, e, n) {
            var i, r = this;
            return i = r.isTimeSeries() ? t ? r.parseDate(t) : r.parseDate(r.getXValue(e, n)) : r.isCustomX() && !r.isCategorized() ? h(t) ? +t : r.getXValue(e, n) : n;
        }, k.cloneTarget = function(t) {
            return {
                id: t.id,
                id_org: t.id_org,
                values: t.values.map(function(t) {
                    return {
                        x: t.x,
                        value: t.value,
                        id: t.id
                    };
                })
            };
        }, k.updateXs = function() {
            var t = this;
            t.data.targets.length && (t.xs = [], t.data.targets[0].values.forEach(function(e) {
                t.xs[e.index] = e.x;
            }));
        }, k.getPrevX = function(t) {
            var e = this.xs[t - 1];
            return "undefined" != typeof e ? e : null;
        }, k.getNextX = function(t) {
            var e = this.xs[t + 1];
            return "undefined" != typeof e ? e : null;
        }, k.getMaxDataCount = function() {
            var t = this;
            return t.d3.max(t.data.targets, function(t) {
                return t.values.length;
            });
        }, k.getMaxDataCountTarget = function(t) {
            var e, n = t.length, i = 0;
            return n > 1 ? t.forEach(function(t) {
                t.values.length > i && (e = t, i = t.values.length);
            }) : e = n ? t[0] : null, e;
        }, k.getEdgeX = function(t) {
            var e = this;
            return t.length ? [ e.d3.min(t, function(t) {
                return t.values[0].x;
            }), e.d3.max(t, function(t) {
                return t.values[t.values.length - 1].x;
            }) ] : [ 0, 0 ];
        }, k.mapToIds = function(t) {
            return t.map(function(t) {
                return t.id;
            });
        }, k.mapToTargetIds = function(t) {
            var e = this;
            return t ? [].concat(t) : e.mapToIds(e.data.targets);
        }, k.hasTarget = function(t, e) {
            var n, i = this.mapToIds(t);
            for (n = 0; n < i.length; n++) if (i[n] === e) return !0;
            return !1;
        }, k.isTargetToShow = function(t) {
            return this.hiddenTargetIds.indexOf(t) < 0;
        }, k.isLegendToShow = function(t) {
            return this.hiddenLegendIds.indexOf(t) < 0;
        }, k.filterTargetsToShow = function(t) {
            var e = this;
            return t.filter(function(t) {
                return e.isTargetToShow(t.id);
            });
        }, k.mapTargetsToUniqueXs = function(t) {
            var e = this, n = e.d3.set(e.d3.merge(t.map(function(t) {
                return t.values.map(function(t) {
                    return +t.x;
                });
            }))).values();
            return n = e.isTimeSeries() ? n.map(function(t) {
                return new Date(+t);
            }) : n.map(function(t) {
                return +t;
            }), n.sort(function(t, e) {
                return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
            });
        }, k.addHiddenTargetIds = function(t) {
            t = t instanceof Array ? t : new Array(t);
            for (var e = 0; e < t.length; e++) this.hiddenTargetIds.indexOf(t[e]) < 0 && (this.hiddenTargetIds = this.hiddenTargetIds.concat(t[e]));
        }, k.removeHiddenTargetIds = function(t) {
            this.hiddenTargetIds = this.hiddenTargetIds.filter(function(e) {
                return t.indexOf(e) < 0;
            });
        }, k.addHiddenLegendIds = function(t) {
            t = t instanceof Array ? t : new Array(t);
            for (var e = 0; e < t.length; e++) this.hiddenLegendIds.indexOf(t[e]) < 0 && (this.hiddenLegendIds = this.hiddenLegendIds.concat(t[e]));
        }, k.removeHiddenLegendIds = function(t) {
            this.hiddenLegendIds = this.hiddenLegendIds.filter(function(e) {
                return t.indexOf(e) < 0;
            });
        }, k.getValuesAsIdKeyed = function(t) {
            var e = {};
            return t.forEach(function(t) {
                e[t.id] = [], t.values.forEach(function(n) {
                    e[t.id].push(n.value);
                });
            }), e;
        }, k.checkValueInTargets = function(t, e) {
            var n, i, r, a = Object.keys(t);
            for (n = 0; n < a.length; n++) for (r = t[a[n]].values, i = 0; i < r.length; i++) if (e(r[i].value)) return !0;
            return !1;
        }, k.hasNegativeValueInTargets = function(t) {
            return this.checkValueInTargets(t, function(t) {
                return t < 0;
            });
        }, k.hasPositiveValueInTargets = function(t) {
            return this.checkValueInTargets(t, function(t) {
                return t > 0;
            });
        }, k.isOrderDesc = function() {
            var t = this.config;
            return "string" == typeof t.data_order && "desc" === t.data_order.toLowerCase();
        }, k.isOrderAsc = function() {
            var t = this.config;
            return "string" == typeof t.data_order && "asc" === t.data_order.toLowerCase();
        }, k.getOrderFunction = function() {
            var t = this, e = t.config, n = t.isOrderAsc(), i = t.isOrderDesc();
            if (n || i) return function(t, e) {
                var n = function(t, e) {
                    return t + Math.abs(e.value);
                }, r = t.values.reduce(n, 0), a = e.values.reduce(n, 0);
                return i ? a - r : r - a;
            };
            if (f(e.data_order)) return e.data_order;
            if (p(e.data_order)) {
                var r = e.data_order;
                return function(t, e) {
                    return r.indexOf(t.id) - r.indexOf(e.id);
                };
            }
        }, k.orderTargets = function(t) {
            var e = this.getOrderFunction();
            return e && (t.sort(e), (this.isOrderAsc() || this.isOrderDesc()) && t.reverse()), 
            t;
        }, k.filterByX = function(t, e) {
            return this.d3.merge(t.map(function(t) {
                return t.values;
            })).filter(function(t) {
                return t.x - e === 0;
            });
        }, k.filterRemoveNull = function(t) {
            return t.filter(function(t) {
                return h(t.value);
            });
        }, k.filterByXDomain = function(t, e) {
            return t.map(function(t) {
                return {
                    id: t.id,
                    id_org: t.id_org,
                    values: t.values.filter(function(t) {
                        return e[0] <= t.x && t.x <= e[1];
                    })
                };
            });
        }, k.hasDataLabel = function() {
            var t = this.config;
            return !("boolean" != typeof t.data_labels || !t.data_labels) || !("object" !== c(t.data_labels) || !w(t.data_labels));
        }, k.getDataLabelLength = function(t, e, n) {
            var i = this, r = [ 0, 0 ], a = 1.3;
            return i.selectChart.select("svg").selectAll(".dummy").data([ t, e ]).enter().append("text").text(function(t) {
                return i.dataLabelFormat(t.id)(t);
            }).each(function(t, e) {
                r[e] = this.getBoundingClientRect()[n] * a;
            }).remove(), r;
        }, k.isNoneArc = function(t) {
            return this.hasTarget(this.data.targets, t.id);
        }, k.isArc = function(t) {
            return "data" in t && this.hasTarget(this.data.targets, t.data.id);
        }, k.findSameXOfValues = function(t, e) {
            var n, i = t[e].x, r = [];
            for (n = e - 1; n >= 0 && i === t[n].x; n--) r.push(t[n]);
            for (n = e; n < t.length && i === t[n].x; n++) r.push(t[n]);
            return r;
        }, k.findClosestFromTargets = function(t, e) {
            var n, i = this;
            return n = t.map(function(t) {
                return i.findClosest(t.values, e);
            }), i.findClosest(n, e);
        }, k.findClosest = function(t, e) {
            var n, i = this, r = i.config.point_sensitivity;
            return t.filter(function(t) {
                return t && i.isBarType(t.id);
            }).forEach(function(t) {
                var e = i.main.select("." + s.bars + i.getTargetSelectorSuffix(t.id) + " ." + s.bar + "-" + t.index).node();
                !n && i.isWithinBar(e) && (n = t);
            }), t.filter(function(t) {
                return t && !i.isBarType(t.id);
            }).forEach(function(t) {
                var a = i.dist(t, e);
                a < r && (r = a, n = t);
            }), n;
        }, k.dist = function(t, e) {
            var n = this, i = n.config, r = i.axis_rotated ? 1 : 0, a = i.axis_rotated ? 0 : 1, o = n.circleY(t, t.index), s = n.x(t.x);
            return Math.sqrt(Math.pow(s - e[r], 2) + Math.pow(o - e[a], 2));
        }, k.convertValuesToStep = function(t) {
            var e, n = [].concat(t);
            if (!this.isCategorized()) return t;
            for (e = t.length + 1; 0 < e; e--) n[e] = n[e - 1];
            return n[0] = {
                x: n[0].x - 1,
                value: n[0].value,
                id: n[0].id
            }, n[t.length + 1] = {
                x: n[t.length].x + 1,
                value: n[t.length].value,
                id: n[t.length].id
            }, n;
        }, k.updateDataAttributes = function(t, e) {
            var n = this, i = n.config, r = i["data_" + t];
            return "undefined" == typeof e ? r : (Object.keys(e).forEach(function(t) {
                r[t] = e[t];
            }), n.redraw({
                withLegend: !0
            }), r);
        }, k.load = function(t, e) {
            var n = this;
            t && (e.filter && (t = t.filter(e.filter)), (e.type || e.types) && t.forEach(function(t) {
                var i = e.types && e.types[t.id] ? e.types[t.id] : e.type;
                n.setTargetType(t.id, i);
            }), n.data.targets.forEach(function(e) {
                for (var n = 0; n < t.length; n++) if (e.id === t[n].id) {
                    e.values = t[n].values, t.splice(n, 1);
                    break;
                }
            }), n.data.targets = n.data.targets.concat(t)), n.updateTargets(n.data.targets), 
            n.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0,
                withLegend: !0
            }), e.done && e.done();
        }, k.loadFromArgs = function(t) {
            var e = this;
            t.data ? e.load(e.convertDataToTargets(t.data), t) : t.url ? e.convertUrlToData(t.url, t.mimeType, t.headers, t.keys, function(n) {
                e.load(e.convertDataToTargets(n), t);
            }) : t.json ? e.load(e.convertDataToTargets(e.convertJsonToData(t.json, t.keys)), t) : t.rows ? e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)), t) : t.columns ? e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)), t) : e.load(null, t);
        }, k.unload = function(t, e) {
            var n = this;
            return e || (e = function() {}), t = t.filter(function(t) {
                return n.hasTarget(n.data.targets, t);
            }), t && 0 !== t.length ? (n.svg.selectAll(t.map(function(t) {
                return n.selectorTarget(t);
            })).transition().style("opacity", 0).remove().call(n.endall, e), void t.forEach(function(t) {
                n.withoutFadeIn[t] = !1, n.legend && n.legend.selectAll("." + s.legendItem + n.getTargetSelectorSuffix(t)).remove(), 
                n.data.targets = n.data.targets.filter(function(e) {
                    return e.id !== t;
                });
            })) : void e();
        }, k.getYDomainMin = function(t) {
            var e, n, i, r, a, o, s = this, c = s.config, l = s.mapToIds(t), u = s.getValuesAsIdKeyed(t);
            if (c.data_groups.length > 0) for (o = s.hasNegativeValueInTargets(t), e = 0; e < c.data_groups.length; e++) if (r = c.data_groups[e].filter(function(t) {
                return l.indexOf(t) >= 0;
            }), 0 !== r.length) for (i = r[0], o && u[i] && u[i].forEach(function(t, e) {
                u[i][e] = t < 0 ? t : 0;
            }), n = 1; n < r.length; n++) a = r[n], u[a] && u[a].forEach(function(t, e) {
                s.axis.getId(a) !== s.axis.getId(i) || !u[i] || o && +t > 0 || (u[i][e] += +t);
            });
            return s.d3.min(Object.keys(u).map(function(t) {
                return s.d3.min(u[t]);
            }));
        }, k.getYDomainMax = function(t) {
            var e, n, i, r, a, o, s = this, c = s.config, l = s.mapToIds(t), u = s.getValuesAsIdKeyed(t);
            if (c.data_groups.length > 0) for (o = s.hasPositiveValueInTargets(t), e = 0; e < c.data_groups.length; e++) if (r = c.data_groups[e].filter(function(t) {
                return l.indexOf(t) >= 0;
            }), 0 !== r.length) for (i = r[0], o && u[i] && u[i].forEach(function(t, e) {
                u[i][e] = t > 0 ? t : 0;
            }), n = 1; n < r.length; n++) a = r[n], u[a] && u[a].forEach(function(t, e) {
                s.axis.getId(a) !== s.axis.getId(i) || !u[i] || o && +t < 0 || (u[i][e] += +t);
            });
            return s.d3.max(Object.keys(u).map(function(t) {
                return s.d3.max(u[t]);
            }));
        }, k.getYDomain = function(t, e, n) {
            var i, r, a, o, s, c, l, u, d, f, p, g = this, m = g.config, v = t.filter(function(t) {
                return g.axis.getId(t.id) === e;
            }), y = n ? g.filterByXDomain(v, n) : v, x = "y2" === e ? m.axis_y2_min : m.axis_y_min, b = "y2" === e ? m.axis_y2_max : m.axis_y_max, S = g.getYDomainMin(y), T = g.getYDomainMax(y), E = "y2" === e ? m.axis_y2_center : m.axis_y_center, A = g.hasType("bar", y) && m.bar_zerobased || g.hasType("area", y) && m.area_zerobased, C = "y2" === e ? m.axis_y2_inverted : m.axis_y_inverted, P = g.hasDataLabel() && m.axis_rotated, k = g.hasDataLabel() && !m.axis_rotated;
            return S = h(x) ? x : h(b) ? S < b ? S : b - 10 : S, T = h(b) ? b : h(x) ? x < T ? T : x + 10 : T, 
            0 === y.length ? "y2" === e ? g.y2.domain() : g.y.domain() : (isNaN(S) && (S = 0), 
            isNaN(T) && (T = S), S === T && (S < 0 ? T = 0 : S = 0), f = S >= 0 && T >= 0, p = S <= 0 && T <= 0, 
            (h(x) && f || h(b) && p) && (A = !1), A && (f && (S = 0), p && (T = 0)), r = Math.abs(T - S), 
            a = o = s = .1 * r, "undefined" != typeof E && (c = Math.max(Math.abs(S), Math.abs(T)), 
            T = E + c, S = E - c), P ? (l = g.getDataLabelLength(S, T, "width"), u = _(g.y.range()), 
            d = [ l[0] / u, l[1] / u ], o += r * (d[1] / (1 - d[0] - d[1])), s += r * (d[0] / (1 - d[0] - d[1]))) : k && (l = g.getDataLabelLength(S, T, "height"), 
            o += g.axis.convertPixelsToAxisPadding(l[1], r), s += g.axis.convertPixelsToAxisPadding(l[0], r)), 
            "y" === e && w(m.axis_y_padding) && (o = g.axis.getPadding(m.axis_y_padding, "top", o, r), 
            s = g.axis.getPadding(m.axis_y_padding, "bottom", s, r)), "y2" === e && w(m.axis_y2_padding) && (o = g.axis.getPadding(m.axis_y2_padding, "top", o, r), 
            s = g.axis.getPadding(m.axis_y2_padding, "bottom", s, r)), A && (f && (s = S), p && (o = -T)), 
            i = [ S - s, T + o ], C ? i.reverse() : i);
        }, k.getXDomainMin = function(t) {
            var e = this, n = e.config;
            return v(n.axis_x_min) ? e.isTimeSeries() ? this.parseDate(n.axis_x_min) : n.axis_x_min : e.d3.min(t, function(t) {
                return e.d3.min(t.values, function(t) {
                    return t.x;
                });
            });
        }, k.getXDomainMax = function(t) {
            var e = this, n = e.config;
            return v(n.axis_x_max) ? e.isTimeSeries() ? this.parseDate(n.axis_x_max) : n.axis_x_max : e.d3.max(t, function(t) {
                return e.d3.max(t.values, function(t) {
                    return t.x;
                });
            });
        }, k.getXDomainPadding = function(t) {
            var e, n, i, r, a = this, o = a.config, s = t[1] - t[0];
            return a.isCategorized() ? n = 0 : a.hasType("bar") ? (e = a.getMaxDataCount(), 
            n = e > 1 ? s / (e - 1) / 2 : .5) : n = .01 * s, "object" === c(o.axis_x_padding) && w(o.axis_x_padding) ? (i = h(o.axis_x_padding.left) ? o.axis_x_padding.left : n, 
            r = h(o.axis_x_padding.right) ? o.axis_x_padding.right : n) : i = r = "number" == typeof o.axis_x_padding ? o.axis_x_padding : n, 
            {
                left: i,
                right: r
            };
        }, k.getXDomain = function(t) {
            var e = this, n = [ e.getXDomainMin(t), e.getXDomainMax(t) ], i = n[0], r = n[1], a = e.getXDomainPadding(n), o = 0, s = 0;
            return i - r !== 0 || e.isCategorized() || (e.isTimeSeries() ? (i = new Date(.5 * i.getTime()), 
            r = new Date(1.5 * r.getTime())) : (i = 0 === i ? 1 : .5 * i, r = 0 === r ? -1 : 1.5 * r)), 
            (i || 0 === i) && (o = e.isTimeSeries() ? new Date(i.getTime() - a.left) : i - a.left), 
            (r || 0 === r) && (s = e.isTimeSeries() ? new Date(r.getTime() + a.right) : r + a.right), 
            [ o, s ];
        }, k.updateXDomain = function(t, e, n, i, r) {
            var a = this, o = a.config;
            return n && (a.x.domain(r ? r : a.d3.extent(a.getXDomain(t))), a.orgXDomain = a.x.domain(), 
            o.zoom_enabled && a.zoom.scale(a.x).updateScaleExtent(), a.subX.domain(a.x.domain()), 
            a.brush && a.brush.scale(a.subX)), e && (a.x.domain(r ? r : !a.brush || a.brush.empty() ? a.orgXDomain : a.brush.extent()), 
            o.zoom_enabled && a.zoom.scale(a.x).updateScaleExtent()), i && a.x.domain(a.trimXDomain(a.x.orgDomain())), 
            a.x.domain();
        }, k.trimXDomain = function(t) {
            var e = this.getZoomDomain(), n = e[0], i = e[1];
            return t[0] <= n && (t[1] = +t[1] + (n - t[0]), t[0] = n), i <= t[1] && (t[0] = +t[0] - (t[1] - i), 
            t[1] = i), t;
        }, k.drag = function(t) {
            var e, n, i, r, a, o, c, l, u = this, d = u.config, h = u.main, f = u.d3;
            u.hasArcType() || d.data_selection_enabled && (d.zoom_enabled && !u.zoom.altDomain || d.data_selection_multiple && (e = u.dragStart[0], 
            n = u.dragStart[1], i = t[0], r = t[1], a = Math.min(e, i), o = Math.max(e, i), 
            c = d.data_selection_grouped ? u.margin.top : Math.min(n, r), l = d.data_selection_grouped ? u.height : Math.max(n, r), 
            h.select("." + s.dragarea).attr("x", a).attr("y", c).attr("width", o - a).attr("height", l - c), 
            h.selectAll("." + s.shapes).selectAll("." + s.shape).filter(function(t) {
                return d.data_selection_isselectable(t);
            }).each(function(t, e) {
                var n, i, r, d, h, p, g = f.select(this), m = g.classed(s.SELECTED), v = g.classed(s.INCLUDED), y = !1;
                if (g.classed(s.circle)) n = 1 * g.attr("cx"), i = 1 * g.attr("cy"), h = u.togglePoint, 
                y = a < n && n < o && c < i && i < l; else {
                    if (!g.classed(s.bar)) return;
                    p = A(this), n = p.x, i = p.y, r = p.width, d = p.height, h = u.togglePath, y = !(o < n || n + r < a || l < i || i + d < c);
                }
                y ^ v && (g.classed(s.INCLUDED, !v), g.classed(s.SELECTED, !m), h.call(u, !m, g, t, e));
            })));
        }, k.dragstart = function(t) {
            var e = this, n = e.config;
            e.hasArcType() || n.data_selection_enabled && (e.dragStart = t, e.main.select("." + s.chart).append("rect").attr("class", s.dragarea).style("opacity", .1), 
            e.dragging = !0);
        }, k.dragend = function() {
            var t = this, e = t.config;
            t.hasArcType() || e.data_selection_enabled && (t.main.select("." + s.dragarea).transition().duration(100).style("opacity", 0).remove(), 
            t.main.selectAll("." + s.shape).classed(s.INCLUDED, !1), t.dragging = !1);
        }, k.getYFormat = function(t) {
            var e = this, n = t && !e.hasType("gauge") ? e.defaultArcValueFormat : e.yFormat, i = t && !e.hasType("gauge") ? e.defaultArcValueFormat : e.y2Format;
            return function(t, r, a) {
                var o = "y2" === e.axis.getId(a) ? i : n;
                return o.call(e, t, r);
            };
        }, k.yFormat = function(t) {
            var e = this, n = e.config, i = n.axis_y_tick_format ? n.axis_y_tick_format : e.defaultValueFormat;
            return i(t);
        }, k.y2Format = function(t) {
            var e = this, n = e.config, i = n.axis_y2_tick_format ? n.axis_y2_tick_format : e.defaultValueFormat;
            return i(t);
        }, k.defaultValueFormat = function(t) {
            return h(t) ? +t : "";
        }, k.defaultArcValueFormat = function(t, e) {
            return (100 * e).toFixed(1) + "%";
        }, k.dataLabelFormat = function(t) {
            var e, n = this, i = n.config.data_labels, r = function(t) {
                return h(t) ? +t : "";
            };
            return e = "function" == typeof i.format ? i.format : "object" === c(i.format) ? i.format[t] ? i.format[t] === !0 ? r : i.format[t] : function() {
                return "";
            } : r;
        }, k.initGrid = function() {
            var t = this, e = t.config, n = t.d3;
            t.grid = t.main.append("g").attr("clip-path", t.clipPathForGrid).attr("class", s.grid), 
            e.grid_x_show && t.grid.append("g").attr("class", s.xgrids), e.grid_y_show && t.grid.append("g").attr("class", s.ygrids), 
            e.grid_focus_show && t.grid.append("g").attr("class", s.xgridFocus).append("line").attr("class", s.xgridFocus), 
            t.xgrid = n.selectAll([]), e.grid_lines_front || t.initGridLines();
        }, k.initGridLines = function() {
            var t = this, e = t.d3;
            t.gridLines = t.main.append("g").attr("clip-path", t.clipPathForGrid).attr("class", s.grid + " " + s.gridLines), 
            t.gridLines.append("g").attr("class", s.xgridLines), t.gridLines.append("g").attr("class", s.ygridLines), 
            t.xgridLines = e.selectAll([]);
        }, k.updateXGrid = function(t) {
            var e = this, n = e.config, i = e.d3, r = e.generateGridData(n.grid_x_type, e.x), a = e.isCategorized() ? e.xAxis.tickOffset() : 0;
            e.xgridAttr = n.axis_rotated ? {
                x1: 0,
                x2: e.width,
                y1: function(t) {
                    return e.x(t) - a;
                },
                y2: function(t) {
                    return e.x(t) - a;
                }
            } : {
                x1: function(t) {
                    return e.x(t) + a;
                },
                x2: function(t) {
                    return e.x(t) + a;
                },
                y1: 0,
                y2: e.height
            }, e.xgrid = e.main.select("." + s.xgrids).selectAll("." + s.xgrid).data(r), e.xgrid.enter().append("line").attr("class", s.xgrid), 
            t || e.xgrid.attr(e.xgridAttr).style("opacity", function() {
                return +i.select(this).attr(n.axis_rotated ? "y1" : "x1") === (n.axis_rotated ? e.height : 0) ? 0 : 1;
            }), e.xgrid.exit().remove();
        }, k.updateYGrid = function() {
            var t = this, e = t.config, n = t.yAxis.tickValues() || t.y.ticks(e.grid_y_ticks);
            t.ygrid = t.main.select("." + s.ygrids).selectAll("." + s.ygrid).data(n), t.ygrid.enter().append("line").attr("class", s.ygrid), 
            t.ygrid.attr("x1", e.axis_rotated ? t.y : 0).attr("x2", e.axis_rotated ? t.y : t.width).attr("y1", e.axis_rotated ? 0 : t.y).attr("y2", e.axis_rotated ? t.height : t.y), 
            t.ygrid.exit().remove(), t.smoothLines(t.ygrid, "grid");
        }, k.gridTextAnchor = function(t) {
            return t.position ? t.position : "end";
        }, k.gridTextDx = function(t) {
            return "start" === t.position ? 4 : "middle" === t.position ? 0 : -4;
        }, k.xGridTextX = function(t) {
            return "start" === t.position ? -this.height : "middle" === t.position ? -this.height / 2 : 0;
        }, k.yGridTextX = function(t) {
            return "start" === t.position ? 0 : "middle" === t.position ? this.width / 2 : this.width;
        }, k.updateGrid = function(t) {
            var e, n, i, r = this, a = r.main, o = r.config;
            r.grid.style("visibility", r.hasArcType() ? "hidden" : "visible"), a.select("line." + s.xgridFocus).style("visibility", "hidden"), 
            o.grid_x_show && r.updateXGrid(), r.xgridLines = a.select("." + s.xgridLines).selectAll("." + s.xgridLine).data(o.grid_x_lines), 
            e = r.xgridLines.enter().append("g").attr("class", function(t) {
                return s.xgridLine + (t.class ? " " + t.class : "");
            }), e.append("line").style("opacity", 0), e.append("text").attr("text-anchor", r.gridTextAnchor).attr("transform", o.axis_rotated ? "" : "rotate(-90)").attr("dx", r.gridTextDx).attr("dy", -5).style("opacity", 0), 
            r.xgridLines.exit().transition().duration(t).style("opacity", 0).remove(), o.grid_y_show && r.updateYGrid(), 
            r.ygridLines = a.select("." + s.ygridLines).selectAll("." + s.ygridLine).data(o.grid_y_lines), 
            n = r.ygridLines.enter().append("g").attr("class", function(t) {
                return s.ygridLine + (t.class ? " " + t.class : "");
            }), n.append("line").style("opacity", 0), n.append("text").attr("text-anchor", r.gridTextAnchor).attr("transform", o.axis_rotated ? "rotate(-90)" : "").attr("dx", r.gridTextDx).attr("dy", -5).style("opacity", 0), 
            i = r.yv.bind(r), r.ygridLines.select("line").transition().duration(t).attr("x1", o.axis_rotated ? i : 0).attr("x2", o.axis_rotated ? i : r.width).attr("y1", o.axis_rotated ? 0 : i).attr("y2", o.axis_rotated ? r.height : i).style("opacity", 1), 
            r.ygridLines.select("text").transition().duration(t).attr("x", o.axis_rotated ? r.xGridTextX.bind(r) : r.yGridTextX.bind(r)).attr("y", i).text(function(t) {
                return t.text;
            }).style("opacity", 1), r.ygridLines.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawGrid = function(t) {
            var e = this, n = e.config, i = e.xv.bind(e), r = e.xgridLines.select("line"), a = e.xgridLines.select("text");
            return [ (t ? r.transition() : r).attr("x1", n.axis_rotated ? 0 : i).attr("x2", n.axis_rotated ? e.width : i).attr("y1", n.axis_rotated ? i : 0).attr("y2", n.axis_rotated ? i : e.height).style("opacity", 1), (t ? a.transition() : a).attr("x", n.axis_rotated ? e.yGridTextX.bind(e) : e.xGridTextX.bind(e)).attr("y", i).text(function(t) {
                return t.text;
            }).style("opacity", 1) ];
        }, k.showXGridFocus = function(t) {
            var e = this, n = e.config, i = t.filter(function(t) {
                return t && h(t.value);
            }), r = e.main.selectAll("line." + s.xgridFocus), a = e.xx.bind(e);
            n.tooltip_show && (e.hasType("scatter") || e.hasArcType() || (r.style("visibility", "visible").data([ i[0] ]).attr(n.axis_rotated ? "y1" : "x1", a).attr(n.axis_rotated ? "y2" : "x2", a), 
            e.smoothLines(r, "grid")));
        }, k.hideXGridFocus = function() {
            this.main.select("line." + s.xgridFocus).style("visibility", "hidden");
        }, k.updateXgridFocus = function() {
            var t = this, e = t.config;
            t.main.select("line." + s.xgridFocus).attr("x1", e.axis_rotated ? 0 : -10).attr("x2", e.axis_rotated ? t.width : -10).attr("y1", e.axis_rotated ? -10 : 0).attr("y2", e.axis_rotated ? -10 : t.height);
        }, k.generateGridData = function(t, e) {
            var n, i, r, a, o = this, c = [], l = o.main.select("." + s.axisX).selectAll(".tick").size();
            if ("year" === t) for (n = o.getXDomain(), i = n[0].getFullYear(), r = n[1].getFullYear(), 
            a = i; a <= r; a++) c.push(new Date(a + "-01-01 00:00:00")); else c = e.ticks(10), 
            c.length > l && (c = c.filter(function(t) {
                return ("" + t).indexOf(".") < 0;
            }));
            return c;
        }, k.getGridFilterToRemove = function(t) {
            return t ? function(e) {
                var n = !1;
                return [].concat(t).forEach(function(t) {
                    ("value" in t && e.value === t.value || "class" in t && e.class === t.class) && (n = !0);
                }), n;
            } : function() {
                return !0;
            };
        }, k.removeGridLines = function(t, e) {
            var n = this, i = n.config, r = n.getGridFilterToRemove(t), a = function(t) {
                return !r(t);
            }, o = e ? s.xgridLines : s.ygridLines, c = e ? s.xgridLine : s.ygridLine;
            n.main.select("." + o).selectAll("." + c).filter(r).transition().duration(i.transition_duration).style("opacity", 0).remove(), 
            e ? i.grid_x_lines = i.grid_x_lines.filter(a) : i.grid_y_lines = i.grid_y_lines.filter(a);
        }, k.initEventRect = function() {
            var t = this;
            t.main.select("." + s.chart).append("g").attr("class", s.eventRects).style("fill-opacity", 0);
        }, k.redrawEventRect = function() {
            var t, e, n = this, i = n.config, r = n.isMultipleX(), a = n.main.select("." + s.eventRects).style("cursor", i.zoom_enabled ? i.axis_rotated ? "ns-resize" : "ew-resize" : null).classed(s.eventRectsMultiple, r).classed(s.eventRectsSingle, !r);
            a.selectAll("." + s.eventRect).remove(), n.eventRect = a.selectAll("." + s.eventRect), 
            r ? (t = n.eventRect.data([ 0 ]), n.generateEventRectsForMultipleXs(t.enter()), 
            n.updateEventRect(t)) : (e = n.getMaxDataCountTarget(n.data.targets), a.datum(e ? e.values : []), 
            n.eventRect = a.selectAll("." + s.eventRect), t = n.eventRect.data(function(t) {
                return t;
            }), n.generateEventRectsForSingleX(t.enter()), n.updateEventRect(t), t.exit().remove());
        }, k.updateEventRect = function(t) {
            var e, n, i, r, a, o, s = this, c = s.config;
            t = t || s.eventRect.data(function(t) {
                return t;
            }), s.isMultipleX() ? (e = 0, n = 0, i = s.width, r = s.height) : (!s.isCustomX() && !s.isTimeSeries() || s.isCategorized() ? (a = s.getEventRectWidth(), 
            o = function(t) {
                return s.x(t.x) - a / 2;
            }) : (s.updateXs(), a = function(t) {
                var e = s.getPrevX(t.index), n = s.getNextX(t.index);
                return null === e && null === n ? c.axis_rotated ? s.height : s.width : (null === e && (e = s.x.domain()[0]), 
                null === n && (n = s.x.domain()[1]), Math.max(0, (s.x(n) - s.x(e)) / 2));
            }, o = function(t) {
                var e = s.getPrevX(t.index), n = s.getNextX(t.index), i = s.data.xs[t.id][t.index];
                return null === e && null === n ? 0 : (null === e && (e = s.x.domain()[0]), (s.x(i) + s.x(e)) / 2);
            }), e = c.axis_rotated ? 0 : o, n = c.axis_rotated ? o : 0, i = c.axis_rotated ? s.width : a, 
            r = c.axis_rotated ? a : s.height), t.attr("class", s.classEvent.bind(s)).attr("x", e).attr("y", n).attr("width", i).attr("height", r);
        }, k.generateEventRectsForSingleX = function(t) {
            var e = this, n = e.d3, i = e.config;
            t.append("rect").attr("class", e.classEvent.bind(e)).style("cursor", i.data_selection_enabled && i.data_selection_grouped ? "pointer" : null).on("mouseover", function(t) {
                var n = t.index;
                e.dragging || e.flowing || e.hasArcType() || (i.point_focus_expand_enabled && e.expandCircles(n, null, !0), 
                e.expandBars(n, null, !0), e.main.selectAll("." + s.shape + "-" + n).each(function(t) {
                    i.data_onmouseover.call(e.api, t);
                }));
            }).on("mouseout", function(t) {
                var n = t.index;
                e.config && (e.hasArcType() || (e.hideXGridFocus(), e.hideTooltip(), e.unexpandCircles(), 
                e.unexpandBars(), e.main.selectAll("." + s.shape + "-" + n).each(function(t) {
                    i.data_onmouseout.call(e.api, t);
                })));
            }).on("mousemove", function(t) {
                var r, a = t.index, o = e.svg.select("." + s.eventRect + "-" + a);
                e.dragging || e.flowing || e.hasArcType() || (e.isStepType(t) && "step-after" === e.config.line_step_type && n.mouse(this)[0] < e.x(e.getXValue(t.id, a)) && (a -= 1), 
                r = e.filterTargetsToShow(e.data.targets).map(function(t) {
                    return e.addName(e.getValueOnIndex(t.values, a));
                }), i.tooltip_grouped && (e.showTooltip(r, this), e.showXGridFocus(r)), (!i.tooltip_grouped || i.data_selection_enabled && !i.data_selection_grouped) && e.main.selectAll("." + s.shape + "-" + a).each(function() {
                    n.select(this).classed(s.EXPANDED, !0), i.data_selection_enabled && o.style("cursor", i.data_selection_grouped ? "pointer" : null), 
                    i.tooltip_grouped || (e.hideXGridFocus(), e.hideTooltip(), i.data_selection_grouped || (e.unexpandCircles(a), 
                    e.unexpandBars(a)));
                }).filter(function(t) {
                    return e.isWithinShape(this, t);
                }).each(function(t) {
                    i.data_selection_enabled && (i.data_selection_grouped || i.data_selection_isselectable(t)) && o.style("cursor", "pointer"), 
                    i.tooltip_grouped || (e.showTooltip([ t ], this), e.showXGridFocus([ t ]), i.point_focus_expand_enabled && e.expandCircles(a, t.id, !0), 
                    e.expandBars(a, t.id, !0));
                }));
            }).on("click", function(t) {
                var r = t.index;
                if (!e.hasArcType() && e.toggleShape) {
                    if (e.cancelClick) return void (e.cancelClick = !1);
                    e.isStepType(t) && "step-after" === i.line_step_type && n.mouse(this)[0] < e.x(e.getXValue(t.id, r)) && (r -= 1), 
                    e.main.selectAll("." + s.shape + "-" + r).each(function(t) {
                        (i.data_selection_grouped || e.isWithinShape(this, t)) && (e.toggleShape(this, t, r), 
                        e.config.data_onclick.call(e.api, t, this));
                    });
                }
            }).call(i.data_selection_draggable && e.drag ? n.behavior.drag().origin(Object).on("drag", function() {
                e.drag(n.mouse(this));
            }).on("dragstart", function() {
                e.dragstart(n.mouse(this));
            }).on("dragend", function() {
                e.dragend();
            }) : function() {});
        }, k.generateEventRectsForMultipleXs = function(t) {
            function e() {
                n.svg.select("." + s.eventRect).style("cursor", null), n.hideXGridFocus(), n.hideTooltip(), 
                n.unexpandCircles(), n.unexpandBars();
            }
            var n = this, i = n.d3, r = n.config;
            t.append("rect").attr("x", 0).attr("y", 0).attr("width", n.width).attr("height", n.height).attr("class", s.eventRect).on("mouseout", function() {
                n.config && (n.hasArcType() || e());
            }).on("mousemove", function() {
                var t, a, o, c, l = n.filterTargetsToShow(n.data.targets);
                if (!n.dragging && !n.hasArcType(l)) {
                    if (t = i.mouse(this), a = n.findClosestFromTargets(l, t), !n.mouseover || a && a.id === n.mouseover.id || (r.data_onmouseout.call(n.api, n.mouseover), 
                    n.mouseover = void 0), !a) return void e();
                    o = n.isScatterType(a) || !r.tooltip_grouped ? [ a ] : n.filterByX(l, a.x), c = o.map(function(t) {
                        return n.addName(t);
                    }), n.showTooltip(c, this), r.point_focus_expand_enabled && n.expandCircles(a.index, a.id, !0), 
                    n.expandBars(a.index, a.id, !0), n.showXGridFocus(c), (n.isBarType(a.id) || n.dist(a, t) < r.point_sensitivity) && (n.svg.select("." + s.eventRect).style("cursor", "pointer"), 
                    n.mouseover || (r.data_onmouseover.call(n.api, a), n.mouseover = a));
                }
            }).on("click", function() {
                var t, e, a = n.filterTargetsToShow(n.data.targets);
                n.hasArcType(a) || (t = i.mouse(this), e = n.findClosestFromTargets(a, t), e && (n.isBarType(e.id) || n.dist(e, t) < r.point_sensitivity) && n.main.selectAll("." + s.shapes + n.getTargetSelectorSuffix(e.id)).selectAll("." + s.shape + "-" + e.index).each(function() {
                    (r.data_selection_grouped || n.isWithinShape(this, e)) && (n.toggleShape(this, e, e.index), 
                    n.config.data_onclick.call(n.api, e, this));
                }));
            }).call(r.data_selection_draggable && n.drag ? i.behavior.drag().origin(Object).on("drag", function() {
                n.drag(i.mouse(this));
            }).on("dragstart", function() {
                n.dragstart(i.mouse(this));
            }).on("dragend", function() {
                n.dragend();
            }) : function() {});
        }, k.dispatchEvent = function(t, e, n) {
            var i = this, r = "." + s.eventRect + (i.isMultipleX() ? "" : "-" + e), a = i.main.select(r).node(), o = a.getBoundingClientRect(), c = o.left + (n ? n[0] : 0), l = o.top + (n ? n[1] : 0), u = document.createEvent("MouseEvents");
            u.initMouseEvent(t, !0, !0, window, 0, c, l, c, l, !1, !1, !1, !1, 0, null), a.dispatchEvent(u);
        }, k.initLegend = function() {
            var t = this;
            return t.legendItemTextBox = {}, t.legendHasRendered = !1, t.legend = t.svg.append("g").attr("transform", t.getTranslate("legend")), 
            t.config.legend_show ? void t.updateLegendWithDefaults() : (t.legend.style("visibility", "hidden"), 
            void (t.hiddenLegendIds = t.mapToIds(t.data.targets)));
        }, k.updateLegendWithDefaults = function() {
            var t = this;
            t.updateLegend(t.mapToIds(t.data.targets), {
                withTransform: !1,
                withTransitionForTransform: !1,
                withTransition: !1
            });
        }, k.updateSizeForLegend = function(t, e) {
            var n = this, i = n.config, r = {
                top: n.isLegendTop ? n.getCurrentPaddingTop() + i.legend_inset_y + 5.5 : n.currentHeight - t - n.getCurrentPaddingBottom() - i.legend_inset_y,
                left: n.isLegendLeft ? n.getCurrentPaddingLeft() + i.legend_inset_x + .5 : n.currentWidth - e - n.getCurrentPaddingRight() - i.legend_inset_x + .5
            };
            n.margin3 = {
                top: n.isLegendRight ? 0 : n.isLegendInset ? r.top : n.currentHeight - t,
                right: NaN,
                bottom: 0,
                left: n.isLegendRight ? n.currentWidth - e : n.isLegendInset ? r.left : 0
            };
        }, k.transformLegend = function(t) {
            var e = this;
            (t ? e.legend.transition() : e.legend).attr("transform", e.getTranslate("legend"));
        }, k.updateLegendStep = function(t) {
            this.legendStep = t;
        }, k.updateLegendItemWidth = function(t) {
            this.legendItemWidth = t;
        }, k.updateLegendItemHeight = function(t) {
            this.legendItemHeight = t;
        }, k.getLegendWidth = function() {
            var t = this;
            return t.config.legend_show ? t.isLegendRight || t.isLegendInset ? t.legendItemWidth * (t.legendStep + 1) : t.currentWidth : 0;
        }, k.getLegendHeight = function() {
            var t = this, e = 0;
            return t.config.legend_show && (e = t.isLegendRight ? t.currentHeight : Math.max(20, t.legendItemHeight) * (t.legendStep + 1)), 
            e;
        }, k.opacityForLegend = function(t) {
            return t.classed(s.legendItemHidden) ? null : 1;
        }, k.opacityForUnfocusedLegend = function(t) {
            return t.classed(s.legendItemHidden) ? null : .3;
        }, k.toggleFocusLegend = function(t, e) {
            var n = this;
            t = n.mapToTargetIds(t), n.legend.selectAll("." + s.legendItem).filter(function(e) {
                return t.indexOf(e) >= 0;
            }).classed(s.legendItemFocused, e).transition().duration(100).style("opacity", function() {
                var t = e ? n.opacityForLegend : n.opacityForUnfocusedLegend;
                return t.call(n, n.d3.select(this));
            });
        }, k.revertLegend = function() {
            var t = this, e = t.d3;
            t.legend.selectAll("." + s.legendItem).classed(s.legendItemFocused, !1).transition().duration(100).style("opacity", function() {
                return t.opacityForLegend(e.select(this));
            });
        }, k.showLegend = function(t) {
            var e = this, n = e.config;
            n.legend_show || (n.legend_show = !0, e.legend.style("visibility", "visible"), e.legendHasRendered || e.updateLegendWithDefaults()), 
            e.removeHiddenLegendIds(t), e.legend.selectAll(e.selectorLegends(t)).style("visibility", "visible").transition().style("opacity", function() {
                return e.opacityForLegend(e.d3.select(this));
            });
        }, k.hideLegend = function(t) {
            var e = this, n = e.config;
            n.legend_show && b(t) && (n.legend_show = !1, e.legend.style("visibility", "hidden")), 
            e.addHiddenLegendIds(t), e.legend.selectAll(e.selectorLegends(t)).style("opacity", 0).style("visibility", "hidden");
        }, k.clearLegendItemTextBoxCache = function() {
            this.legendItemTextBox = {};
        }, k.updateLegend = function(t, e, n) {
            function i(t, e) {
                return T.legendItemTextBox[e] || (T.legendItemTextBox[e] = T.getTextRect(t.textContent, s.legendItem, t)), 
                T.legendItemTextBox[e];
            }
            function r(e, n, r) {
                function a(t, e) {
                    e || (o = (p - N - f) / 2, o < M && (o = (p - f) / 2, N = 0, G++)), D[t] = G, I[G] = T.isLegendInset ? 10 : o, 
                    V[t] = N, N += f;
                }
                var o, s, c = 0 === r, l = r === t.length - 1, u = i(e, n), d = u.width + O + (!l || T.isLegendRight || T.isLegendInset ? C : 0) + E.legend_padding, h = u.height + A, f = T.isLegendRight || T.isLegendInset ? h : d, p = T.isLegendRight || T.isLegendInset ? T.getLegendHeight() : T.getLegendWidth();
                return c && (N = 0, G = 0, P = 0, k = 0), E.legend_show && !T.isLegendToShow(n) ? void (L[n] = R[n] = D[n] = V[n] = 0) : (L[n] = d, 
                R[n] = h, (!P || d >= P) && (P = d), (!k || h >= k) && (k = h), s = T.isLegendRight || T.isLegendInset ? k : P, 
                void (E.legend_equally ? (Object.keys(L).forEach(function(t) {
                    L[t] = P;
                }), Object.keys(R).forEach(function(t) {
                    R[t] = k;
                }), o = (p - s * t.length) / 2, o < M ? (N = 0, G = 0, t.forEach(function(t) {
                    a(t);
                })) : a(n, !0)) : a(n)));
            }
            var a, o, c, l, u, d, h, f, p, g, m, y, x, _, b, w, T = this, E = T.config, A = 4, C = 10, P = 0, k = 0, M = 10, O = E.legend_item_tile_width + 5, N = 0, V = {}, L = {}, R = {}, I = [ 0 ], D = {}, G = 0;
            t = t.filter(function(t) {
                return !v(E.data_names[t]) || null !== E.data_names[t];
            }), e = e || {}, m = S(e, "withTransition", !0), y = S(e, "withTransitionForTransform", !0), 
            T.isLegendInset && (G = E.legend_inset_step ? E.legend_inset_step : t.length, T.updateLegendStep(G)), 
            T.isLegendRight ? (a = function(t) {
                return P * D[t];
            }, l = function(t) {
                return I[D[t]] + V[t];
            }) : T.isLegendInset ? (a = function(t) {
                return P * D[t] + 10;
            }, l = function(t) {
                return I[D[t]] + V[t];
            }) : (a = function(t) {
                return I[D[t]] + V[t];
            }, l = function(t) {
                return k * D[t];
            }), o = function(t, e) {
                return a(t, e) + 4 + E.legend_item_tile_width;
            }, u = function(t, e) {
                return l(t, e) + 9;
            }, c = function(t, e) {
                return a(t, e);
            }, d = function(t, e) {
                return l(t, e) - 5;
            }, h = function(t, e) {
                return a(t, e) - 2;
            }, f = function(t, e) {
                return a(t, e) - 2 + E.legend_item_tile_width;
            }, p = function(t, e) {
                return l(t, e) + 4;
            }, g = T.legend.selectAll("." + s.legendItem).data(t).enter().append("g").attr("class", function(t) {
                return T.generateClass(s.legendItem, t);
            }).style("visibility", function(t) {
                return T.isLegendToShow(t) ? "visible" : "hidden";
            }).style("cursor", "pointer").on("click", function(t) {
                E.legend_item_onclick ? E.legend_item_onclick.call(T, t) : T.d3.event.altKey ? (T.api.hide(), 
                T.api.show(t)) : (T.api.toggle(t), T.isTargetToShow(t) ? T.api.focus(t) : T.api.revert());
            }).on("mouseover", function(t) {
                E.legend_item_onmouseover ? E.legend_item_onmouseover.call(T, t) : (T.d3.select(this).classed(s.legendItemFocused, !0), 
                !T.transiting && T.isTargetToShow(t) && T.api.focus(t));
            }).on("mouseout", function(t) {
                E.legend_item_onmouseout ? E.legend_item_onmouseout.call(T, t) : (T.d3.select(this).classed(s.legendItemFocused, !1), 
                T.api.revert());
            }), g.append("text").text(function(t) {
                return v(E.data_names[t]) ? E.data_names[t] : t;
            }).each(function(t, e) {
                r(this, t, e);
            }).style("pointer-events", "none").attr("x", T.isLegendRight || T.isLegendInset ? o : -200).attr("y", T.isLegendRight || T.isLegendInset ? -200 : u), 
            g.append("rect").attr("class", s.legendItemEvent).style("fill-opacity", 0).attr("x", T.isLegendRight || T.isLegendInset ? c : -200).attr("y", T.isLegendRight || T.isLegendInset ? -200 : d), 
            g.append("line").attr("class", s.legendItemTile).style("stroke", T.color).style("pointer-events", "none").attr("x1", T.isLegendRight || T.isLegendInset ? h : -200).attr("y1", T.isLegendRight || T.isLegendInset ? -200 : p).attr("x2", T.isLegendRight || T.isLegendInset ? f : -200).attr("y2", T.isLegendRight || T.isLegendInset ? -200 : p).attr("stroke-width", E.legend_item_tile_height), 
            w = T.legend.select("." + s.legendBackground + " rect"), T.isLegendInset && P > 0 && 0 === w.size() && (w = T.legend.insert("g", "." + s.legendItem).attr("class", s.legendBackground).append("rect")), 
            x = T.legend.selectAll("text").data(t).text(function(t) {
                return v(E.data_names[t]) ? E.data_names[t] : t;
            }).each(function(t, e) {
                r(this, t, e);
            }), (m ? x.transition() : x).attr("x", o).attr("y", u), _ = T.legend.selectAll("rect." + s.legendItemEvent).data(t), 
            (m ? _.transition() : _).attr("width", function(t) {
                return L[t];
            }).attr("height", function(t) {
                return R[t];
            }).attr("x", c).attr("y", d), b = T.legend.selectAll("line." + s.legendItemTile).data(t), 
            (m ? b.transition() : b).style("stroke", T.color).attr("x1", h).attr("y1", p).attr("x2", f).attr("y2", p), 
            w && (m ? w.transition() : w).attr("height", T.getLegendHeight() - 12).attr("width", P * (G + 1) + 10), 
            T.legend.selectAll("." + s.legendItem).classed(s.legendItemHidden, function(t) {
                return !T.isTargetToShow(t);
            }), T.updateLegendItemWidth(P), T.updateLegendItemHeight(k), T.updateLegendStep(G), 
            T.updateSizes(), T.updateScales(), T.updateSvgSize(), T.transformAll(y, n), T.legendHasRendered = !0;
        }, k.initRegion = function() {
            var t = this;
            t.region = t.main.append("g").attr("clip-path", t.clipPath).attr("class", s.regions);
        }, k.updateRegion = function(t) {
            var e = this, n = e.config;
            e.region.style("visibility", e.hasArcType() ? "hidden" : "visible"), e.mainRegion = e.main.select("." + s.regions).selectAll("." + s.region).data(n.regions), 
            e.mainRegion.enter().append("g").append("rect").style("fill-opacity", 0), e.mainRegion.attr("class", e.classRegion.bind(e)), 
            e.mainRegion.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawRegion = function(t) {
            var e = this, n = e.mainRegion.selectAll("rect").each(function() {
                var t = e.d3.select(this.parentNode).datum();
                e.d3.select(this).datum(t);
            }), i = e.regionX.bind(e), r = e.regionY.bind(e), a = e.regionWidth.bind(e), o = e.regionHeight.bind(e);
            return [ (t ? n.transition() : n).attr("x", i).attr("y", r).attr("width", a).attr("height", o).style("fill-opacity", function(t) {
                return h(t.opacity) ? t.opacity : .1;
            }) ];
        }, k.regionX = function(t) {
            var e, n = this, i = n.config, r = "y" === t.axis ? n.y : n.y2;
            return e = "y" === t.axis || "y2" === t.axis ? i.axis_rotated && "start" in t ? r(t.start) : 0 : i.axis_rotated ? 0 : "start" in t ? n.x(n.isTimeSeries() ? n.parseDate(t.start) : t.start) : 0;
        }, k.regionY = function(t) {
            var e, n = this, i = n.config, r = "y" === t.axis ? n.y : n.y2;
            return e = "y" === t.axis || "y2" === t.axis ? i.axis_rotated ? 0 : "end" in t ? r(t.end) : 0 : i.axis_rotated && "start" in t ? n.x(n.isTimeSeries() ? n.parseDate(t.start) : t.start) : 0;
        }, k.regionWidth = function(t) {
            var e, n = this, i = n.config, r = n.regionX(t), a = "y" === t.axis ? n.y : n.y2;
            return e = "y" === t.axis || "y2" === t.axis ? i.axis_rotated && "end" in t ? a(t.end) : n.width : i.axis_rotated ? n.width : "end" in t ? n.x(n.isTimeSeries() ? n.parseDate(t.end) : t.end) : n.width, 
            e < r ? 0 : e - r;
        }, k.regionHeight = function(t) {
            var e, n = this, i = n.config, r = this.regionY(t), a = "y" === t.axis ? n.y : n.y2;
            return e = "y" === t.axis || "y2" === t.axis ? i.axis_rotated ? n.height : "start" in t ? a(t.start) : n.height : i.axis_rotated && "end" in t ? n.x(n.isTimeSeries() ? n.parseDate(t.end) : t.end) : n.height, 
            e < r ? 0 : e - r;
        }, k.isRegionOnX = function(t) {
            return !t.axis || "x" === t.axis;
        }, k.getScale = function(t, e, n) {
            return (n ? this.d3.time.scale() : this.d3.scale.linear()).range([ t, e ]);
        }, k.getX = function(t, e, n, i) {
            var r, a = this, o = a.getScale(t, e, a.isTimeSeries()), s = n ? o.domain(n) : o;
            a.isCategorized() ? (i = i || function() {
                return 0;
            }, o = function(t, e) {
                var n = s(t) + i(t);
                return e ? n : Math.ceil(n);
            }) : o = function(t, e) {
                var n = s(t);
                return e ? n : Math.ceil(n);
            };
            for (r in s) o[r] = s[r];
            return o.orgDomain = function() {
                return s.domain();
            }, a.isCategorized() && (o.domain = function(t) {
                return arguments.length ? (s.domain(t), o) : (t = this.orgDomain(), [ t[0], t[1] + 1 ]);
            }), o;
        }, k.getY = function(t, e, n) {
            var i = this.getScale(t, e, this.isTimeSeriesY());
            return n && i.domain(n), i;
        }, k.getYScale = function(t) {
            return "y2" === this.axis.getId(t) ? this.y2 : this.y;
        }, k.getSubYScale = function(t) {
            return "y2" === this.axis.getId(t) ? this.subY2 : this.subY;
        }, k.updateScales = function() {
            var t = this, e = t.config, n = !t.x;
            t.xMin = e.axis_rotated ? 1 : 0, t.xMax = e.axis_rotated ? t.height : t.width, t.yMin = e.axis_rotated ? 0 : t.height, 
            t.yMax = e.axis_rotated ? t.width : 1, t.subXMin = t.xMin, t.subXMax = t.xMax, t.subYMin = e.axis_rotated ? 0 : t.height2, 
            t.subYMax = e.axis_rotated ? t.width2 : 1, t.x = t.getX(t.xMin, t.xMax, n ? void 0 : t.x.orgDomain(), function() {
                return t.xAxis.tickOffset();
            }), t.y = t.getY(t.yMin, t.yMax, n ? e.axis_y_default : t.y.domain()), t.y2 = t.getY(t.yMin, t.yMax, n ? e.axis_y2_default : t.y2.domain()), 
            t.subX = t.getX(t.xMin, t.xMax, t.orgXDomain, function(e) {
                return e % 1 ? 0 : t.subXAxis.tickOffset();
            }), t.subY = t.getY(t.subYMin, t.subYMax, n ? e.axis_y_default : t.subY.domain()), 
            t.subY2 = t.getY(t.subYMin, t.subYMax, n ? e.axis_y2_default : t.subY2.domain()), 
            t.xAxisTickFormat = t.axis.getXAxisTickFormat(), t.xAxisTickValues = t.axis.getXAxisTickValues(), 
            t.yAxisTickValues = t.axis.getYAxisTickValues(), t.y2AxisTickValues = t.axis.getY2AxisTickValues(), 
            t.xAxis = t.axis.getXAxis(t.x, t.xOrient, t.xAxisTickFormat, t.xAxisTickValues, e.axis_x_tick_outer), 
            t.subXAxis = t.axis.getXAxis(t.subX, t.subXOrient, t.xAxisTickFormat, t.xAxisTickValues, e.axis_x_tick_outer), 
            t.yAxis = t.axis.getYAxis(t.y, t.yOrient, e.axis_y_tick_format, t.yAxisTickValues, e.axis_y_tick_outer), 
            t.y2Axis = t.axis.getYAxis(t.y2, t.y2Orient, e.axis_y2_tick_format, t.y2AxisTickValues, e.axis_y2_tick_outer), 
            n || (t.brush && t.brush.scale(t.subX), e.zoom_enabled && t.zoom.scale(t.x)), t.updateArc && t.updateArc();
        }, k.selectPoint = function(t, e, n) {
            var i = this, r = i.config, a = (r.axis_rotated ? i.circleY : i.circleX).bind(i), o = (r.axis_rotated ? i.circleX : i.circleY).bind(i), c = i.pointSelectR.bind(i);
            r.data_onselected.call(i.api, e, t.node()), i.main.select("." + s.selectedCircles + i.getTargetSelectorSuffix(e.id)).selectAll("." + s.selectedCircle + "-" + n).data([ e ]).enter().append("circle").attr("class", function() {
                return i.generateClass(s.selectedCircle, n);
            }).attr("cx", a).attr("cy", o).attr("stroke", function() {
                return i.color(e);
            }).attr("r", function(t) {
                return 1.4 * i.pointSelectR(t);
            }).transition().duration(100).attr("r", c);
        }, k.unselectPoint = function(t, e, n) {
            var i = this;
            i.config.data_onunselected.call(i.api, e, t.node()), i.main.select("." + s.selectedCircles + i.getTargetSelectorSuffix(e.id)).selectAll("." + s.selectedCircle + "-" + n).transition().duration(100).attr("r", 0).remove();
        }, k.togglePoint = function(t, e, n, i) {
            t ? this.selectPoint(e, n, i) : this.unselectPoint(e, n, i);
        }, k.selectPath = function(t, e) {
            var n = this;
            n.config.data_onselected.call(n, e, t.node()), n.config.interaction_brighten && t.transition().duration(100).style("fill", function() {
                return n.d3.rgb(n.color(e)).brighter(.75);
            });
        }, k.unselectPath = function(t, e) {
            var n = this;
            n.config.data_onunselected.call(n, e, t.node()), n.config.interaction_brighten && t.transition().duration(100).style("fill", function() {
                return n.color(e);
            });
        }, k.togglePath = function(t, e, n, i) {
            t ? this.selectPath(e, n, i) : this.unselectPath(e, n, i);
        }, k.getToggle = function(t, e) {
            var n, i = this;
            return "circle" === t.nodeName ? n = i.isStepType(e) ? function() {} : i.togglePoint : "path" === t.nodeName && (n = i.togglePath), 
            n;
        }, k.toggleShape = function(t, e, n) {
            var i = this, r = i.d3, a = i.config, o = r.select(t), c = o.classed(s.SELECTED), l = i.getToggle(t, e).bind(i);
            a.data_selection_enabled && a.data_selection_isselectable(e) && (a.data_selection_multiple || i.main.selectAll("." + s.shapes + (a.data_selection_grouped ? i.getTargetSelectorSuffix(e.id) : "")).selectAll("." + s.shape).each(function(t, e) {
                var n = r.select(this);
                n.classed(s.SELECTED) && l(!1, n.classed(s.SELECTED, !1), t, e);
            }), o.classed(s.SELECTED, !c), l(!c, o, e, n));
        }, k.initBar = function() {
            var t = this;
            t.main.select("." + s.chart).append("g").attr("class", s.chartBars);
        }, k.updateTargetsForBar = function(t) {
            var e, n, i = this, r = i.config, a = i.classChartBar.bind(i), o = i.classBars.bind(i), c = i.classFocus.bind(i);
            e = i.main.select("." + s.chartBars).selectAll("." + s.chartBar).data(t).attr("class", function(t) {
                return a(t) + c(t);
            }), n = e.enter().append("g").attr("class", a).style("pointer-events", "none"), 
            n.append("g").attr("class", o).style("cursor", function(t) {
                return r.data_selection_isselectable(t) ? "pointer" : null;
            });
        }, k.updateBar = function(t) {
            var e = this, n = e.barData.bind(e), i = e.classBar.bind(e), r = e.initialOpacity.bind(e), a = function(t) {
                return e.color(t.id);
            };
            e.mainBar = e.main.selectAll("." + s.bars).selectAll("." + s.bar).data(n), e.mainBar.enter().append("path").attr("class", i).style("stroke", a).style("fill", a), 
            e.mainBar.style("opacity", r), e.mainBar.exit().transition().duration(t).remove();
        }, k.redrawBar = function(t, e) {
            return [ (e ? this.mainBar.transition(Math.random().toString()) : this.mainBar).attr("d", t).style("stroke", this.color).style("fill", this.color).style("opacity", 1) ];
        }, k.getBarW = function(t, e) {
            var n = this, i = n.config, r = "number" == typeof i.bar_width ? i.bar_width : e ? t.tickInterval() * i.bar_width_ratio / e : 0;
            return i.bar_width_max && r > i.bar_width_max ? i.bar_width_max : r;
        }, k.getBars = function(t, e) {
            var n = this;
            return (e ? n.main.selectAll("." + s.bars + n.getTargetSelectorSuffix(e)) : n.main).selectAll("." + s.bar + (h(t) ? "-" + t : ""));
        }, k.expandBars = function(t, e, n) {
            var i = this;
            n && i.unexpandBars(), i.getBars(t, e).classed(s.EXPANDED, !0);
        }, k.unexpandBars = function(t) {
            var e = this;
            e.getBars(t).classed(s.EXPANDED, !1);
        }, k.generateDrawBar = function(t, e) {
            var n = this, i = n.config, r = n.generateGetBarPoints(t, e);
            return function(t, e) {
                var n = r(t, e), a = i.axis_rotated ? 1 : 0, o = i.axis_rotated ? 0 : 1, s = "M " + n[0][a] + "," + n[0][o] + " L" + n[1][a] + "," + n[1][o] + " L" + n[2][a] + "," + n[2][o] + " L" + n[3][a] + "," + n[3][o] + " z";
                return s;
            };
        }, k.generateGetBarPoints = function(t, e) {
            var n = this, i = e ? n.subXAxis : n.xAxis, r = t.__max__ + 1, a = n.getBarW(i, r), o = n.getShapeX(a, r, t, !!e), s = n.getShapeY(!!e), c = n.getShapeOffset(n.isBarType, t, !!e), l = a * (n.config.bar_space / 2), u = e ? n.getSubYScale : n.getYScale;
            return function(t, e) {
                var i = u.call(n, t.id)(0), r = c(t, e) || i, d = o(t), h = s(t);
                return n.config.axis_rotated && (0 < t.value && h < i || t.value < 0 && i < h) && (h = i), 
                [ [ d + l, r ], [ d + l, h - (i - r) ], [ d + a - l, h - (i - r) ], [ d + a - l, r ] ];
            };
        }, k.isWithinBar = function(t) {
            var e = this.d3.mouse(t), n = t.getBoundingClientRect(), i = t.pathSegList.getItem(0), r = t.pathSegList.getItem(1), a = Math.min(i.x, r.x), o = Math.min(i.y, r.y), s = n.width, c = n.height, l = 2, u = a - l, d = a + s + l, h = o + c + l, f = o - l;
            return u < e[0] && e[0] < d && f < e[1] && e[1] < h;
        }, k.getShapeIndices = function(t) {
            var e, n, i = this, r = i.config, a = {}, o = 0;
            return i.filterTargetsToShow(i.data.targets.filter(t, i)).forEach(function(t) {
                for (e = 0; e < r.data_groups.length; e++) if (!(r.data_groups[e].indexOf(t.id) < 0)) for (n = 0; n < r.data_groups[e].length; n++) if (r.data_groups[e][n] in a) {
                    a[t.id] = a[r.data_groups[e][n]];
                    break;
                }
                m(a[t.id]) && (a[t.id] = o++);
            }), a.__max__ = o - 1, a;
        }, k.getShapeX = function(t, e, n, i) {
            var r = this, a = i ? r.subX : r.x;
            return function(i) {
                var r = i.id in n ? n[i.id] : 0;
                return i.x || 0 === i.x ? a(i.x) - t * (e / 2 - r) : 0;
            };
        }, k.getShapeY = function(t) {
            var e = this;
            return function(n) {
                var i = t ? e.getSubYScale(n.id) : e.getYScale(n.id);
                return i(n.value);
            };
        }, k.getShapeOffset = function(t, e, n) {
            var i = this, r = i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t, i))), a = r.map(function(t) {
                return t.id;
            });
            return function(t, o) {
                var s = n ? i.getSubYScale(t.id) : i.getYScale(t.id), c = s(0), l = c;
                return r.forEach(function(n) {
                    var r = i.isStepType(t) ? i.convertValuesToStep(n.values) : n.values;
                    n.id !== t.id && e[n.id] === e[t.id] && a.indexOf(n.id) < a.indexOf(t.id) && ("undefined" != typeof r[o] && +r[o].x === +t.x || (o = -1, 
                    r.forEach(function(e, n) {
                        e.x === t.x && (o = n);
                    })), o in r && r[o].value * t.value >= 0 && (l += s(r[o].value) - c));
                }), l;
            };
        }, k.isWithinShape = function(t, e) {
            var n, i = this, r = i.d3.select(t);
            return i.isTargetToShow(e.id) ? "circle" === t.nodeName ? n = i.isStepType(e) ? i.isWithinStep(t, i.getYScale(e.id)(e.value)) : i.isWithinCircle(t, 1.5 * i.pointSelectR(e)) : "path" === t.nodeName && (n = !r.classed(s.bar) || i.isWithinBar(t)) : n = !1, 
            n;
        }, k.getInterpolate = function(t) {
            var e = this, n = e.isInterpolationType(e.config.spline_interpolation_type) ? e.config.spline_interpolation_type : "cardinal";
            return e.isSplineType(t) ? n : e.isStepType(t) ? e.config.line_step_type : "linear";
        }, k.initLine = function() {
            var t = this;
            t.main.select("." + s.chart).append("g").attr("class", s.chartLines);
        }, k.updateTargetsForLine = function(t) {
            var e, n, i = this, r = i.config, a = i.classChartLine.bind(i), o = i.classLines.bind(i), c = i.classAreas.bind(i), l = i.classCircles.bind(i), u = i.classFocus.bind(i);
            e = i.main.select("." + s.chartLines).selectAll("." + s.chartLine).data(t).attr("class", function(t) {
                return a(t) + u(t);
            }), n = e.enter().append("g").attr("class", a).style("opacity", 0).style("pointer-events", "none"), 
            n.append("g").attr("class", o), n.append("g").attr("class", c), n.append("g").attr("class", function(t) {
                return i.generateClass(s.selectedCircles, t.id);
            }), n.append("g").attr("class", l).style("cursor", function(t) {
                return r.data_selection_isselectable(t) ? "pointer" : null;
            }), t.forEach(function(t) {
                i.main.selectAll("." + s.selectedCircles + i.getTargetSelectorSuffix(t.id)).selectAll("." + s.selectedCircle).each(function(e) {
                    e.value = t.values[e.index].value;
                });
            });
        }, k.updateLine = function(t) {
            var e = this;
            e.mainLine = e.main.selectAll("." + s.lines).selectAll("." + s.line).data(e.lineData.bind(e)), 
            e.mainLine.enter().append("path").attr("class", e.classLine.bind(e)).style("stroke", e.color), 
            e.mainLine.style("opacity", e.initialOpacity.bind(e)).style("shape-rendering", function(t) {
                return e.isStepType(t) ? "crispEdges" : "";
            }).attr("transform", null), e.mainLine.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawLine = function(t, e) {
            return [ (e ? this.mainLine.transition(Math.random().toString()) : this.mainLine).attr("d", t).style("stroke", this.color).style("opacity", 1) ];
        }, k.generateDrawLine = function(t, e) {
            var n = this, i = n.config, r = n.d3.svg.line(), a = n.generateGetLinePoints(t, e), o = e ? n.getSubYScale : n.getYScale, s = function(t) {
                return (e ? n.subxx : n.xx).call(n, t);
            }, c = function(t, e) {
                return i.data_groups.length > 0 ? a(t, e)[0][1] : o.call(n, t.id)(t.value);
            };
            return r = i.axis_rotated ? r.x(c).y(s) : r.x(s).y(c), i.line_connectNull || (r = r.defined(function(t) {
                return null != t.value;
            })), function(t) {
                var a, s = i.line_connectNull ? n.filterRemoveNull(t.values) : t.values, c = e ? n.x : n.subX, l = o.call(n, t.id), u = 0, d = 0;
                return n.isLineType(t) ? i.data_regions[t.id] ? a = n.lineWithRegions(s, c, l, i.data_regions[t.id]) : (n.isStepType(t) && (s = n.convertValuesToStep(s)), 
                a = r.interpolate(n.getInterpolate(t))(s)) : (s[0] && (u = c(s[0].x), d = l(s[0].value)), 
                a = i.axis_rotated ? "M " + d + " " + u : "M " + u + " " + d), a ? a : "M 0 0";
            };
        }, k.generateGetLinePoints = function(t, e) {
            var n = this, i = n.config, r = t.__max__ + 1, a = n.getShapeX(0, r, t, !!e), o = n.getShapeY(!!e), s = n.getShapeOffset(n.isLineType, t, !!e), c = e ? n.getSubYScale : n.getYScale;
            return function(t, e) {
                var r = c.call(n, t.id)(0), l = s(t, e) || r, u = a(t), d = o(t);
                return i.axis_rotated && (0 < t.value && d < r || t.value < 0 && r < d) && (d = r), 
                [ [ u, d - (r - l) ], [ u, d - (r - l) ], [ u, d - (r - l) ], [ u, d - (r - l) ] ];
            };
        }, k.lineWithRegions = function(t, e, n, i) {
            function r(t, e) {
                var n;
                for (n = 0; n < e.length; n++) if (e[n].start < t && t <= e[n].end) return !0;
                return !1;
            }
            function a(t) {
                return "M" + t[0][0] + " " + t[0][1] + " " + t[1][0] + " " + t[1][1];
            }
            var o, s, c, l, u, d, h, f, p, g, y, x, _ = this, b = _.config, w = -1, S = "M", T = _.isCategorized() ? .5 : 0, E = [];
            if (v(i)) for (o = 0; o < i.length; o++) E[o] = {}, m(i[o].start) ? E[o].start = t[0].x : E[o].start = _.isTimeSeries() ? _.parseDate(i[o].start) : i[o].start, 
            m(i[o].end) ? E[o].end = t[t.length - 1].x : E[o].end = _.isTimeSeries() ? _.parseDate(i[o].end) : i[o].end;
            for (y = b.axis_rotated ? function(t) {
                return n(t.value);
            } : function(t) {
                return e(t.x);
            }, x = b.axis_rotated ? function(t) {
                return e(t.x);
            } : function(t) {
                return n(t.value);
            }, c = _.isTimeSeries() ? function(t, i, r, o) {
                var s, c = t.x.getTime(), l = i.x - t.x, d = new Date(c + l * r), h = new Date(c + l * (r + o));
                return s = b.axis_rotated ? [ [ n(u(r)), e(d) ], [ n(u(r + o)), e(h) ] ] : [ [ e(d), n(u(r)) ], [ e(h), n(u(r + o)) ] ], 
                a(s);
            } : function(t, i, r, o) {
                var s;
                return s = b.axis_rotated ? [ [ n(u(r), !0), e(l(r)) ], [ n(u(r + o), !0), e(l(r + o)) ] ] : [ [ e(l(r), !0), n(u(r)) ], [ e(l(r + o), !0), n(u(r + o)) ] ], 
                a(s);
            }, o = 0; o < t.length; o++) {
                if (m(E) || !r(t[o].x, E)) S += " " + y(t[o]) + " " + x(t[o]); else for (l = _.getScale(t[o - 1].x + T, t[o].x + T, _.isTimeSeries()), 
                u = _.getScale(t[o - 1].value, t[o].value), d = e(t[o].x) - e(t[o - 1].x), h = n(t[o].value) - n(t[o - 1].value), 
                f = Math.sqrt(Math.pow(d, 2) + Math.pow(h, 2)), p = 2 / f, g = 2 * p, s = p; s <= 1; s += g) S += c(t[o - 1], t[o], s, p);
                w = t[o].x;
            }
            return S;
        }, k.updateArea = function(t) {
            var e = this, n = e.d3;
            e.mainArea = e.main.selectAll("." + s.areas).selectAll("." + s.area).data(e.lineData.bind(e)), 
            e.mainArea.enter().append("path").attr("class", e.classArea.bind(e)).style("fill", e.color).style("opacity", function() {
                return e.orgAreaOpacity = +n.select(this).style("opacity"), 0;
            }), e.mainArea.style("opacity", e.orgAreaOpacity), e.mainArea.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawArea = function(t, e) {
            return [ (e ? this.mainArea.transition(Math.random().toString()) : this.mainArea).attr("d", t).style("fill", this.color).style("opacity", this.orgAreaOpacity) ];
        }, k.generateDrawArea = function(t, e) {
            var n = this, i = n.config, r = n.d3.svg.area(), a = n.generateGetAreaPoints(t, e), o = e ? n.getSubYScale : n.getYScale, s = function(t) {
                return (e ? n.subxx : n.xx).call(n, t);
            }, c = function(t, e) {
                return i.data_groups.length > 0 ? a(t, e)[0][1] : o.call(n, t.id)(n.getAreaBaseValue(t.id));
            }, l = function(t, e) {
                return i.data_groups.length > 0 ? a(t, e)[1][1] : o.call(n, t.id)(t.value);
            };
            return r = i.axis_rotated ? r.x0(c).x1(l).y(s) : r.x(s).y0(i.area_above ? 0 : c).y1(l), 
            i.line_connectNull || (r = r.defined(function(t) {
                return null !== t.value;
            })), function(t) {
                var e, a = i.line_connectNull ? n.filterRemoveNull(t.values) : t.values, o = 0, s = 0;
                return n.isAreaType(t) ? (n.isStepType(t) && (a = n.convertValuesToStep(a)), e = r.interpolate(n.getInterpolate(t))(a)) : (a[0] && (o = n.x(a[0].x), 
                s = n.getYScale(t.id)(a[0].value)), e = i.axis_rotated ? "M " + s + " " + o : "M " + o + " " + s), 
                e ? e : "M 0 0";
            };
        }, k.getAreaBaseValue = function() {
            return 0;
        }, k.generateGetAreaPoints = function(t, e) {
            var n = this, i = n.config, r = t.__max__ + 1, a = n.getShapeX(0, r, t, !!e), o = n.getShapeY(!!e), s = n.getShapeOffset(n.isAreaType, t, !!e), c = e ? n.getSubYScale : n.getYScale;
            return function(t, e) {
                var r = c.call(n, t.id)(0), l = s(t, e) || r, u = a(t), d = o(t);
                return i.axis_rotated && (0 < t.value && d < r || t.value < 0 && r < d) && (d = r), 
                [ [ u, l ], [ u, d - (r - l) ], [ u, d - (r - l) ], [ u, l ] ];
            };
        }, k.updateCircle = function() {
            var t = this;
            t.mainCircle = t.main.selectAll("." + s.circles).selectAll("." + s.circle).data(t.lineOrScatterData.bind(t)), 
            t.mainCircle.enter().append("circle").attr("class", t.classCircle.bind(t)).attr("r", t.pointR.bind(t)).style("fill", t.color), 
            t.mainCircle.style("opacity", t.initialOpacityForCircle.bind(t)), t.mainCircle.exit().remove();
        }, k.redrawCircle = function(t, e, n) {
            var i = this.main.selectAll("." + s.selectedCircle);
            return [ (n ? this.mainCircle.transition(Math.random().toString()) : this.mainCircle).style("opacity", this.opacityForCircle.bind(this)).style("fill", this.color).attr("cx", t).attr("cy", e), (n ? i.transition(Math.random().toString()) : i).attr("cx", t).attr("cy", e) ];
        }, k.circleX = function(t) {
            return t.x || 0 === t.x ? this.x(t.x) : null;
        }, k.updateCircleY = function() {
            var t, e, n = this;
            n.config.data_groups.length > 0 ? (t = n.getShapeIndices(n.isLineType), e = n.generateGetLinePoints(t), 
            n.circleY = function(t, n) {
                return e(t, n)[0][1];
            }) : n.circleY = function(t) {
                return n.getYScale(t.id)(t.value);
            };
        }, k.getCircles = function(t, e) {
            var n = this;
            return (e ? n.main.selectAll("." + s.circles + n.getTargetSelectorSuffix(e)) : n.main).selectAll("." + s.circle + (h(t) ? "-" + t : ""));
        }, k.expandCircles = function(t, e, n) {
            var i = this, r = i.pointExpandedR.bind(i);
            n && i.unexpandCircles(), i.getCircles(t, e).classed(s.EXPANDED, !0).attr("r", r);
        }, k.unexpandCircles = function(t) {
            var e = this, n = e.pointR.bind(e);
            e.getCircles(t).filter(function() {
                return e.d3.select(this).classed(s.EXPANDED);
            }).classed(s.EXPANDED, !1).attr("r", n);
        }, k.pointR = function(t) {
            var e = this, n = e.config;
            return e.isStepType(t) ? 0 : f(n.point_r) ? n.point_r(t) : n.point_r;
        }, k.pointExpandedR = function(t) {
            var e = this, n = e.config;
            return n.point_focus_expand_enabled ? f(n.point_focus_expand_r) ? n.point_focus_expand_r(t) : n.point_focus_expand_r ? n.point_focus_expand_r : 1.75 * e.pointR(t) : e.pointR(t);
        }, k.pointSelectR = function(t) {
            var e = this, n = e.config;
            return f(n.point_select_r) ? n.point_select_r(t) : n.point_select_r ? n.point_select_r : 4 * e.pointR(t);
        }, k.isWithinCircle = function(t, e) {
            var n = this.d3, i = n.mouse(t), r = n.select(t), a = +r.attr("cx"), o = +r.attr("cy");
            return Math.sqrt(Math.pow(a - i[0], 2) + Math.pow(o - i[1], 2)) < e;
        }, k.isWithinStep = function(t, e) {
            return Math.abs(e - this.d3.mouse(t)[1]) < 30;
        }, k.getCurrentWidth = function() {
            var t = this, e = t.config;
            return e.size_width ? e.size_width : t.getParentWidth();
        }, k.getCurrentHeight = function() {
            var t = this, e = t.config, n = e.size_height ? e.size_height : t.getParentHeight();
            return n > 0 ? n : 320 / (t.hasType("gauge") && !e.gauge_fullCircle ? 2 : 1);
        }, k.getCurrentPaddingTop = function() {
            var t = this, e = t.config, n = h(e.padding_top) ? e.padding_top : 0;
            return t.title && t.title.node() && (n += t.getTitlePadding()), n;
        }, k.getCurrentPaddingBottom = function() {
            var t = this.config;
            return h(t.padding_bottom) ? t.padding_bottom : 0;
        }, k.getCurrentPaddingLeft = function(t) {
            var e = this, n = e.config;
            return h(n.padding_left) ? n.padding_left : n.axis_rotated ? n.axis_x_show ? Math.max(y(e.getAxisWidthByAxisId("x", t)), 40) : 1 : !n.axis_y_show || n.axis_y_inner ? e.axis.getYAxisLabelPosition().isOuter ? 30 : 1 : y(e.getAxisWidthByAxisId("y", t));
        }, k.getCurrentPaddingRight = function() {
            var t = this, e = t.config, n = 10, i = t.isLegendRight ? t.getLegendWidth() + 20 : 0;
            return h(e.padding_right) ? e.padding_right + 1 : e.axis_rotated ? n + i : !e.axis_y2_show || e.axis_y2_inner ? 2 + i + (t.axis.getY2AxisLabelPosition().isOuter ? 20 : 0) : y(t.getAxisWidthByAxisId("y2")) + i;
        }, k.getParentRectValue = function(t) {
            for (var e, n = this.selectChart.node(); n && "BODY" !== n.tagName; ) {
                try {
                    e = n.getBoundingClientRect()[t];
                } catch (i) {
                    "width" === t && (e = n.offsetWidth);
                }
                if (e) break;
                n = n.parentNode;
            }
            return e;
        }, k.getParentWidth = function() {
            return this.getParentRectValue("width");
        }, k.getParentHeight = function() {
            var t = this.selectChart.style("height");
            return t.indexOf("px") > 0 ? +t.replace("px", "") : 0;
        }, k.getSvgLeft = function(t) {
            var e = this, n = e.config, i = n.axis_rotated || !n.axis_rotated && !n.axis_y_inner, r = n.axis_rotated ? s.axisX : s.axisY, a = e.main.select("." + r).node(), o = a && i ? a.getBoundingClientRect() : {
                right: 0
            }, c = e.selectChart.node().getBoundingClientRect(), l = e.hasArcType(), u = o.right - c.left - (l ? 0 : e.getCurrentPaddingLeft(t));
            return u > 0 ? u : 0;
        }, k.getAxisWidthByAxisId = function(t, e) {
            var n = this, i = n.axis.getLabelPositionById(t);
            return n.axis.getMaxTickWidth(t, e) + (i.isInner ? 20 : 40);
        }, k.getHorizontalAxisHeight = function(t) {
            var e = this, n = e.config, i = 30;
            return "x" !== t || n.axis_x_show ? "x" === t && n.axis_x_height ? n.axis_x_height : "y" !== t || n.axis_y_show ? "y2" !== t || n.axis_y2_show ? ("x" === t && !n.axis_rotated && n.axis_x_tick_rotate && (i = 30 + e.axis.getMaxTickWidth(t) * Math.cos(Math.PI * (90 - n.axis_x_tick_rotate) / 180)), 
            "y" === t && n.axis_rotated && n.axis_y_tick_rotate && (i = 30 + e.axis.getMaxTickWidth(t) * Math.cos(Math.PI * (90 - n.axis_y_tick_rotate) / 180)), 
            i + (e.axis.getLabelPositionById(t).isInner ? 0 : 10) + ("y2" === t ? -10 : 0)) : e.rotated_padding_top : !n.legend_show || e.isLegendRight || e.isLegendInset ? 1 : 10 : 8;
        }, k.getEventRectWidth = function() {
            return Math.max(0, this.xAxis.tickInterval());
        }, k.initBrush = function() {
            var t = this, e = t.d3;
            t.brush = e.svg.brush().on("brush", function() {
                t.redrawForBrush();
            }), t.brush.update = function() {
                return t.context && t.context.select("." + s.brush).call(this), this;
            }, t.brush.scale = function(e) {
                return t.config.axis_rotated ? this.y(e) : this.x(e);
            };
        }, k.initSubchart = function() {
            var t = this, e = t.config, n = t.context = t.svg.append("g").attr("transform", t.getTranslate("context")), i = e.subchart_show ? "visible" : "hidden";
            n.style("visibility", i), n.append("g").attr("clip-path", t.clipPathForSubchart).attr("class", s.chart), 
            n.select("." + s.chart).append("g").attr("class", s.chartBars), n.select("." + s.chart).append("g").attr("class", s.chartLines), 
            n.append("g").attr("clip-path", t.clipPath).attr("class", s.brush).call(t.brush), 
            t.axes.subx = n.append("g").attr("class", s.axisX).attr("transform", t.getTranslate("subx")).attr("clip-path", e.axis_rotated ? "" : t.clipPathForXAxis).style("visibility", e.subchart_axis_x_show ? i : "hidden");
        }, k.updateTargetsForSubchart = function(t) {
            var e, n, i, r, a = this, o = a.context, c = a.config, l = a.classChartBar.bind(a), u = a.classBars.bind(a), d = a.classChartLine.bind(a), h = a.classLines.bind(a), f = a.classAreas.bind(a);
            c.subchart_show && (r = o.select("." + s.chartBars).selectAll("." + s.chartBar).data(t).attr("class", l), 
            i = r.enter().append("g").style("opacity", 0).attr("class", l), i.append("g").attr("class", u), 
            n = o.select("." + s.chartLines).selectAll("." + s.chartLine).data(t).attr("class", d), 
            e = n.enter().append("g").style("opacity", 0).attr("class", d), e.append("g").attr("class", h), 
            e.append("g").attr("class", f), o.selectAll("." + s.brush + " rect").attr(c.axis_rotated ? "width" : "height", c.axis_rotated ? a.width2 : a.height2));
        }, k.updateBarForSubchart = function(t) {
            var e = this;
            e.contextBar = e.context.selectAll("." + s.bars).selectAll("." + s.bar).data(e.barData.bind(e)), 
            e.contextBar.enter().append("path").attr("class", e.classBar.bind(e)).style("stroke", "none").style("fill", e.color), 
            e.contextBar.style("opacity", e.initialOpacity.bind(e)), e.contextBar.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawBarForSubchart = function(t, e, n) {
            (e ? this.contextBar.transition(Math.random().toString()).duration(n) : this.contextBar).attr("d", t).style("opacity", 1);
        }, k.updateLineForSubchart = function(t) {
            var e = this;
            e.contextLine = e.context.selectAll("." + s.lines).selectAll("." + s.line).data(e.lineData.bind(e)), 
            e.contextLine.enter().append("path").attr("class", e.classLine.bind(e)).style("stroke", e.color), 
            e.contextLine.style("opacity", e.initialOpacity.bind(e)), e.contextLine.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawLineForSubchart = function(t, e, n) {
            (e ? this.contextLine.transition(Math.random().toString()).duration(n) : this.contextLine).attr("d", t).style("opacity", 1);
        }, k.updateAreaForSubchart = function(t) {
            var e = this, n = e.d3;
            e.contextArea = e.context.selectAll("." + s.areas).selectAll("." + s.area).data(e.lineData.bind(e)), 
            e.contextArea.enter().append("path").attr("class", e.classArea.bind(e)).style("fill", e.color).style("opacity", function() {
                return e.orgAreaOpacity = +n.select(this).style("opacity"), 0;
            }), e.contextArea.style("opacity", 0), e.contextArea.exit().transition().duration(t).style("opacity", 0).remove();
        }, k.redrawAreaForSubchart = function(t, e, n) {
            (e ? this.contextArea.transition(Math.random().toString()).duration(n) : this.contextArea).attr("d", t).style("fill", this.color).style("opacity", this.orgAreaOpacity);
        }, k.redrawSubchart = function(t, e, n, i, r, a, o) {
            var s, c, l, u = this, d = u.d3, h = u.config;
            u.context.style("visibility", h.subchart_show ? "visible" : "hidden"), h.subchart_show && (d.event && "zoom" === d.event.type && u.brush.extent(u.x.orgDomain()).update(), 
            t && (u.brush.empty() || u.brush.extent(u.x.orgDomain()).update(), s = u.generateDrawArea(r, !0), 
            c = u.generateDrawBar(a, !0), l = u.generateDrawLine(o, !0), u.updateBarForSubchart(n), 
            u.updateLineForSubchart(n), u.updateAreaForSubchart(n), u.redrawBarForSubchart(c, n, n), 
            u.redrawLineForSubchart(l, n, n), u.redrawAreaForSubchart(s, n, n)));
        }, k.redrawForBrush = function() {
            var t = this, e = t.x;
            t.redraw({
                withTransition: !1,
                withY: t.config.zoom_rescale,
                withSubchart: !1,
                withUpdateXDomain: !0,
                withDimension: !1
            }), t.config.subchart_onbrush.call(t.api, e.orgDomain());
        }, k.transformContext = function(t, e) {
            var n, i = this;
            e && e.axisSubX ? n = e.axisSubX : (n = i.context.select("." + s.axisX), t && (n = n.transition())), 
            i.context.attr("transform", i.getTranslate("context")), n.attr("transform", i.getTranslate("subx"));
        }, k.getDefaultExtent = function() {
            var t = this, e = t.config, n = f(e.axis_x_extent) ? e.axis_x_extent(t.getXDomain(t.data.targets)) : e.axis_x_extent;
            return t.isTimeSeries() && (n = [ t.parseDate(n[0]), t.parseDate(n[1]) ]), n;
        }, k.initText = function() {
            var t = this;
            t.main.select("." + s.chart).append("g").attr("class", s.chartTexts), t.mainText = t.d3.selectAll([]);
        }, k.updateTargetsForText = function(t) {
            var e, n, i = this, r = i.classChartText.bind(i), a = i.classTexts.bind(i), o = i.classFocus.bind(i);
            e = i.main.select("." + s.chartTexts).selectAll("." + s.chartText).data(t).attr("class", function(t) {
                return r(t) + o(t);
            }), n = e.enter().append("g").attr("class", r).style("opacity", 0).style("pointer-events", "none"), 
            n.append("g").attr("class", a);
        }, k.updateText = function(t) {
            var e = this, n = e.config, i = e.barOrLineData.bind(e), r = e.classText.bind(e);
            e.mainText = e.main.selectAll("." + s.texts).selectAll("." + s.text).data(i), e.mainText.enter().append("text").attr("class", r).attr("text-anchor", function(t) {
                return n.axis_rotated ? t.value < 0 ? "end" : "start" : "middle";
            }).style("stroke", "none").style("fill", function(t) {
                return e.color(t);
            }).style("fill-opacity", 0), e.mainText.text(function(t, n, i) {
                return e.dataLabelFormat(t.id)(t.value, t.id, n, i);
            }), e.mainText.exit().transition().duration(t).style("fill-opacity", 0).remove();
        }, k.redrawText = function(t, e, n, i) {
            return [ (i ? this.mainText.transition() : this.mainText).attr("x", t).attr("y", e).style("fill", this.color).style("fill-opacity", n ? 0 : this.opacityForText.bind(this)) ];
        }, k.getTextRect = function(t, e, n) {
            var i, r = this.d3.select("body").append("div").classed("c3", !0), a = r.append("svg").style("visibility", "hidden").style("position", "fixed").style("top", 0).style("left", 0), o = this.d3.select(n).style("font");
            return a.selectAll(".dummy").data([ t ]).enter().append("text").classed(e ? e : "", !0).style("font", o).text(t).each(function() {
                i = this.getBoundingClientRect();
            }), r.remove(), i;
        }, k.generateXYForText = function(t, e, n, i) {
            var r = this, a = r.generateGetAreaPoints(t, !1), o = r.generateGetBarPoints(e, !1), s = r.generateGetLinePoints(n, !1), c = i ? r.getXForText : r.getYForText;
            return function(t, e) {
                var n = r.isAreaType(t) ? a : r.isBarType(t) ? o : s;
                return c.call(r, n(t, e), t, this);
            };
        }, k.getXForText = function(t, e, n) {
            var i, r, a = this, o = n.getBoundingClientRect();
            return a.config.axis_rotated ? (r = a.isBarType(e) ? 4 : 6, i = t[2][1] + r * (e.value < 0 ? -1 : 1)) : i = a.hasType("bar") ? (t[2][0] + t[0][0]) / 2 : t[0][0], 
            null === e.value && (i > a.width ? i = a.width - o.width : i < 0 && (i = 4)), i;
        }, k.getYForText = function(t, e, n) {
            var i, r = this, a = n.getBoundingClientRect();
            return r.config.axis_rotated ? i = (t[0][0] + t[2][0] + .6 * a.height) / 2 : (i = t[2][1], 
            e.value < 0 || 0 === e.value && !r.hasPositiveValue ? (i += a.height, r.isBarType(e) && r.isSafari() ? i -= 3 : !r.isBarType(e) && r.isChrome() && (i += 3)) : i += r.isBarType(e) ? -3 : -6), 
            null !== e.value || r.config.axis_rotated || (i < a.height ? i = a.height : i > this.height && (i = this.height - 4)), 
            i;
        }, k.initTitle = function() {
            var t = this;
            t.title = t.svg.append("text").text(t.config.title_text).attr("class", t.CLASS.title);
        }, k.redrawTitle = function() {
            var t = this;
            t.title.attr("x", t.xForTitle.bind(t)).attr("y", t.yForTitle.bind(t));
        }, k.xForTitle = function() {
            var t, e = this, n = e.config, i = n.title_position || "left";
            return t = i.indexOf("right") >= 0 ? e.currentWidth - e.getTextRect(e.title.node().textContent, e.CLASS.title, e.title.node()).width - n.title_padding.right : i.indexOf("center") >= 0 ? (e.currentWidth - e.getTextRect(e.title.node().textContent, e.CLASS.title, e.title.node()).width) / 2 : n.title_padding.left;
        }, k.yForTitle = function() {
            var t = this;
            return t.config.title_padding.top + t.getTextRect(t.title.node().textContent, t.CLASS.title, t.title.node()).height;
        }, k.getTitlePadding = function() {
            var t = this;
            return t.yForTitle() + t.config.title_padding.bottom;
        }, k.initTooltip = function() {
            var t, e = this, n = e.config;
            if (e.tooltip = e.selectChart.style("position", "relative").append("div").attr("class", s.tooltipContainer).style("position", "absolute").style("pointer-events", "none").style("display", "none"), 
            n.tooltip_init_show) {
                if (e.isTimeSeries() && g(n.tooltip_init_x)) {
                    for (n.tooltip_init_x = e.parseDate(n.tooltip_init_x), t = 0; t < e.data.targets[0].values.length && e.data.targets[0].values[t].x - n.tooltip_init_x !== 0; t++) ;
                    n.tooltip_init_x = t;
                }
                e.tooltip.html(n.tooltip_contents.call(e, e.data.targets.map(function(t) {
                    return e.addName(t.values[n.tooltip_init_x]);
                }), e.axis.getXAxisTickFormat(), e.getYFormat(e.hasArcType()), e.color)), e.tooltip.style("top", n.tooltip_init_position.top).style("left", n.tooltip_init_position.left).style("display", "block");
            }
        }, k.getTooltipSortFunction = function() {
            var t = this, e = t.config;
            if (0 !== e.data_groups.length && void 0 === e.tooltip_order) {
                var n = t.orderTargets(t.data.targets).map(function(t) {
                    return t.id;
                });
                return (t.isOrderAsc() || t.isOrderDesc()) && (n = n.reverse()), function(t, e) {
                    return n.indexOf(t.id) - n.indexOf(e.id);
                };
            }
            var i = e.tooltip_order;
            void 0 === i && (i = e.data_order);
            var r = function(t) {
                return t ? t.value : null;
            };
            if (g(i) && "asc" === i.toLowerCase()) return function(t, e) {
                return r(t) - r(e);
            };
            if (g(i) && "desc" === i.toLowerCase()) return function(t, e) {
                return r(e) - r(t);
            };
            if (f(i)) {
                var a = i;
                return void 0 === e.tooltip_order && (a = function(t, e) {
                    return i(t ? {
                        id: t.id,
                        values: [ t ]
                    } : null, e ? {
                        id: e.id,
                        values: [ e ]
                    } : null);
                }), a;
            }
            return p(i) ? function(t, e) {
                return i.indexOf(t.id) - i.indexOf(e.id);
            } : void 0;
        }, k.getTooltipContent = function(t, e, n, i) {
            var r, a, o, s, c, l, u = this, d = u.config, h = d.tooltip_format_title || e, f = d.tooltip_format_name || function(t) {
                return t;
            }, p = d.tooltip_format_value || n, g = this.getTooltipSortFunction();
            for (g && t.sort(g), a = 0; a < t.length; a++) if (t[a] && (t[a].value || 0 === t[a].value) && (r || (o = E(h ? h(t[a].x) : t[a].x), 
            r = "<table class='" + u.CLASS.tooltip + "'>" + (o || 0 === o ? "<tr><th colspan='2'>" + o + "</th></tr>" : "")), 
            s = E(p(t[a].value, t[a].ratio, t[a].id, t[a].index, t)), void 0 !== s)) {
                if (null === t[a].name) continue;
                c = E(f(t[a].name, t[a].ratio, t[a].id, t[a].index)), l = u.levelColor ? u.levelColor(t[a].value) : i(t[a].id), 
                r += "<tr class='" + u.CLASS.tooltipName + "-" + u.getTargetSelectorSuffix(t[a].id) + "'>", 
                r += "<td class='name'><span style='background-color:" + l + "'></span>" + c + "</td>", 
                r += "<td class='value'>" + s + "</td>", r += "</tr>";
            }
            return r + "</table>";
        }, k.tooltipPosition = function(t, e, n, i) {
            var r, a, o, s, c, l = this, u = l.config, d = l.d3, h = l.hasArcType(), f = d.mouse(i);
            return h ? (a = (l.width - (l.isLegendRight ? l.getLegendWidth() : 0)) / 2 + f[0], 
            s = l.height / 2 + f[1] + 20) : (r = l.getSvgLeft(!0), u.axis_rotated ? (a = r + f[0] + 100, 
            o = a + e, c = l.currentWidth - l.getCurrentPaddingRight(), s = l.x(t[0].x) + 20) : (a = r + l.getCurrentPaddingLeft(!0) + l.x(t[0].x) + 20, 
            o = a + e, c = r + l.currentWidth - l.getCurrentPaddingRight(), s = f[1] + 15), 
            o > c && (a -= o - c + 20), s + n > l.currentHeight && (s -= n + 30)), s < 0 && (s = 0), 
            {
                top: s,
                left: a
            };
        }, k.showTooltip = function(t, e) {
            var n, i, r, a = this, o = a.config, s = a.hasArcType(), c = t.filter(function(t) {
                return t && h(t.value);
            }), l = o.tooltip_position || k.tooltipPosition;
            0 !== c.length && o.tooltip_show && (a.tooltip.html(o.tooltip_contents.call(a, t, a.axis.getXAxisTickFormat(), a.getYFormat(s), a.color)).style("display", "block"), 
            n = a.tooltip.property("offsetWidth"), i = a.tooltip.property("offsetHeight"), r = l.call(this, c, n, i, e), 
            a.tooltip.style("top", r.top + "px").style("left", r.left + "px"));
        }, k.hideTooltip = function() {
            this.tooltip.style("display", "none");
        }, k.setTargetType = function(t, e) {
            var n = this, i = n.config;
            n.mapToTargetIds(t).forEach(function(t) {
                n.withoutFadeIn[t] = e === i.data_types[t], i.data_types[t] = e;
            }), t || (i.data_type = e);
        }, k.hasType = function(t, e) {
            var n = this, i = n.config.data_types, r = !1;
            return e = e || n.data.targets, e && e.length ? e.forEach(function(e) {
                var n = i[e.id];
                (n && n.indexOf(t) >= 0 || !n && "line" === t) && (r = !0);
            }) : Object.keys(i).length ? Object.keys(i).forEach(function(e) {
                i[e] === t && (r = !0);
            }) : r = n.config.data_type === t, r;
        }, k.hasArcType = function(t) {
            return this.hasType("pie", t) || this.hasType("donut", t) || this.hasType("gauge", t);
        }, k.isLineType = function(t) {
            var e = this.config, n = g(t) ? t : t.id;
            return !e.data_types[n] || [ "line", "spline", "area", "area-spline", "step", "area-step" ].indexOf(e.data_types[n]) >= 0;
        }, k.isStepType = function(t) {
            var e = g(t) ? t : t.id;
            return [ "step", "area-step" ].indexOf(this.config.data_types[e]) >= 0;
        }, k.isSplineType = function(t) {
            var e = g(t) ? t : t.id;
            return [ "spline", "area-spline" ].indexOf(this.config.data_types[e]) >= 0;
        }, k.isAreaType = function(t) {
            var e = g(t) ? t : t.id;
            return [ "area", "area-spline", "area-step" ].indexOf(this.config.data_types[e]) >= 0;
        }, k.isBarType = function(t) {
            var e = g(t) ? t : t.id;
            return "bar" === this.config.data_types[e];
        }, k.isScatterType = function(t) {
            var e = g(t) ? t : t.id;
            return "scatter" === this.config.data_types[e];
        }, k.isPieType = function(t) {
            var e = g(t) ? t : t.id;
            return "pie" === this.config.data_types[e];
        }, k.isGaugeType = function(t) {
            var e = g(t) ? t : t.id;
            return "gauge" === this.config.data_types[e];
        }, k.isDonutType = function(t) {
            var e = g(t) ? t : t.id;
            return "donut" === this.config.data_types[e];
        }, k.isArcType = function(t) {
            return this.isPieType(t) || this.isDonutType(t) || this.isGaugeType(t);
        }, k.lineData = function(t) {
            return this.isLineType(t) ? [ t ] : [];
        }, k.arcData = function(t) {
            return this.isArcType(t.data) ? [ t ] : [];
        }, k.barData = function(t) {
            return this.isBarType(t) ? t.values : [];
        }, k.lineOrScatterData = function(t) {
            return this.isLineType(t) || this.isScatterType(t) ? t.values : [];
        }, k.barOrLineData = function(t) {
            return this.isBarType(t) || this.isLineType(t) ? t.values : [];
        }, k.isInterpolationType = function(t) {
            return [ "linear", "linear-closed", "basis", "basis-open", "basis-closed", "bundle", "cardinal", "cardinal-open", "cardinal-closed", "monotone" ].indexOf(t) >= 0;
        }, k.isSafari = function() {
            var t = window.navigator.userAgent;
            return t.indexOf("Safari") >= 0 && t.indexOf("Chrome") < 0;
        }, k.isChrome = function() {
            var t = window.navigator.userAgent;
            return t.indexOf("Chrome") >= 0;
        }, k.initZoom = function() {
            var t, e = this, n = e.d3, i = e.config;
            e.zoom = n.behavior.zoom().on("zoomstart", function() {
                t = n.event.sourceEvent, e.zoom.altDomain = n.event.sourceEvent.altKey ? e.x.orgDomain() : null, 
                i.zoom_onzoomstart.call(e.api, n.event.sourceEvent);
            }).on("zoom", function() {
                e.redrawForZoom.call(e);
            }).on("zoomend", function() {
                var r = n.event.sourceEvent;
                r && t.clientX === r.clientX && t.clientY === r.clientY || (e.redrawEventRect(), 
                e.updateZoom(), i.zoom_onzoomend.call(e.api, e.x.orgDomain()));
            }), e.zoom.scale = function(t) {
                return i.axis_rotated ? this.y(t) : this.x(t);
            }, e.zoom.orgScaleExtent = function() {
                var t = i.zoom_extent ? i.zoom_extent : [ 1, 10 ];
                return [ t[0], Math.max(e.getMaxDataCount() / t[1], t[1]) ];
            }, e.zoom.updateScaleExtent = function() {
                var t = _(e.x.orgDomain()) / _(e.getZoomDomain()), n = this.orgScaleExtent();
                return this.scaleExtent([ n[0] * t, n[1] * t ]), this;
            };
        }, k.getZoomDomain = function() {
            var t = this, e = t.config, n = t.d3, i = n.min([ t.orgXDomain[0], e.zoom_x_min ]), r = n.max([ t.orgXDomain[1], e.zoom_x_max ]);
            return [ i, r ];
        }, k.updateZoom = function() {
            var t = this, e = t.config.zoom_enabled ? t.zoom : function() {};
            t.main.select("." + s.zoomRect).call(e).on("dblclick.zoom", null), t.main.selectAll("." + s.eventRect).call(e).on("dblclick.zoom", null);
        }, k.redrawForZoom = function() {
            var t = this, e = t.d3, n = t.config, i = t.zoom, r = t.x;
            if (n.zoom_enabled && 0 !== t.filterTargetsToShow(t.data.targets).length) {
                if ("mousemove" === e.event.sourceEvent.type && i.altDomain) return r.domain(i.altDomain), 
                void i.scale(r).updateScaleExtent();
                t.isCategorized() && r.orgDomain()[0] === t.orgXDomain[0] && r.domain([ t.orgXDomain[0] - 1e-10, r.orgDomain()[1] ]), 
                t.redraw({
                    withTransition: !1,
                    withY: n.zoom_rescale,
                    withSubchart: !1,
                    withEventRect: !1,
                    withDimension: !1
                }), "mousemove" === e.event.sourceEvent.type && (t.cancelClick = !0), n.zoom_onzoom.call(t.api, r.orgDomain());
            }
        }, M;
    });
}, function(t, e, n) {
    var i, r;
    !function() {
        function a(t) {
            return t && (t.ownerDocument || t.document || t).documentElement;
        }
        function o(t) {
            return t && (t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView);
        }
        function s(t, e) {
            return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
        }
        function c(t) {
            return null === t ? NaN : +t;
        }
        function l(t) {
            return !isNaN(t);
        }
        function u(t) {
            return {
                left: function(e, n, i, r) {
                    for (arguments.length < 3 && (i = 0), arguments.length < 4 && (r = e.length); i < r; ) {
                        var a = i + r >>> 1;
                        t(e[a], n) < 0 ? i = a + 1 : r = a;
                    }
                    return i;
                },
                right: function(e, n, i, r) {
                    for (arguments.length < 3 && (i = 0), arguments.length < 4 && (r = e.length); i < r; ) {
                        var a = i + r >>> 1;
                        t(e[a], n) > 0 ? r = a : i = a + 1;
                    }
                    return i;
                }
            };
        }
        function d(t) {
            return t.length;
        }
        function h(t) {
            for (var e = 1; t * e % 1; ) e *= 10;
            return e;
        }
        function f(t, e) {
            for (var n in e) Object.defineProperty(t.prototype, n, {
                value: e[n],
                enumerable: !1
            });
        }
        function p() {
            this._ = Object.create(null);
        }
        function g(t) {
            return (t += "") === To || t[0] === Eo ? Eo + t : t;
        }
        function m(t) {
            return (t += "")[0] === Eo ? t.slice(1) : t;
        }
        function v(t) {
            return g(t) in this._;
        }
        function y(t) {
            return (t = g(t)) in this._ && delete this._[t];
        }
        function x() {
            var t = [];
            for (var e in this._) t.push(m(e));
            return t;
        }
        function _() {
            var t = 0;
            for (var e in this._) ++t;
            return t;
        }
        function b() {
            for (var t in this._) return !1;
            return !0;
        }
        function w() {
            this._ = Object.create(null);
        }
        function S(t) {
            return t;
        }
        function T(t, e, n) {
            return function() {
                var i = n.apply(e, arguments);
                return i === e ? t : i;
            };
        }
        function E(t, e) {
            if (e in t) return e;
            e = e.charAt(0).toUpperCase() + e.slice(1);
            for (var n = 0, i = Ao.length; n < i; ++n) {
                var r = Ao[n] + e;
                if (r in t) return r;
            }
        }
        function A() {}
        function C() {}
        function P(t) {
            function e() {
                for (var e, i = n, r = -1, a = i.length; ++r < a; ) (e = i[r].on) && e.apply(this, arguments);
                return t;
            }
            var n = [], i = new p();
            return e.on = function(e, r) {
                var a, o = i.get(e);
                return arguments.length < 2 ? o && o.on : (o && (o.on = null, n = n.slice(0, a = n.indexOf(o)).concat(n.slice(a + 1)), 
                i.remove(e)), r && n.push(i.set(e, {
                    on: r
                })), t);
            }, e;
        }
        function k() {
            fo.event.preventDefault();
        }
        function M() {
            for (var t, e = fo.event; t = e.sourceEvent; ) e = t;
            return e;
        }
        function O(t) {
            for (var e = new C(), n = 0, i = arguments.length; ++n < i; ) e[arguments[n]] = P(e);
            return e.of = function(n, i) {
                return function(r) {
                    try {
                        var a = r.sourceEvent = fo.event;
                        r.target = t, fo.event = r, e[r.type].apply(n, i);
                    } finally {
                        fo.event = a;
                    }
                };
            }, e;
        }
        function N(t) {
            return Po(t, No), t;
        }
        function V(t) {
            return "function" == typeof t ? t : function() {
                return ko(t, this);
            };
        }
        function L(t) {
            return "function" == typeof t ? t : function() {
                return Mo(t, this);
            };
        }
        function R(t, e) {
            function n() {
                this.removeAttribute(t);
            }
            function i() {
                this.removeAttributeNS(t.space, t.local);
            }
            function r() {
                this.setAttribute(t, e);
            }
            function a() {
                this.setAttributeNS(t.space, t.local, e);
            }
            function o() {
                var n = e.apply(this, arguments);
                null == n ? this.removeAttribute(t) : this.setAttribute(t, n);
            }
            function s() {
                var n = e.apply(this, arguments);
                null == n ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n);
            }
            return t = fo.ns.qualify(t), null == e ? t.local ? i : n : "function" == typeof e ? t.local ? s : o : t.local ? a : r;
        }
        function I(t) {
            return t.trim().replace(/\s+/g, " ");
        }
        function D(t) {
            return new RegExp("(?:^|\\s+)" + fo.requote(t) + "(?:\\s+|$)", "g");
        }
        function G(t) {
            return (t + "").trim().split(/^|\s+/);
        }
        function F(t, e) {
            function n() {
                for (var n = -1; ++n < r; ) t[n](this, e);
            }
            function i() {
                for (var n = -1, i = e.apply(this, arguments); ++n < r; ) t[n](this, i);
            }
            t = G(t).map(j);
            var r = t.length;
            return "function" == typeof e ? i : n;
        }
        function j(t) {
            var e = D(t);
            return function(n, i) {
                if (r = n.classList) return i ? r.add(t) : r.remove(t);
                var r = n.getAttribute("class") || "";
                i ? (e.lastIndex = 0, e.test(r) || n.setAttribute("class", I(r + " " + t))) : n.setAttribute("class", I(r.replace(e, " ")));
            };
        }
        function H(t, e, n) {
            function i() {
                this.style.removeProperty(t);
            }
            function r() {
                this.style.setProperty(t, e, n);
            }
            function a() {
                var i = e.apply(this, arguments);
                null == i ? this.style.removeProperty(t) : this.style.setProperty(t, i, n);
            }
            return null == e ? i : "function" == typeof e ? a : r;
        }
        function U(t, e) {
            function n() {
                delete this[t];
            }
            function i() {
                this[t] = e;
            }
            function r() {
                var n = e.apply(this, arguments);
                null == n ? delete this[t] : this[t] = n;
            }
            return null == e ? n : "function" == typeof e ? r : i;
        }
        function z(t) {
            function e() {
                var e = this.ownerDocument, n = this.namespaceURI;
                return n === Vo && e.documentElement.namespaceURI === Vo ? e.createElement(t) : e.createElementNS(n, t);
            }
            function n() {
                return this.ownerDocument.createElementNS(t.space, t.local);
            }
            return "function" == typeof t ? t : (t = fo.ns.qualify(t)).local ? n : e;
        }
        function B() {
            var t = this.parentNode;
            t && t.removeChild(this);
        }
        function X(t) {
            return {
                __data__: t
            };
        }
        function Y(t) {
            return function() {
                return Oo(this, t);
            };
        }
        function q(t) {
            return arguments.length || (t = s), function(e, n) {
                return e && n ? t(e.__data__, n.__data__) : !e - !n;
            };
        }
        function W(t, e) {
            for (var n = 0, i = t.length; n < i; n++) for (var r, a = t[n], o = 0, s = a.length; o < s; o++) (r = a[o]) && e(r, o, n);
            return t;
        }
        function K(t) {
            return Po(t, Ro), t;
        }
        function Q(t) {
            var e, n;
            return function(i, r, a) {
                var o, s = t[a].update, c = s.length;
                for (a != n && (n = a, e = 0), r >= e && (e = r + 1); !(o = s[e]) && ++e < c; ) ;
                return o;
            };
        }
        function J(t, e, n) {
            function i() {
                var e = this[o];
                e && (this.removeEventListener(t, e, e.$), delete this[o]);
            }
            function r() {
                var r = c(e, go(arguments));
                i.call(this), this.addEventListener(t, this[o] = r, r.$ = n), r._ = e;
            }
            function a() {
                var e, n = new RegExp("^__on([^.]+)" + fo.requote(t) + "$");
                for (var i in this) if (e = i.match(n)) {
                    var r = this[i];
                    this.removeEventListener(e[1], r, r.$), delete this[i];
                }
            }
            var o = "__on" + t, s = t.indexOf("."), c = $;
            s > 0 && (t = t.slice(0, s));
            var l = Io.get(t);
            return l && (t = l, c = Z), s ? e ? r : i : e ? A : a;
        }
        function $(t, e) {
            return function(n) {
                var i = fo.event;
                fo.event = n, e[0] = this.__data__;
                try {
                    t.apply(this, e);
                } finally {
                    fo.event = i;
                }
            };
        }
        function Z(t, e) {
            var n = $(t, e);
            return function(t) {
                var e = this, i = t.relatedTarget;
                i && (i === e || 8 & i.compareDocumentPosition(e)) || n.call(e, t);
            };
        }
        function tt(t) {
            var e = ".dragsuppress-" + ++Go, n = "click" + e, i = fo.select(o(t)).on("touchmove" + e, k).on("dragstart" + e, k).on("selectstart" + e, k);
            if (null == Do && (Do = !("onselectstart" in t) && E(t.style, "userSelect")), Do) {
                var r = a(t).style, s = r[Do];
                r[Do] = "none";
            }
            return function(t) {
                if (i.on(e, null), Do && (r[Do] = s), t) {
                    var a = function() {
                        i.on(n, null);
                    };
                    i.on(n, function() {
                        k(), a();
                    }, !0), setTimeout(a, 0);
                }
            };
        }
        function et(t, e) {
            e.changedTouches && (e = e.changedTouches[0]);
            var n = t.ownerSVGElement || t;
            if (n.createSVGPoint) {
                var i = n.createSVGPoint();
                if (Fo < 0) {
                    var r = o(t);
                    if (r.scrollX || r.scrollY) {
                        n = fo.select("body").append("svg").style({
                            position: "absolute",
                            top: 0,
                            left: 0,
                            margin: 0,
                            padding: 0,
                            border: "none"
                        }, "important");
                        var a = n[0][0].getScreenCTM();
                        Fo = !(a.f || a.e), n.remove();
                    }
                }
                return Fo ? (i.x = e.pageX, i.y = e.pageY) : (i.x = e.clientX, i.y = e.clientY), 
                i = i.matrixTransform(t.getScreenCTM().inverse()), [ i.x, i.y ];
            }
            var s = t.getBoundingClientRect();
            return [ e.clientX - s.left - t.clientLeft, e.clientY - s.top - t.clientTop ];
        }
        function nt() {
            return fo.event.changedTouches[0].identifier;
        }
        function it(t) {
            return t > 0 ? 1 : t < 0 ? -1 : 0;
        }
        function rt(t, e, n) {
            return (e[0] - t[0]) * (n[1] - t[1]) - (e[1] - t[1]) * (n[0] - t[0]);
        }
        function at(t) {
            return t > 1 ? 0 : t < -1 ? Uo : Math.acos(t);
        }
        function ot(t) {
            return t > 1 ? Xo : t < -1 ? -Xo : Math.asin(t);
        }
        function st(t) {
            return ((t = Math.exp(t)) - 1 / t) / 2;
        }
        function ct(t) {
            return ((t = Math.exp(t)) + 1 / t) / 2;
        }
        function lt(t) {
            return ((t = Math.exp(2 * t)) - 1) / (t + 1);
        }
        function ut(t) {
            return (t = Math.sin(t / 2)) * t;
        }
        function dt() {}
        function ht(t, e, n) {
            return this instanceof ht ? (this.h = +t, this.s = +e, void (this.l = +n)) : arguments.length < 2 ? t instanceof ht ? new ht(t.h, t.s, t.l) : At("" + t, Ct, ht) : new ht(t, e, n);
        }
        function ft(t, e, n) {
            function i(t) {
                return t > 360 ? t -= 360 : t < 0 && (t += 360), t < 60 ? a + (o - a) * t / 60 : t < 180 ? o : t < 240 ? a + (o - a) * (240 - t) / 60 : a;
            }
            function r(t) {
                return Math.round(255 * i(t));
            }
            var a, o;
            return t = isNaN(t) ? 0 : (t %= 360) < 0 ? t + 360 : t, e = isNaN(e) ? 0 : e < 0 ? 0 : e > 1 ? 1 : e, 
            n = n < 0 ? 0 : n > 1 ? 1 : n, o = n <= .5 ? n * (1 + e) : n + e - n * e, a = 2 * n - o, 
            new wt(r(t + 120), r(t), r(t - 120));
        }
        function pt(t, e, n) {
            return this instanceof pt ? (this.h = +t, this.c = +e, void (this.l = +n)) : arguments.length < 2 ? t instanceof pt ? new pt(t.h, t.c, t.l) : t instanceof mt ? yt(t.l, t.a, t.b) : yt((t = Pt((t = fo.rgb(t)).r, t.g, t.b)).l, t.a, t.b) : new pt(t, e, n);
        }
        function gt(t, e, n) {
            return isNaN(t) && (t = 0), isNaN(e) && (e = 0), new mt(n, Math.cos(t *= Yo) * e, Math.sin(t) * e);
        }
        function mt(t, e, n) {
            return this instanceof mt ? (this.l = +t, this.a = +e, void (this.b = +n)) : arguments.length < 2 ? t instanceof mt ? new mt(t.l, t.a, t.b) : t instanceof pt ? gt(t.h, t.c, t.l) : Pt((t = wt(t)).r, t.g, t.b) : new mt(t, e, n);
        }
        function vt(t, e, n) {
            var i = (t + 16) / 116, r = i + e / 500, a = i - n / 200;
            return r = xt(r) * is, i = xt(i) * rs, a = xt(a) * as, new wt(bt(3.2404542 * r - 1.5371385 * i - .4985314 * a), bt(-.969266 * r + 1.8760108 * i + .041556 * a), bt(.0556434 * r - .2040259 * i + 1.0572252 * a));
        }
        function yt(t, e, n) {
            return t > 0 ? new pt(Math.atan2(n, e) * qo, Math.sqrt(e * e + n * n), t) : new pt(NaN, NaN, t);
        }
        function xt(t) {
            return t > .206893034 ? t * t * t : (t - 4 / 29) / 7.787037;
        }
        function _t(t) {
            return t > .008856 ? Math.pow(t, 1 / 3) : 7.787037 * t + 4 / 29;
        }
        function bt(t) {
            return Math.round(255 * (t <= .00304 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055));
        }
        function wt(t, e, n) {
            return this instanceof wt ? (this.r = ~~t, this.g = ~~e, void (this.b = ~~n)) : arguments.length < 2 ? t instanceof wt ? new wt(t.r, t.g, t.b) : At("" + t, wt, ft) : new wt(t, e, n);
        }
        function St(t) {
            return new wt(t >> 16, t >> 8 & 255, 255 & t);
        }
        function Tt(t) {
            return St(t) + "";
        }
        function Et(t) {
            return t < 16 ? "0" + Math.max(0, t).toString(16) : Math.min(255, t).toString(16);
        }
        function At(t, e, n) {
            var i, r, a, o = 0, s = 0, c = 0;
            if (i = /([a-z]+)\((.*)\)/.exec(t = t.toLowerCase())) switch (r = i[2].split(","), 
            i[1]) {
              case "hsl":
                return n(parseFloat(r[0]), parseFloat(r[1]) / 100, parseFloat(r[2]) / 100);

              case "rgb":
                return e(Mt(r[0]), Mt(r[1]), Mt(r[2]));
            }
            return (a = cs.get(t)) ? e(a.r, a.g, a.b) : (null == t || "#" !== t.charAt(0) || isNaN(a = parseInt(t.slice(1), 16)) || (4 === t.length ? (o = (3840 & a) >> 4, 
            o |= o >> 4, s = 240 & a, s |= s >> 4, c = 15 & a, c |= c << 4) : 7 === t.length && (o = (16711680 & a) >> 16, 
            s = (65280 & a) >> 8, c = 255 & a)), e(o, s, c));
        }
        function Ct(t, e, n) {
            var i, r, a = Math.min(t /= 255, e /= 255, n /= 255), o = Math.max(t, e, n), s = o - a, c = (o + a) / 2;
            return s ? (r = c < .5 ? s / (o + a) : s / (2 - o - a), i = t == o ? (e - n) / s + (e < n ? 6 : 0) : e == o ? (n - t) / s + 2 : (t - e) / s + 4, 
            i *= 60) : (i = NaN, r = c > 0 && c < 1 ? 0 : i), new ht(i, r, c);
        }
        function Pt(t, e, n) {
            t = kt(t), e = kt(e), n = kt(n);
            var i = _t((.4124564 * t + .3575761 * e + .1804375 * n) / is), r = _t((.2126729 * t + .7151522 * e + .072175 * n) / rs), a = _t((.0193339 * t + .119192 * e + .9503041 * n) / as);
            return mt(116 * r - 16, 500 * (i - r), 200 * (r - a));
        }
        function kt(t) {
            return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4);
        }
        function Mt(t) {
            var e = parseFloat(t);
            return "%" === t.charAt(t.length - 1) ? Math.round(2.55 * e) : e;
        }
        function Ot(t) {
            return "function" == typeof t ? t : function() {
                return t;
            };
        }
        function Nt(t) {
            return function(e, n, i) {
                return 2 === arguments.length && "function" == typeof n && (i = n, n = null), Vt(e, n, t, i);
            };
        }
        function Vt(t, e, n, i) {
            function r() {
                var t, e = c.status;
                if (!e && Rt(c) || e >= 200 && e < 300 || 304 === e) {
                    try {
                        t = n.call(a, c);
                    } catch (t) {
                        return void o.error.call(a, t);
                    }
                    o.load.call(a, t);
                } else o.error.call(a, c);
            }
            var a = {}, o = fo.dispatch("beforesend", "progress", "load", "error"), s = {}, c = new XMLHttpRequest(), l = null;
            return !this.XDomainRequest || "withCredentials" in c || !/^(http(s)?:)?\/\//.test(t) || (c = new XDomainRequest()), 
            "onload" in c ? c.onload = c.onerror = r : c.onreadystatechange = function() {
                c.readyState > 3 && r();
            }, c.onprogress = function(t) {
                var e = fo.event;
                fo.event = t;
                try {
                    o.progress.call(a, c);
                } finally {
                    fo.event = e;
                }
            }, a.header = function(t, e) {
                return t = (t + "").toLowerCase(), arguments.length < 2 ? s[t] : (null == e ? delete s[t] : s[t] = e + "", 
                a);
            }, a.mimeType = function(t) {
                return arguments.length ? (e = null == t ? null : t + "", a) : e;
            }, a.responseType = function(t) {
                return arguments.length ? (l = t, a) : l;
            }, a.response = function(t) {
                return n = t, a;
            }, [ "get", "post" ].forEach(function(t) {
                a[t] = function() {
                    return a.send.apply(a, [ t ].concat(go(arguments)));
                };
            }), a.send = function(n, i, r) {
                if (2 === arguments.length && "function" == typeof i && (r = i, i = null), c.open(n, t, !0), 
                null == e || "accept" in s || (s.accept = e + ",*/*"), c.setRequestHeader) for (var u in s) c.setRequestHeader(u, s[u]);
                return null != e && c.overrideMimeType && c.overrideMimeType(e), null != l && (c.responseType = l), 
                null != r && a.on("error", r).on("load", function(t) {
                    r(null, t);
                }), o.beforesend.call(a, c), c.send(null == i ? null : i), a;
            }, a.abort = function() {
                return c.abort(), a;
            }, fo.rebind(a, o, "on"), null == i ? a : a.get(Lt(i));
        }
        function Lt(t) {
            return 1 === t.length ? function(e, n) {
                t(null == e ? n : null);
            } : t;
        }
        function Rt(t) {
            var e = t.responseType;
            return e && "text" !== e ? t.response : t.responseText;
        }
        function It(t, e, n) {
            var i = arguments.length;
            i < 2 && (e = 0), i < 3 && (n = Date.now());
            var r = n + e, a = {
                c: t,
                t: r,
                n: null
            };
            return us ? us.n = a : ls = a, us = a, ds || (hs = clearTimeout(hs), ds = 1, fs(Dt)), 
            a;
        }
        function Dt() {
            var t = Gt(), e = Ft() - t;
            e > 24 ? (isFinite(e) && (clearTimeout(hs), hs = setTimeout(Dt, e)), ds = 0) : (ds = 1, 
            fs(Dt));
        }
        function Gt() {
            for (var t = Date.now(), e = ls; e; ) t >= e.t && e.c(t - e.t) && (e.c = null), 
            e = e.n;
            return t;
        }
        function Ft() {
            for (var t, e = ls, n = 1 / 0; e; ) e.c ? (e.t < n && (n = e.t), e = (t = e).n) : e = t ? t.n = e.n : ls = e.n;
            return us = t, n;
        }
        function jt(t, e) {
            return e - (t ? Math.ceil(Math.log(t) / Math.LN10) : 1);
        }
        function Ht(t, e) {
            var n = Math.pow(10, 3 * So(8 - e));
            return {
                scale: e > 8 ? function(t) {
                    return t / n;
                } : function(t) {
                    return t * n;
                },
                symbol: t
            };
        }
        function Ut(t) {
            var e = t.decimal, n = t.thousands, i = t.grouping, r = t.currency, a = i && n ? function(t, e) {
                for (var r = t.length, a = [], o = 0, s = i[0], c = 0; r > 0 && s > 0 && (c + s + 1 > e && (s = Math.max(1, e - c)), 
                a.push(t.substring(r -= s, r + s)), !((c += s + 1) > e)); ) s = i[o = (o + 1) % i.length];
                return a.reverse().join(n);
            } : S;
            return function(t) {
                var n = gs.exec(t), i = n[1] || " ", o = n[2] || ">", s = n[3] || "-", c = n[4] || "", l = n[5], u = +n[6], d = n[7], h = n[8], f = n[9], p = 1, g = "", m = "", v = !1, y = !0;
                switch (h && (h = +h.substring(1)), (l || "0" === i && "=" === o) && (l = i = "0", 
                o = "="), f) {
                  case "n":
                    d = !0, f = "g";
                    break;

                  case "%":
                    p = 100, m = "%", f = "f";
                    break;

                  case "p":
                    p = 100, m = "%", f = "r";
                    break;

                  case "b":
                  case "o":
                  case "x":
                  case "X":
                    "#" === c && (g = "0" + f.toLowerCase());

                  case "c":
                    y = !1;

                  case "d":
                    v = !0, h = 0;
                    break;

                  case "s":
                    p = -1, f = "r";
                }
                "$" === c && (g = r[0], m = r[1]), "r" != f || h || (f = "g"), null != h && ("g" == f ? h = Math.max(1, Math.min(21, h)) : "e" != f && "f" != f || (h = Math.max(0, Math.min(20, h)))), 
                f = ms.get(f) || zt;
                var x = l && d;
                return function(t) {
                    var n = m;
                    if (v && t % 1) return "";
                    var r = t < 0 || 0 === t && 1 / t < 0 ? (t = -t, "-") : "-" === s ? "" : s;
                    if (p < 0) {
                        var c = fo.formatPrefix(t, h);
                        t = c.scale(t), n = c.symbol + m;
                    } else t *= p;
                    t = f(t, h);
                    var _, b, w = t.lastIndexOf(".");
                    if (w < 0) {
                        var S = y ? t.lastIndexOf("e") : -1;
                        S < 0 ? (_ = t, b = "") : (_ = t.substring(0, S), b = t.substring(S));
                    } else _ = t.substring(0, w), b = e + t.substring(w + 1);
                    !l && d && (_ = a(_, 1 / 0));
                    var T = g.length + _.length + b.length + (x ? 0 : r.length), E = T < u ? new Array(T = u - T + 1).join(i) : "";
                    return x && (_ = a(E + _, E.length ? u - b.length : 1 / 0)), r += g, t = _ + b, 
                    ("<" === o ? r + t + E : ">" === o ? E + r + t : "^" === o ? E.substring(0, T >>= 1) + r + t + E.substring(T) : r + (x ? t : E + t)) + n;
                };
            };
        }
        function zt(t) {
            return t + "";
        }
        function Bt() {
            this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]);
        }
        function Xt(t, e, n) {
            function i(e) {
                var n = t(e), i = a(n, 1);
                return e - n < i - e ? n : i;
            }
            function r(n) {
                return e(n = t(new ys(n - 1)), 1), n;
            }
            function a(t, n) {
                return e(t = new ys(+t), n), t;
            }
            function o(t, i, a) {
                var o = r(t), s = [];
                if (a > 1) for (;o < i; ) n(o) % a || s.push(new Date(+o)), e(o, 1); else for (;o < i; ) s.push(new Date(+o)), 
                e(o, 1);
                return s;
            }
            function s(t, e, n) {
                try {
                    ys = Bt;
                    var i = new Bt();
                    return i._ = t, o(i, e, n);
                } finally {
                    ys = Date;
                }
            }
            t.floor = t, t.round = i, t.ceil = r, t.offset = a, t.range = o;
            var c = t.utc = Yt(t);
            return c.floor = c, c.round = Yt(i), c.ceil = Yt(r), c.offset = Yt(a), c.range = s, 
            t;
        }
        function Yt(t) {
            return function(e, n) {
                try {
                    ys = Bt;
                    var i = new Bt();
                    return i._ = e, t(i, n)._;
                } finally {
                    ys = Date;
                }
            };
        }
        function qt(t) {
            function e(t) {
                function e(e) {
                    for (var n, r, a, o = [], s = -1, c = 0; ++s < i; ) 37 === t.charCodeAt(s) && (o.push(t.slice(c, s)), 
                    null != (r = _s[n = t.charAt(++s)]) && (n = t.charAt(++s)), (a = P[n]) && (n = a(e, null == r ? "e" === n ? " " : "0" : r)), 
                    o.push(n), c = s + 1);
                    return o.push(t.slice(c, s)), o.join("");
                }
                var i = t.length;
                return e.parse = function(e) {
                    var i = {
                        y: 1900,
                        m: 0,
                        d: 1,
                        H: 0,
                        M: 0,
                        S: 0,
                        L: 0,
                        Z: null
                    }, r = n(i, t, e, 0);
                    if (r != e.length) return null;
                    "p" in i && (i.H = i.H % 12 + 12 * i.p);
                    var a = null != i.Z && ys !== Bt, o = new (a ? Bt : ys)();
                    return "j" in i ? o.setFullYear(i.y, 0, i.j) : "W" in i || "U" in i ? ("w" in i || (i.w = "W" in i ? 1 : 0), 
                    o.setFullYear(i.y, 0, 1), o.setFullYear(i.y, 0, "W" in i ? (i.w + 6) % 7 + 7 * i.W - (o.getDay() + 5) % 7 : i.w + 7 * i.U - (o.getDay() + 6) % 7)) : o.setFullYear(i.y, i.m, i.d), 
                    o.setHours(i.H + (i.Z / 100 | 0), i.M + i.Z % 100, i.S, i.L), a ? o._ : o;
                }, e.toString = function() {
                    return t;
                }, e;
            }
            function n(t, e, n, i) {
                for (var r, a, o, s = 0, c = e.length, l = n.length; s < c; ) {
                    if (i >= l) return -1;
                    if (r = e.charCodeAt(s++), 37 === r) {
                        if (o = e.charAt(s++), a = k[o in _s ? e.charAt(s++) : o], !a || (i = a(t, n, i)) < 0) return -1;
                    } else if (r != n.charCodeAt(i++)) return -1;
                }
                return i;
            }
            function i(t, e, n) {
                w.lastIndex = 0;
                var i = w.exec(e.slice(n));
                return i ? (t.w = S.get(i[0].toLowerCase()), n + i[0].length) : -1;
            }
            function r(t, e, n) {
                _.lastIndex = 0;
                var i = _.exec(e.slice(n));
                return i ? (t.w = b.get(i[0].toLowerCase()), n + i[0].length) : -1;
            }
            function a(t, e, n) {
                A.lastIndex = 0;
                var i = A.exec(e.slice(n));
                return i ? (t.m = C.get(i[0].toLowerCase()), n + i[0].length) : -1;
            }
            function o(t, e, n) {
                T.lastIndex = 0;
                var i = T.exec(e.slice(n));
                return i ? (t.m = E.get(i[0].toLowerCase()), n + i[0].length) : -1;
            }
            function s(t, e, i) {
                return n(t, P.c.toString(), e, i);
            }
            function c(t, e, i) {
                return n(t, P.x.toString(), e, i);
            }
            function l(t, e, i) {
                return n(t, P.X.toString(), e, i);
            }
            function u(t, e, n) {
                var i = x.get(e.slice(n, n += 2).toLowerCase());
                return null == i ? -1 : (t.p = i, n);
            }
            var d = t.dateTime, h = t.date, f = t.time, p = t.periods, g = t.days, m = t.shortDays, v = t.months, y = t.shortMonths;
            e.utc = function(t) {
                function n(t) {
                    try {
                        ys = Bt;
                        var e = new ys();
                        return e._ = t, i(e);
                    } finally {
                        ys = Date;
                    }
                }
                var i = e(t);
                return n.parse = function(t) {
                    try {
                        ys = Bt;
                        var e = i.parse(t);
                        return e && e._;
                    } finally {
                        ys = Date;
                    }
                }, n.toString = i.toString, n;
            }, e.multi = e.utc.multi = fe;
            var x = fo.map(), _ = Kt(g), b = Qt(g), w = Kt(m), S = Qt(m), T = Kt(v), E = Qt(v), A = Kt(y), C = Qt(y);
            p.forEach(function(t, e) {
                x.set(t.toLowerCase(), e);
            });
            var P = {
                a: function(t) {
                    return m[t.getDay()];
                },
                A: function(t) {
                    return g[t.getDay()];
                },
                b: function(t) {
                    return y[t.getMonth()];
                },
                B: function(t) {
                    return v[t.getMonth()];
                },
                c: e(d),
                d: function(t, e) {
                    return Wt(t.getDate(), e, 2);
                },
                e: function(t, e) {
                    return Wt(t.getDate(), e, 2);
                },
                H: function(t, e) {
                    return Wt(t.getHours(), e, 2);
                },
                I: function(t, e) {
                    return Wt(t.getHours() % 12 || 12, e, 2);
                },
                j: function(t, e) {
                    return Wt(1 + vs.dayOfYear(t), e, 3);
                },
                L: function(t, e) {
                    return Wt(t.getMilliseconds(), e, 3);
                },
                m: function(t, e) {
                    return Wt(t.getMonth() + 1, e, 2);
                },
                M: function(t, e) {
                    return Wt(t.getMinutes(), e, 2);
                },
                p: function(t) {
                    return p[+(t.getHours() >= 12)];
                },
                S: function(t, e) {
                    return Wt(t.getSeconds(), e, 2);
                },
                U: function(t, e) {
                    return Wt(vs.sundayOfYear(t), e, 2);
                },
                w: function(t) {
                    return t.getDay();
                },
                W: function(t, e) {
                    return Wt(vs.mondayOfYear(t), e, 2);
                },
                x: e(h),
                X: e(f),
                y: function(t, e) {
                    return Wt(t.getFullYear() % 100, e, 2);
                },
                Y: function(t, e) {
                    return Wt(t.getFullYear() % 1e4, e, 4);
                },
                Z: de,
                "%": function() {
                    return "%";
                }
            }, k = {
                a: i,
                A: r,
                b: a,
                B: o,
                c: s,
                d: ae,
                e: ae,
                H: se,
                I: se,
                j: oe,
                L: ue,
                m: re,
                M: ce,
                p: u,
                S: le,
                U: $t,
                w: Jt,
                W: Zt,
                x: c,
                X: l,
                y: ee,
                Y: te,
                Z: ne,
                "%": he
            };
            return e;
        }
        function Wt(t, e, n) {
            var i = t < 0 ? "-" : "", r = (i ? -t : t) + "", a = r.length;
            return i + (a < n ? new Array(n - a + 1).join(e) + r : r);
        }
        function Kt(t) {
            return new RegExp("^(?:" + t.map(fo.requote).join("|") + ")", "i");
        }
        function Qt(t) {
            for (var e = new p(), n = -1, i = t.length; ++n < i; ) e.set(t[n].toLowerCase(), n);
            return e;
        }
        function Jt(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 1));
            return i ? (t.w = +i[0], n + i[0].length) : -1;
        }
        function $t(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n));
            return i ? (t.U = +i[0], n + i[0].length) : -1;
        }
        function Zt(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n));
            return i ? (t.W = +i[0], n + i[0].length) : -1;
        }
        function te(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 4));
            return i ? (t.y = +i[0], n + i[0].length) : -1;
        }
        function ee(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.y = ie(+i[0]), n + i[0].length) : -1;
        }
        function ne(t, e, n) {
            return /^[+-]\d{4}$/.test(e = e.slice(n, n + 5)) ? (t.Z = -e, n + 5) : -1;
        }
        function ie(t) {
            return t + (t > 68 ? 1900 : 2e3);
        }
        function re(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.m = i[0] - 1, n + i[0].length) : -1;
        }
        function ae(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.d = +i[0], n + i[0].length) : -1;
        }
        function oe(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 3));
            return i ? (t.j = +i[0], n + i[0].length) : -1;
        }
        function se(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.H = +i[0], n + i[0].length) : -1;
        }
        function ce(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.M = +i[0], n + i[0].length) : -1;
        }
        function le(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 2));
            return i ? (t.S = +i[0], n + i[0].length) : -1;
        }
        function ue(t, e, n) {
            bs.lastIndex = 0;
            var i = bs.exec(e.slice(n, n + 3));
            return i ? (t.L = +i[0], n + i[0].length) : -1;
        }
        function de(t) {
            var e = t.getTimezoneOffset(), n = e > 0 ? "-" : "+", i = So(e) / 60 | 0, r = So(e) % 60;
            return n + Wt(i, "0", 2) + Wt(r, "0", 2);
        }
        function he(t, e, n) {
            ws.lastIndex = 0;
            var i = ws.exec(e.slice(n, n + 1));
            return i ? n + i[0].length : -1;
        }
        function fe(t) {
            for (var e = t.length, n = -1; ++n < e; ) t[n][0] = this(t[n][0]);
            return function(e) {
                for (var n = 0, i = t[n]; !i[1](e); ) i = t[++n];
                return i[0](e);
            };
        }
        function pe() {}
        function ge(t, e, n) {
            var i = n.s = t + e, r = i - t, a = i - r;
            n.t = t - a + (e - r);
        }
        function me(t, e) {
            t && As.hasOwnProperty(t.type) && As[t.type](t, e);
        }
        function ve(t, e, n) {
            var i, r = -1, a = t.length - n;
            for (e.lineStart(); ++r < a; ) i = t[r], e.point(i[0], i[1], i[2]);
            e.lineEnd();
        }
        function ye(t, e) {
            var n = -1, i = t.length;
            for (e.polygonStart(); ++n < i; ) ve(t[n], e, 1);
            e.polygonEnd();
        }
        function xe() {
            function t(t, e) {
                t *= Yo, e = e * Yo / 2 + Uo / 4;
                var n = t - i, o = n >= 0 ? 1 : -1, s = o * n, c = Math.cos(e), l = Math.sin(e), u = a * l, d = r * c + u * Math.cos(s), h = u * o * Math.sin(s);
                Ps.add(Math.atan2(h, d)), i = t, r = c, a = l;
            }
            var e, n, i, r, a;
            ks.point = function(o, s) {
                ks.point = t, i = (e = o) * Yo, r = Math.cos(s = (n = s) * Yo / 2 + Uo / 4), a = Math.sin(s);
            }, ks.lineEnd = function() {
                t(e, n);
            };
        }
        function _e(t) {
            var e = t[0], n = t[1], i = Math.cos(n);
            return [ i * Math.cos(e), i * Math.sin(e), Math.sin(n) ];
        }
        function be(t, e) {
            return t[0] * e[0] + t[1] * e[1] + t[2] * e[2];
        }
        function we(t, e) {
            return [ t[1] * e[2] - t[2] * e[1], t[2] * e[0] - t[0] * e[2], t[0] * e[1] - t[1] * e[0] ];
        }
        function Se(t, e) {
            t[0] += e[0], t[1] += e[1], t[2] += e[2];
        }
        function Te(t, e) {
            return [ t[0] * e, t[1] * e, t[2] * e ];
        }
        function Ee(t) {
            var e = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
            t[0] /= e, t[1] /= e, t[2] /= e;
        }
        function Ae(t) {
            return [ Math.atan2(t[1], t[0]), ot(t[2]) ];
        }
        function Ce(t, e) {
            return So(t[0] - e[0]) < jo && So(t[1] - e[1]) < jo;
        }
        function Pe(t, e) {
            t *= Yo;
            var n = Math.cos(e *= Yo);
            ke(n * Math.cos(t), n * Math.sin(t), Math.sin(e));
        }
        function ke(t, e, n) {
            ++Ms, Ns += (t - Ns) / Ms, Vs += (e - Vs) / Ms, Ls += (n - Ls) / Ms;
        }
        function Me() {
            function t(t, r) {
                t *= Yo;
                var a = Math.cos(r *= Yo), o = a * Math.cos(t), s = a * Math.sin(t), c = Math.sin(r), l = Math.atan2(Math.sqrt((l = n * c - i * s) * l + (l = i * o - e * c) * l + (l = e * s - n * o) * l), e * o + n * s + i * c);
                Os += l, Rs += l * (e + (e = o)), Is += l * (n + (n = s)), Ds += l * (i + (i = c)), 
                ke(e, n, i);
            }
            var e, n, i;
            Hs.point = function(r, a) {
                r *= Yo;
                var o = Math.cos(a *= Yo);
                e = o * Math.cos(r), n = o * Math.sin(r), i = Math.sin(a), Hs.point = t, ke(e, n, i);
            };
        }
        function Oe() {
            Hs.point = Pe;
        }
        function Ne() {
            function t(t, e) {
                t *= Yo;
                var n = Math.cos(e *= Yo), o = n * Math.cos(t), s = n * Math.sin(t), c = Math.sin(e), l = r * c - a * s, u = a * o - i * c, d = i * s - r * o, h = Math.sqrt(l * l + u * u + d * d), f = i * o + r * s + a * c, p = h && -at(f) / h, g = Math.atan2(h, f);
                Gs += p * l, Fs += p * u, js += p * d, Os += g, Rs += g * (i + (i = o)), Is += g * (r + (r = s)), 
                Ds += g * (a + (a = c)), ke(i, r, a);
            }
            var e, n, i, r, a;
            Hs.point = function(o, s) {
                e = o, n = s, Hs.point = t, o *= Yo;
                var c = Math.cos(s *= Yo);
                i = c * Math.cos(o), r = c * Math.sin(o), a = Math.sin(s), ke(i, r, a);
            }, Hs.lineEnd = function() {
                t(e, n), Hs.lineEnd = Oe, Hs.point = Pe;
            };
        }
        function Ve(t, e) {
            function n(n, i) {
                return n = t(n, i), e(n[0], n[1]);
            }
            return t.invert && e.invert && (n.invert = function(n, i) {
                return n = e.invert(n, i), n && t.invert(n[0], n[1]);
            }), n;
        }
        function Le() {
            return !0;
        }
        function Re(t, e, n, i, r) {
            var a = [], o = [];
            if (t.forEach(function(t) {
                if (!((e = t.length - 1) <= 0)) {
                    var e, n = t[0], i = t[e];
                    if (Ce(n, i)) {
                        r.lineStart();
                        for (var s = 0; s < e; ++s) r.point((n = t[s])[0], n[1]);
                        return void r.lineEnd();
                    }
                    var c = new De(n, t, null, !0), l = new De(n, null, c, !1);
                    c.o = l, a.push(c), o.push(l), c = new De(i, t, null, !1), l = new De(i, null, c, !0), 
                    c.o = l, a.push(c), o.push(l);
                }
            }), o.sort(e), Ie(a), Ie(o), a.length) {
                for (var s = 0, c = n, l = o.length; s < l; ++s) o[s].e = c = !c;
                for (var u, d, h = a[0]; ;) {
                    for (var f = h, p = !0; f.v; ) if ((f = f.n) === h) return;
                    u = f.z, r.lineStart();
                    do {
                        if (f.v = f.o.v = !0, f.e) {
                            if (p) for (var s = 0, l = u.length; s < l; ++s) r.point((d = u[s])[0], d[1]); else i(f.x, f.n.x, 1, r);
                            f = f.n;
                        } else {
                            if (p) {
                                u = f.p.z;
                                for (var s = u.length - 1; s >= 0; --s) r.point((d = u[s])[0], d[1]);
                            } else i(f.x, f.p.x, -1, r);
                            f = f.p;
                        }
                        f = f.o, u = f.z, p = !p;
                    } while (!f.v);
                    r.lineEnd();
                }
            }
        }
        function Ie(t) {
            if (e = t.length) {
                for (var e, n, i = 0, r = t[0]; ++i < e; ) r.n = n = t[i], n.p = r, r = n;
                r.n = n = t[0], n.p = r;
            }
        }
        function De(t, e, n, i) {
            this.x = t, this.z = e, this.o = n, this.e = i, this.v = !1, this.n = this.p = null;
        }
        function Ge(t, e, n, i) {
            return function(r, a) {
                function o(e, n) {
                    var i = r(e, n);
                    t(e = i[0], n = i[1]) && a.point(e, n);
                }
                function s(t, e) {
                    var n = r(t, e);
                    m.point(n[0], n[1]);
                }
                function c() {
                    y.point = s, m.lineStart();
                }
                function l() {
                    y.point = o, m.lineEnd();
                }
                function u(t, e) {
                    g.push([ t, e ]);
                    var n = r(t, e);
                    _.point(n[0], n[1]);
                }
                function d() {
                    _.lineStart(), g = [];
                }
                function h() {
                    u(g[0][0], g[0][1]), _.lineEnd();
                    var t, e = _.clean(), n = x.buffer(), i = n.length;
                    if (g.pop(), p.push(g), g = null, i) if (1 & e) {
                        t = n[0];
                        var r, i = t.length - 1, o = -1;
                        if (i > 0) {
                            for (b || (a.polygonStart(), b = !0), a.lineStart(); ++o < i; ) a.point((r = t[o])[0], r[1]);
                            a.lineEnd();
                        }
                    } else i > 1 && 2 & e && n.push(n.pop().concat(n.shift())), f.push(n.filter(Fe));
                }
                var f, p, g, m = e(a), v = r.invert(i[0], i[1]), y = {
                    point: o,
                    lineStart: c,
                    lineEnd: l,
                    polygonStart: function() {
                        y.point = u, y.lineStart = d, y.lineEnd = h, f = [], p = [];
                    },
                    polygonEnd: function() {
                        y.point = o, y.lineStart = c, y.lineEnd = l, f = fo.merge(f);
                        var t = Xe(v, p);
                        f.length ? (b || (a.polygonStart(), b = !0), Re(f, He, t, n, a)) : t && (b || (a.polygonStart(), 
                        b = !0), a.lineStart(), n(null, null, 1, a), a.lineEnd()), b && (a.polygonEnd(), 
                        b = !1), f = p = null;
                    },
                    sphere: function() {
                        a.polygonStart(), a.lineStart(), n(null, null, 1, a), a.lineEnd(), a.polygonEnd();
                    }
                }, x = je(), _ = e(x), b = !1;
                return y;
            };
        }
        function Fe(t) {
            return t.length > 1;
        }
        function je() {
            var t, e = [];
            return {
                lineStart: function() {
                    e.push(t = []);
                },
                point: function(e, n) {
                    t.push([ e, n ]);
                },
                lineEnd: A,
                buffer: function() {
                    var n = e;
                    return e = [], t = null, n;
                },
                rejoin: function() {
                    e.length > 1 && e.push(e.pop().concat(e.shift()));
                }
            };
        }
        function He(t, e) {
            return ((t = t.x)[0] < 0 ? t[1] - Xo - jo : Xo - t[1]) - ((e = e.x)[0] < 0 ? e[1] - Xo - jo : Xo - e[1]);
        }
        function Ue(t) {
            var e, n = NaN, i = NaN, r = NaN;
            return {
                lineStart: function() {
                    t.lineStart(), e = 1;
                },
                point: function(a, o) {
                    var s = a > 0 ? Uo : -Uo, c = So(a - n);
                    So(c - Uo) < jo ? (t.point(n, i = (i + o) / 2 > 0 ? Xo : -Xo), t.point(r, i), t.lineEnd(), 
                    t.lineStart(), t.point(s, i), t.point(a, i), e = 0) : r !== s && c >= Uo && (So(n - r) < jo && (n -= r * jo), 
                    So(a - s) < jo && (a -= s * jo), i = ze(n, i, a, o), t.point(r, i), t.lineEnd(), 
                    t.lineStart(), t.point(s, i), e = 0), t.point(n = a, i = o), r = s;
                },
                lineEnd: function() {
                    t.lineEnd(), n = i = NaN;
                },
                clean: function() {
                    return 2 - e;
                }
            };
        }
        function ze(t, e, n, i) {
            var r, a, o = Math.sin(t - n);
            return So(o) > jo ? Math.atan((Math.sin(e) * (a = Math.cos(i)) * Math.sin(n) - Math.sin(i) * (r = Math.cos(e)) * Math.sin(t)) / (r * a * o)) : (e + i) / 2;
        }
        function Be(t, e, n, i) {
            var r;
            if (null == t) r = n * Xo, i.point(-Uo, r), i.point(0, r), i.point(Uo, r), i.point(Uo, 0), 
            i.point(Uo, -r), i.point(0, -r), i.point(-Uo, -r), i.point(-Uo, 0), i.point(-Uo, r); else if (So(t[0] - e[0]) > jo) {
                var a = t[0] < e[0] ? Uo : -Uo;
                r = n * a / 2, i.point(-a, r), i.point(0, r), i.point(a, r);
            } else i.point(e[0], e[1]);
        }
        function Xe(t, e) {
            var n = t[0], i = t[1], r = [ Math.sin(n), -Math.cos(n), 0 ], a = 0, o = 0;
            Ps.reset();
            for (var s = 0, c = e.length; s < c; ++s) {
                var l = e[s], u = l.length;
                if (u) for (var d = l[0], h = d[0], f = d[1] / 2 + Uo / 4, p = Math.sin(f), g = Math.cos(f), m = 1; ;) {
                    m === u && (m = 0), t = l[m];
                    var v = t[0], y = t[1] / 2 + Uo / 4, x = Math.sin(y), _ = Math.cos(y), b = v - h, w = b >= 0 ? 1 : -1, S = w * b, T = S > Uo, E = p * x;
                    if (Ps.add(Math.atan2(E * w * Math.sin(S), g * _ + E * Math.cos(S))), a += T ? b + w * zo : b, 
                    T ^ h >= n ^ v >= n) {
                        var A = we(_e(d), _e(t));
                        Ee(A);
                        var C = we(r, A);
                        Ee(C);
                        var P = (T ^ b >= 0 ? -1 : 1) * ot(C[2]);
                        (i > P || i === P && (A[0] || A[1])) && (o += T ^ b >= 0 ? 1 : -1);
                    }
                    if (!m++) break;
                    h = v, p = x, g = _, d = t;
                }
            }
            return (a < -jo || a < jo && Ps < -jo) ^ 1 & o;
        }
        function Ye(t) {
            function e(t, e) {
                return Math.cos(t) * Math.cos(e) > a;
            }
            function n(t) {
                var n, a, c, l, u;
                return {
                    lineStart: function() {
                        l = c = !1, u = 1;
                    },
                    point: function(d, h) {
                        var f, p = [ d, h ], g = e(d, h), m = o ? g ? 0 : r(d, h) : g ? r(d + (d < 0 ? Uo : -Uo), h) : 0;
                        if (!n && (l = c = g) && t.lineStart(), g !== c && (f = i(n, p), (Ce(n, f) || Ce(p, f)) && (p[0] += jo, 
                        p[1] += jo, g = e(p[0], p[1]))), g !== c) u = 0, g ? (t.lineStart(), f = i(p, n), 
                        t.point(f[0], f[1])) : (f = i(n, p), t.point(f[0], f[1]), t.lineEnd()), n = f; else if (s && n && o ^ g) {
                            var v;
                            m & a || !(v = i(p, n, !0)) || (u = 0, o ? (t.lineStart(), t.point(v[0][0], v[0][1]), 
                            t.point(v[1][0], v[1][1]), t.lineEnd()) : (t.point(v[1][0], v[1][1]), t.lineEnd(), 
                            t.lineStart(), t.point(v[0][0], v[0][1])));
                        }
                        !g || n && Ce(n, p) || t.point(p[0], p[1]), n = p, c = g, a = m;
                    },
                    lineEnd: function() {
                        c && t.lineEnd(), n = null;
                    },
                    clean: function() {
                        return u | (l && c) << 1;
                    }
                };
            }
            function i(t, e, n) {
                var i = _e(t), r = _e(e), o = [ 1, 0, 0 ], s = we(i, r), c = be(s, s), l = s[0], u = c - l * l;
                if (!u) return !n && t;
                var d = a * c / u, h = -a * l / u, f = we(o, s), p = Te(o, d), g = Te(s, h);
                Se(p, g);
                var m = f, v = be(p, m), y = be(m, m), x = v * v - y * (be(p, p) - 1);
                if (!(x < 0)) {
                    var _ = Math.sqrt(x), b = Te(m, (-v - _) / y);
                    if (Se(b, p), b = Ae(b), !n) return b;
                    var w, S = t[0], T = e[0], E = t[1], A = e[1];
                    T < S && (w = S, S = T, T = w);
                    var C = T - S, P = So(C - Uo) < jo, k = P || C < jo;
                    if (!P && A < E && (w = E, E = A, A = w), k ? P ? E + A > 0 ^ b[1] < (So(b[0] - S) < jo ? E : A) : E <= b[1] && b[1] <= A : C > Uo ^ (S <= b[0] && b[0] <= T)) {
                        var M = Te(m, (-v + _) / y);
                        return Se(M, p), [ b, Ae(M) ];
                    }
                }
            }
            function r(e, n) {
                var i = o ? t : Uo - t, r = 0;
                return e < -i ? r |= 1 : e > i && (r |= 2), n < -i ? r |= 4 : n > i && (r |= 8), 
                r;
            }
            var a = Math.cos(t), o = a > 0, s = So(a) > jo, c = _n(t, 6 * Yo);
            return Ge(e, n, c, o ? [ 0, -t ] : [ -Uo, t - Uo ]);
        }
        function qe(t, e, n, i) {
            return function(r) {
                var a, o = r.a, s = r.b, c = o.x, l = o.y, u = s.x, d = s.y, h = 0, f = 1, p = u - c, g = d - l;
                if (a = t - c, p || !(a > 0)) {
                    if (a /= p, p < 0) {
                        if (a < h) return;
                        a < f && (f = a);
                    } else if (p > 0) {
                        if (a > f) return;
                        a > h && (h = a);
                    }
                    if (a = n - c, p || !(a < 0)) {
                        if (a /= p, p < 0) {
                            if (a > f) return;
                            a > h && (h = a);
                        } else if (p > 0) {
                            if (a < h) return;
                            a < f && (f = a);
                        }
                        if (a = e - l, g || !(a > 0)) {
                            if (a /= g, g < 0) {
                                if (a < h) return;
                                a < f && (f = a);
                            } else if (g > 0) {
                                if (a > f) return;
                                a > h && (h = a);
                            }
                            if (a = i - l, g || !(a < 0)) {
                                if (a /= g, g < 0) {
                                    if (a > f) return;
                                    a > h && (h = a);
                                } else if (g > 0) {
                                    if (a < h) return;
                                    a < f && (f = a);
                                }
                                return h > 0 && (r.a = {
                                    x: c + h * p,
                                    y: l + h * g
                                }), f < 1 && (r.b = {
                                    x: c + f * p,
                                    y: l + f * g
                                }), r;
                            }
                        }
                    }
                }
            };
        }
        function We(t, e, n, i) {
            function r(i, r) {
                return So(i[0] - t) < jo ? r > 0 ? 0 : 3 : So(i[0] - n) < jo ? r > 0 ? 2 : 1 : So(i[1] - e) < jo ? r > 0 ? 1 : 0 : r > 0 ? 3 : 2;
            }
            function a(t, e) {
                return o(t.x, e.x);
            }
            function o(t, e) {
                var n = r(t, 1), i = r(e, 1);
                return n !== i ? n - i : 0 === n ? e[1] - t[1] : 1 === n ? t[0] - e[0] : 2 === n ? t[1] - e[1] : e[0] - t[0];
            }
            return function(s) {
                function c(t) {
                    for (var e = 0, n = m.length, i = t[1], r = 0; r < n; ++r) for (var a, o = 1, s = m[r], c = s.length, l = s[0]; o < c; ++o) a = s[o], 
                    l[1] <= i ? a[1] > i && rt(l, a, t) > 0 && ++e : a[1] <= i && rt(l, a, t) < 0 && --e, 
                    l = a;
                    return 0 !== e;
                }
                function l(a, s, c, l) {
                    var u = 0, d = 0;
                    if (null == a || (u = r(a, c)) !== (d = r(s, c)) || o(a, s) < 0 ^ c > 0) {
                        do l.point(0 === u || 3 === u ? t : n, u > 1 ? i : e); while ((u = (u + c + 4) % 4) !== d);
                    } else l.point(s[0], s[1]);
                }
                function u(r, a) {
                    return t <= r && r <= n && e <= a && a <= i;
                }
                function d(t, e) {
                    u(t, e) && s.point(t, e);
                }
                function h() {
                    k.point = p, m && m.push(v = []), T = !0, S = !1, b = w = NaN;
                }
                function f() {
                    g && (p(y, x), _ && S && C.rejoin(), g.push(C.buffer())), k.point = d, S && s.lineEnd();
                }
                function p(t, e) {
                    t = Math.max(-zs, Math.min(zs, t)), e = Math.max(-zs, Math.min(zs, e));
                    var n = u(t, e);
                    if (m && v.push([ t, e ]), T) y = t, x = e, _ = n, T = !1, n && (s.lineStart(), 
                    s.point(t, e)); else if (n && S) s.point(t, e); else {
                        var i = {
                            a: {
                                x: b,
                                y: w
                            },
                            b: {
                                x: t,
                                y: e
                            }
                        };
                        P(i) ? (S || (s.lineStart(), s.point(i.a.x, i.a.y)), s.point(i.b.x, i.b.y), n || s.lineEnd(), 
                        E = !1) : n && (s.lineStart(), s.point(t, e), E = !1);
                    }
                    b = t, w = e, S = n;
                }
                var g, m, v, y, x, _, b, w, S, T, E, A = s, C = je(), P = qe(t, e, n, i), k = {
                    point: d,
                    lineStart: h,
                    lineEnd: f,
                    polygonStart: function() {
                        s = C, g = [], m = [], E = !0;
                    },
                    polygonEnd: function() {
                        s = A, g = fo.merge(g);
                        var e = c([ t, i ]), n = E && e, r = g.length;
                        (n || r) && (s.polygonStart(), n && (s.lineStart(), l(null, null, 1, s), s.lineEnd()), 
                        r && Re(g, a, e, l, s), s.polygonEnd()), g = m = v = null;
                    }
                };
                return k;
            };
        }
        function Ke(t) {
            var e = 0, n = Uo / 3, i = hn(t), r = i(e, n);
            return r.parallels = function(t) {
                return arguments.length ? i(e = t[0] * Uo / 180, n = t[1] * Uo / 180) : [ e / Uo * 180, n / Uo * 180 ];
            }, r;
        }
        function Qe(t, e) {
            function n(t, e) {
                var n = Math.sqrt(a - 2 * r * Math.sin(e)) / r;
                return [ n * Math.sin(t *= r), o - n * Math.cos(t) ];
            }
            var i = Math.sin(t), r = (i + Math.sin(e)) / 2, a = 1 + i * (2 * r - i), o = Math.sqrt(a) / r;
            return n.invert = function(t, e) {
                var n = o - e;
                return [ Math.atan2(t, n) / r, ot((a - (t * t + n * n) * r * r) / (2 * r)) ];
            }, n;
        }
        function Je() {
            function t(t, e) {
                Xs += r * t - i * e, i = t, r = e;
            }
            var e, n, i, r;
            Qs.point = function(a, o) {
                Qs.point = t, e = i = a, n = r = o;
            }, Qs.lineEnd = function() {
                t(e, n);
            };
        }
        function $e(t, e) {
            t < Ys && (Ys = t), t > Ws && (Ws = t), e < qs && (qs = e), e > Ks && (Ks = e);
        }
        function Ze() {
            function t(t, e) {
                o.push("M", t, ",", e, a);
            }
            function e(t, e) {
                o.push("M", t, ",", e), s.point = n;
            }
            function n(t, e) {
                o.push("L", t, ",", e);
            }
            function i() {
                s.point = t;
            }
            function r() {
                o.push("Z");
            }
            var a = tn(4.5), o = [], s = {
                point: t,
                lineStart: function() {
                    s.point = e;
                },
                lineEnd: i,
                polygonStart: function() {
                    s.lineEnd = r;
                },
                polygonEnd: function() {
                    s.lineEnd = i, s.point = t;
                },
                pointRadius: function(t) {
                    return a = tn(t), s;
                },
                result: function() {
                    if (o.length) {
                        var t = o.join("");
                        return o = [], t;
                    }
                }
            };
            return s;
        }
        function tn(t) {
            return "m0," + t + "a" + t + "," + t + " 0 1,1 0," + -2 * t + "a" + t + "," + t + " 0 1,1 0," + 2 * t + "z";
        }
        function en(t, e) {
            Ns += t, Vs += e, ++Ls;
        }
        function nn() {
            function t(t, i) {
                var r = t - e, a = i - n, o = Math.sqrt(r * r + a * a);
                Rs += o * (e + t) / 2, Is += o * (n + i) / 2, Ds += o, en(e = t, n = i);
            }
            var e, n;
            $s.point = function(i, r) {
                $s.point = t, en(e = i, n = r);
            };
        }
        function rn() {
            $s.point = en;
        }
        function an() {
            function t(t, e) {
                var n = t - i, a = e - r, o = Math.sqrt(n * n + a * a);
                Rs += o * (i + t) / 2, Is += o * (r + e) / 2, Ds += o, o = r * t - i * e, Gs += o * (i + t), 
                Fs += o * (r + e), js += 3 * o, en(i = t, r = e);
            }
            var e, n, i, r;
            $s.point = function(a, o) {
                $s.point = t, en(e = i = a, n = r = o);
            }, $s.lineEnd = function() {
                t(e, n);
            };
        }
        function on(t) {
            function e(e, n) {
                t.moveTo(e + o, n), t.arc(e, n, o, 0, zo);
            }
            function n(e, n) {
                t.moveTo(e, n), s.point = i;
            }
            function i(e, n) {
                t.lineTo(e, n);
            }
            function r() {
                s.point = e;
            }
            function a() {
                t.closePath();
            }
            var o = 4.5, s = {
                point: e,
                lineStart: function() {
                    s.point = n;
                },
                lineEnd: r,
                polygonStart: function() {
                    s.lineEnd = a;
                },
                polygonEnd: function() {
                    s.lineEnd = r, s.point = e;
                },
                pointRadius: function(t) {
                    return o = t, s;
                },
                result: A
            };
            return s;
        }
        function sn(t) {
            function e(t) {
                return (s ? i : n)(t);
            }
            function n(e) {
                return un(e, function(n, i) {
                    n = t(n, i), e.point(n[0], n[1]);
                });
            }
            function i(e) {
                function n(n, i) {
                    n = t(n, i), e.point(n[0], n[1]);
                }
                function i() {
                    x = NaN, T.point = a, e.lineStart();
                }
                function a(n, i) {
                    var a = _e([ n, i ]), o = t(n, i);
                    r(x, _, y, b, w, S, x = o[0], _ = o[1], y = n, b = a[0], w = a[1], S = a[2], s, e), 
                    e.point(x, _);
                }
                function o() {
                    T.point = n, e.lineEnd();
                }
                function c() {
                    i(), T.point = l, T.lineEnd = u;
                }
                function l(t, e) {
                    a(d = t, h = e), f = x, p = _, g = b, m = w, v = S, T.point = a;
                }
                function u() {
                    r(x, _, y, b, w, S, f, p, d, g, m, v, s, e), T.lineEnd = o, o();
                }
                var d, h, f, p, g, m, v, y, x, _, b, w, S, T = {
                    point: n,
                    lineStart: i,
                    lineEnd: o,
                    polygonStart: function() {
                        e.polygonStart(), T.lineStart = c;
                    },
                    polygonEnd: function() {
                        e.polygonEnd(), T.lineStart = i;
                    }
                };
                return T;
            }
            function r(e, n, i, s, c, l, u, d, h, f, p, g, m, v) {
                var y = u - e, x = d - n, _ = y * y + x * x;
                if (_ > 4 * a && m--) {
                    var b = s + f, w = c + p, S = l + g, T = Math.sqrt(b * b + w * w + S * S), E = Math.asin(S /= T), A = So(So(S) - 1) < jo || So(i - h) < jo ? (i + h) / 2 : Math.atan2(w, b), C = t(A, E), P = C[0], k = C[1], M = P - e, O = k - n, N = x * M - y * O;
                    (N * N / _ > a || So((y * M + x * O) / _ - .5) > .3 || s * f + c * p + l * g < o) && (r(e, n, i, s, c, l, P, k, A, b /= T, w /= T, S, m, v), 
                    v.point(P, k), r(P, k, A, b, w, S, u, d, h, f, p, g, m, v));
                }
            }
            var a = .5, o = Math.cos(30 * Yo), s = 16;
            return e.precision = function(t) {
                return arguments.length ? (s = (a = t * t) > 0 && 16, e) : Math.sqrt(a);
            }, e;
        }
        function cn(t) {
            var e = sn(function(e, n) {
                return t([ e * qo, n * qo ]);
            });
            return function(t) {
                return fn(e(t));
            };
        }
        function ln(t) {
            this.stream = t;
        }
        function un(t, e) {
            return {
                point: e,
                sphere: function() {
                    t.sphere();
                },
                lineStart: function() {
                    t.lineStart();
                },
                lineEnd: function() {
                    t.lineEnd();
                },
                polygonStart: function() {
                    t.polygonStart();
                },
                polygonEnd: function() {
                    t.polygonEnd();
                }
            };
        }
        function dn(t) {
            return hn(function() {
                return t;
            })();
        }
        function hn(t) {
            function e(t) {
                return t = s(t[0] * Yo, t[1] * Yo), [ t[0] * h + c, l - t[1] * h ];
            }
            function n(t) {
                return t = s.invert((t[0] - c) / h, (l - t[1]) / h), t && [ t[0] * qo, t[1] * qo ];
            }
            function i() {
                s = Ve(o = mn(v, y, x), a);
                var t = a(g, m);
                return c = f - t[0] * h, l = p + t[1] * h, r();
            }
            function r() {
                return u && (u.valid = !1, u = null), e;
            }
            var a, o, s, c, l, u, d = sn(function(t, e) {
                return t = a(t, e), [ t[0] * h + c, l - t[1] * h ];
            }), h = 150, f = 480, p = 250, g = 0, m = 0, v = 0, y = 0, x = 0, _ = Us, b = S, w = null, T = null;
            return e.stream = function(t) {
                return u && (u.valid = !1), u = fn(_(o, d(b(t)))), u.valid = !0, u;
            }, e.clipAngle = function(t) {
                return arguments.length ? (_ = null == t ? (w = t, Us) : Ye((w = +t) * Yo), r()) : w;
            }, e.clipExtent = function(t) {
                return arguments.length ? (T = t, b = t ? We(t[0][0], t[0][1], t[1][0], t[1][1]) : S, 
                r()) : T;
            }, e.scale = function(t) {
                return arguments.length ? (h = +t, i()) : h;
            }, e.translate = function(t) {
                return arguments.length ? (f = +t[0], p = +t[1], i()) : [ f, p ];
            }, e.center = function(t) {
                return arguments.length ? (g = t[0] % 360 * Yo, m = t[1] % 360 * Yo, i()) : [ g * qo, m * qo ];
            }, e.rotate = function(t) {
                return arguments.length ? (v = t[0] % 360 * Yo, y = t[1] % 360 * Yo, x = t.length > 2 ? t[2] % 360 * Yo : 0, 
                i()) : [ v * qo, y * qo, x * qo ];
            }, fo.rebind(e, d, "precision"), function() {
                return a = t.apply(this, arguments), e.invert = a.invert && n, i();
            };
        }
        function fn(t) {
            return un(t, function(e, n) {
                t.point(e * Yo, n * Yo);
            });
        }
        function pn(t, e) {
            return [ t, e ];
        }
        function gn(t, e) {
            return [ t > Uo ? t - zo : t < -Uo ? t + zo : t, e ];
        }
        function mn(t, e, n) {
            return t ? e || n ? Ve(yn(t), xn(e, n)) : yn(t) : e || n ? xn(e, n) : gn;
        }
        function vn(t) {
            return function(e, n) {
                return e += t, [ e > Uo ? e - zo : e < -Uo ? e + zo : e, n ];
            };
        }
        function yn(t) {
            var e = vn(t);
            return e.invert = vn(-t), e;
        }
        function xn(t, e) {
            function n(t, e) {
                var n = Math.cos(e), s = Math.cos(t) * n, c = Math.sin(t) * n, l = Math.sin(e), u = l * i + s * r;
                return [ Math.atan2(c * a - u * o, s * i - l * r), ot(u * a + c * o) ];
            }
            var i = Math.cos(t), r = Math.sin(t), a = Math.cos(e), o = Math.sin(e);
            return n.invert = function(t, e) {
                var n = Math.cos(e), s = Math.cos(t) * n, c = Math.sin(t) * n, l = Math.sin(e), u = l * a - c * o;
                return [ Math.atan2(c * a + l * o, s * i + u * r), ot(u * i - s * r) ];
            }, n;
        }
        function _n(t, e) {
            var n = Math.cos(t), i = Math.sin(t);
            return function(r, a, o, s) {
                var c = o * e;
                null != r ? (r = bn(n, r), a = bn(n, a), (o > 0 ? r < a : r > a) && (r += o * zo)) : (r = t + o * zo, 
                a = t - .5 * c);
                for (var l, u = r; o > 0 ? u > a : u < a; u -= c) s.point((l = Ae([ n, -i * Math.cos(u), -i * Math.sin(u) ]))[0], l[1]);
            };
        }
        function bn(t, e) {
            var n = _e(e);
            n[0] -= t, Ee(n);
            var i = at(-n[1]);
            return ((-n[2] < 0 ? -i : i) + 2 * Math.PI - jo) % (2 * Math.PI);
        }
        function wn(t, e, n) {
            var i = fo.range(t, e - jo, n).concat(e);
            return function(t) {
                return i.map(function(e) {
                    return [ t, e ];
                });
            };
        }
        function Sn(t, e, n) {
            var i = fo.range(t, e - jo, n).concat(e);
            return function(t) {
                return i.map(function(e) {
                    return [ e, t ];
                });
            };
        }
        function Tn(t) {
            return t.source;
        }
        function En(t) {
            return t.target;
        }
        function An(t, e, n, i) {
            var r = Math.cos(e), a = Math.sin(e), o = Math.cos(i), s = Math.sin(i), c = r * Math.cos(t), l = r * Math.sin(t), u = o * Math.cos(n), d = o * Math.sin(n), h = 2 * Math.asin(Math.sqrt(ut(i - e) + r * o * ut(n - t))), f = 1 / Math.sin(h), p = h ? function(t) {
                var e = Math.sin(t *= h) * f, n = Math.sin(h - t) * f, i = n * c + e * u, r = n * l + e * d, o = n * a + e * s;
                return [ Math.atan2(r, i) * qo, Math.atan2(o, Math.sqrt(i * i + r * r)) * qo ];
            } : function() {
                return [ t * qo, e * qo ];
            };
            return p.distance = h, p;
        }
        function Cn() {
            function t(t, r) {
                var a = Math.sin(r *= Yo), o = Math.cos(r), s = So((t *= Yo) - e), c = Math.cos(s);
                Zs += Math.atan2(Math.sqrt((s = o * Math.sin(s)) * s + (s = i * a - n * o * c) * s), n * a + i * o * c), 
                e = t, n = a, i = o;
            }
            var e, n, i;
            tc.point = function(r, a) {
                e = r * Yo, n = Math.sin(a *= Yo), i = Math.cos(a), tc.point = t;
            }, tc.lineEnd = function() {
                tc.point = tc.lineEnd = A;
            };
        }
        function Pn(t, e) {
            function n(e, n) {
                var i = Math.cos(e), r = Math.cos(n), a = t(i * r);
                return [ a * r * Math.sin(e), a * Math.sin(n) ];
            }
            return n.invert = function(t, n) {
                var i = Math.sqrt(t * t + n * n), r = e(i), a = Math.sin(r), o = Math.cos(r);
                return [ Math.atan2(t * a, i * o), Math.asin(i && n * a / i) ];
            }, n;
        }
        function kn(t, e) {
            function n(t, e) {
                o > 0 ? e < -Xo + jo && (e = -Xo + jo) : e > Xo - jo && (e = Xo - jo);
                var n = o / Math.pow(r(e), a);
                return [ n * Math.sin(a * t), o - n * Math.cos(a * t) ];
            }
            var i = Math.cos(t), r = function(t) {
                return Math.tan(Uo / 4 + t / 2);
            }, a = t === e ? Math.sin(t) : Math.log(i / Math.cos(e)) / Math.log(r(e) / r(t)), o = i * Math.pow(r(t), a) / a;
            return a ? (n.invert = function(t, e) {
                var n = o - e, i = it(a) * Math.sqrt(t * t + n * n);
                return [ Math.atan2(t, n) / a, 2 * Math.atan(Math.pow(o / i, 1 / a)) - Xo ];
            }, n) : On;
        }
        function Mn(t, e) {
            function n(t, e) {
                var n = a - e;
                return [ n * Math.sin(r * t), a - n * Math.cos(r * t) ];
            }
            var i = Math.cos(t), r = t === e ? Math.sin(t) : (i - Math.cos(e)) / (e - t), a = i / r + t;
            return So(r) < jo ? pn : (n.invert = function(t, e) {
                var n = a - e;
                return [ Math.atan2(t, n) / r, a - it(r) * Math.sqrt(t * t + n * n) ];
            }, n);
        }
        function On(t, e) {
            return [ t, Math.log(Math.tan(Uo / 4 + e / 2)) ];
        }
        function Nn(t) {
            var e, n = dn(t), i = n.scale, r = n.translate, a = n.clipExtent;
            return n.scale = function() {
                var t = i.apply(n, arguments);
                return t === n ? e ? n.clipExtent(null) : n : t;
            }, n.translate = function() {
                var t = r.apply(n, arguments);
                return t === n ? e ? n.clipExtent(null) : n : t;
            }, n.clipExtent = function(t) {
                var o = a.apply(n, arguments);
                if (o === n) {
                    if (e = null == t) {
                        var s = Uo * i(), c = r();
                        a([ [ c[0] - s, c[1] - s ], [ c[0] + s, c[1] + s ] ]);
                    }
                } else e && (o = null);
                return o;
            }, n.clipExtent(null);
        }
        function Vn(t, e) {
            return [ Math.log(Math.tan(Uo / 4 + e / 2)), -t ];
        }
        function Ln(t) {
            return t[0];
        }
        function Rn(t) {
            return t[1];
        }
        function In(t) {
            for (var e = t.length, n = [ 0, 1 ], i = 2, r = 2; r < e; r++) {
                for (;i > 1 && rt(t[n[i - 2]], t[n[i - 1]], t[r]) <= 0; ) --i;
                n[i++] = r;
            }
            return n.slice(0, i);
        }
        function Dn(t, e) {
            return t[0] - e[0] || t[1] - e[1];
        }
        function Gn(t, e, n) {
            return (n[0] - e[0]) * (t[1] - e[1]) < (n[1] - e[1]) * (t[0] - e[0]);
        }
        function Fn(t, e, n, i) {
            var r = t[0], a = n[0], o = e[0] - r, s = i[0] - a, c = t[1], l = n[1], u = e[1] - c, d = i[1] - l, h = (s * (c - l) - d * (r - a)) / (d * o - s * u);
            return [ r + h * o, c + h * u ];
        }
        function jn(t) {
            var e = t[0], n = t[t.length - 1];
            return !(e[0] - n[0] || e[1] - n[1]);
        }
        function Hn() {
            ci(this), this.edge = this.site = this.circle = null;
        }
        function Un(t) {
            var e = hc.pop() || new Hn();
            return e.site = t, e;
        }
        function zn(t) {
            Zn(t), lc.remove(t), hc.push(t), ci(t);
        }
        function Bn(t) {
            var e = t.circle, n = e.x, i = e.cy, r = {
                x: n,
                y: i
            }, a = t.P, o = t.N, s = [ t ];
            zn(t);
            for (var c = a; c.circle && So(n - c.circle.x) < jo && So(i - c.circle.cy) < jo; ) a = c.P, 
            s.unshift(c), zn(c), c = a;
            s.unshift(c), Zn(c);
            for (var l = o; l.circle && So(n - l.circle.x) < jo && So(i - l.circle.cy) < jo; ) o = l.N, 
            s.push(l), zn(l), l = o;
            s.push(l), Zn(l);
            var u, d = s.length;
            for (u = 1; u < d; ++u) l = s[u], c = s[u - 1], ai(l.edge, c.site, l.site, r);
            c = s[0], l = s[d - 1], l.edge = ii(c.site, l.site, null, r), $n(c), $n(l);
        }
        function Xn(t) {
            for (var e, n, i, r, a = t.x, o = t.y, s = lc._; s; ) if (i = Yn(s, o) - a, i > jo) s = s.L; else {
                if (r = a - qn(s, o), !(r > jo)) {
                    i > -jo ? (e = s.P, n = s) : r > -jo ? (e = s, n = s.N) : e = n = s;
                    break;
                }
                if (!s.R) {
                    e = s;
                    break;
                }
                s = s.R;
            }
            var c = Un(t);
            if (lc.insert(e, c), e || n) {
                if (e === n) return Zn(e), n = Un(e.site), lc.insert(c, n), c.edge = n.edge = ii(e.site, c.site), 
                $n(e), void $n(n);
                if (!n) return void (c.edge = ii(e.site, c.site));
                Zn(e), Zn(n);
                var l = e.site, u = l.x, d = l.y, h = t.x - u, f = t.y - d, p = n.site, g = p.x - u, m = p.y - d, v = 2 * (h * m - f * g), y = h * h + f * f, x = g * g + m * m, _ = {
                    x: (m * y - f * x) / v + u,
                    y: (h * x - g * y) / v + d
                };
                ai(n.edge, l, p, _), c.edge = ii(l, t, null, _), n.edge = ii(t, p, null, _), $n(e), 
                $n(n);
            }
        }
        function Yn(t, e) {
            var n = t.site, i = n.x, r = n.y, a = r - e;
            if (!a) return i;
            var o = t.P;
            if (!o) return -(1 / 0);
            n = o.site;
            var s = n.x, c = n.y, l = c - e;
            if (!l) return s;
            var u = s - i, d = 1 / a - 1 / l, h = u / l;
            return d ? (-h + Math.sqrt(h * h - 2 * d * (u * u / (-2 * l) - c + l / 2 + r - a / 2))) / d + i : (i + s) / 2;
        }
        function qn(t, e) {
            var n = t.N;
            if (n) return Yn(n, e);
            var i = t.site;
            return i.y === e ? i.x : 1 / 0;
        }
        function Wn(t) {
            this.site = t, this.edges = [];
        }
        function Kn(t) {
            for (var e, n, i, r, a, o, s, c, l, u, d = t[0][0], h = t[1][0], f = t[0][1], p = t[1][1], g = cc, m = g.length; m--; ) if (a = g[m], 
            a && a.prepare()) for (s = a.edges, c = s.length, o = 0; o < c; ) u = s[o].end(), 
            i = u.x, r = u.y, l = s[++o % c].start(), e = l.x, n = l.y, (So(i - e) > jo || So(r - n) > jo) && (s.splice(o, 0, new oi(ri(a.site, u, So(i - d) < jo && p - r > jo ? {
                x: d,
                y: So(e - d) < jo ? n : p
            } : So(r - p) < jo && h - i > jo ? {
                x: So(n - p) < jo ? e : h,
                y: p
            } : So(i - h) < jo && r - f > jo ? {
                x: h,
                y: So(e - h) < jo ? n : f
            } : So(r - f) < jo && i - d > jo ? {
                x: So(n - f) < jo ? e : d,
                y: f
            } : null), a.site, null)), ++c);
        }
        function Qn(t, e) {
            return e.angle - t.angle;
        }
        function Jn() {
            ci(this), this.x = this.y = this.arc = this.site = this.cy = null;
        }
        function $n(t) {
            var e = t.P, n = t.N;
            if (e && n) {
                var i = e.site, r = t.site, a = n.site;
                if (i !== a) {
                    var o = r.x, s = r.y, c = i.x - o, l = i.y - s, u = a.x - o, d = a.y - s, h = 2 * (c * d - l * u);
                    if (!(h >= -Ho)) {
                        var f = c * c + l * l, p = u * u + d * d, g = (d * f - l * p) / h, m = (c * p - u * f) / h, d = m + s, v = fc.pop() || new Jn();
                        v.arc = t, v.site = r, v.x = g + o, v.y = d + Math.sqrt(g * g + m * m), v.cy = d, 
                        t.circle = v;
                        for (var y = null, x = dc._; x; ) if (v.y < x.y || v.y === x.y && v.x <= x.x) {
                            if (!x.L) {
                                y = x.P;
                                break;
                            }
                            x = x.L;
                        } else {
                            if (!x.R) {
                                y = x;
                                break;
                            }
                            x = x.R;
                        }
                        dc.insert(y, v), y || (uc = v);
                    }
                }
            }
        }
        function Zn(t) {
            var e = t.circle;
            e && (e.P || (uc = e.N), dc.remove(e), fc.push(e), ci(e), t.circle = null);
        }
        function ti(t) {
            for (var e, n = sc, i = qe(t[0][0], t[0][1], t[1][0], t[1][1]), r = n.length; r--; ) e = n[r], 
            (!ei(e, t) || !i(e) || So(e.a.x - e.b.x) < jo && So(e.a.y - e.b.y) < jo) && (e.a = e.b = null, 
            n.splice(r, 1));
        }
        function ei(t, e) {
            var n = t.b;
            if (n) return !0;
            var i, r, a = t.a, o = e[0][0], s = e[1][0], c = e[0][1], l = e[1][1], u = t.l, d = t.r, h = u.x, f = u.y, p = d.x, g = d.y, m = (h + p) / 2, v = (f + g) / 2;
            if (g === f) {
                if (m < o || m >= s) return;
                if (h > p) {
                    if (a) {
                        if (a.y >= l) return;
                    } else a = {
                        x: m,
                        y: c
                    };
                    n = {
                        x: m,
                        y: l
                    };
                } else {
                    if (a) {
                        if (a.y < c) return;
                    } else a = {
                        x: m,
                        y: l
                    };
                    n = {
                        x: m,
                        y: c
                    };
                }
            } else if (i = (h - p) / (g - f), r = v - i * m, i < -1 || i > 1) if (h > p) {
                if (a) {
                    if (a.y >= l) return;
                } else a = {
                    x: (c - r) / i,
                    y: c
                };
                n = {
                    x: (l - r) / i,
                    y: l
                };
            } else {
                if (a) {
                    if (a.y < c) return;
                } else a = {
                    x: (l - r) / i,
                    y: l
                };
                n = {
                    x: (c - r) / i,
                    y: c
                };
            } else if (f < g) {
                if (a) {
                    if (a.x >= s) return;
                } else a = {
                    x: o,
                    y: i * o + r
                };
                n = {
                    x: s,
                    y: i * s + r
                };
            } else {
                if (a) {
                    if (a.x < o) return;
                } else a = {
                    x: s,
                    y: i * s + r
                };
                n = {
                    x: o,
                    y: i * o + r
                };
            }
            return t.a = a, t.b = n, !0;
        }
        function ni(t, e) {
            this.l = t, this.r = e, this.a = this.b = null;
        }
        function ii(t, e, n, i) {
            var r = new ni(t, e);
            return sc.push(r), n && ai(r, t, e, n), i && ai(r, e, t, i), cc[t.i].edges.push(new oi(r, t, e)), 
            cc[e.i].edges.push(new oi(r, e, t)), r;
        }
        function ri(t, e, n) {
            var i = new ni(t, null);
            return i.a = e, i.b = n, sc.push(i), i;
        }
        function ai(t, e, n, i) {
            t.a || t.b ? t.l === n ? t.b = i : t.a = i : (t.a = i, t.l = e, t.r = n);
        }
        function oi(t, e, n) {
            var i = t.a, r = t.b;
            this.edge = t, this.site = e, this.angle = n ? Math.atan2(n.y - e.y, n.x - e.x) : t.l === e ? Math.atan2(r.x - i.x, i.y - r.y) : Math.atan2(i.x - r.x, r.y - i.y);
        }
        function si() {
            this._ = null;
        }
        function ci(t) {
            t.U = t.C = t.L = t.R = t.P = t.N = null;
        }
        function li(t, e) {
            var n = e, i = e.R, r = n.U;
            r ? r.L === n ? r.L = i : r.R = i : t._ = i, i.U = r, n.U = i, n.R = i.L, n.R && (n.R.U = n), 
            i.L = n;
        }
        function ui(t, e) {
            var n = e, i = e.L, r = n.U;
            r ? r.L === n ? r.L = i : r.R = i : t._ = i, i.U = r, n.U = i, n.L = i.R, n.L && (n.L.U = n), 
            i.R = n;
        }
        function di(t) {
            for (;t.L; ) t = t.L;
            return t;
        }
        function hi(t, e) {
            var n, i, r, a = t.sort(fi).pop();
            for (sc = [], cc = new Array(t.length), lc = new si(), dc = new si(); ;) if (r = uc, 
            a && (!r || a.y < r.y || a.y === r.y && a.x < r.x)) a.x === n && a.y === i || (cc[a.i] = new Wn(a), 
            Xn(a), n = a.x, i = a.y), a = t.pop(); else {
                if (!r) break;
                Bn(r.arc);
            }
            e && (ti(e), Kn(e));
            var o = {
                cells: cc,
                edges: sc
            };
            return lc = dc = sc = cc = null, o;
        }
        function fi(t, e) {
            return e.y - t.y || e.x - t.x;
        }
        function pi(t, e, n) {
            return (t.x - n.x) * (e.y - t.y) - (t.x - e.x) * (n.y - t.y);
        }
        function gi(t) {
            return t.x;
        }
        function mi(t) {
            return t.y;
        }
        function vi() {
            return {
                leaf: !0,
                nodes: [],
                point: null,
                x: null,
                y: null
            };
        }
        function yi(t, e, n, i, r, a) {
            if (!t(e, n, i, r, a)) {
                var o = .5 * (n + r), s = .5 * (i + a), c = e.nodes;
                c[0] && yi(t, c[0], n, i, o, s), c[1] && yi(t, c[1], o, i, r, s), c[2] && yi(t, c[2], n, s, o, a), 
                c[3] && yi(t, c[3], o, s, r, a);
            }
        }
        function xi(t, e, n, i, r, a, o) {
            var s, c = 1 / 0;
            return function t(l, u, d, h, f) {
                if (!(u > a || d > o || h < i || f < r)) {
                    if (p = l.point) {
                        var p, g = e - l.x, m = n - l.y, v = g * g + m * m;
                        if (v < c) {
                            var y = Math.sqrt(c = v);
                            i = e - y, r = n - y, a = e + y, o = n + y, s = p;
                        }
                    }
                    for (var x = l.nodes, _ = .5 * (u + h), b = .5 * (d + f), w = e >= _, S = n >= b, T = S << 1 | w, E = T + 4; T < E; ++T) if (l = x[3 & T]) switch (3 & T) {
                      case 0:
                        t(l, u, d, _, b);
                        break;

                      case 1:
                        t(l, _, d, h, b);
                        break;

                      case 2:
                        t(l, u, b, _, f);
                        break;

                      case 3:
                        t(l, _, b, h, f);
                    }
                }
            }(t, i, r, a, o), s;
        }
        function _i(t, e) {
            t = fo.rgb(t), e = fo.rgb(e);
            var n = t.r, i = t.g, r = t.b, a = e.r - n, o = e.g - i, s = e.b - r;
            return function(t) {
                return "#" + Et(Math.round(n + a * t)) + Et(Math.round(i + o * t)) + Et(Math.round(r + s * t));
            };
        }
        function bi(t, e) {
            var n, i = {}, r = {};
            for (n in t) n in e ? i[n] = Ti(t[n], e[n]) : r[n] = t[n];
            for (n in e) n in t || (r[n] = e[n]);
            return function(t) {
                for (n in i) r[n] = i[n](t);
                return r;
            };
        }
        function wi(t, e) {
            return t = +t, e = +e, function(n) {
                return t * (1 - n) + e * n;
            };
        }
        function Si(t, e) {
            var n, i, r, a = gc.lastIndex = mc.lastIndex = 0, o = -1, s = [], c = [];
            for (t += "", e += ""; (n = gc.exec(t)) && (i = mc.exec(e)); ) (r = i.index) > a && (r = e.slice(a, r), 
            s[o] ? s[o] += r : s[++o] = r), (n = n[0]) === (i = i[0]) ? s[o] ? s[o] += i : s[++o] = i : (s[++o] = null, 
            c.push({
                i: o,
                x: wi(n, i)
            })), a = mc.lastIndex;
            return a < e.length && (r = e.slice(a), s[o] ? s[o] += r : s[++o] = r), s.length < 2 ? c[0] ? (e = c[0].x, 
            function(t) {
                return e(t) + "";
            }) : function() {
                return e;
            } : (e = c.length, function(t) {
                for (var n, i = 0; i < e; ++i) s[(n = c[i]).i] = n.x(t);
                return s.join("");
            });
        }
        function Ti(t, e) {
            for (var n, i = fo.interpolators.length; --i >= 0 && !(n = fo.interpolators[i](t, e)); ) ;
            return n;
        }
        function Ei(t, e) {
            var n, i = [], r = [], a = t.length, o = e.length, s = Math.min(t.length, e.length);
            for (n = 0; n < s; ++n) i.push(Ti(t[n], e[n]));
            for (;n < a; ++n) r[n] = t[n];
            for (;n < o; ++n) r[n] = e[n];
            return function(t) {
                for (n = 0; n < s; ++n) r[n] = i[n](t);
                return r;
            };
        }
        function Ai(t) {
            return function(e) {
                return e <= 0 ? 0 : e >= 1 ? 1 : t(e);
            };
        }
        function Ci(t) {
            return function(e) {
                return 1 - t(1 - e);
            };
        }
        function Pi(t) {
            return function(e) {
                return .5 * (e < .5 ? t(2 * e) : 2 - t(2 - 2 * e));
            };
        }
        function ki(t) {
            return t * t;
        }
        function Mi(t) {
            return t * t * t;
        }
        function Oi(t) {
            if (t <= 0) return 0;
            if (t >= 1) return 1;
            var e = t * t, n = e * t;
            return 4 * (t < .5 ? n : 3 * (t - e) + n - .75);
        }
        function Ni(t) {
            return function(e) {
                return Math.pow(e, t);
            };
        }
        function Vi(t) {
            return 1 - Math.cos(t * Xo);
        }
        function Li(t) {
            return Math.pow(2, 10 * (t - 1));
        }
        function Ri(t) {
            return 1 - Math.sqrt(1 - t * t);
        }
        function Ii(t, e) {
            var n;
            return arguments.length < 2 && (e = .45), arguments.length ? n = e / zo * Math.asin(1 / t) : (t = 1, 
            n = e / 4), function(i) {
                return 1 + t * Math.pow(2, -10 * i) * Math.sin((i - n) * zo / e);
            };
        }
        function Di(t) {
            return t || (t = 1.70158), function(e) {
                return e * e * ((t + 1) * e - t);
            };
        }
        function Gi(t) {
            return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;
        }
        function Fi(t, e) {
            t = fo.hcl(t), e = fo.hcl(e);
            var n = t.h, i = t.c, r = t.l, a = e.h - n, o = e.c - i, s = e.l - r;
            return isNaN(o) && (o = 0, i = isNaN(i) ? e.c : i), isNaN(a) ? (a = 0, n = isNaN(n) ? e.h : n) : a > 180 ? a -= 360 : a < -180 && (a += 360), 
            function(t) {
                return gt(n + a * t, i + o * t, r + s * t) + "";
            };
        }
        function ji(t, e) {
            t = fo.hsl(t), e = fo.hsl(e);
            var n = t.h, i = t.s, r = t.l, a = e.h - n, o = e.s - i, s = e.l - r;
            return isNaN(o) && (o = 0, i = isNaN(i) ? e.s : i), isNaN(a) ? (a = 0, n = isNaN(n) ? e.h : n) : a > 180 ? a -= 360 : a < -180 && (a += 360), 
            function(t) {
                return ft(n + a * t, i + o * t, r + s * t) + "";
            };
        }
        function Hi(t, e) {
            t = fo.lab(t), e = fo.lab(e);
            var n = t.l, i = t.a, r = t.b, a = e.l - n, o = e.a - i, s = e.b - r;
            return function(t) {
                return vt(n + a * t, i + o * t, r + s * t) + "";
            };
        }
        function Ui(t, e) {
            return e -= t, function(n) {
                return Math.round(t + e * n);
            };
        }
        function zi(t) {
            var e = [ t.a, t.b ], n = [ t.c, t.d ], i = Xi(e), r = Bi(e, n), a = Xi(Yi(n, e, -r)) || 0;
            e[0] * n[1] < n[0] * e[1] && (e[0] *= -1, e[1] *= -1, i *= -1, r *= -1), this.rotate = (i ? Math.atan2(e[1], e[0]) : Math.atan2(-n[0], n[1])) * qo, 
            this.translate = [ t.e, t.f ], this.scale = [ i, a ], this.skew = a ? Math.atan2(r, a) * qo : 0;
        }
        function Bi(t, e) {
            return t[0] * e[0] + t[1] * e[1];
        }
        function Xi(t) {
            var e = Math.sqrt(Bi(t, t));
            return e && (t[0] /= e, t[1] /= e), e;
        }
        function Yi(t, e, n) {
            return t[0] += n * e[0], t[1] += n * e[1], t;
        }
        function qi(t) {
            return t.length ? t.pop() + "," : "";
        }
        function Wi(t, e, n, i) {
            if (t[0] !== e[0] || t[1] !== e[1]) {
                var r = n.push("translate(", null, ",", null, ")");
                i.push({
                    i: r - 4,
                    x: wi(t[0], e[0])
                }, {
                    i: r - 2,
                    x: wi(t[1], e[1])
                });
            } else (e[0] || e[1]) && n.push("translate(" + e + ")");
        }
        function Ki(t, e, n, i) {
            t !== e ? (t - e > 180 ? e += 360 : e - t > 180 && (t += 360), i.push({
                i: n.push(qi(n) + "rotate(", null, ")") - 2,
                x: wi(t, e)
            })) : e && n.push(qi(n) + "rotate(" + e + ")");
        }
        function Qi(t, e, n, i) {
            t !== e ? i.push({
                i: n.push(qi(n) + "skewX(", null, ")") - 2,
                x: wi(t, e)
            }) : e && n.push(qi(n) + "skewX(" + e + ")");
        }
        function Ji(t, e, n, i) {
            if (t[0] !== e[0] || t[1] !== e[1]) {
                var r = n.push(qi(n) + "scale(", null, ",", null, ")");
                i.push({
                    i: r - 4,
                    x: wi(t[0], e[0])
                }, {
                    i: r - 2,
                    x: wi(t[1], e[1])
                });
            } else 1 === e[0] && 1 === e[1] || n.push(qi(n) + "scale(" + e + ")");
        }
        function $i(t, e) {
            var n = [], i = [];
            return t = fo.transform(t), e = fo.transform(e), Wi(t.translate, e.translate, n, i), 
            Ki(t.rotate, e.rotate, n, i), Qi(t.skew, e.skew, n, i), Ji(t.scale, e.scale, n, i), 
            t = e = null, function(t) {
                for (var e, r = -1, a = i.length; ++r < a; ) n[(e = i[r]).i] = e.x(t);
                return n.join("");
            };
        }
        function Zi(t, e) {
            return e = (e -= t = +t) || 1 / e, function(n) {
                return (n - t) / e;
            };
        }
        function tr(t, e) {
            return e = (e -= t = +t) || 1 / e, function(n) {
                return Math.max(0, Math.min(1, (n - t) / e));
            };
        }
        function er(t) {
            for (var e = t.source, n = t.target, i = ir(e, n), r = [ e ]; e !== i; ) e = e.parent, 
            r.push(e);
            for (var a = r.length; n !== i; ) r.splice(a, 0, n), n = n.parent;
            return r;
        }
        function nr(t) {
            for (var e = [], n = t.parent; null != n; ) e.push(t), t = n, n = n.parent;
            return e.push(t), e;
        }
        function ir(t, e) {
            if (t === e) return t;
            for (var n = nr(t), i = nr(e), r = n.pop(), a = i.pop(), o = null; r === a; ) o = r, 
            r = n.pop(), a = i.pop();
            return o;
        }
        function rr(t) {
            t.fixed |= 2;
        }
        function ar(t) {
            t.fixed &= -7;
        }
        function or(t) {
            t.fixed |= 4, t.px = t.x, t.py = t.y;
        }
        function sr(t) {
            t.fixed &= -5;
        }
        function cr(t, e, n) {
            var i = 0, r = 0;
            if (t.charge = 0, !t.leaf) for (var a, o = t.nodes, s = o.length, c = -1; ++c < s; ) a = o[c], 
            null != a && (cr(a, e, n), t.charge += a.charge, i += a.charge * a.cx, r += a.charge * a.cy);
            if (t.point) {
                t.leaf || (t.point.x += Math.random() - .5, t.point.y += Math.random() - .5);
                var l = e * n[t.point.index];
                t.charge += t.pointCharge = l, i += l * t.point.x, r += l * t.point.y;
            }
            t.cx = i / t.charge, t.cy = r / t.charge;
        }
        function lr(t, e) {
            return fo.rebind(t, e, "sort", "children", "value"), t.nodes = t, t.links = gr, 
            t;
        }
        function ur(t, e) {
            for (var n = [ t ]; null != (t = n.pop()); ) if (e(t), (r = t.children) && (i = r.length)) for (var i, r; --i >= 0; ) n.push(r[i]);
        }
        function dr(t, e) {
            for (var n = [ t ], i = []; null != (t = n.pop()); ) if (i.push(t), (a = t.children) && (r = a.length)) for (var r, a, o = -1; ++o < r; ) n.push(a[o]);
            for (;null != (t = i.pop()); ) e(t);
        }
        function hr(t) {
            return t.children;
        }
        function fr(t) {
            return t.value;
        }
        function pr(t, e) {
            return e.value - t.value;
        }
        function gr(t) {
            return fo.merge(t.map(function(t) {
                return (t.children || []).map(function(e) {
                    return {
                        source: t,
                        target: e
                    };
                });
            }));
        }
        function mr(t) {
            return t.x;
        }
        function vr(t) {
            return t.y;
        }
        function yr(t, e, n) {
            t.y0 = e, t.y = n;
        }
        function xr(t) {
            return fo.range(t.length);
        }
        function _r(t) {
            for (var e = -1, n = t[0].length, i = []; ++e < n; ) i[e] = 0;
            return i;
        }
        function br(t) {
            for (var e, n = 1, i = 0, r = t[0][1], a = t.length; n < a; ++n) (e = t[n][1]) > r && (i = n, 
            r = e);
            return i;
        }
        function wr(t) {
            return t.reduce(Sr, 0);
        }
        function Sr(t, e) {
            return t + e[1];
        }
        function Tr(t, e) {
            return Er(t, Math.ceil(Math.log(e.length) / Math.LN2 + 1));
        }
        function Er(t, e) {
            for (var n = -1, i = +t[0], r = (t[1] - i) / e, a = []; ++n <= e; ) a[n] = r * n + i;
            return a;
        }
        function Ar(t) {
            return [ fo.min(t), fo.max(t) ];
        }
        function Cr(t, e) {
            return t.value - e.value;
        }
        function Pr(t, e) {
            var n = t._pack_next;
            t._pack_next = e, e._pack_prev = t, e._pack_next = n, n._pack_prev = e;
        }
        function kr(t, e) {
            t._pack_next = e, e._pack_prev = t;
        }
        function Mr(t, e) {
            var n = e.x - t.x, i = e.y - t.y, r = t.r + e.r;
            return .999 * r * r > n * n + i * i;
        }
        function Or(t) {
            function e(t) {
                u = Math.min(t.x - t.r, u), d = Math.max(t.x + t.r, d), h = Math.min(t.y - t.r, h), 
                f = Math.max(t.y + t.r, f);
            }
            if ((n = t.children) && (l = n.length)) {
                var n, i, r, a, o, s, c, l, u = 1 / 0, d = -(1 / 0), h = 1 / 0, f = -(1 / 0);
                if (n.forEach(Nr), i = n[0], i.x = -i.r, i.y = 0, e(i), l > 1 && (r = n[1], r.x = r.r, 
                r.y = 0, e(r), l > 2)) for (a = n[2], Rr(i, r, a), e(a), Pr(i, a), i._pack_prev = a, 
                Pr(a, r), r = i._pack_next, o = 3; o < l; o++) {
                    Rr(i, r, a = n[o]);
                    var p = 0, g = 1, m = 1;
                    for (s = r._pack_next; s !== r; s = s._pack_next, g++) if (Mr(s, a)) {
                        p = 1;
                        break;
                    }
                    if (1 == p) for (c = i._pack_prev; c !== s._pack_prev && !Mr(c, a); c = c._pack_prev, 
                    m++) ;
                    p ? (g < m || g == m && r.r < i.r ? kr(i, r = s) : kr(i = c, r), o--) : (Pr(i, a), 
                    r = a, e(a));
                }
                var v = (u + d) / 2, y = (h + f) / 2, x = 0;
                for (o = 0; o < l; o++) a = n[o], a.x -= v, a.y -= y, x = Math.max(x, a.r + Math.sqrt(a.x * a.x + a.y * a.y));
                t.r = x, n.forEach(Vr);
            }
        }
        function Nr(t) {
            t._pack_next = t._pack_prev = t;
        }
        function Vr(t) {
            delete t._pack_next, delete t._pack_prev;
        }
        function Lr(t, e, n, i) {
            var r = t.children;
            if (t.x = e += i * t.x, t.y = n += i * t.y, t.r *= i, r) for (var a = -1, o = r.length; ++a < o; ) Lr(r[a], e, n, i);
        }
        function Rr(t, e, n) {
            var i = t.r + n.r, r = e.x - t.x, a = e.y - t.y;
            if (i && (r || a)) {
                var o = e.r + n.r, s = r * r + a * a;
                o *= o, i *= i;
                var c = .5 + (i - o) / (2 * s), l = Math.sqrt(Math.max(0, 2 * o * (i + s) - (i -= s) * i - o * o)) / (2 * s);
                n.x = t.x + c * r + l * a, n.y = t.y + c * a - l * r;
            } else n.x = t.x + i, n.y = t.y;
        }
        function Ir(t, e) {
            return t.parent == e.parent ? 1 : 2;
        }
        function Dr(t) {
            var e = t.children;
            return e.length ? e[0] : t.t;
        }
        function Gr(t) {
            var e, n = t.children;
            return (e = n.length) ? n[e - 1] : t.t;
        }
        function Fr(t, e, n) {
            var i = n / (e.i - t.i);
            e.c -= i, e.s += n, t.c += i, e.z += n, e.m += n;
        }
        function jr(t) {
            for (var e, n = 0, i = 0, r = t.children, a = r.length; --a >= 0; ) e = r[a], e.z += n, 
            e.m += n, n += e.s + (i += e.c);
        }
        function Hr(t, e, n) {
            return t.a.parent === e.parent ? t.a : n;
        }
        function Ur(t) {
            return 1 + fo.max(t, function(t) {
                return t.y;
            });
        }
        function zr(t) {
            return t.reduce(function(t, e) {
                return t + e.x;
            }, 0) / t.length;
        }
        function Br(t) {
            var e = t.children;
            return e && e.length ? Br(e[0]) : t;
        }
        function Xr(t) {
            var e, n = t.children;
            return n && (e = n.length) ? Xr(n[e - 1]) : t;
        }
        function Yr(t) {
            return {
                x: t.x,
                y: t.y,
                dx: t.dx,
                dy: t.dy
            };
        }
        function qr(t, e) {
            var n = t.x + e[3], i = t.y + e[0], r = t.dx - e[1] - e[3], a = t.dy - e[0] - e[2];
            return r < 0 && (n += r / 2, r = 0), a < 0 && (i += a / 2, a = 0), {
                x: n,
                y: i,
                dx: r,
                dy: a
            };
        }
        function Wr(t) {
            var e = t[0], n = t[t.length - 1];
            return e < n ? [ e, n ] : [ n, e ];
        }
        function Kr(t) {
            return t.rangeExtent ? t.rangeExtent() : Wr(t.range());
        }
        function Qr(t, e, n, i) {
            var r = n(t[0], t[1]), a = i(e[0], e[1]);
            return function(t) {
                return a(r(t));
            };
        }
        function Jr(t, e) {
            var n, i = 0, r = t.length - 1, a = t[i], o = t[r];
            return o < a && (n = i, i = r, r = n, n = a, a = o, o = n), t[i] = e.floor(a), t[r] = e.ceil(o), 
            t;
        }
        function $r(t) {
            return t ? {
                floor: function(e) {
                    return Math.floor(e / t) * t;
                },
                ceil: function(e) {
                    return Math.ceil(e / t) * t;
                }
            } : Cc;
        }
        function Zr(t, e, n, i) {
            var r = [], a = [], o = 0, s = Math.min(t.length, e.length) - 1;
            for (t[s] < t[0] && (t = t.slice().reverse(), e = e.slice().reverse()); ++o <= s; ) r.push(n(t[o - 1], t[o])), 
            a.push(i(e[o - 1], e[o]));
            return function(e) {
                var n = fo.bisect(t, e, 1, s) - 1;
                return a[n](r[n](e));
            };
        }
        function ta(t, e, n, i) {
            function r() {
                var r = Math.min(t.length, e.length) > 2 ? Zr : Qr, c = i ? tr : Zi;
                return o = r(t, e, c, n), s = r(e, t, c, Ti), a;
            }
            function a(t) {
                return o(t);
            }
            var o, s;
            return a.invert = function(t) {
                return s(t);
            }, a.domain = function(e) {
                return arguments.length ? (t = e.map(Number), r()) : t;
            }, a.range = function(t) {
                return arguments.length ? (e = t, r()) : e;
            }, a.rangeRound = function(t) {
                return a.range(t).interpolate(Ui);
            }, a.clamp = function(t) {
                return arguments.length ? (i = t, r()) : i;
            }, a.interpolate = function(t) {
                return arguments.length ? (n = t, r()) : n;
            }, a.ticks = function(e) {
                return ra(t, e);
            }, a.tickFormat = function(e, n) {
                return aa(t, e, n);
            }, a.nice = function(e) {
                return na(t, e), r();
            }, a.copy = function() {
                return ta(t, e, n, i);
            }, r();
        }
        function ea(t, e) {
            return fo.rebind(t, e, "range", "rangeRound", "interpolate", "clamp");
        }
        function na(t, e) {
            return Jr(t, $r(ia(t, e)[2])), Jr(t, $r(ia(t, e)[2])), t;
        }
        function ia(t, e) {
            null == e && (e = 10);
            var n = Wr(t), i = n[1] - n[0], r = Math.pow(10, Math.floor(Math.log(i / e) / Math.LN10)), a = e / i * r;
            return a <= .15 ? r *= 10 : a <= .35 ? r *= 5 : a <= .75 && (r *= 2), n[0] = Math.ceil(n[0] / r) * r, 
            n[1] = Math.floor(n[1] / r) * r + .5 * r, n[2] = r, n;
        }
        function ra(t, e) {
            return fo.range.apply(fo, ia(t, e));
        }
        function aa(t, e, n) {
            var i = ia(t, e);
            if (n) {
                var r = gs.exec(n);
                if (r.shift(), "s" === r[8]) {
                    var a = fo.formatPrefix(Math.max(So(i[0]), So(i[1])));
                    return r[7] || (r[7] = "." + oa(a.scale(i[2]))), r[8] = "f", n = fo.format(r.join("")), 
                    function(t) {
                        return n(a.scale(t)) + a.symbol;
                    };
                }
                r[7] || (r[7] = "." + sa(r[8], i)), n = r.join("");
            } else n = ",." + oa(i[2]) + "f";
            return fo.format(n);
        }
        function oa(t) {
            return -Math.floor(Math.log(t) / Math.LN10 + .01);
        }
        function sa(t, e) {
            var n = oa(e[2]);
            return t in Pc ? Math.abs(n - oa(Math.max(So(e[0]), So(e[1])))) + +("e" !== t) : n - 2 * ("%" === t);
        }
        function ca(t, e, n, i) {
            function r(t) {
                return (n ? Math.log(t < 0 ? 0 : t) : -Math.log(t > 0 ? 0 : -t)) / Math.log(e);
            }
            function a(t) {
                return n ? Math.pow(e, t) : -Math.pow(e, -t);
            }
            function o(e) {
                return t(r(e));
            }
            return o.invert = function(e) {
                return a(t.invert(e));
            }, o.domain = function(e) {
                return arguments.length ? (n = e[0] >= 0, t.domain((i = e.map(Number)).map(r)), 
                o) : i;
            }, o.base = function(n) {
                return arguments.length ? (e = +n, t.domain(i.map(r)), o) : e;
            }, o.nice = function() {
                var e = Jr(i.map(r), n ? Math : Mc);
                return t.domain(e), i = e.map(a), o;
            }, o.ticks = function() {
                var t = Wr(i), o = [], s = t[0], c = t[1], l = Math.floor(r(s)), u = Math.ceil(r(c)), d = e % 1 ? 2 : e;
                if (isFinite(u - l)) {
                    if (n) {
                        for (;l < u; l++) for (var h = 1; h < d; h++) o.push(a(l) * h);
                        o.push(a(l));
                    } else for (o.push(a(l)); l++ < u; ) for (var h = d - 1; h > 0; h--) o.push(a(l) * h);
                    for (l = 0; o[l] < s; l++) ;
                    for (u = o.length; o[u - 1] > c; u--) ;
                    o = o.slice(l, u);
                }
                return o;
            }, o.tickFormat = function(t, n) {
                if (!arguments.length) return kc;
                arguments.length < 2 ? n = kc : "function" != typeof n && (n = fo.format(n));
                var i = Math.max(1, e * t / o.ticks().length);
                return function(t) {
                    var o = t / a(Math.round(r(t)));
                    return o * e < e - .5 && (o *= e), o <= i ? n(t) : "";
                };
            }, o.copy = function() {
                return ca(t.copy(), e, n, i);
            }, ea(o, t);
        }
        function la(t, e, n) {
            function i(e) {
                return t(r(e));
            }
            var r = ua(e), a = ua(1 / e);
            return i.invert = function(e) {
                return a(t.invert(e));
            }, i.domain = function(e) {
                return arguments.length ? (t.domain((n = e.map(Number)).map(r)), i) : n;
            }, i.ticks = function(t) {
                return ra(n, t);
            }, i.tickFormat = function(t, e) {
                return aa(n, t, e);
            }, i.nice = function(t) {
                return i.domain(na(n, t));
            }, i.exponent = function(o) {
                return arguments.length ? (r = ua(e = o), a = ua(1 / e), t.domain(n.map(r)), i) : e;
            }, i.copy = function() {
                return la(t.copy(), e, n);
            }, ea(i, t);
        }
        function ua(t) {
            return function(e) {
                return e < 0 ? -Math.pow(-e, t) : Math.pow(e, t);
            };
        }
        function da(t, e) {
            function n(n) {
                return a[((r.get(n) || ("range" === e.t ? r.set(n, t.push(n)) : NaN)) - 1) % a.length];
            }
            function i(e, n) {
                return fo.range(t.length).map(function(t) {
                    return e + n * t;
                });
            }
            var r, a, o;
            return n.domain = function(i) {
                if (!arguments.length) return t;
                t = [], r = new p();
                for (var a, o = -1, s = i.length; ++o < s; ) r.has(a = i[o]) || r.set(a, t.push(a));
                return n[e.t].apply(n, e.a);
            }, n.range = function(t) {
                return arguments.length ? (a = t, o = 0, e = {
                    t: "range",
                    a: arguments
                }, n) : a;
            }, n.rangePoints = function(r, s) {
                arguments.length < 2 && (s = 0);
                var c = r[0], l = r[1], u = t.length < 2 ? (c = (c + l) / 2, 0) : (l - c) / (t.length - 1 + s);
                return a = i(c + u * s / 2, u), o = 0, e = {
                    t: "rangePoints",
                    a: arguments
                }, n;
            }, n.rangeRoundPoints = function(r, s) {
                arguments.length < 2 && (s = 0);
                var c = r[0], l = r[1], u = t.length < 2 ? (c = l = Math.round((c + l) / 2), 0) : (l - c) / (t.length - 1 + s) | 0;
                return a = i(c + Math.round(u * s / 2 + (l - c - (t.length - 1 + s) * u) / 2), u), 
                o = 0, e = {
                    t: "rangeRoundPoints",
                    a: arguments
                }, n;
            }, n.rangeBands = function(r, s, c) {
                arguments.length < 2 && (s = 0), arguments.length < 3 && (c = s);
                var l = r[1] < r[0], u = r[l - 0], d = r[1 - l], h = (d - u) / (t.length - s + 2 * c);
                return a = i(u + h * c, h), l && a.reverse(), o = h * (1 - s), e = {
                    t: "rangeBands",
                    a: arguments
                }, n;
            }, n.rangeRoundBands = function(r, s, c) {
                arguments.length < 2 && (s = 0), arguments.length < 3 && (c = s);
                var l = r[1] < r[0], u = r[l - 0], d = r[1 - l], h = Math.floor((d - u) / (t.length - s + 2 * c));
                return a = i(u + Math.round((d - u - (t.length - s) * h) / 2), h), l && a.reverse(), 
                o = Math.round(h * (1 - s)), e = {
                    t: "rangeRoundBands",
                    a: arguments
                }, n;
            }, n.rangeBand = function() {
                return o;
            }, n.rangeExtent = function() {
                return Wr(e.a[0]);
            }, n.copy = function() {
                return da(t, e);
            }, n.domain(t);
        }
        function ha(t, e) {
            function n() {
                var n = 0, a = e.length;
                for (r = []; ++n < a; ) r[n - 1] = fo.quantile(t, n / a);
                return i;
            }
            function i(t) {
                if (!isNaN(t = +t)) return e[fo.bisect(r, t)];
            }
            var r;
            return i.domain = function(e) {
                return arguments.length ? (t = e.map(c).filter(l).sort(s), n()) : t;
            }, i.range = function(t) {
                return arguments.length ? (e = t, n()) : e;
            }, i.quantiles = function() {
                return r;
            }, i.invertExtent = function(n) {
                return n = e.indexOf(n), n < 0 ? [ NaN, NaN ] : [ n > 0 ? r[n - 1] : t[0], n < r.length ? r[n] : t[t.length - 1] ];
            }, i.copy = function() {
                return ha(t, e);
            }, n();
        }
        function fa(t, e, n) {
            function i(e) {
                return n[Math.max(0, Math.min(o, Math.floor(a * (e - t))))];
            }
            function r() {
                return a = n.length / (e - t), o = n.length - 1, i;
            }
            var a, o;
            return i.domain = function(n) {
                return arguments.length ? (t = +n[0], e = +n[n.length - 1], r()) : [ t, e ];
            }, i.range = function(t) {
                return arguments.length ? (n = t, r()) : n;
            }, i.invertExtent = function(e) {
                return e = n.indexOf(e), e = e < 0 ? NaN : e / a + t, [ e, e + 1 / a ];
            }, i.copy = function() {
                return fa(t, e, n);
            }, r();
        }
        function pa(t, e) {
            function n(n) {
                if (n <= n) return e[fo.bisect(t, n)];
            }
            return n.domain = function(e) {
                return arguments.length ? (t = e, n) : t;
            }, n.range = function(t) {
                return arguments.length ? (e = t, n) : e;
            }, n.invertExtent = function(n) {
                return n = e.indexOf(n), [ t[n - 1], t[n] ];
            }, n.copy = function() {
                return pa(t, e);
            }, n;
        }
        function ga(t) {
            function e(t) {
                return +t;
            }
            return e.invert = e, e.domain = e.range = function(n) {
                return arguments.length ? (t = n.map(e), e) : t;
            }, e.ticks = function(e) {
                return ra(t, e);
            }, e.tickFormat = function(e, n) {
                return aa(t, e, n);
            }, e.copy = function() {
                return ga(t);
            }, e;
        }
        function ma() {
            return 0;
        }
        function va(t) {
            return t.innerRadius;
        }
        function ya(t) {
            return t.outerRadius;
        }
        function xa(t) {
            return t.startAngle;
        }
        function _a(t) {
            return t.endAngle;
        }
        function ba(t) {
            return t && t.padAngle;
        }
        function wa(t, e, n, i) {
            return (t - n) * e - (e - i) * t > 0 ? 0 : 1;
        }
        function Sa(t, e, n, i, r) {
            var a = t[0] - e[0], o = t[1] - e[1], s = (r ? i : -i) / Math.sqrt(a * a + o * o), c = s * o, l = -s * a, u = t[0] + c, d = t[1] + l, h = e[0] + c, f = e[1] + l, p = (u + h) / 2, g = (d + f) / 2, m = h - u, v = f - d, y = m * m + v * v, x = n - i, _ = u * f - h * d, b = (v < 0 ? -1 : 1) * Math.sqrt(Math.max(0, x * x * y - _ * _)), w = (_ * v - m * b) / y, S = (-_ * m - v * b) / y, T = (_ * v + m * b) / y, E = (-_ * m + v * b) / y, A = w - p, C = S - g, P = T - p, k = E - g;
            return A * A + C * C > P * P + k * k && (w = T, S = E), [ [ w - c, S - l ], [ w * n / x, S * n / x ] ];
        }
        function Ta(t) {
            function e(e) {
                function o() {
                    l.push("M", a(t(u), s));
                }
                for (var c, l = [], u = [], d = -1, h = e.length, f = Ot(n), p = Ot(i); ++d < h; ) r.call(this, c = e[d], d) ? u.push([ +f.call(this, c, d), +p.call(this, c, d) ]) : u.length && (o(), 
                u = []);
                return u.length && o(), l.length ? l.join("") : null;
            }
            var n = Ln, i = Rn, r = Le, a = Ea, o = a.key, s = .7;
            return e.x = function(t) {
                return arguments.length ? (n = t, e) : n;
            }, e.y = function(t) {
                return arguments.length ? (i = t, e) : i;
            }, e.defined = function(t) {
                return arguments.length ? (r = t, e) : r;
            }, e.interpolate = function(t) {
                return arguments.length ? (o = "function" == typeof t ? a = t : (a = Ic.get(t) || Ea).key, 
                e) : o;
            }, e.tension = function(t) {
                return arguments.length ? (s = t, e) : s;
            }, e;
        }
        function Ea(t) {
            return t.length > 1 ? t.join("L") : t + "Z";
        }
        function Aa(t) {
            return t.join("L") + "Z";
        }
        function Ca(t) {
            for (var e = 0, n = t.length, i = t[0], r = [ i[0], ",", i[1] ]; ++e < n; ) r.push("H", (i[0] + (i = t[e])[0]) / 2, "V", i[1]);
            return n > 1 && r.push("H", i[0]), r.join("");
        }
        function Pa(t) {
            for (var e = 0, n = t.length, i = t[0], r = [ i[0], ",", i[1] ]; ++e < n; ) r.push("V", (i = t[e])[1], "H", i[0]);
            return r.join("");
        }
        function ka(t) {
            for (var e = 0, n = t.length, i = t[0], r = [ i[0], ",", i[1] ]; ++e < n; ) r.push("H", (i = t[e])[0], "V", i[1]);
            return r.join("");
        }
        function Ma(t, e) {
            return t.length < 4 ? Ea(t) : t[1] + Va(t.slice(1, -1), La(t, e));
        }
        function Oa(t, e) {
            return t.length < 3 ? Aa(t) : t[0] + Va((t.push(t[0]), t), La([ t[t.length - 2] ].concat(t, [ t[1] ]), e));
        }
        function Na(t, e) {
            return t.length < 3 ? Ea(t) : t[0] + Va(t, La(t, e));
        }
        function Va(t, e) {
            if (e.length < 1 || t.length != e.length && t.length != e.length + 2) return Ea(t);
            var n = t.length != e.length, i = "", r = t[0], a = t[1], o = e[0], s = o, c = 1;
            if (n && (i += "Q" + (a[0] - 2 * o[0] / 3) + "," + (a[1] - 2 * o[1] / 3) + "," + a[0] + "," + a[1], 
            r = t[1], c = 2), e.length > 1) {
                s = e[1], a = t[c], c++, i += "C" + (r[0] + o[0]) + "," + (r[1] + o[1]) + "," + (a[0] - s[0]) + "," + (a[1] - s[1]) + "," + a[0] + "," + a[1];
                for (var l = 2; l < e.length; l++, c++) a = t[c], s = e[l], i += "S" + (a[0] - s[0]) + "," + (a[1] - s[1]) + "," + a[0] + "," + a[1];
            }
            if (n) {
                var u = t[c];
                i += "Q" + (a[0] + 2 * s[0] / 3) + "," + (a[1] + 2 * s[1] / 3) + "," + u[0] + "," + u[1];
            }
            return i;
        }
        function La(t, e) {
            for (var n, i = [], r = (1 - e) / 2, a = t[0], o = t[1], s = 1, c = t.length; ++s < c; ) n = a, 
            a = o, o = t[s], i.push([ r * (o[0] - n[0]), r * (o[1] - n[1]) ]);
            return i;
        }
        function Ra(t) {
            if (t.length < 3) return Ea(t);
            var e = 1, n = t.length, i = t[0], r = i[0], a = i[1], o = [ r, r, r, (i = t[1])[0] ], s = [ a, a, a, i[1] ], c = [ r, ",", a, "L", Fa(Fc, o), ",", Fa(Fc, s) ];
            for (t.push(t[n - 1]); ++e <= n; ) i = t[e], o.shift(), o.push(i[0]), s.shift(), 
            s.push(i[1]), ja(c, o, s);
            return t.pop(), c.push("L", i), c.join("");
        }
        function Ia(t) {
            if (t.length < 4) return Ea(t);
            for (var e, n = [], i = -1, r = t.length, a = [ 0 ], o = [ 0 ]; ++i < 3; ) e = t[i], 
            a.push(e[0]), o.push(e[1]);
            for (n.push(Fa(Fc, a) + "," + Fa(Fc, o)), --i; ++i < r; ) e = t[i], a.shift(), a.push(e[0]), 
            o.shift(), o.push(e[1]), ja(n, a, o);
            return n.join("");
        }
        function Da(t) {
            for (var e, n, i = -1, r = t.length, a = r + 4, o = [], s = []; ++i < 4; ) n = t[i % r], 
            o.push(n[0]), s.push(n[1]);
            for (e = [ Fa(Fc, o), ",", Fa(Fc, s) ], --i; ++i < a; ) n = t[i % r], o.shift(), 
            o.push(n[0]), s.shift(), s.push(n[1]), ja(e, o, s);
            return e.join("");
        }
        function Ga(t, e) {
            var n = t.length - 1;
            if (n) for (var i, r, a = t[0][0], o = t[0][1], s = t[n][0] - a, c = t[n][1] - o, l = -1; ++l <= n; ) i = t[l], 
            r = l / n, i[0] = e * i[0] + (1 - e) * (a + r * s), i[1] = e * i[1] + (1 - e) * (o + r * c);
            return Ra(t);
        }
        function Fa(t, e) {
            return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] + t[3] * e[3];
        }
        function ja(t, e, n) {
            t.push("C", Fa(Dc, e), ",", Fa(Dc, n), ",", Fa(Gc, e), ",", Fa(Gc, n), ",", Fa(Fc, e), ",", Fa(Fc, n));
        }
        function Ha(t, e) {
            return (e[1] - t[1]) / (e[0] - t[0]);
        }
        function Ua(t) {
            for (var e = 0, n = t.length - 1, i = [], r = t[0], a = t[1], o = i[0] = Ha(r, a); ++e < n; ) i[e] = (o + (o = Ha(r = a, a = t[e + 1]))) / 2;
            return i[e] = o, i;
        }
        function za(t) {
            for (var e, n, i, r, a = [], o = Ua(t), s = -1, c = t.length - 1; ++s < c; ) e = Ha(t[s], t[s + 1]), 
            So(e) < jo ? o[s] = o[s + 1] = 0 : (n = o[s] / e, i = o[s + 1] / e, r = n * n + i * i, 
            r > 9 && (r = 3 * e / Math.sqrt(r), o[s] = r * n, o[s + 1] = r * i));
            for (s = -1; ++s <= c; ) r = (t[Math.min(c, s + 1)][0] - t[Math.max(0, s - 1)][0]) / (6 * (1 + o[s] * o[s])), 
            a.push([ r || 0, o[s] * r || 0 ]);
            return a;
        }
        function Ba(t) {
            return t.length < 3 ? Ea(t) : t[0] + Va(t, za(t));
        }
        function Xa(t) {
            for (var e, n, i, r = -1, a = t.length; ++r < a; ) e = t[r], n = e[0], i = e[1] - Xo, 
            e[0] = n * Math.cos(i), e[1] = n * Math.sin(i);
            return t;
        }
        function Ya(t) {
            function e(e) {
                function c() {
                    g.push("M", s(t(v), d), u, l(t(m.reverse()), d), "Z");
                }
                for (var h, f, p, g = [], m = [], v = [], y = -1, x = e.length, _ = Ot(n), b = Ot(r), w = n === i ? function() {
                    return f;
                } : Ot(i), S = r === a ? function() {
                    return p;
                } : Ot(a); ++y < x; ) o.call(this, h = e[y], y) ? (m.push([ f = +_.call(this, h, y), p = +b.call(this, h, y) ]), 
                v.push([ +w.call(this, h, y), +S.call(this, h, y) ])) : m.length && (c(), m = [], 
                v = []);
                return m.length && c(), g.length ? g.join("") : null;
            }
            var n = Ln, i = Ln, r = 0, a = Rn, o = Le, s = Ea, c = s.key, l = s, u = "L", d = .7;
            return e.x = function(t) {
                return arguments.length ? (n = i = t, e) : i;
            }, e.x0 = function(t) {
                return arguments.length ? (n = t, e) : n;
            }, e.x1 = function(t) {
                return arguments.length ? (i = t, e) : i;
            }, e.y = function(t) {
                return arguments.length ? (r = a = t, e) : a;
            }, e.y0 = function(t) {
                return arguments.length ? (r = t, e) : r;
            }, e.y1 = function(t) {
                return arguments.length ? (a = t, e) : a;
            }, e.defined = function(t) {
                return arguments.length ? (o = t, e) : o;
            }, e.interpolate = function(t) {
                return arguments.length ? (c = "function" == typeof t ? s = t : (s = Ic.get(t) || Ea).key, 
                l = s.reverse || s, u = s.closed ? "M" : "L", e) : c;
            }, e.tension = function(t) {
                return arguments.length ? (d = t, e) : d;
            }, e;
        }
        function qa(t) {
            return t.radius;
        }
        function Wa(t) {
            return [ t.x, t.y ];
        }
        function Ka(t) {
            return function() {
                var e = t.apply(this, arguments), n = e[0], i = e[1] - Xo;
                return [ n * Math.cos(i), n * Math.sin(i) ];
            };
        }
        function Qa() {
            return 64;
        }
        function Ja() {
            return "circle";
        }
        function $a(t) {
            var e = Math.sqrt(t / Uo);
            return "M0," + e + "A" + e + "," + e + " 0 1,1 0," + -e + "A" + e + "," + e + " 0 1,1 0," + e + "Z";
        }
        function Za(t) {
            return function() {
                var e, n, i;
                (e = this[t]) && (i = e[n = e.active]) && (i.timer.c = null, i.timer.t = NaN, --e.count ? delete e[n] : delete this[t], 
                e.active += .5, i.event && i.event.interrupt.call(this, this.__data__, i.index));
            };
        }
        function to(t, e, n) {
            return Po(t, Yc), t.namespace = e, t.id = n, t;
        }
        function eo(t, e, n, i) {
            var r = t.id, a = t.namespace;
            return W(t, "function" == typeof n ? function(t, o, s) {
                t[a][r].tween.set(e, i(n.call(t, t.__data__, o, s)));
            } : (n = i(n), function(t) {
                t[a][r].tween.set(e, n);
            }));
        }
        function no(t) {
            return null == t && (t = ""), function() {
                this.textContent = t;
            };
        }
        function io(t) {
            return null == t ? "__transition__" : "__transition_" + t + "__";
        }
        function ro(t, e, n, i, r) {
            function a(t) {
                var e = g.delay;
                return l.t = e + c, e <= t ? o(t - e) : void (l.c = o);
            }
            function o(n) {
                var r = f.active, a = f[r];
                a && (a.timer.c = null, a.timer.t = NaN, --f.count, delete f[r], a.event && a.event.interrupt.call(t, t.__data__, a.index));
                for (var o in f) if (+o < i) {
                    var p = f[o];
                    p.timer.c = null, p.timer.t = NaN, --f.count, delete f[o];
                }
                l.c = s, It(function() {
                    return l.c && s(n || 1) && (l.c = null, l.t = NaN), 1;
                }, 0, c), f.active = i, g.event && g.event.start.call(t, t.__data__, e), h = [], 
                g.tween.forEach(function(n, i) {
                    (i = i.call(t, t.__data__, e)) && h.push(i);
                }), d = g.ease, u = g.duration;
            }
            function s(r) {
                for (var a = r / u, o = d(a), s = h.length; s > 0; ) h[--s].call(t, o);
                if (a >= 1) return g.event && g.event.end.call(t, t.__data__, e), --f.count ? delete f[i] : delete t[n], 
                1;
            }
            var c, l, u, d, h, f = t[n] || (t[n] = {
                active: 0,
                count: 0
            }), g = f[i];
            g || (c = r.time, l = It(a, 0, c), g = f[i] = {
                tween: new p(),
                time: c,
                timer: l,
                delay: r.delay,
                duration: r.duration,
                ease: r.ease,
                index: e
            }, r = null, ++f.count);
        }
        function ao(t, e, n) {
            t.attr("transform", function(t) {
                var i = e(t);
                return "translate(" + (isFinite(i) ? i : n(t)) + ",0)";
            });
        }
        function oo(t, e, n) {
            t.attr("transform", function(t) {
                var i = e(t);
                return "translate(0," + (isFinite(i) ? i : n(t)) + ")";
            });
        }
        function so(t) {
            return t.toISOString();
        }
        function co(t, e, n) {
            function i(e) {
                return t(e);
            }
            function r(t, n) {
                var i = t[1] - t[0], r = i / n, a = fo.bisect(el, r);
                return a == el.length ? [ e.year, ia(t.map(function(t) {
                    return t / 31536e6;
                }), n)[2] ] : a ? e[r / el[a - 1] < el[a] / r ? a - 1 : a] : [ rl, ia(t, n)[2] ];
            }
            return i.invert = function(e) {
                return lo(t.invert(e));
            }, i.domain = function(e) {
                return arguments.length ? (t.domain(e), i) : t.domain().map(lo);
            }, i.nice = function(t, e) {
                function n(n) {
                    return !isNaN(n) && !t.range(n, lo(+n + 1), e).length;
                }
                var a = i.domain(), o = Wr(a), s = null == t ? r(o, 10) : "number" == typeof t && r(o, t);
                return s && (t = s[0], e = s[1]), i.domain(Jr(a, e > 1 ? {
                    floor: function(e) {
                        for (;n(e = t.floor(e)); ) e = lo(e - 1);
                        return e;
                    },
                    ceil: function(e) {
                        for (;n(e = t.ceil(e)); ) e = lo(+e + 1);
                        return e;
                    }
                } : t));
            }, i.ticks = function(t, e) {
                var n = Wr(i.domain()), a = null == t ? r(n, 10) : "number" == typeof t ? r(n, t) : !t.range && [ {
                    range: t
                }, e ];
                return a && (t = a[0], e = a[1]), t.range(n[0], lo(+n[1] + 1), e < 1 ? 1 : e);
            }, i.tickFormat = function() {
                return n;
            }, i.copy = function() {
                return co(t.copy(), e, n);
            }, ea(i, t);
        }
        function lo(t) {
            return new Date(t);
        }
        function uo(t) {
            return JSON.parse(t.responseText);
        }
        function ho(t) {
            var e = mo.createRange();
            return e.selectNode(mo.body), e.createContextualFragment(t.responseText);
        }
        var fo = {
            version: "3.5.17"
        }, po = [].slice, go = function(t) {
            return po.call(t);
        }, mo = this.document;
        if (mo) try {
            go(mo.documentElement.childNodes)[0].nodeType;
        } catch (t) {
            go = function(t) {
                for (var e = t.length, n = new Array(e); e--; ) n[e] = t[e];
                return n;
            };
        }
        if (Date.now || (Date.now = function() {
            return +new Date();
        }), mo) try {
            mo.createElement("DIV").style.setProperty("opacity", 0, "");
        } catch (t) {
            var vo = this.Element.prototype, yo = vo.setAttribute, xo = vo.setAttributeNS, _o = this.CSSStyleDeclaration.prototype, bo = _o.setProperty;
            vo.setAttribute = function(t, e) {
                yo.call(this, t, e + "");
            }, vo.setAttributeNS = function(t, e, n) {
                xo.call(this, t, e, n + "");
            }, _o.setProperty = function(t, e, n) {
                bo.call(this, t, e + "", n);
            };
        }
        fo.ascending = s, fo.descending = function(t, e) {
            return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;
        }, fo.min = function(t, e) {
            var n, i, r = -1, a = t.length;
            if (1 === arguments.length) {
                for (;++r < a; ) if (null != (i = t[r]) && i >= i) {
                    n = i;
                    break;
                }
                for (;++r < a; ) null != (i = t[r]) && n > i && (n = i);
            } else {
                for (;++r < a; ) if (null != (i = e.call(t, t[r], r)) && i >= i) {
                    n = i;
                    break;
                }
                for (;++r < a; ) null != (i = e.call(t, t[r], r)) && n > i && (n = i);
            }
            return n;
        }, fo.max = function(t, e) {
            var n, i, r = -1, a = t.length;
            if (1 === arguments.length) {
                for (;++r < a; ) if (null != (i = t[r]) && i >= i) {
                    n = i;
                    break;
                }
                for (;++r < a; ) null != (i = t[r]) && i > n && (n = i);
            } else {
                for (;++r < a; ) if (null != (i = e.call(t, t[r], r)) && i >= i) {
                    n = i;
                    break;
                }
                for (;++r < a; ) null != (i = e.call(t, t[r], r)) && i > n && (n = i);
            }
            return n;
        }, fo.extent = function(t, e) {
            var n, i, r, a = -1, o = t.length;
            if (1 === arguments.length) {
                for (;++a < o; ) if (null != (i = t[a]) && i >= i) {
                    n = r = i;
                    break;
                }
                for (;++a < o; ) null != (i = t[a]) && (n > i && (n = i), r < i && (r = i));
            } else {
                for (;++a < o; ) if (null != (i = e.call(t, t[a], a)) && i >= i) {
                    n = r = i;
                    break;
                }
                for (;++a < o; ) null != (i = e.call(t, t[a], a)) && (n > i && (n = i), r < i && (r = i));
            }
            return [ n, r ];
        }, fo.sum = function(t, e) {
            var n, i = 0, r = t.length, a = -1;
            if (1 === arguments.length) for (;++a < r; ) l(n = +t[a]) && (i += n); else for (;++a < r; ) l(n = +e.call(t, t[a], a)) && (i += n);
            return i;
        }, fo.mean = function(t, e) {
            var n, i = 0, r = t.length, a = -1, o = r;
            if (1 === arguments.length) for (;++a < r; ) l(n = c(t[a])) ? i += n : --o; else for (;++a < r; ) l(n = c(e.call(t, t[a], a))) ? i += n : --o;
            if (o) return i / o;
        }, fo.quantile = function(t, e) {
            var n = (t.length - 1) * e + 1, i = Math.floor(n), r = +t[i - 1], a = n - i;
            return a ? r + a * (t[i] - r) : r;
        }, fo.median = function(t, e) {
            var n, i = [], r = t.length, a = -1;
            if (1 === arguments.length) for (;++a < r; ) l(n = c(t[a])) && i.push(n); else for (;++a < r; ) l(n = c(e.call(t, t[a], a))) && i.push(n);
            if (i.length) return fo.quantile(i.sort(s), .5);
        }, fo.variance = function(t, e) {
            var n, i, r = t.length, a = 0, o = 0, s = -1, u = 0;
            if (1 === arguments.length) for (;++s < r; ) l(n = c(t[s])) && (i = n - a, a += i / ++u, 
            o += i * (n - a)); else for (;++s < r; ) l(n = c(e.call(t, t[s], s))) && (i = n - a, 
            a += i / ++u, o += i * (n - a));
            if (u > 1) return o / (u - 1);
        }, fo.deviation = function() {
            var t = fo.variance.apply(this, arguments);
            return t ? Math.sqrt(t) : t;
        };
        var wo = u(s);
        fo.bisectLeft = wo.left, fo.bisect = fo.bisectRight = wo.right, fo.bisector = function(t) {
            return u(1 === t.length ? function(e, n) {
                return s(t(e), n);
            } : t);
        }, fo.shuffle = function(t, e, n) {
            (a = arguments.length) < 3 && (n = t.length, a < 2 && (e = 0));
            for (var i, r, a = n - e; a; ) r = Math.random() * a-- | 0, i = t[a + e], t[a + e] = t[r + e], 
            t[r + e] = i;
            return t;
        }, fo.permute = function(t, e) {
            for (var n = e.length, i = new Array(n); n--; ) i[n] = t[e[n]];
            return i;
        }, fo.pairs = function(t) {
            for (var e, n = 0, i = t.length - 1, r = t[0], a = new Array(i < 0 ? 0 : i); n < i; ) a[n] = [ e = r, r = t[++n] ];
            return a;
        }, fo.transpose = function(t) {
            if (!(r = t.length)) return [];
            for (var e = -1, n = fo.min(t, d), i = new Array(n); ++e < n; ) for (var r, a = -1, o = i[e] = new Array(r); ++a < r; ) o[a] = t[a][e];
            return i;
        }, fo.zip = function() {
            return fo.transpose(arguments);
        }, fo.keys = function(t) {
            var e = [];
            for (var n in t) e.push(n);
            return e;
        }, fo.values = function(t) {
            var e = [];
            for (var n in t) e.push(t[n]);
            return e;
        }, fo.entries = function(t) {
            var e = [];
            for (var n in t) e.push({
                key: n,
                value: t[n]
            });
            return e;
        }, fo.merge = function(t) {
            for (var e, n, i, r = t.length, a = -1, o = 0; ++a < r; ) o += t[a].length;
            for (n = new Array(o); --r >= 0; ) for (i = t[r], e = i.length; --e >= 0; ) n[--o] = i[e];
            return n;
        };
        var So = Math.abs;
        fo.range = function(t, e, n) {
            if (arguments.length < 3 && (n = 1, arguments.length < 2 && (e = t, t = 0)), (e - t) / n === 1 / 0) throw new Error("infinite range");
            var i, r = [], a = h(So(n)), o = -1;
            if (t *= a, e *= a, n *= a, n < 0) for (;(i = t + n * ++o) > e; ) r.push(i / a); else for (;(i = t + n * ++o) < e; ) r.push(i / a);
            return r;
        }, fo.map = function(t, e) {
            var n = new p();
            if (t instanceof p) t.forEach(function(t, e) {
                n.set(t, e);
            }); else if (Array.isArray(t)) {
                var i, r = -1, a = t.length;
                if (1 === arguments.length) for (;++r < a; ) n.set(r, t[r]); else for (;++r < a; ) n.set(e.call(t, i = t[r], r), i);
            } else for (var o in t) n.set(o, t[o]);
            return n;
        };
        var To = "__proto__", Eo = "\0";
        f(p, {
            has: v,
            get: function(t) {
                return this._[g(t)];
            },
            set: function(t, e) {
                return this._[g(t)] = e;
            },
            remove: y,
            keys: x,
            values: function() {
                var t = [];
                for (var e in this._) t.push(this._[e]);
                return t;
            },
            entries: function() {
                var t = [];
                for (var e in this._) t.push({
                    key: m(e),
                    value: this._[e]
                });
                return t;
            },
            size: _,
            empty: b,
            forEach: function(t) {
                for (var e in this._) t.call(this, m(e), this._[e]);
            }
        }), fo.nest = function() {
            function t(e, o, s) {
                if (s >= a.length) return i ? i.call(r, o) : n ? o.sort(n) : o;
                for (var c, l, u, d, h = -1, f = o.length, g = a[s++], m = new p(); ++h < f; ) (d = m.get(c = g(l = o[h]))) ? d.push(l) : m.set(c, [ l ]);
                return e ? (l = e(), u = function(n, i) {
                    l.set(n, t(e, i, s));
                }) : (l = {}, u = function(n, i) {
                    l[n] = t(e, i, s);
                }), m.forEach(u), l;
            }
            function e(t, n) {
                if (n >= a.length) return t;
                var i = [], r = o[n++];
                return t.forEach(function(t, r) {
                    i.push({
                        key: t,
                        values: e(r, n)
                    });
                }), r ? i.sort(function(t, e) {
                    return r(t.key, e.key);
                }) : i;
            }
            var n, i, r = {}, a = [], o = [];
            return r.map = function(e, n) {
                return t(n, e, 0);
            }, r.entries = function(n) {
                return e(t(fo.map, n, 0), 0);
            }, r.key = function(t) {
                return a.push(t), r;
            }, r.sortKeys = function(t) {
                return o[a.length - 1] = t, r;
            }, r.sortValues = function(t) {
                return n = t, r;
            }, r.rollup = function(t) {
                return i = t, r;
            }, r;
        }, fo.set = function(t) {
            var e = new w();
            if (t) for (var n = 0, i = t.length; n < i; ++n) e.add(t[n]);
            return e;
        }, f(w, {
            has: v,
            add: function(t) {
                return this._[g(t += "")] = !0, t;
            },
            remove: y,
            values: x,
            size: _,
            empty: b,
            forEach: function(t) {
                for (var e in this._) t.call(this, m(e));
            }
        }), fo.behavior = {}, fo.rebind = function(t, e) {
            for (var n, i = 1, r = arguments.length; ++i < r; ) t[n = arguments[i]] = T(t, e, e[n]);
            return t;
        };
        var Ao = [ "webkit", "ms", "moz", "Moz", "o", "O" ];
        fo.dispatch = function() {
            for (var t = new C(), e = -1, n = arguments.length; ++e < n; ) t[arguments[e]] = P(t);
            return t;
        }, C.prototype.on = function(t, e) {
            var n = t.indexOf("."), i = "";
            if (n >= 0 && (i = t.slice(n + 1), t = t.slice(0, n)), t) return arguments.length < 2 ? this[t].on(i) : this[t].on(i, e);
            if (2 === arguments.length) {
                if (null == e) for (t in this) this.hasOwnProperty(t) && this[t].on(i, null);
                return this;
            }
        }, fo.event = null, fo.requote = function(t) {
            return t.replace(Co, "\\$&");
        };
        var Co = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g, Po = {}.__proto__ ? function(t, e) {
            t.__proto__ = e;
        } : function(t, e) {
            for (var n in e) t[n] = e[n];
        }, ko = function(t, e) {
            return e.querySelector(t);
        }, Mo = function(t, e) {
            return e.querySelectorAll(t);
        }, Oo = function(t, e) {
            var n = t.matches || t[E(t, "matchesSelector")];
            return (Oo = function(t, e) {
                return n.call(t, e);
            })(t, e);
        };
        "function" == typeof Sizzle && (ko = function(t, e) {
            return Sizzle(t, e)[0] || null;
        }, Mo = Sizzle, Oo = Sizzle.matchesSelector), fo.selection = function() {
            return fo.select(mo.documentElement);
        };
        var No = fo.selection.prototype = [];
        No.select = function(t) {
            var e, n, i, r, a = [];
            t = V(t);
            for (var o = -1, s = this.length; ++o < s; ) {
                a.push(e = []), e.parentNode = (i = this[o]).parentNode;
                for (var c = -1, l = i.length; ++c < l; ) (r = i[c]) ? (e.push(n = t.call(r, r.__data__, c, o)), 
                n && "__data__" in r && (n.__data__ = r.__data__)) : e.push(null);
            }
            return N(a);
        }, No.selectAll = function(t) {
            var e, n, i = [];
            t = L(t);
            for (var r = -1, a = this.length; ++r < a; ) for (var o = this[r], s = -1, c = o.length; ++s < c; ) (n = o[s]) && (i.push(e = go(t.call(n, n.__data__, s, r))), 
            e.parentNode = n);
            return N(i);
        };
        var Vo = "http://www.w3.org/1999/xhtml", Lo = {
            svg: "http://www.w3.org/2000/svg",
            xhtml: Vo,
            xlink: "http://www.w3.org/1999/xlink",
            xml: "http://www.w3.org/XML/1998/namespace",
            xmlns: "http://www.w3.org/2000/xmlns/"
        };
        fo.ns = {
            prefix: Lo,
            qualify: function(t) {
                var e = t.indexOf(":"), n = t;
                return e >= 0 && "xmlns" !== (n = t.slice(0, e)) && (t = t.slice(e + 1)), Lo.hasOwnProperty(n) ? {
                    space: Lo[n],
                    local: t
                } : t;
            }
        }, No.attr = function(t, e) {
            if (arguments.length < 2) {
                if ("string" == typeof t) {
                    var n = this.node();
                    return t = fo.ns.qualify(t), t.local ? n.getAttributeNS(t.space, t.local) : n.getAttribute(t);
                }
                for (e in t) this.each(R(e, t[e]));
                return this;
            }
            return this.each(R(t, e));
        }, No.classed = function(t, e) {
            if (arguments.length < 2) {
                if ("string" == typeof t) {
                    var n = this.node(), i = (t = G(t)).length, r = -1;
                    if (e = n.classList) {
                        for (;++r < i; ) if (!e.contains(t[r])) return !1;
                    } else for (e = n.getAttribute("class"); ++r < i; ) if (!D(t[r]).test(e)) return !1;
                    return !0;
                }
                for (e in t) this.each(F(e, t[e]));
                return this;
            }
            return this.each(F(t, e));
        }, No.style = function(t, e, n) {
            var i = arguments.length;
            if (i < 3) {
                if ("string" != typeof t) {
                    i < 2 && (e = "");
                    for (n in t) this.each(H(n, t[n], e));
                    return this;
                }
                if (i < 2) {
                    var r = this.node();
                    return o(r).getComputedStyle(r, null).getPropertyValue(t);
                }
                n = "";
            }
            return this.each(H(t, e, n));
        }, No.property = function(t, e) {
            if (arguments.length < 2) {
                if ("string" == typeof t) return this.node()[t];
                for (e in t) this.each(U(e, t[e]));
                return this;
            }
            return this.each(U(t, e));
        }, No.text = function(t) {
            return arguments.length ? this.each("function" == typeof t ? function() {
                var e = t.apply(this, arguments);
                this.textContent = null == e ? "" : e;
            } : null == t ? function() {
                this.textContent = "";
            } : function() {
                this.textContent = t;
            }) : this.node().textContent;
        }, No.html = function(t) {
            return arguments.length ? this.each("function" == typeof t ? function() {
                var e = t.apply(this, arguments);
                this.innerHTML = null == e ? "" : e;
            } : null == t ? function() {
                this.innerHTML = "";
            } : function() {
                this.innerHTML = t;
            }) : this.node().innerHTML;
        }, No.append = function(t) {
            return t = z(t), this.select(function() {
                return this.appendChild(t.apply(this, arguments));
            });
        }, No.insert = function(t, e) {
            return t = z(t), e = V(e), this.select(function() {
                return this.insertBefore(t.apply(this, arguments), e.apply(this, arguments) || null);
            });
        }, No.remove = function() {
            return this.each(B);
        }, No.data = function(t, e) {
            function n(t, n) {
                var i, r, a, o = t.length, u = n.length, d = Math.min(o, u), h = new Array(u), f = new Array(u), g = new Array(o);
                if (e) {
                    var m, v = new p(), y = new Array(o);
                    for (i = -1; ++i < o; ) (r = t[i]) && (v.has(m = e.call(r, r.__data__, i)) ? g[i] = r : v.set(m, r), 
                    y[i] = m);
                    for (i = -1; ++i < u; ) (r = v.get(m = e.call(n, a = n[i], i))) ? r !== !0 && (h[i] = r, 
                    r.__data__ = a) : f[i] = X(a), v.set(m, !0);
                    for (i = -1; ++i < o; ) i in y && v.get(y[i]) !== !0 && (g[i] = t[i]);
                } else {
                    for (i = -1; ++i < d; ) r = t[i], a = n[i], r ? (r.__data__ = a, h[i] = r) : f[i] = X(a);
                    for (;i < u; ++i) f[i] = X(n[i]);
                    for (;i < o; ++i) g[i] = t[i];
                }
                f.update = h, f.parentNode = h.parentNode = g.parentNode = t.parentNode, s.push(f), 
                c.push(h), l.push(g);
            }
            var i, r, a = -1, o = this.length;
            if (!arguments.length) {
                for (t = new Array(o = (i = this[0]).length); ++a < o; ) (r = i[a]) && (t[a] = r.__data__);
                return t;
            }
            var s = K([]), c = N([]), l = N([]);
            if ("function" == typeof t) for (;++a < o; ) n(i = this[a], t.call(i, i.parentNode.__data__, a)); else for (;++a < o; ) n(i = this[a], t);
            return c.enter = function() {
                return s;
            }, c.exit = function() {
                return l;
            }, c;
        }, No.datum = function(t) {
            return arguments.length ? this.property("__data__", t) : this.property("__data__");
        }, No.filter = function(t) {
            var e, n, i, r = [];
            "function" != typeof t && (t = Y(t));
            for (var a = 0, o = this.length; a < o; a++) {
                r.push(e = []), e.parentNode = (n = this[a]).parentNode;
                for (var s = 0, c = n.length; s < c; s++) (i = n[s]) && t.call(i, i.__data__, s, a) && e.push(i);
            }
            return N(r);
        }, No.order = function() {
            for (var t = -1, e = this.length; ++t < e; ) for (var n, i = this[t], r = i.length - 1, a = i[r]; --r >= 0; ) (n = i[r]) && (a && a !== n.nextSibling && a.parentNode.insertBefore(n, a), 
            a = n);
            return this;
        }, No.sort = function(t) {
            t = q.apply(this, arguments);
            for (var e = -1, n = this.length; ++e < n; ) this[e].sort(t);
            return this.order();
        }, No.each = function(t) {
            return W(this, function(e, n, i) {
                t.call(e, e.__data__, n, i);
            });
        }, No.call = function(t) {
            var e = go(arguments);
            return t.apply(e[0] = this, e), this;
        }, No.empty = function() {
            return !this.node();
        }, No.node = function() {
            for (var t = 0, e = this.length; t < e; t++) for (var n = this[t], i = 0, r = n.length; i < r; i++) {
                var a = n[i];
                if (a) return a;
            }
            return null;
        }, No.size = function() {
            var t = 0;
            return W(this, function() {
                ++t;
            }), t;
        };
        var Ro = [];
        fo.selection.enter = K, fo.selection.enter.prototype = Ro, Ro.append = No.append, 
        Ro.empty = No.empty, Ro.node = No.node, Ro.call = No.call, Ro.size = No.size, Ro.select = function(t) {
            for (var e, n, i, r, a, o = [], s = -1, c = this.length; ++s < c; ) {
                i = (r = this[s]).update, o.push(e = []), e.parentNode = r.parentNode;
                for (var l = -1, u = r.length; ++l < u; ) (a = r[l]) ? (e.push(i[l] = n = t.call(r.parentNode, a.__data__, l, s)), 
                n.__data__ = a.__data__) : e.push(null);
            }
            return N(o);
        }, Ro.insert = function(t, e) {
            return arguments.length < 2 && (e = Q(this)), No.insert.call(this, t, e);
        }, fo.select = function(t) {
            var e;
            return "string" == typeof t ? (e = [ ko(t, mo) ], e.parentNode = mo.documentElement) : (e = [ t ], 
            e.parentNode = a(t)), N([ e ]);
        }, fo.selectAll = function(t) {
            var e;
            return "string" == typeof t ? (e = go(Mo(t, mo)), e.parentNode = mo.documentElement) : (e = go(t), 
            e.parentNode = null), N([ e ]);
        }, No.on = function(t, e, n) {
            var i = arguments.length;
            if (i < 3) {
                if ("string" != typeof t) {
                    i < 2 && (e = !1);
                    for (n in t) this.each(J(n, t[n], e));
                    return this;
                }
                if (i < 2) return (i = this.node()["__on" + t]) && i._;
                n = !1;
            }
            return this.each(J(t, e, n));
        };
        var Io = fo.map({
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        });
        mo && Io.forEach(function(t) {
            "on" + t in mo && Io.remove(t);
        });
        var Do, Go = 0;
        fo.mouse = function(t) {
            return et(t, M());
        };
        var Fo = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
        fo.touch = function(t, e, n) {
            if (arguments.length < 3 && (n = e, e = M().changedTouches), e) for (var i, r = 0, a = e.length; r < a; ++r) if ((i = e[r]).identifier === n) return et(t, i);
        }, fo.behavior.drag = function() {
            function t() {
                this.on("mousedown.drag", r).on("touchstart.drag", a);
            }
            function e(t, e, r, a, o) {
                return function() {
                    function s() {
                        var t, n, i = e(h, g);
                        i && (t = i[0] - x[0], n = i[1] - x[1], p |= t | n, x = i, f({
                            type: "drag",
                            x: i[0] + l[0],
                            y: i[1] + l[1],
                            dx: t,
                            dy: n
                        }));
                    }
                    function c() {
                        e(h, g) && (v.on(a + m, null).on(o + m, null), y(p), f({
                            type: "dragend"
                        }));
                    }
                    var l, u = this, d = fo.event.target.correspondingElement || fo.event.target, h = u.parentNode, f = n.of(u, arguments), p = 0, g = t(), m = ".drag" + (null == g ? "" : "-" + g), v = fo.select(r(d)).on(a + m, s).on(o + m, c), y = tt(d), x = e(h, g);
                    i ? (l = i.apply(u, arguments), l = [ l.x - x[0], l.y - x[1] ]) : l = [ 0, 0 ], 
                    f({
                        type: "dragstart"
                    });
                };
            }
            var n = O(t, "drag", "dragstart", "dragend"), i = null, r = e(A, fo.mouse, o, "mousemove", "mouseup"), a = e(nt, fo.touch, S, "touchmove", "touchend");
            return t.origin = function(e) {
                return arguments.length ? (i = e, t) : i;
            }, fo.rebind(t, n, "on");
        }, fo.touches = function(t, e) {
            return arguments.length < 2 && (e = M().touches), e ? go(e).map(function(e) {
                var n = et(t, e);
                return n.identifier = e.identifier, n;
            }) : [];
        };
        var jo = 1e-6, Ho = jo * jo, Uo = Math.PI, zo = 2 * Uo, Bo = zo - jo, Xo = Uo / 2, Yo = Uo / 180, qo = 180 / Uo, Wo = Math.SQRT2, Ko = 2, Qo = 4;
        fo.interpolateZoom = function(t, e) {
            var n, i, r = t[0], a = t[1], o = t[2], s = e[0], c = e[1], l = e[2], u = s - r, d = c - a, h = u * u + d * d;
            if (h < Ho) i = Math.log(l / o) / Wo, n = function(t) {
                return [ r + t * u, a + t * d, o * Math.exp(Wo * t * i) ];
            }; else {
                var f = Math.sqrt(h), p = (l * l - o * o + Qo * h) / (2 * o * Ko * f), g = (l * l - o * o - Qo * h) / (2 * l * Ko * f), m = Math.log(Math.sqrt(p * p + 1) - p), v = Math.log(Math.sqrt(g * g + 1) - g);
                i = (v - m) / Wo, n = function(t) {
                    var e = t * i, n = ct(m), s = o / (Ko * f) * (n * lt(Wo * e + m) - st(m));
                    return [ r + s * u, a + s * d, o * n / ct(Wo * e + m) ];
                };
            }
            return n.duration = 1e3 * i, n;
        }, fo.behavior.zoom = function() {
            function t(t) {
                t.on(M, d).on($o + ".zoom", f).on("dblclick.zoom", p).on(L, h);
            }
            function e(t) {
                return [ (t[0] - T.x) / T.k, (t[1] - T.y) / T.k ];
            }
            function n(t) {
                return [ t[0] * T.k + T.x, t[1] * T.k + T.y ];
            }
            function i(t) {
                T.k = Math.max(A[0], Math.min(A[1], t));
            }
            function r(t, e) {
                e = n(e), T.x += t[0] - e[0], T.y += t[1] - e[1];
            }
            function a(e, n, a, o) {
                e.__chart__ = {
                    x: T.x,
                    y: T.y,
                    k: T.k
                }, i(Math.pow(2, o)), r(m = n, a), e = fo.select(e), C > 0 && (e = e.transition().duration(C)), 
                e.call(t.event);
            }
            function s() {
                b && b.domain(_.range().map(function(t) {
                    return (t - T.x) / T.k;
                }).map(_.invert)), S && S.domain(w.range().map(function(t) {
                    return (t - T.y) / T.k;
                }).map(w.invert));
            }
            function c(t) {
                P++ || t({
                    type: "zoomstart"
                });
            }
            function l(t) {
                s(), t({
                    type: "zoom",
                    scale: T.k,
                    translate: [ T.x, T.y ]
                });
            }
            function u(t) {
                --P || (t({
                    type: "zoomend"
                }), m = null);
            }
            function d() {
                function t() {
                    s = 1, r(fo.mouse(i), h), l(a);
                }
                function n() {
                    d.on(N, null).on(V, null), f(s), u(a);
                }
                var i = this, a = R.of(i, arguments), s = 0, d = fo.select(o(i)).on(N, t).on(V, n), h = e(fo.mouse(i)), f = tt(i);
                Xc.call(i), c(a);
            }
            function h() {
                function t() {
                    var t = fo.touches(p);
                    return f = T.k, t.forEach(function(t) {
                        t.identifier in m && (m[t.identifier] = e(t));
                    }), t;
                }
                function n() {
                    var e = fo.event.target;
                    fo.select(e).on(_, o).on(b, s), w.push(e);
                    for (var n = fo.event.changedTouches, i = 0, r = n.length; i < r; ++i) m[n[i].identifier] = null;
                    var c = t(), l = Date.now();
                    if (1 === c.length) {
                        if (l - x < 500) {
                            var u = c[0];
                            a(p, u, m[u.identifier], Math.floor(Math.log(T.k) / Math.LN2) + 1), k();
                        }
                        x = l;
                    } else if (c.length > 1) {
                        var u = c[0], d = c[1], h = u[0] - d[0], f = u[1] - d[1];
                        v = h * h + f * f;
                    }
                }
                function o() {
                    var t, e, n, a, o = fo.touches(p);
                    Xc.call(p);
                    for (var s = 0, c = o.length; s < c; ++s, a = null) if (n = o[s], a = m[n.identifier]) {
                        if (e) break;
                        t = n, e = a;
                    }
                    if (a) {
                        var u = (u = n[0] - t[0]) * u + (u = n[1] - t[1]) * u, d = v && Math.sqrt(u / v);
                        t = [ (t[0] + n[0]) / 2, (t[1] + n[1]) / 2 ], e = [ (e[0] + a[0]) / 2, (e[1] + a[1]) / 2 ], 
                        i(d * f);
                    }
                    x = null, r(t, e), l(g);
                }
                function s() {
                    if (fo.event.touches.length) {
                        for (var e = fo.event.changedTouches, n = 0, i = e.length; n < i; ++n) delete m[e[n].identifier];
                        for (var r in m) return void t();
                    }
                    fo.selectAll(w).on(y, null), S.on(M, d).on(L, h), E(), u(g);
                }
                var f, p = this, g = R.of(p, arguments), m = {}, v = 0, y = ".zoom-" + fo.event.changedTouches[0].identifier, _ = "touchmove" + y, b = "touchend" + y, w = [], S = fo.select(p), E = tt(p);
                n(), c(g), S.on(M, null).on(L, n);
            }
            function f() {
                var t = R.of(this, arguments);
                y ? clearTimeout(y) : (Xc.call(this), g = e(m = v || fo.mouse(this)), c(t)), y = setTimeout(function() {
                    y = null, u(t);
                }, 50), k(), i(Math.pow(2, .002 * Jo()) * T.k), r(m, g), l(t);
            }
            function p() {
                var t = fo.mouse(this), n = Math.log(T.k) / Math.LN2;
                a(this, t, e(t), fo.event.shiftKey ? Math.ceil(n) - 1 : Math.floor(n) + 1);
            }
            var g, m, v, y, x, _, b, w, S, T = {
                x: 0,
                y: 0,
                k: 1
            }, E = [ 960, 500 ], A = Zo, C = 250, P = 0, M = "mousedown.zoom", N = "mousemove.zoom", V = "mouseup.zoom", L = "touchstart.zoom", R = O(t, "zoomstart", "zoom", "zoomend");
            return $o || ($o = "onwheel" in mo ? (Jo = function() {
                return -fo.event.deltaY * (fo.event.deltaMode ? 120 : 1);
            }, "wheel") : "onmousewheel" in mo ? (Jo = function() {
                return fo.event.wheelDelta;
            }, "mousewheel") : (Jo = function() {
                return -fo.event.detail;
            }, "MozMousePixelScroll")), t.event = function(t) {
                t.each(function() {
                    var t = R.of(this, arguments), e = T;
                    zc ? fo.select(this).transition().each("start.zoom", function() {
                        T = this.__chart__ || {
                            x: 0,
                            y: 0,
                            k: 1
                        }, c(t);
                    }).tween("zoom:zoom", function() {
                        var n = E[0], i = E[1], r = m ? m[0] : n / 2, a = m ? m[1] : i / 2, o = fo.interpolateZoom([ (r - T.x) / T.k, (a - T.y) / T.k, n / T.k ], [ (r - e.x) / e.k, (a - e.y) / e.k, n / e.k ]);
                        return function(e) {
                            var i = o(e), s = n / i[2];
                            this.__chart__ = T = {
                                x: r - i[0] * s,
                                y: a - i[1] * s,
                                k: s
                            }, l(t);
                        };
                    }).each("interrupt.zoom", function() {
                        u(t);
                    }).each("end.zoom", function() {
                        u(t);
                    }) : (this.__chart__ = T, c(t), l(t), u(t));
                });
            }, t.translate = function(e) {
                return arguments.length ? (T = {
                    x: +e[0],
                    y: +e[1],
                    k: T.k
                }, s(), t) : [ T.x, T.y ];
            }, t.scale = function(e) {
                return arguments.length ? (T = {
                    x: T.x,
                    y: T.y,
                    k: null
                }, i(+e), s(), t) : T.k;
            }, t.scaleExtent = function(e) {
                return arguments.length ? (A = null == e ? Zo : [ +e[0], +e[1] ], t) : A;
            }, t.center = function(e) {
                return arguments.length ? (v = e && [ +e[0], +e[1] ], t) : v;
            }, t.size = function(e) {
                return arguments.length ? (E = e && [ +e[0], +e[1] ], t) : E;
            }, t.duration = function(e) {
                return arguments.length ? (C = +e, t) : C;
            }, t.x = function(e) {
                return arguments.length ? (b = e, _ = e.copy(), T = {
                    x: 0,
                    y: 0,
                    k: 1
                }, t) : b;
            }, t.y = function(e) {
                return arguments.length ? (S = e, w = e.copy(), T = {
                    x: 0,
                    y: 0,
                    k: 1
                }, t) : S;
            }, fo.rebind(t, R, "on");
        };
        var Jo, $o, Zo = [ 0, 1 / 0 ];
        fo.color = dt, dt.prototype.toString = function() {
            return this.rgb() + "";
        }, fo.hsl = ht;
        var ts = ht.prototype = new dt();
        ts.brighter = function(t) {
            return t = Math.pow(.7, arguments.length ? t : 1), new ht(this.h, this.s, this.l / t);
        }, ts.darker = function(t) {
            return t = Math.pow(.7, arguments.length ? t : 1), new ht(this.h, this.s, t * this.l);
        }, ts.rgb = function() {
            return ft(this.h, this.s, this.l);
        }, fo.hcl = pt;
        var es = pt.prototype = new dt();
        es.brighter = function(t) {
            return new pt(this.h, this.c, Math.min(100, this.l + ns * (arguments.length ? t : 1)));
        }, es.darker = function(t) {
            return new pt(this.h, this.c, Math.max(0, this.l - ns * (arguments.length ? t : 1)));
        }, es.rgb = function() {
            return gt(this.h, this.c, this.l).rgb();
        }, fo.lab = mt;
        var ns = 18, is = .95047, rs = 1, as = 1.08883, os = mt.prototype = new dt();
        os.brighter = function(t) {
            return new mt(Math.min(100, this.l + ns * (arguments.length ? t : 1)), this.a, this.b);
        }, os.darker = function(t) {
            return new mt(Math.max(0, this.l - ns * (arguments.length ? t : 1)), this.a, this.b);
        }, os.rgb = function() {
            return vt(this.l, this.a, this.b);
        }, fo.rgb = wt;
        var ss = wt.prototype = new dt();
        ss.brighter = function(t) {
            t = Math.pow(.7, arguments.length ? t : 1);
            var e = this.r, n = this.g, i = this.b, r = 30;
            return e || n || i ? (e && e < r && (e = r), n && n < r && (n = r), i && i < r && (i = r), 
            new wt(Math.min(255, e / t), Math.min(255, n / t), Math.min(255, i / t))) : new wt(r, r, r);
        }, ss.darker = function(t) {
            return t = Math.pow(.7, arguments.length ? t : 1), new wt(t * this.r, t * this.g, t * this.b);
        }, ss.hsl = function() {
            return Ct(this.r, this.g, this.b);
        }, ss.toString = function() {
            return "#" + Et(this.r) + Et(this.g) + Et(this.b);
        };
        var cs = fo.map({
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            rebeccapurple: 6697881,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        });
        cs.forEach(function(t, e) {
            cs.set(t, St(e));
        }), fo.functor = Ot, fo.xhr = Nt(S), fo.dsv = function(t, e) {
            function n(t, n, a) {
                arguments.length < 3 && (a = n, n = null);
                var o = Vt(t, e, null == n ? i : r(n), a);
                return o.row = function(t) {
                    return arguments.length ? o.response(null == (n = t) ? i : r(t)) : n;
                }, o;
            }
            function i(t) {
                return n.parse(t.responseText);
            }
            function r(t) {
                return function(e) {
                    return n.parse(e.responseText, t);
                };
            }
            function a(e) {
                return e.map(o).join(t);
            }
            function o(t) {
                return s.test(t) ? '"' + t.replace(/\"/g, '""') + '"' : t;
            }
            var s = new RegExp('["' + t + "\n]"), c = t.charCodeAt(0);
            return n.parse = function(t, e) {
                var i;
                return n.parseRows(t, function(t, n) {
                    if (i) return i(t, n - 1);
                    var r = new Function("d", "return {" + t.map(function(t, e) {
                        return JSON.stringify(t) + ": d[" + e + "]";
                    }).join(",") + "}");
                    i = e ? function(t, n) {
                        return e(r(t), n);
                    } : r;
                });
            }, n.parseRows = function(t, e) {
                function n() {
                    if (u >= l) return o;
                    if (r) return r = !1, a;
                    var e = u;
                    if (34 === t.charCodeAt(e)) {
                        for (var n = e; n++ < l; ) if (34 === t.charCodeAt(n)) {
                            if (34 !== t.charCodeAt(n + 1)) break;
                            ++n;
                        }
                        u = n + 2;
                        var i = t.charCodeAt(n + 1);
                        return 13 === i ? (r = !0, 10 === t.charCodeAt(n + 2) && ++u) : 10 === i && (r = !0), 
                        t.slice(e + 1, n).replace(/""/g, '"');
                    }
                    for (;u < l; ) {
                        var i = t.charCodeAt(u++), s = 1;
                        if (10 === i) r = !0; else if (13 === i) r = !0, 10 === t.charCodeAt(u) && (++u, 
                        ++s); else if (i !== c) continue;
                        return t.slice(e, u - s);
                    }
                    return t.slice(e);
                }
                for (var i, r, a = {}, o = {}, s = [], l = t.length, u = 0, d = 0; (i = n()) !== o; ) {
                    for (var h = []; i !== a && i !== o; ) h.push(i), i = n();
                    e && null == (h = e(h, d++)) || s.push(h);
                }
                return s;
            }, n.format = function(e) {
                if (Array.isArray(e[0])) return n.formatRows(e);
                var i = new w(), r = [];
                return e.forEach(function(t) {
                    for (var e in t) i.has(e) || r.push(i.add(e));
                }), [ r.map(o).join(t) ].concat(e.map(function(e) {
                    return r.map(function(t) {
                        return o(e[t]);
                    }).join(t);
                })).join("\n");
            }, n.formatRows = function(t) {
                return t.map(a).join("\n");
            }, n;
        }, fo.csv = fo.dsv(",", "text/csv"), fo.tsv = fo.dsv("\t", "text/tab-separated-values");
        var ls, us, ds, hs, fs = this[E(this, "requestAnimationFrame")] || function(t) {
            setTimeout(t, 17);
        };
        fo.timer = function() {
            It.apply(this, arguments);
        }, fo.timer.flush = function() {
            Gt(), Ft();
        }, fo.round = function(t, e) {
            return e ? Math.round(t * (e = Math.pow(10, e))) / e : Math.round(t);
        };
        var ps = [ "y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y" ].map(Ht);
        fo.formatPrefix = function(t, e) {
            var n = 0;
            return (t = +t) && (t < 0 && (t *= -1), e && (t = fo.round(t, jt(t, e))), n = 1 + Math.floor(1e-12 + Math.log(t) / Math.LN10), 
            n = Math.max(-24, Math.min(24, 3 * Math.floor((n - 1) / 3)))), ps[8 + n / 3];
        };
        var gs = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i, ms = fo.map({
            b: function(t) {
                return t.toString(2);
            },
            c: function(t) {
                return String.fromCharCode(t);
            },
            o: function(t) {
                return t.toString(8);
            },
            x: function(t) {
                return t.toString(16);
            },
            X: function(t) {
                return t.toString(16).toUpperCase();
            },
            g: function(t, e) {
                return t.toPrecision(e);
            },
            e: function(t, e) {
                return t.toExponential(e);
            },
            f: function(t, e) {
                return t.toFixed(e);
            },
            r: function(t, e) {
                return (t = fo.round(t, jt(t, e))).toFixed(Math.max(0, Math.min(20, jt(t * (1 + 1e-15), e))));
            }
        }), vs = fo.time = {}, ys = Date;
        Bt.prototype = {
            getDate: function() {
                return this._.getUTCDate();
            },
            getDay: function() {
                return this._.getUTCDay();
            },
            getFullYear: function() {
                return this._.getUTCFullYear();
            },
            getHours: function() {
                return this._.getUTCHours();
            },
            getMilliseconds: function() {
                return this._.getUTCMilliseconds();
            },
            getMinutes: function() {
                return this._.getUTCMinutes();
            },
            getMonth: function() {
                return this._.getUTCMonth();
            },
            getSeconds: function() {
                return this._.getUTCSeconds();
            },
            getTime: function() {
                return this._.getTime();
            },
            getTimezoneOffset: function() {
                return 0;
            },
            valueOf: function() {
                return this._.valueOf();
            },
            setDate: function() {
                xs.setUTCDate.apply(this._, arguments);
            },
            setDay: function() {
                xs.setUTCDay.apply(this._, arguments);
            },
            setFullYear: function() {
                xs.setUTCFullYear.apply(this._, arguments);
            },
            setHours: function() {
                xs.setUTCHours.apply(this._, arguments);
            },
            setMilliseconds: function() {
                xs.setUTCMilliseconds.apply(this._, arguments);
            },
            setMinutes: function() {
                xs.setUTCMinutes.apply(this._, arguments);
            },
            setMonth: function() {
                xs.setUTCMonth.apply(this._, arguments);
            },
            setSeconds: function() {
                xs.setUTCSeconds.apply(this._, arguments);
            },
            setTime: function() {
                xs.setTime.apply(this._, arguments);
            }
        };
        var xs = Date.prototype;
        vs.year = Xt(function(t) {
            return t = vs.day(t), t.setMonth(0, 1), t;
        }, function(t, e) {
            t.setFullYear(t.getFullYear() + e);
        }, function(t) {
            return t.getFullYear();
        }), vs.years = vs.year.range, vs.years.utc = vs.year.utc.range, vs.day = Xt(function(t) {
            var e = new ys(2e3, 0);
            return e.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()), e;
        }, function(t, e) {
            t.setDate(t.getDate() + e);
        }, function(t) {
            return t.getDate() - 1;
        }), vs.days = vs.day.range, vs.days.utc = vs.day.utc.range, vs.dayOfYear = function(t) {
            var e = vs.year(t);
            return Math.floor((t - e - 6e4 * (t.getTimezoneOffset() - e.getTimezoneOffset())) / 864e5);
        }, [ "sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday" ].forEach(function(t, e) {
            e = 7 - e;
            var n = vs[t] = Xt(function(t) {
                return (t = vs.day(t)).setDate(t.getDate() - (t.getDay() + e) % 7), t;
            }, function(t, e) {
                t.setDate(t.getDate() + 7 * Math.floor(e));
            }, function(t) {
                var n = vs.year(t).getDay();
                return Math.floor((vs.dayOfYear(t) + (n + e) % 7) / 7) - (n !== e);
            });
            vs[t + "s"] = n.range, vs[t + "s"].utc = n.utc.range, vs[t + "OfYear"] = function(t) {
                var n = vs.year(t).getDay();
                return Math.floor((vs.dayOfYear(t) + (n + e) % 7) / 7);
            };
        }), vs.week = vs.sunday, vs.weeks = vs.sunday.range, vs.weeks.utc = vs.sunday.utc.range, 
        vs.weekOfYear = vs.sundayOfYear;
        var _s = {
            "-": "",
            _: " ",
            "0": "0"
        }, bs = /^\s*\d+/, ws = /^%/;
        fo.locale = function(t) {
            return {
                numberFormat: Ut(t),
                timeFormat: qt(t)
            };
        };
        var Ss = fo.locale({
            decimal: ".",
            thousands: ",",
            grouping: [ 3 ],
            currency: [ "$", "" ],
            dateTime: "%a %b %e %X %Y",
            date: "%m/%d/%Y",
            time: "%H:%M:%S",
            periods: [ "AM", "PM" ],
            days: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
            shortDays: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
            months: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
            shortMonths: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ]
        });
        fo.format = Ss.numberFormat, fo.geo = {}, pe.prototype = {
            s: 0,
            t: 0,
            add: function(t) {
                ge(t, this.t, Ts), ge(Ts.s, this.s, this), this.s ? this.t += Ts.t : this.s = Ts.t;
            },
            reset: function() {
                this.s = this.t = 0;
            },
            valueOf: function() {
                return this.s;
            }
        };
        var Ts = new pe();
        fo.geo.stream = function(t, e) {
            t && Es.hasOwnProperty(t.type) ? Es[t.type](t, e) : me(t, e);
        };
        var Es = {
            Feature: function(t, e) {
                me(t.geometry, e);
            },
            FeatureCollection: function(t, e) {
                for (var n = t.features, i = -1, r = n.length; ++i < r; ) me(n[i].geometry, e);
            }
        }, As = {
            Sphere: function(t, e) {
                e.sphere();
            },
            Point: function(t, e) {
                t = t.coordinates, e.point(t[0], t[1], t[2]);
            },
            MultiPoint: function(t, e) {
                for (var n = t.coordinates, i = -1, r = n.length; ++i < r; ) t = n[i], e.point(t[0], t[1], t[2]);
            },
            LineString: function(t, e) {
                ve(t.coordinates, e, 0);
            },
            MultiLineString: function(t, e) {
                for (var n = t.coordinates, i = -1, r = n.length; ++i < r; ) ve(n[i], e, 0);
            },
            Polygon: function(t, e) {
                ye(t.coordinates, e);
            },
            MultiPolygon: function(t, e) {
                for (var n = t.coordinates, i = -1, r = n.length; ++i < r; ) ye(n[i], e);
            },
            GeometryCollection: function(t, e) {
                for (var n = t.geometries, i = -1, r = n.length; ++i < r; ) me(n[i], e);
            }
        };
        fo.geo.area = function(t) {
            return Cs = 0, fo.geo.stream(t, ks), Cs;
        };
        var Cs, Ps = new pe(), ks = {
            sphere: function() {
                Cs += 4 * Uo;
            },
            point: A,
            lineStart: A,
            lineEnd: A,
            polygonStart: function() {
                Ps.reset(), ks.lineStart = xe;
            },
            polygonEnd: function() {
                var t = 2 * Ps;
                Cs += t < 0 ? 4 * Uo + t : t, ks.lineStart = ks.lineEnd = ks.point = A;
            }
        };
        fo.geo.bounds = function() {
            function t(t, e) {
                x.push(_ = [ u = t, h = t ]), e < d && (d = e), e > f && (f = e);
            }
            function e(e, n) {
                var i = _e([ e * Yo, n * Yo ]);
                if (v) {
                    var r = we(v, i), a = [ r[1], -r[0], 0 ], o = we(a, r);
                    Ee(o), o = Ae(o);
                    var c = e - p, l = c > 0 ? 1 : -1, g = o[0] * qo * l, m = So(c) > 180;
                    if (m ^ (l * p < g && g < l * e)) {
                        var y = o[1] * qo;
                        y > f && (f = y);
                    } else if (g = (g + 360) % 360 - 180, m ^ (l * p < g && g < l * e)) {
                        var y = -o[1] * qo;
                        y < d && (d = y);
                    } else n < d && (d = n), n > f && (f = n);
                    m ? e < p ? s(u, e) > s(u, h) && (h = e) : s(e, h) > s(u, h) && (u = e) : h >= u ? (e < u && (u = e), 
                    e > h && (h = e)) : e > p ? s(u, e) > s(u, h) && (h = e) : s(e, h) > s(u, h) && (u = e);
                } else t(e, n);
                v = i, p = e;
            }
            function n() {
                b.point = e;
            }
            function i() {
                _[0] = u, _[1] = h, b.point = t, v = null;
            }
            function r(t, n) {
                if (v) {
                    var i = t - p;
                    y += So(i) > 180 ? i + (i > 0 ? 360 : -360) : i;
                } else g = t, m = n;
                ks.point(t, n), e(t, n);
            }
            function a() {
                ks.lineStart();
            }
            function o() {
                r(g, m), ks.lineEnd(), So(y) > jo && (u = -(h = 180)), _[0] = u, _[1] = h, v = null;
            }
            function s(t, e) {
                return (e -= t) < 0 ? e + 360 : e;
            }
            function c(t, e) {
                return t[0] - e[0];
            }
            function l(t, e) {
                return e[0] <= e[1] ? e[0] <= t && t <= e[1] : t < e[0] || e[1] < t;
            }
            var u, d, h, f, p, g, m, v, y, x, _, b = {
                point: t,
                lineStart: n,
                lineEnd: i,
                polygonStart: function() {
                    b.point = r, b.lineStart = a, b.lineEnd = o, y = 0, ks.polygonStart();
                },
                polygonEnd: function() {
                    ks.polygonEnd(), b.point = t, b.lineStart = n, b.lineEnd = i, Ps < 0 ? (u = -(h = 180), 
                    d = -(f = 90)) : y > jo ? f = 90 : y < -jo && (d = -90), _[0] = u, _[1] = h;
                }
            };
            return function(t) {
                f = h = -(u = d = 1 / 0), x = [], fo.geo.stream(t, b);
                var e = x.length;
                if (e) {
                    x.sort(c);
                    for (var n, i = 1, r = x[0], a = [ r ]; i < e; ++i) n = x[i], l(n[0], r) || l(n[1], r) ? (s(r[0], n[1]) > s(r[0], r[1]) && (r[1] = n[1]), 
                    s(n[0], r[1]) > s(r[0], r[1]) && (r[0] = n[0])) : a.push(r = n);
                    for (var o, n, p = -(1 / 0), e = a.length - 1, i = 0, r = a[e]; i <= e; r = n, ++i) n = a[i], 
                    (o = s(r[1], n[0])) > p && (p = o, u = n[0], h = r[1]);
                }
                return x = _ = null, u === 1 / 0 || d === 1 / 0 ? [ [ NaN, NaN ], [ NaN, NaN ] ] : [ [ u, d ], [ h, f ] ];
            };
        }(), fo.geo.centroid = function(t) {
            Ms = Os = Ns = Vs = Ls = Rs = Is = Ds = Gs = Fs = js = 0, fo.geo.stream(t, Hs);
            var e = Gs, n = Fs, i = js, r = e * e + n * n + i * i;
            return r < Ho && (e = Rs, n = Is, i = Ds, Os < jo && (e = Ns, n = Vs, i = Ls), r = e * e + n * n + i * i, 
            r < Ho) ? [ NaN, NaN ] : [ Math.atan2(n, e) * qo, ot(i / Math.sqrt(r)) * qo ];
        };
        var Ms, Os, Ns, Vs, Ls, Rs, Is, Ds, Gs, Fs, js, Hs = {
            sphere: A,
            point: Pe,
            lineStart: Me,
            lineEnd: Oe,
            polygonStart: function() {
                Hs.lineStart = Ne;
            },
            polygonEnd: function() {
                Hs.lineStart = Me;
            }
        }, Us = Ge(Le, Ue, Be, [ -Uo, -Uo / 2 ]), zs = 1e9;
        fo.geo.clipExtent = function() {
            var t, e, n, i, r, a, o = {
                stream: function(t) {
                    return r && (r.valid = !1), r = a(t), r.valid = !0, r;
                },
                extent: function(s) {
                    return arguments.length ? (a = We(t = +s[0][0], e = +s[0][1], n = +s[1][0], i = +s[1][1]), 
                    r && (r.valid = !1, r = null), o) : [ [ t, e ], [ n, i ] ];
                }
            };
            return o.extent([ [ 0, 0 ], [ 960, 500 ] ]);
        }, (fo.geo.conicEqualArea = function() {
            return Ke(Qe);
        }).raw = Qe, fo.geo.albers = function() {
            return fo.geo.conicEqualArea().rotate([ 96, 0 ]).center([ -.6, 38.7 ]).parallels([ 29.5, 45.5 ]).scale(1070);
        }, fo.geo.albersUsa = function() {
            function t(t) {
                var a = t[0], o = t[1];
                return e = null, n(a, o), e || (i(a, o), e) || r(a, o), e;
            }
            var e, n, i, r, a = fo.geo.albers(), o = fo.geo.conicEqualArea().rotate([ 154, 0 ]).center([ -2, 58.5 ]).parallels([ 55, 65 ]), s = fo.geo.conicEqualArea().rotate([ 157, 0 ]).center([ -3, 19.9 ]).parallels([ 8, 18 ]), c = {
                point: function(t, n) {
                    e = [ t, n ];
                }
            };
            return t.invert = function(t) {
                var e = a.scale(), n = a.translate(), i = (t[0] - n[0]) / e, r = (t[1] - n[1]) / e;
                return (r >= .12 && r < .234 && i >= -.425 && i < -.214 ? o : r >= .166 && r < .234 && i >= -.214 && i < -.115 ? s : a).invert(t);
            }, t.stream = function(t) {
                var e = a.stream(t), n = o.stream(t), i = s.stream(t);
                return {
                    point: function(t, r) {
                        e.point(t, r), n.point(t, r), i.point(t, r);
                    },
                    sphere: function() {
                        e.sphere(), n.sphere(), i.sphere();
                    },
                    lineStart: function() {
                        e.lineStart(), n.lineStart(), i.lineStart();
                    },
                    lineEnd: function() {
                        e.lineEnd(), n.lineEnd(), i.lineEnd();
                    },
                    polygonStart: function() {
                        e.polygonStart(), n.polygonStart(), i.polygonStart();
                    },
                    polygonEnd: function() {
                        e.polygonEnd(), n.polygonEnd(), i.polygonEnd();
                    }
                };
            }, t.precision = function(e) {
                return arguments.length ? (a.precision(e), o.precision(e), s.precision(e), t) : a.precision();
            }, t.scale = function(e) {
                return arguments.length ? (a.scale(e), o.scale(.35 * e), s.scale(e), t.translate(a.translate())) : a.scale();
            }, t.translate = function(e) {
                if (!arguments.length) return a.translate();
                var l = a.scale(), u = +e[0], d = +e[1];
                return n = a.translate(e).clipExtent([ [ u - .455 * l, d - .238 * l ], [ u + .455 * l, d + .238 * l ] ]).stream(c).point, 
                i = o.translate([ u - .307 * l, d + .201 * l ]).clipExtent([ [ u - .425 * l + jo, d + .12 * l + jo ], [ u - .214 * l - jo, d + .234 * l - jo ] ]).stream(c).point, 
                r = s.translate([ u - .205 * l, d + .212 * l ]).clipExtent([ [ u - .214 * l + jo, d + .166 * l + jo ], [ u - .115 * l - jo, d + .234 * l - jo ] ]).stream(c).point, 
                t;
            }, t.scale(1070);
        };
        var Bs, Xs, Ys, qs, Ws, Ks, Qs = {
            point: A,
            lineStart: A,
            lineEnd: A,
            polygonStart: function() {
                Xs = 0, Qs.lineStart = Je;
            },
            polygonEnd: function() {
                Qs.lineStart = Qs.lineEnd = Qs.point = A, Bs += So(Xs / 2);
            }
        }, Js = {
            point: $e,
            lineStart: A,
            lineEnd: A,
            polygonStart: A,
            polygonEnd: A
        }, $s = {
            point: en,
            lineStart: nn,
            lineEnd: rn,
            polygonStart: function() {
                $s.lineStart = an;
            },
            polygonEnd: function() {
                $s.point = en, $s.lineStart = nn, $s.lineEnd = rn;
            }
        };
        fo.geo.path = function() {
            function t(t) {
                return t && ("function" == typeof s && a.pointRadius(+s.apply(this, arguments)), 
                o && o.valid || (o = r(a)), fo.geo.stream(t, o)), a.result();
            }
            function e() {
                return o = null, t;
            }
            var n, i, r, a, o, s = 4.5;
            return t.area = function(t) {
                return Bs = 0, fo.geo.stream(t, r(Qs)), Bs;
            }, t.centroid = function(t) {
                return Ns = Vs = Ls = Rs = Is = Ds = Gs = Fs = js = 0, fo.geo.stream(t, r($s)), 
                js ? [ Gs / js, Fs / js ] : Ds ? [ Rs / Ds, Is / Ds ] : Ls ? [ Ns / Ls, Vs / Ls ] : [ NaN, NaN ];
            }, t.bounds = function(t) {
                return Ws = Ks = -(Ys = qs = 1 / 0), fo.geo.stream(t, r(Js)), [ [ Ys, qs ], [ Ws, Ks ] ];
            }, t.projection = function(t) {
                return arguments.length ? (r = (n = t) ? t.stream || cn(t) : S, e()) : n;
            }, t.context = function(t) {
                return arguments.length ? (a = null == (i = t) ? new Ze() : new on(t), "function" != typeof s && a.pointRadius(s), 
                e()) : i;
            }, t.pointRadius = function(e) {
                return arguments.length ? (s = "function" == typeof e ? e : (a.pointRadius(+e), 
                +e), t) : s;
            }, t.projection(fo.geo.albersUsa()).context(null);
        }, fo.geo.transform = function(t) {
            return {
                stream: function(e) {
                    var n = new ln(e);
                    for (var i in t) n[i] = t[i];
                    return n;
                }
            };
        }, ln.prototype = {
            point: function(t, e) {
                this.stream.point(t, e);
            },
            sphere: function() {
                this.stream.sphere();
            },
            lineStart: function() {
                this.stream.lineStart();
            },
            lineEnd: function() {
                this.stream.lineEnd();
            },
            polygonStart: function() {
                this.stream.polygonStart();
            },
            polygonEnd: function() {
                this.stream.polygonEnd();
            }
        }, fo.geo.projection = dn, fo.geo.projectionMutator = hn, (fo.geo.equirectangular = function() {
            return dn(pn);
        }).raw = pn.invert = pn, fo.geo.rotation = function(t) {
            function e(e) {
                return e = t(e[0] * Yo, e[1] * Yo), e[0] *= qo, e[1] *= qo, e;
            }
            return t = mn(t[0] % 360 * Yo, t[1] * Yo, t.length > 2 ? t[2] * Yo : 0), e.invert = function(e) {
                return e = t.invert(e[0] * Yo, e[1] * Yo), e[0] *= qo, e[1] *= qo, e;
            }, e;
        }, gn.invert = pn, fo.geo.circle = function() {
            function t() {
                var t = "function" == typeof i ? i.apply(this, arguments) : i, e = mn(-t[0] * Yo, -t[1] * Yo, 0).invert, r = [];
                return n(null, null, 1, {
                    point: function(t, n) {
                        r.push(t = e(t, n)), t[0] *= qo, t[1] *= qo;
                    }
                }), {
                    type: "Polygon",
                    coordinates: [ r ]
                };
            }
            var e, n, i = [ 0, 0 ], r = 6;
            return t.origin = function(e) {
                return arguments.length ? (i = e, t) : i;
            }, t.angle = function(i) {
                return arguments.length ? (n = _n((e = +i) * Yo, r * Yo), t) : e;
            }, t.precision = function(i) {
                return arguments.length ? (n = _n(e * Yo, (r = +i) * Yo), t) : r;
            }, t.angle(90);
        }, fo.geo.distance = function(t, e) {
            var n, i = (e[0] - t[0]) * Yo, r = t[1] * Yo, a = e[1] * Yo, o = Math.sin(i), s = Math.cos(i), c = Math.sin(r), l = Math.cos(r), u = Math.sin(a), d = Math.cos(a);
            return Math.atan2(Math.sqrt((n = d * o) * n + (n = l * u - c * d * s) * n), c * u + l * d * s);
        }, fo.geo.graticule = function() {
            function t() {
                return {
                    type: "MultiLineString",
                    coordinates: e()
                };
            }
            function e() {
                return fo.range(Math.ceil(a / m) * m, r, m).map(h).concat(fo.range(Math.ceil(l / v) * v, c, v).map(f)).concat(fo.range(Math.ceil(i / p) * p, n, p).filter(function(t) {
                    return So(t % m) > jo;
                }).map(u)).concat(fo.range(Math.ceil(s / g) * g, o, g).filter(function(t) {
                    return So(t % v) > jo;
                }).map(d));
            }
            var n, i, r, a, o, s, c, l, u, d, h, f, p = 10, g = p, m = 90, v = 360, y = 2.5;
            return t.lines = function() {
                return e().map(function(t) {
                    return {
                        type: "LineString",
                        coordinates: t
                    };
                });
            }, t.outline = function() {
                return {
                    type: "Polygon",
                    coordinates: [ h(a).concat(f(c).slice(1), h(r).reverse().slice(1), f(l).reverse().slice(1)) ]
                };
            }, t.extent = function(e) {
                return arguments.length ? t.majorExtent(e).minorExtent(e) : t.minorExtent();
            }, t.majorExtent = function(e) {
                return arguments.length ? (a = +e[0][0], r = +e[1][0], l = +e[0][1], c = +e[1][1], 
                a > r && (e = a, a = r, r = e), l > c && (e = l, l = c, c = e), t.precision(y)) : [ [ a, l ], [ r, c ] ];
            }, t.minorExtent = function(e) {
                return arguments.length ? (i = +e[0][0], n = +e[1][0], s = +e[0][1], o = +e[1][1], 
                i > n && (e = i, i = n, n = e), s > o && (e = s, s = o, o = e), t.precision(y)) : [ [ i, s ], [ n, o ] ];
            }, t.step = function(e) {
                return arguments.length ? t.majorStep(e).minorStep(e) : t.minorStep();
            }, t.majorStep = function(e) {
                return arguments.length ? (m = +e[0], v = +e[1], t) : [ m, v ];
            }, t.minorStep = function(e) {
                return arguments.length ? (p = +e[0], g = +e[1], t) : [ p, g ];
            }, t.precision = function(e) {
                return arguments.length ? (y = +e, u = wn(s, o, 90), d = Sn(i, n, y), h = wn(l, c, 90), 
                f = Sn(a, r, y), t) : y;
            }, t.majorExtent([ [ -180, -90 + jo ], [ 180, 90 - jo ] ]).minorExtent([ [ -180, -80 - jo ], [ 180, 80 + jo ] ]);
        }, fo.geo.greatArc = function() {
            function t() {
                return {
                    type: "LineString",
                    coordinates: [ e || i.apply(this, arguments), n || r.apply(this, arguments) ]
                };
            }
            var e, n, i = Tn, r = En;
            return t.distance = function() {
                return fo.geo.distance(e || i.apply(this, arguments), n || r.apply(this, arguments));
            }, t.source = function(n) {
                return arguments.length ? (i = n, e = "function" == typeof n ? null : n, t) : i;
            }, t.target = function(e) {
                return arguments.length ? (r = e, n = "function" == typeof e ? null : e, t) : r;
            }, t.precision = function() {
                return arguments.length ? t : 0;
            }, t;
        }, fo.geo.interpolate = function(t, e) {
            return An(t[0] * Yo, t[1] * Yo, e[0] * Yo, e[1] * Yo);
        }, fo.geo.length = function(t) {
            return Zs = 0, fo.geo.stream(t, tc), Zs;
        };
        var Zs, tc = {
            sphere: A,
            point: A,
            lineStart: Cn,
            lineEnd: A,
            polygonStart: A,
            polygonEnd: A
        }, ec = Pn(function(t) {
            return Math.sqrt(2 / (1 + t));
        }, function(t) {
            return 2 * Math.asin(t / 2);
        });
        (fo.geo.azimuthalEqualArea = function() {
            return dn(ec);
        }).raw = ec;
        var nc = Pn(function(t) {
            var e = Math.acos(t);
            return e && e / Math.sin(e);
        }, S);
        (fo.geo.azimuthalEquidistant = function() {
            return dn(nc);
        }).raw = nc, (fo.geo.conicConformal = function() {
            return Ke(kn);
        }).raw = kn, (fo.geo.conicEquidistant = function() {
            return Ke(Mn);
        }).raw = Mn;
        var ic = Pn(function(t) {
            return 1 / t;
        }, Math.atan);
        (fo.geo.gnomonic = function() {
            return dn(ic);
        }).raw = ic, On.invert = function(t, e) {
            return [ t, 2 * Math.atan(Math.exp(e)) - Xo ];
        }, (fo.geo.mercator = function() {
            return Nn(On);
        }).raw = On;
        var rc = Pn(function() {
            return 1;
        }, Math.asin);
        (fo.geo.orthographic = function() {
            return dn(rc);
        }).raw = rc;
        var ac = Pn(function(t) {
            return 1 / (1 + t);
        }, function(t) {
            return 2 * Math.atan(t);
        });
        (fo.geo.stereographic = function() {
            return dn(ac);
        }).raw = ac, Vn.invert = function(t, e) {
            return [ -e, 2 * Math.atan(Math.exp(t)) - Xo ];
        }, (fo.geo.transverseMercator = function() {
            var t = Nn(Vn), e = t.center, n = t.rotate;
            return t.center = function(t) {
                return t ? e([ -t[1], t[0] ]) : (t = e(), [ t[1], -t[0] ]);
            }, t.rotate = function(t) {
                return t ? n([ t[0], t[1], t.length > 2 ? t[2] + 90 : 90 ]) : (t = n(), [ t[0], t[1], t[2] - 90 ]);
            }, n([ 0, 0, 90 ]);
        }).raw = Vn, fo.geom = {}, fo.geom.hull = function(t) {
            function e(t) {
                if (t.length < 3) return [];
                var e, r = Ot(n), a = Ot(i), o = t.length, s = [], c = [];
                for (e = 0; e < o; e++) s.push([ +r.call(this, t[e], e), +a.call(this, t[e], e), e ]);
                for (s.sort(Dn), e = 0; e < o; e++) c.push([ s[e][0], -s[e][1] ]);
                var l = In(s), u = In(c), d = u[0] === l[0], h = u[u.length - 1] === l[l.length - 1], f = [];
                for (e = l.length - 1; e >= 0; --e) f.push(t[s[l[e]][2]]);
                for (e = +d; e < u.length - h; ++e) f.push(t[s[u[e]][2]]);
                return f;
            }
            var n = Ln, i = Rn;
            return arguments.length ? e(t) : (e.x = function(t) {
                return arguments.length ? (n = t, e) : n;
            }, e.y = function(t) {
                return arguments.length ? (i = t, e) : i;
            }, e);
        }, fo.geom.polygon = function(t) {
            return Po(t, oc), t;
        };
        var oc = fo.geom.polygon.prototype = [];
        oc.area = function() {
            for (var t, e = -1, n = this.length, i = this[n - 1], r = 0; ++e < n; ) t = i, i = this[e], 
            r += t[1] * i[0] - t[0] * i[1];
            return .5 * r;
        }, oc.centroid = function(t) {
            var e, n, i = -1, r = this.length, a = 0, o = 0, s = this[r - 1];
            for (arguments.length || (t = -1 / (6 * this.area())); ++i < r; ) e = s, s = this[i], 
            n = e[0] * s[1] - s[0] * e[1], a += (e[0] + s[0]) * n, o += (e[1] + s[1]) * n;
            return [ a * t, o * t ];
        }, oc.clip = function(t) {
            for (var e, n, i, r, a, o, s = jn(t), c = -1, l = this.length - jn(this), u = this[l - 1]; ++c < l; ) {
                for (e = t.slice(), t.length = 0, r = this[c], a = e[(i = e.length - s) - 1], n = -1; ++n < i; ) o = e[n], 
                Gn(o, u, r) ? (Gn(a, u, r) || t.push(Fn(a, o, u, r)), t.push(o)) : Gn(a, u, r) && t.push(Fn(a, o, u, r)), 
                a = o;
                s && t.push(t[0]), u = r;
            }
            return t;
        };
        var sc, cc, lc, uc, dc, hc = [], fc = [];
        Wn.prototype.prepare = function() {
            for (var t, e = this.edges, n = e.length; n--; ) t = e[n].edge, t.b && t.a || e.splice(n, 1);
            return e.sort(Qn), e.length;
        }, oi.prototype = {
            start: function() {
                return this.edge.l === this.site ? this.edge.a : this.edge.b;
            },
            end: function() {
                return this.edge.l === this.site ? this.edge.b : this.edge.a;
            }
        }, si.prototype = {
            insert: function(t, e) {
                var n, i, r;
                if (t) {
                    if (e.P = t, e.N = t.N, t.N && (t.N.P = e), t.N = e, t.R) {
                        for (t = t.R; t.L; ) t = t.L;
                        t.L = e;
                    } else t.R = e;
                    n = t;
                } else this._ ? (t = di(this._), e.P = null, e.N = t, t.P = t.L = e, n = t) : (e.P = e.N = null, 
                this._ = e, n = null);
                for (e.L = e.R = null, e.U = n, e.C = !0, t = e; n && n.C; ) i = n.U, n === i.L ? (r = i.R, 
                r && r.C ? (n.C = r.C = !1, i.C = !0, t = i) : (t === n.R && (li(this, n), t = n, 
                n = t.U), n.C = !1, i.C = !0, ui(this, i))) : (r = i.L, r && r.C ? (n.C = r.C = !1, 
                i.C = !0, t = i) : (t === n.L && (ui(this, n), t = n, n = t.U), n.C = !1, i.C = !0, 
                li(this, i))), n = t.U;
                this._.C = !1;
            },
            remove: function(t) {
                t.N && (t.N.P = t.P), t.P && (t.P.N = t.N), t.N = t.P = null;
                var e, n, i, r = t.U, a = t.L, o = t.R;
                if (n = a ? o ? di(o) : a : o, r ? r.L === t ? r.L = n : r.R = n : this._ = n, a && o ? (i = n.C, 
                n.C = t.C, n.L = a, a.U = n, n !== o ? (r = n.U, n.U = t.U, t = n.R, r.L = t, n.R = o, 
                o.U = n) : (n.U = r, r = n, t = n.R)) : (i = t.C, t = n), t && (t.U = r), !i) {
                    if (t && t.C) return void (t.C = !1);
                    do {
                        if (t === this._) break;
                        if (t === r.L) {
                            if (e = r.R, e.C && (e.C = !1, r.C = !0, li(this, r), e = r.R), e.L && e.L.C || e.R && e.R.C) {
                                e.R && e.R.C || (e.L.C = !1, e.C = !0, ui(this, e), e = r.R), e.C = r.C, r.C = e.R.C = !1, 
                                li(this, r), t = this._;
                                break;
                            }
                        } else if (e = r.L, e.C && (e.C = !1, r.C = !0, ui(this, r), e = r.L), e.L && e.L.C || e.R && e.R.C) {
                            e.L && e.L.C || (e.R.C = !1, e.C = !0, li(this, e), e = r.L), e.C = r.C, r.C = e.L.C = !1, 
                            ui(this, r), t = this._;
                            break;
                        }
                        e.C = !0, t = r, r = r.U;
                    } while (!t.C);
                    t && (t.C = !1);
                }
            }
        }, fo.geom.voronoi = function(t) {
            function e(t) {
                var e = new Array(t.length), i = s[0][0], r = s[0][1], a = s[1][0], o = s[1][1];
                return hi(n(t), s).cells.forEach(function(n, s) {
                    var c = n.edges, l = n.site, u = e[s] = c.length ? c.map(function(t) {
                        var e = t.start();
                        return [ e.x, e.y ];
                    }) : l.x >= i && l.x <= a && l.y >= r && l.y <= o ? [ [ i, o ], [ a, o ], [ a, r ], [ i, r ] ] : [];
                    u.point = t[s];
                }), e;
            }
            function n(t) {
                return t.map(function(t, e) {
                    return {
                        x: Math.round(a(t, e) / jo) * jo,
                        y: Math.round(o(t, e) / jo) * jo,
                        i: e
                    };
                });
            }
            var i = Ln, r = Rn, a = i, o = r, s = pc;
            return t ? e(t) : (e.links = function(t) {
                return hi(n(t)).edges.filter(function(t) {
                    return t.l && t.r;
                }).map(function(e) {
                    return {
                        source: t[e.l.i],
                        target: t[e.r.i]
                    };
                });
            }, e.triangles = function(t) {
                var e = [];
                return hi(n(t)).cells.forEach(function(n, i) {
                    for (var r, a, o = n.site, s = n.edges.sort(Qn), c = -1, l = s.length, u = s[l - 1].edge, d = u.l === o ? u.r : u.l; ++c < l; ) r = u, 
                    a = d, u = s[c].edge, d = u.l === o ? u.r : u.l, i < a.i && i < d.i && pi(o, a, d) < 0 && e.push([ t[i], t[a.i], t[d.i] ]);
                }), e;
            }, e.x = function(t) {
                return arguments.length ? (a = Ot(i = t), e) : i;
            }, e.y = function(t) {
                return arguments.length ? (o = Ot(r = t), e) : r;
            }, e.clipExtent = function(t) {
                return arguments.length ? (s = null == t ? pc : t, e) : s === pc ? null : s;
            }, e.size = function(t) {
                return arguments.length ? e.clipExtent(t && [ [ 0, 0 ], t ]) : s === pc ? null : s && s[1];
            }, e);
        };
        var pc = [ [ -1e6, -1e6 ], [ 1e6, 1e6 ] ];
        fo.geom.delaunay = function(t) {
            return fo.geom.voronoi().triangles(t);
        }, fo.geom.quadtree = function(t, e, n, i, r) {
            function a(t) {
                function a(t, e, n, i, r, a, o, s) {
                    if (!isNaN(n) && !isNaN(i)) if (t.leaf) {
                        var c = t.x, u = t.y;
                        if (null != c) if (So(c - n) + So(u - i) < .01) l(t, e, n, i, r, a, o, s); else {
                            var d = t.point;
                            t.x = t.y = t.point = null, l(t, d, c, u, r, a, o, s), l(t, e, n, i, r, a, o, s);
                        } else t.x = n, t.y = i, t.point = e;
                    } else l(t, e, n, i, r, a, o, s);
                }
                function l(t, e, n, i, r, o, s, c) {
                    var l = .5 * (r + s), u = .5 * (o + c), d = n >= l, h = i >= u, f = h << 1 | d;
                    t.leaf = !1, t = t.nodes[f] || (t.nodes[f] = vi()), d ? r = l : s = l, h ? o = u : c = u, 
                    a(t, e, n, i, r, o, s, c);
                }
                var u, d, h, f, p, g, m, v, y, x = Ot(s), _ = Ot(c);
                if (null != e) g = e, m = n, v = i, y = r; else if (v = y = -(g = m = 1 / 0), d = [], 
                h = [], p = t.length, o) for (f = 0; f < p; ++f) u = t[f], u.x < g && (g = u.x), 
                u.y < m && (m = u.y), u.x > v && (v = u.x), u.y > y && (y = u.y), d.push(u.x), h.push(u.y); else for (f = 0; f < p; ++f) {
                    var b = +x(u = t[f], f), w = +_(u, f);
                    b < g && (g = b), w < m && (m = w), b > v && (v = b), w > y && (y = w), d.push(b), 
                    h.push(w);
                }
                var S = v - g, T = y - m;
                S > T ? y = m + S : v = g + T;
                var E = vi();
                if (E.add = function(t) {
                    a(E, t, +x(t, ++f), +_(t, f), g, m, v, y);
                }, E.visit = function(t) {
                    yi(t, E, g, m, v, y);
                }, E.find = function(t) {
                    return xi(E, t[0], t[1], g, m, v, y);
                }, f = -1, null == e) {
                    for (;++f < p; ) a(E, t[f], d[f], h[f], g, m, v, y);
                    --f;
                } else t.forEach(E.add);
                return d = h = t = u = null, E;
            }
            var o, s = Ln, c = Rn;
            return (o = arguments.length) ? (s = gi, c = mi, 3 === o && (r = n, i = e, n = e = 0), 
            a(t)) : (a.x = function(t) {
                return arguments.length ? (s = t, a) : s;
            }, a.y = function(t) {
                return arguments.length ? (c = t, a) : c;
            }, a.extent = function(t) {
                return arguments.length ? (null == t ? e = n = i = r = null : (e = +t[0][0], n = +t[0][1], 
                i = +t[1][0], r = +t[1][1]), a) : null == e ? null : [ [ e, n ], [ i, r ] ];
            }, a.size = function(t) {
                return arguments.length ? (null == t ? e = n = i = r = null : (e = n = 0, i = +t[0], 
                r = +t[1]), a) : null == e ? null : [ i - e, r - n ];
            }, a);
        }, fo.interpolateRgb = _i, fo.interpolateObject = bi, fo.interpolateNumber = wi, 
        fo.interpolateString = Si;
        var gc = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, mc = new RegExp(gc.source, "g");
        fo.interpolate = Ti, fo.interpolators = [ function(t, e) {
            var n = typeof e;
            return ("string" === n ? cs.has(e.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(e) ? _i : Si : e instanceof dt ? _i : Array.isArray(e) ? Ei : "object" === n && isNaN(e) ? bi : wi)(t, e);
        } ], fo.interpolateArray = Ei;
        var vc = function() {
            return S;
        }, yc = fo.map({
            linear: vc,
            poly: Ni,
            quad: function() {
                return ki;
            },
            cubic: function() {
                return Mi;
            },
            sin: function() {
                return Vi;
            },
            exp: function() {
                return Li;
            },
            circle: function() {
                return Ri;
            },
            elastic: Ii,
            back: Di,
            bounce: function() {
                return Gi;
            }
        }), xc = fo.map({
            in: S,
            out: Ci,
            "in-out": Pi,
            "out-in": function(t) {
                return Pi(Ci(t));
            }
        });
        fo.ease = function(t) {
            var e = t.indexOf("-"), n = e >= 0 ? t.slice(0, e) : t, i = e >= 0 ? t.slice(e + 1) : "in";
            return n = yc.get(n) || vc, i = xc.get(i) || S, Ai(i(n.apply(null, po.call(arguments, 1))));
        }, fo.interpolateHcl = Fi, fo.interpolateHsl = ji, fo.interpolateLab = Hi, fo.interpolateRound = Ui, 
        fo.transform = function(t) {
            var e = mo.createElementNS(fo.ns.prefix.svg, "g");
            return (fo.transform = function(t) {
                if (null != t) {
                    e.setAttribute("transform", t);
                    var n = e.transform.baseVal.consolidate();
                }
                return new zi(n ? n.matrix : _c);
            })(t);
        }, zi.prototype.toString = function() {
            return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")";
        };
        var _c = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            e: 0,
            f: 0
        };
        fo.interpolateTransform = $i, fo.layout = {}, fo.layout.bundle = function() {
            return function(t) {
                for (var e = [], n = -1, i = t.length; ++n < i; ) e.push(er(t[n]));
                return e;
            };
        }, fo.layout.chord = function() {
            function t() {
                var t, l, d, h, f, p = {}, g = [], m = fo.range(a), v = [];
                for (n = [], i = [], t = 0, h = -1; ++h < a; ) {
                    for (l = 0, f = -1; ++f < a; ) l += r[h][f];
                    g.push(l), v.push(fo.range(a)), t += l;
                }
                for (o && m.sort(function(t, e) {
                    return o(g[t], g[e]);
                }), s && v.forEach(function(t, e) {
                    t.sort(function(t, n) {
                        return s(r[e][t], r[e][n]);
                    });
                }), t = (zo - u * a) / t, l = 0, h = -1; ++h < a; ) {
                    for (d = l, f = -1; ++f < a; ) {
                        var y = m[h], x = v[y][f], _ = r[y][x], b = l, w = l += _ * t;
                        p[y + "-" + x] = {
                            index: y,
                            subindex: x,
                            startAngle: b,
                            endAngle: w,
                            value: _
                        };
                    }
                    i[y] = {
                        index: y,
                        startAngle: d,
                        endAngle: l,
                        value: g[y]
                    }, l += u;
                }
                for (h = -1; ++h < a; ) for (f = h - 1; ++f < a; ) {
                    var S = p[h + "-" + f], T = p[f + "-" + h];
                    (S.value || T.value) && n.push(S.value < T.value ? {
                        source: T,
                        target: S
                    } : {
                        source: S,
                        target: T
                    });
                }
                c && e();
            }
            function e() {
                n.sort(function(t, e) {
                    return c((t.source.value + t.target.value) / 2, (e.source.value + e.target.value) / 2);
                });
            }
            var n, i, r, a, o, s, c, l = {}, u = 0;
            return l.matrix = function(t) {
                return arguments.length ? (a = (r = t) && r.length, n = i = null, l) : r;
            }, l.padding = function(t) {
                return arguments.length ? (u = t, n = i = null, l) : u;
            }, l.sortGroups = function(t) {
                return arguments.length ? (o = t, n = i = null, l) : o;
            }, l.sortSubgroups = function(t) {
                return arguments.length ? (s = t, n = null, l) : s;
            }, l.sortChords = function(t) {
                return arguments.length ? (c = t, n && e(), l) : c;
            }, l.chords = function() {
                return n || t(), n;
            }, l.groups = function() {
                return i || t(), i;
            }, l;
        }, fo.layout.force = function() {
            function t(t) {
                return function(e, n, i, r) {
                    if (e.point !== t) {
                        var a = e.cx - t.x, o = e.cy - t.y, s = r - n, c = a * a + o * o;
                        if (s * s / v < c) {
                            if (c < g) {
                                var l = e.charge / c;
                                t.px -= a * l, t.py -= o * l;
                            }
                            return !0;
                        }
                        if (e.point && c && c < g) {
                            var l = e.pointCharge / c;
                            t.px -= a * l, t.py -= o * l;
                        }
                    }
                    return !e.charge;
                };
            }
            function e(t) {
                t.px = fo.event.x, t.py = fo.event.y, c.resume();
            }
            var n, i, r, a, o, s, c = {}, l = fo.dispatch("start", "tick", "end"), u = [ 1, 1 ], d = .9, h = bc, f = wc, p = -30, g = Sc, m = .1, v = .64, y = [], x = [];
            return c.tick = function() {
                if ((r *= .99) < .005) return n = null, l.end({
                    type: "end",
                    alpha: r = 0
                }), !0;
                var e, i, c, h, f, g, v, _, b, w = y.length, S = x.length;
                for (i = 0; i < S; ++i) c = x[i], h = c.source, f = c.target, _ = f.x - h.x, b = f.y - h.y, 
                (g = _ * _ + b * b) && (g = r * o[i] * ((g = Math.sqrt(g)) - a[i]) / g, _ *= g, 
                b *= g, f.x -= _ * (v = h.weight + f.weight ? h.weight / (h.weight + f.weight) : .5), 
                f.y -= b * v, h.x += _ * (v = 1 - v), h.y += b * v);
                if ((v = r * m) && (_ = u[0] / 2, b = u[1] / 2, i = -1, v)) for (;++i < w; ) c = y[i], 
                c.x += (_ - c.x) * v, c.y += (b - c.y) * v;
                if (p) for (cr(e = fo.geom.quadtree(y), r, s), i = -1; ++i < w; ) (c = y[i]).fixed || e.visit(t(c));
                for (i = -1; ++i < w; ) c = y[i], c.fixed ? (c.x = c.px, c.y = c.py) : (c.x -= (c.px - (c.px = c.x)) * d, 
                c.y -= (c.py - (c.py = c.y)) * d);
                l.tick({
                    type: "tick",
                    alpha: r
                });
            }, c.nodes = function(t) {
                return arguments.length ? (y = t, c) : y;
            }, c.links = function(t) {
                return arguments.length ? (x = t, c) : x;
            }, c.size = function(t) {
                return arguments.length ? (u = t, c) : u;
            }, c.linkDistance = function(t) {
                return arguments.length ? (h = "function" == typeof t ? t : +t, c) : h;
            }, c.distance = c.linkDistance, c.linkStrength = function(t) {
                return arguments.length ? (f = "function" == typeof t ? t : +t, c) : f;
            }, c.friction = function(t) {
                return arguments.length ? (d = +t, c) : d;
            }, c.charge = function(t) {
                return arguments.length ? (p = "function" == typeof t ? t : +t, c) : p;
            }, c.chargeDistance = function(t) {
                return arguments.length ? (g = t * t, c) : Math.sqrt(g);
            }, c.gravity = function(t) {
                return arguments.length ? (m = +t, c) : m;
            }, c.theta = function(t) {
                return arguments.length ? (v = t * t, c) : Math.sqrt(v);
            }, c.alpha = function(t) {
                return arguments.length ? (t = +t, r ? t > 0 ? r = t : (n.c = null, n.t = NaN, n = null, 
                l.end({
                    type: "end",
                    alpha: r = 0
                })) : t > 0 && (l.start({
                    type: "start",
                    alpha: r = t
                }), n = It(c.tick)), c) : r;
            }, c.start = function() {
                function t(t, i) {
                    if (!n) {
                        for (n = new Array(r), c = 0; c < r; ++c) n[c] = [];
                        for (c = 0; c < l; ++c) {
                            var a = x[c];
                            n[a.source.index].push(a.target), n[a.target.index].push(a.source);
                        }
                    }
                    for (var o, s = n[e], c = -1, u = s.length; ++c < u; ) if (!isNaN(o = s[c][t])) return o;
                    return Math.random() * i;
                }
                var e, n, i, r = y.length, l = x.length, d = u[0], g = u[1];
                for (e = 0; e < r; ++e) (i = y[e]).index = e, i.weight = 0;
                for (e = 0; e < l; ++e) i = x[e], "number" == typeof i.source && (i.source = y[i.source]), 
                "number" == typeof i.target && (i.target = y[i.target]), ++i.source.weight, ++i.target.weight;
                for (e = 0; e < r; ++e) i = y[e], isNaN(i.x) && (i.x = t("x", d)), isNaN(i.y) && (i.y = t("y", g)), 
                isNaN(i.px) && (i.px = i.x), isNaN(i.py) && (i.py = i.y);
                if (a = [], "function" == typeof h) for (e = 0; e < l; ++e) a[e] = +h.call(this, x[e], e); else for (e = 0; e < l; ++e) a[e] = h;
                if (o = [], "function" == typeof f) for (e = 0; e < l; ++e) o[e] = +f.call(this, x[e], e); else for (e = 0; e < l; ++e) o[e] = f;
                if (s = [], "function" == typeof p) for (e = 0; e < r; ++e) s[e] = +p.call(this, y[e], e); else for (e = 0; e < r; ++e) s[e] = p;
                return c.resume();
            }, c.resume = function() {
                return c.alpha(.1);
            }, c.stop = function() {
                return c.alpha(0);
            }, c.drag = function() {
                return i || (i = fo.behavior.drag().origin(S).on("dragstart.force", rr).on("drag.force", e).on("dragend.force", ar)), 
                arguments.length ? void this.on("mouseover.force", or).on("mouseout.force", sr).call(i) : i;
            }, fo.rebind(c, l, "on");
        };
        var bc = 20, wc = 1, Sc = 1 / 0;
        fo.layout.hierarchy = function() {
            function t(r) {
                var a, o = [ r ], s = [];
                for (r.depth = 0; null != (a = o.pop()); ) if (s.push(a), (l = n.call(t, a, a.depth)) && (c = l.length)) {
                    for (var c, l, u; --c >= 0; ) o.push(u = l[c]), u.parent = a, u.depth = a.depth + 1;
                    i && (a.value = 0), a.children = l;
                } else i && (a.value = +i.call(t, a, a.depth) || 0), delete a.children;
                return dr(r, function(t) {
                    var n, r;
                    e && (n = t.children) && n.sort(e), i && (r = t.parent) && (r.value += t.value);
                }), s;
            }
            var e = pr, n = hr, i = fr;
            return t.sort = function(n) {
                return arguments.length ? (e = n, t) : e;
            }, t.children = function(e) {
                return arguments.length ? (n = e, t) : n;
            }, t.value = function(e) {
                return arguments.length ? (i = e, t) : i;
            }, t.revalue = function(e) {
                return i && (ur(e, function(t) {
                    t.children && (t.value = 0);
                }), dr(e, function(e) {
                    var n;
                    e.children || (e.value = +i.call(t, e, e.depth) || 0), (n = e.parent) && (n.value += e.value);
                })), e;
            }, t;
        }, fo.layout.partition = function() {
            function t(e, n, i, r) {
                var a = e.children;
                if (e.x = n, e.y = e.depth * r, e.dx = i, e.dy = r, a && (o = a.length)) {
                    var o, s, c, l = -1;
                    for (i = e.value ? i / e.value : 0; ++l < o; ) t(s = a[l], n, c = s.value * i, r), 
                    n += c;
                }
            }
            function e(t) {
                var n = t.children, i = 0;
                if (n && (r = n.length)) for (var r, a = -1; ++a < r; ) i = Math.max(i, e(n[a]));
                return 1 + i;
            }
            function n(n, a) {
                var o = i.call(this, n, a);
                return t(o[0], 0, r[0], r[1] / e(o[0])), o;
            }
            var i = fo.layout.hierarchy(), r = [ 1, 1 ];
            return n.size = function(t) {
                return arguments.length ? (r = t, n) : r;
            }, lr(n, i);
        }, fo.layout.pie = function() {
            function t(o) {
                var s, c = o.length, l = o.map(function(n, i) {
                    return +e.call(t, n, i);
                }), u = +("function" == typeof i ? i.apply(this, arguments) : i), d = ("function" == typeof r ? r.apply(this, arguments) : r) - u, h = Math.min(Math.abs(d) / c, +("function" == typeof a ? a.apply(this, arguments) : a)), f = h * (d < 0 ? -1 : 1), p = fo.sum(l), g = p ? (d - c * f) / p : 0, m = fo.range(c), v = [];
                return null != n && m.sort(n === Tc ? function(t, e) {
                    return l[e] - l[t];
                } : function(t, e) {
                    return n(o[t], o[e]);
                }), m.forEach(function(t) {
                    v[t] = {
                        data: o[t],
                        value: s = l[t],
                        startAngle: u,
                        endAngle: u += s * g + f,
                        padAngle: h
                    };
                }), v;
            }
            var e = Number, n = Tc, i = 0, r = zo, a = 0;
            return t.value = function(n) {
                return arguments.length ? (e = n, t) : e;
            }, t.sort = function(e) {
                return arguments.length ? (n = e, t) : n;
            }, t.startAngle = function(e) {
                return arguments.length ? (i = e, t) : i;
            }, t.endAngle = function(e) {
                return arguments.length ? (r = e, t) : r;
            }, t.padAngle = function(e) {
                return arguments.length ? (a = e, t) : a;
            }, t;
        };
        var Tc = {};
        fo.layout.stack = function() {
            function t(s, c) {
                if (!(h = s.length)) return s;
                var l = s.map(function(n, i) {
                    return e.call(t, n, i);
                }), u = l.map(function(e) {
                    return e.map(function(e, n) {
                        return [ a.call(t, e, n), o.call(t, e, n) ];
                    });
                }), d = n.call(t, u, c);
                l = fo.permute(l, d), u = fo.permute(u, d);
                var h, f, p, g, m = i.call(t, u, c), v = l[0].length;
                for (p = 0; p < v; ++p) for (r.call(t, l[0][p], g = m[p], u[0][p][1]), f = 1; f < h; ++f) r.call(t, l[f][p], g += u[f - 1][p][1], u[f][p][1]);
                return s;
            }
            var e = S, n = xr, i = _r, r = yr, a = mr, o = vr;
            return t.values = function(n) {
                return arguments.length ? (e = n, t) : e;
            }, t.order = function(e) {
                return arguments.length ? (n = "function" == typeof e ? e : Ec.get(e) || xr, t) : n;
            }, t.offset = function(e) {
                return arguments.length ? (i = "function" == typeof e ? e : Ac.get(e) || _r, t) : i;
            }, t.x = function(e) {
                return arguments.length ? (a = e, t) : a;
            }, t.y = function(e) {
                return arguments.length ? (o = e, t) : o;
            }, t.out = function(e) {
                return arguments.length ? (r = e, t) : r;
            }, t;
        };
        var Ec = fo.map({
            "inside-out": function(t) {
                var e, n, i = t.length, r = t.map(br), a = t.map(wr), o = fo.range(i).sort(function(t, e) {
                    return r[t] - r[e];
                }), s = 0, c = 0, l = [], u = [];
                for (e = 0; e < i; ++e) n = o[e], s < c ? (s += a[n], l.push(n)) : (c += a[n], u.push(n));
                return u.reverse().concat(l);
            },
            reverse: function(t) {
                return fo.range(t.length).reverse();
            },
            default: xr
        }), Ac = fo.map({
            silhouette: function(t) {
                var e, n, i, r = t.length, a = t[0].length, o = [], s = 0, c = [];
                for (n = 0; n < a; ++n) {
                    for (e = 0, i = 0; e < r; e++) i += t[e][n][1];
                    i > s && (s = i), o.push(i);
                }
                for (n = 0; n < a; ++n) c[n] = (s - o[n]) / 2;
                return c;
            },
            wiggle: function(t) {
                var e, n, i, r, a, o, s, c, l, u = t.length, d = t[0], h = d.length, f = [];
                for (f[0] = c = l = 0, n = 1; n < h; ++n) {
                    for (e = 0, r = 0; e < u; ++e) r += t[e][n][1];
                    for (e = 0, a = 0, s = d[n][0] - d[n - 1][0]; e < u; ++e) {
                        for (i = 0, o = (t[e][n][1] - t[e][n - 1][1]) / (2 * s); i < e; ++i) o += (t[i][n][1] - t[i][n - 1][1]) / s;
                        a += o * t[e][n][1];
                    }
                    f[n] = c -= r ? a / r * s : 0, c < l && (l = c);
                }
                for (n = 0; n < h; ++n) f[n] -= l;
                return f;
            },
            expand: function(t) {
                var e, n, i, r = t.length, a = t[0].length, o = 1 / r, s = [];
                for (n = 0; n < a; ++n) {
                    for (e = 0, i = 0; e < r; e++) i += t[e][n][1];
                    if (i) for (e = 0; e < r; e++) t[e][n][1] /= i; else for (e = 0; e < r; e++) t[e][n][1] = o;
                }
                for (n = 0; n < a; ++n) s[n] = 0;
                return s;
            },
            zero: _r
        });
        fo.layout.histogram = function() {
            function t(t, a) {
                for (var o, s, c = [], l = t.map(n, this), u = i.call(this, l, a), d = r.call(this, u, l, a), a = -1, h = l.length, f = d.length - 1, p = e ? 1 : 1 / h; ++a < f; ) o = c[a] = [], 
                o.dx = d[a + 1] - (o.x = d[a]), o.y = 0;
                if (f > 0) for (a = -1; ++a < h; ) s = l[a], s >= u[0] && s <= u[1] && (o = c[fo.bisect(d, s, 1, f) - 1], 
                o.y += p, o.push(t[a]));
                return c;
            }
            var e = !0, n = Number, i = Ar, r = Tr;
            return t.value = function(e) {
                return arguments.length ? (n = e, t) : n;
            }, t.range = function(e) {
                return arguments.length ? (i = Ot(e), t) : i;
            }, t.bins = function(e) {
                return arguments.length ? (r = "number" == typeof e ? function(t) {
                    return Er(t, e);
                } : Ot(e), t) : r;
            }, t.frequency = function(n) {
                return arguments.length ? (e = !!n, t) : e;
            }, t;
        }, fo.layout.pack = function() {
            function t(t, a) {
                var o = n.call(this, t, a), s = o[0], c = r[0], l = r[1], u = null == e ? Math.sqrt : "function" == typeof e ? e : function() {
                    return e;
                };
                if (s.x = s.y = 0, dr(s, function(t) {
                    t.r = +u(t.value);
                }), dr(s, Or), i) {
                    var d = i * (e ? 1 : Math.max(2 * s.r / c, 2 * s.r / l)) / 2;
                    dr(s, function(t) {
                        t.r += d;
                    }), dr(s, Or), dr(s, function(t) {
                        t.r -= d;
                    });
                }
                return Lr(s, c / 2, l / 2, e ? 1 : 1 / Math.max(2 * s.r / c, 2 * s.r / l)), o;
            }
            var e, n = fo.layout.hierarchy().sort(Cr), i = 0, r = [ 1, 1 ];
            return t.size = function(e) {
                return arguments.length ? (r = e, t) : r;
            }, t.radius = function(n) {
                return arguments.length ? (e = null == n || "function" == typeof n ? n : +n, t) : e;
            }, t.padding = function(e) {
                return arguments.length ? (i = +e, t) : i;
            }, lr(t, n);
        }, fo.layout.tree = function() {
            function t(t, r) {
                var u = o.call(this, t, r), d = u[0], h = e(d);
                if (dr(h, n), h.parent.m = -h.z, ur(h, i), l) ur(d, a); else {
                    var f = d, p = d, g = d;
                    ur(d, function(t) {
                        t.x < f.x && (f = t), t.x > p.x && (p = t), t.depth > g.depth && (g = t);
                    });
                    var m = s(f, p) / 2 - f.x, v = c[0] / (p.x + s(p, f) / 2 + m), y = c[1] / (g.depth || 1);
                    ur(d, function(t) {
                        t.x = (t.x + m) * v, t.y = t.depth * y;
                    });
                }
                return u;
            }
            function e(t) {
                for (var e, n = {
                    A: null,
                    children: [ t ]
                }, i = [ n ]; null != (e = i.pop()); ) for (var r, a = e.children, o = 0, s = a.length; o < s; ++o) i.push((a[o] = r = {
                    _: a[o],
                    parent: e,
                    children: (r = a[o].children) && r.slice() || [],
                    A: null,
                    a: null,
                    z: 0,
                    m: 0,
                    c: 0,
                    s: 0,
                    t: null,
                    i: o
                }).a = r);
                return n.children[0];
            }
            function n(t) {
                var e = t.children, n = t.parent.children, i = t.i ? n[t.i - 1] : null;
                if (e.length) {
                    jr(t);
                    var a = (e[0].z + e[e.length - 1].z) / 2;
                    i ? (t.z = i.z + s(t._, i._), t.m = t.z - a) : t.z = a;
                } else i && (t.z = i.z + s(t._, i._));
                t.parent.A = r(t, i, t.parent.A || n[0]);
            }
            function i(t) {
                t._.x = t.z + t.parent.m, t.m += t.parent.m;
            }
            function r(t, e, n) {
                if (e) {
                    for (var i, r = t, a = t, o = e, c = r.parent.children[0], l = r.m, u = a.m, d = o.m, h = c.m; o = Gr(o), 
                    r = Dr(r), o && r; ) c = Dr(c), a = Gr(a), a.a = t, i = o.z + d - r.z - l + s(o._, r._), 
                    i > 0 && (Fr(Hr(o, t, n), t, i), l += i, u += i), d += o.m, l += r.m, h += c.m, 
                    u += a.m;
                    o && !Gr(a) && (a.t = o, a.m += d - u), r && !Dr(c) && (c.t = r, c.m += l - h, n = t);
                }
                return n;
            }
            function a(t) {
                t.x *= c[0], t.y = t.depth * c[1];
            }
            var o = fo.layout.hierarchy().sort(null).value(null), s = Ir, c = [ 1, 1 ], l = null;
            return t.separation = function(e) {
                return arguments.length ? (s = e, t) : s;
            }, t.size = function(e) {
                return arguments.length ? (l = null == (c = e) ? a : null, t) : l ? null : c;
            }, t.nodeSize = function(e) {
                return arguments.length ? (l = null == (c = e) ? null : a, t) : l ? c : null;
            }, lr(t, o);
        }, fo.layout.cluster = function() {
            function t(t, a) {
                var o, s = e.call(this, t, a), c = s[0], l = 0;
                dr(c, function(t) {
                    var e = t.children;
                    e && e.length ? (t.x = zr(e), t.y = Ur(e)) : (t.x = o ? l += n(t, o) : 0, t.y = 0, 
                    o = t);
                });
                var u = Br(c), d = Xr(c), h = u.x - n(u, d) / 2, f = d.x + n(d, u) / 2;
                return dr(c, r ? function(t) {
                    t.x = (t.x - c.x) * i[0], t.y = (c.y - t.y) * i[1];
                } : function(t) {
                    t.x = (t.x - h) / (f - h) * i[0], t.y = (1 - (c.y ? t.y / c.y : 1)) * i[1];
                }), s;
            }
            var e = fo.layout.hierarchy().sort(null).value(null), n = Ir, i = [ 1, 1 ], r = !1;
            return t.separation = function(e) {
                return arguments.length ? (n = e, t) : n;
            }, t.size = function(e) {
                return arguments.length ? (r = null == (i = e), t) : r ? null : i;
            }, t.nodeSize = function(e) {
                return arguments.length ? (r = null != (i = e), t) : r ? i : null;
            }, lr(t, e);
        }, fo.layout.treemap = function() {
            function t(t, e) {
                for (var n, i, r = -1, a = t.length; ++r < a; ) i = (n = t[r]).value * (e < 0 ? 0 : e), 
                n.area = isNaN(i) || i <= 0 ? 0 : i;
            }
            function e(n) {
                var a = n.children;
                if (a && a.length) {
                    var o, s, c, l = d(n), u = [], h = a.slice(), p = 1 / 0, g = "slice" === f ? l.dx : "dice" === f ? l.dy : "slice-dice" === f ? 1 & n.depth ? l.dy : l.dx : Math.min(l.dx, l.dy);
                    for (t(h, l.dx * l.dy / n.value), u.area = 0; (c = h.length) > 0; ) u.push(o = h[c - 1]), 
                    u.area += o.area, "squarify" !== f || (s = i(u, g)) <= p ? (h.pop(), p = s) : (u.area -= u.pop().area, 
                    r(u, g, l, !1), g = Math.min(l.dx, l.dy), u.length = u.area = 0, p = 1 / 0);
                    u.length && (r(u, g, l, !0), u.length = u.area = 0), a.forEach(e);
                }
            }
            function n(e) {
                var i = e.children;
                if (i && i.length) {
                    var a, o = d(e), s = i.slice(), c = [];
                    for (t(s, o.dx * o.dy / e.value), c.area = 0; a = s.pop(); ) c.push(a), c.area += a.area, 
                    null != a.z && (r(c, a.z ? o.dx : o.dy, o, !s.length), c.length = c.area = 0);
                    i.forEach(n);
                }
            }
            function i(t, e) {
                for (var n, i = t.area, r = 0, a = 1 / 0, o = -1, s = t.length; ++o < s; ) (n = t[o].area) && (n < a && (a = n), 
                n > r && (r = n));
                return i *= i, e *= e, i ? Math.max(e * r * p / i, i / (e * a * p)) : 1 / 0;
            }
            function r(t, e, n, i) {
                var r, a = -1, o = t.length, s = n.x, l = n.y, u = e ? c(t.area / e) : 0;
                if (e == n.dx) {
                    for ((i || u > n.dy) && (u = n.dy); ++a < o; ) r = t[a], r.x = s, r.y = l, r.dy = u, 
                    s += r.dx = Math.min(n.x + n.dx - s, u ? c(r.area / u) : 0);
                    r.z = !0, r.dx += n.x + n.dx - s, n.y += u, n.dy -= u;
                } else {
                    for ((i || u > n.dx) && (u = n.dx); ++a < o; ) r = t[a], r.x = s, r.y = l, r.dx = u, 
                    l += r.dy = Math.min(n.y + n.dy - l, u ? c(r.area / u) : 0);
                    r.z = !1, r.dy += n.y + n.dy - l, n.x += u, n.dx -= u;
                }
            }
            function a(i) {
                var r = o || s(i), a = r[0];
                return a.x = a.y = 0, a.value ? (a.dx = l[0], a.dy = l[1]) : a.dx = a.dy = 0, o && s.revalue(a), 
                t([ a ], a.dx * a.dy / a.value), (o ? n : e)(a), h && (o = r), r;
            }
            var o, s = fo.layout.hierarchy(), c = Math.round, l = [ 1, 1 ], u = null, d = Yr, h = !1, f = "squarify", p = .5 * (1 + Math.sqrt(5));
            return a.size = function(t) {
                return arguments.length ? (l = t, a) : l;
            }, a.padding = function(t) {
                function e(e) {
                    var n = t.call(a, e, e.depth);
                    return null == n ? Yr(e) : qr(e, "number" == typeof n ? [ n, n, n, n ] : n);
                }
                function n(e) {
                    return qr(e, t);
                }
                if (!arguments.length) return u;
                var i;
                return d = null == (u = t) ? Yr : "function" == (i = typeof t) ? e : "number" === i ? (t = [ t, t, t, t ], 
                n) : n, a;
            }, a.round = function(t) {
                return arguments.length ? (c = t ? Math.round : Number, a) : c != Number;
            }, a.sticky = function(t) {
                return arguments.length ? (h = t, o = null, a) : h;
            }, a.ratio = function(t) {
                return arguments.length ? (p = t, a) : p;
            }, a.mode = function(t) {
                return arguments.length ? (f = t + "", a) : f;
            }, lr(a, s);
        }, fo.random = {
            normal: function(t, e) {
                var n = arguments.length;
                return n < 2 && (e = 1), n < 1 && (t = 0), function() {
                    var n, i, r;
                    do n = 2 * Math.random() - 1, i = 2 * Math.random() - 1, r = n * n + i * i; while (!r || r > 1);
                    return t + e * n * Math.sqrt(-2 * Math.log(r) / r);
                };
            },
            logNormal: function() {
                var t = fo.random.normal.apply(fo, arguments);
                return function() {
                    return Math.exp(t());
                };
            },
            bates: function(t) {
                var e = fo.random.irwinHall(t);
                return function() {
                    return e() / t;
                };
            },
            irwinHall: function(t) {
                return function() {
                    for (var e = 0, n = 0; n < t; n++) e += Math.random();
                    return e;
                };
            }
        }, fo.scale = {};
        var Cc = {
            floor: S,
            ceil: S
        };
        fo.scale.linear = function() {
            return ta([ 0, 1 ], [ 0, 1 ], Ti, !1);
        };
        var Pc = {
            s: 1,
            g: 1,
            p: 1,
            r: 1,
            e: 1
        };
        fo.scale.log = function() {
            return ca(fo.scale.linear().domain([ 0, 1 ]), 10, !0, [ 1, 10 ]);
        };
        var kc = fo.format(".0e"), Mc = {
            floor: function(t) {
                return -Math.ceil(-t);
            },
            ceil: function(t) {
                return -Math.floor(-t);
            }
        };
        fo.scale.pow = function() {
            return la(fo.scale.linear(), 1, [ 0, 1 ]);
        }, fo.scale.sqrt = function() {
            return fo.scale.pow().exponent(.5);
        }, fo.scale.ordinal = function() {
            return da([], {
                t: "range",
                a: [ [] ]
            });
        }, fo.scale.category10 = function() {
            return fo.scale.ordinal().range(Oc);
        }, fo.scale.category20 = function() {
            return fo.scale.ordinal().range(Nc);
        }, fo.scale.category20b = function() {
            return fo.scale.ordinal().range(Vc);
        }, fo.scale.category20c = function() {
            return fo.scale.ordinal().range(Lc);
        };
        var Oc = [ 2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175 ].map(Tt), Nc = [ 2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725 ].map(Tt), Vc = [ 3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654 ].map(Tt), Lc = [ 3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081 ].map(Tt);
        fo.scale.quantile = function() {
            return ha([], []);
        }, fo.scale.quantize = function() {
            return fa(0, 1, [ 0, 1 ]);
        }, fo.scale.threshold = function() {
            return pa([ .5 ], [ 0, 1 ]);
        }, fo.scale.identity = function() {
            return ga([ 0, 1 ]);
        }, fo.svg = {}, fo.svg.arc = function() {
            function t() {
                var t = Math.max(0, +n.apply(this, arguments)), l = Math.max(0, +i.apply(this, arguments)), u = o.apply(this, arguments) - Xo, d = s.apply(this, arguments) - Xo, h = Math.abs(d - u), f = u > d ? 0 : 1;
                if (l < t && (p = l, l = t, t = p), h >= Bo) return e(l, f) + (t ? e(t, 1 - f) : "") + "Z";
                var p, g, m, v, y, x, _, b, w, S, T, E, A = 0, C = 0, P = [];
                if ((v = (+c.apply(this, arguments) || 0) / 2) && (m = a === Rc ? Math.sqrt(t * t + l * l) : +a.apply(this, arguments), 
                f || (C *= -1), l && (C = ot(m / l * Math.sin(v))), t && (A = ot(m / t * Math.sin(v)))), 
                l) {
                    y = l * Math.cos(u + C), x = l * Math.sin(u + C), _ = l * Math.cos(d - C), b = l * Math.sin(d - C);
                    var k = Math.abs(d - u - 2 * C) <= Uo ? 0 : 1;
                    if (C && wa(y, x, _, b) === f ^ k) {
                        var M = (u + d) / 2;
                        y = l * Math.cos(M), x = l * Math.sin(M), _ = b = null;
                    }
                } else y = x = 0;
                if (t) {
                    w = t * Math.cos(d - A), S = t * Math.sin(d - A), T = t * Math.cos(u + A), E = t * Math.sin(u + A);
                    var O = Math.abs(u - d + 2 * A) <= Uo ? 0 : 1;
                    if (A && wa(w, S, T, E) === 1 - f ^ O) {
                        var N = (u + d) / 2;
                        w = t * Math.cos(N), S = t * Math.sin(N), T = E = null;
                    }
                } else w = S = 0;
                if (h > jo && (p = Math.min(Math.abs(l - t) / 2, +r.apply(this, arguments))) > .001) {
                    g = t < l ^ f ? 0 : 1;
                    var V = p, L = p;
                    if (h < Uo) {
                        var R = null == T ? [ w, S ] : null == _ ? [ y, x ] : Fn([ y, x ], [ T, E ], [ _, b ], [ w, S ]), I = y - R[0], D = x - R[1], G = _ - R[0], F = b - R[1], j = 1 / Math.sin(Math.acos((I * G + D * F) / (Math.sqrt(I * I + D * D) * Math.sqrt(G * G + F * F))) / 2), H = Math.sqrt(R[0] * R[0] + R[1] * R[1]);
                        L = Math.min(p, (t - H) / (j - 1)), V = Math.min(p, (l - H) / (j + 1));
                    }
                    if (null != _) {
                        var U = Sa(null == T ? [ w, S ] : [ T, E ], [ y, x ], l, V, f), z = Sa([ _, b ], [ w, S ], l, V, f);
                        p === V ? P.push("M", U[0], "A", V, ",", V, " 0 0,", g, " ", U[1], "A", l, ",", l, " 0 ", 1 - f ^ wa(U[1][0], U[1][1], z[1][0], z[1][1]), ",", f, " ", z[1], "A", V, ",", V, " 0 0,", g, " ", z[0]) : P.push("M", U[0], "A", V, ",", V, " 0 1,", g, " ", z[0]);
                    } else P.push("M", y, ",", x);
                    if (null != T) {
                        var B = Sa([ y, x ], [ T, E ], t, -L, f), X = Sa([ w, S ], null == _ ? [ y, x ] : [ _, b ], t, -L, f);
                        p === L ? P.push("L", X[0], "A", L, ",", L, " 0 0,", g, " ", X[1], "A", t, ",", t, " 0 ", f ^ wa(X[1][0], X[1][1], B[1][0], B[1][1]), ",", 1 - f, " ", B[1], "A", L, ",", L, " 0 0,", g, " ", B[0]) : P.push("L", X[0], "A", L, ",", L, " 0 0,", g, " ", B[0]);
                    } else P.push("L", w, ",", S);
                } else P.push("M", y, ",", x), null != _ && P.push("A", l, ",", l, " 0 ", k, ",", f, " ", _, ",", b), 
                P.push("L", w, ",", S), null != T && P.push("A", t, ",", t, " 0 ", O, ",", 1 - f, " ", T, ",", E);
                return P.push("Z"), P.join("");
            }
            function e(t, e) {
                return "M0," + t + "A" + t + "," + t + " 0 1," + e + " 0," + -t + "A" + t + "," + t + " 0 1," + e + " 0," + t;
            }
            var n = va, i = ya, r = ma, a = Rc, o = xa, s = _a, c = ba;
            return t.innerRadius = function(e) {
                return arguments.length ? (n = Ot(e), t) : n;
            }, t.outerRadius = function(e) {
                return arguments.length ? (i = Ot(e), t) : i;
            }, t.cornerRadius = function(e) {
                return arguments.length ? (r = Ot(e), t) : r;
            }, t.padRadius = function(e) {
                return arguments.length ? (a = e == Rc ? Rc : Ot(e), t) : a;
            }, t.startAngle = function(e) {
                return arguments.length ? (o = Ot(e), t) : o;
            }, t.endAngle = function(e) {
                return arguments.length ? (s = Ot(e), t) : s;
            }, t.padAngle = function(e) {
                return arguments.length ? (c = Ot(e), t) : c;
            }, t.centroid = function() {
                var t = (+n.apply(this, arguments) + +i.apply(this, arguments)) / 2, e = (+o.apply(this, arguments) + +s.apply(this, arguments)) / 2 - Xo;
                return [ Math.cos(e) * t, Math.sin(e) * t ];
            }, t;
        };
        var Rc = "auto";
        fo.svg.line = function() {
            return Ta(S);
        };
        var Ic = fo.map({
            linear: Ea,
            "linear-closed": Aa,
            step: Ca,
            "step-before": Pa,
            "step-after": ka,
            basis: Ra,
            "basis-open": Ia,
            "basis-closed": Da,
            bundle: Ga,
            cardinal: Na,
            "cardinal-open": Ma,
            "cardinal-closed": Oa,
            monotone: Ba
        });
        Ic.forEach(function(t, e) {
            e.key = t, e.closed = /-closed$/.test(t);
        });
        var Dc = [ 0, 2 / 3, 1 / 3, 0 ], Gc = [ 0, 1 / 3, 2 / 3, 0 ], Fc = [ 0, 1 / 6, 2 / 3, 1 / 6 ];
        fo.svg.line.radial = function() {
            var t = Ta(Xa);
            return t.radius = t.x, delete t.x, t.angle = t.y, delete t.y, t;
        }, Pa.reverse = ka, ka.reverse = Pa, fo.svg.area = function() {
            return Ya(S);
        }, fo.svg.area.radial = function() {
            var t = Ya(Xa);
            return t.radius = t.x, delete t.x, t.innerRadius = t.x0, delete t.x0, t.outerRadius = t.x1, 
            delete t.x1, t.angle = t.y, delete t.y, t.startAngle = t.y0, delete t.y0, t.endAngle = t.y1, 
            delete t.y1, t;
        }, fo.svg.chord = function() {
            function t(t, s) {
                var c = e(this, a, t, s), l = e(this, o, t, s);
                return "M" + c.p0 + i(c.r, c.p1, c.a1 - c.a0) + (n(c, l) ? r(c.r, c.p1, c.r, c.p0) : r(c.r, c.p1, l.r, l.p0) + i(l.r, l.p1, l.a1 - l.a0) + r(l.r, l.p1, c.r, c.p0)) + "Z";
            }
            function e(t, e, n, i) {
                var r = e.call(t, n, i), a = s.call(t, r, i), o = c.call(t, r, i) - Xo, u = l.call(t, r, i) - Xo;
                return {
                    r: a,
                    a0: o,
                    a1: u,
                    p0: [ a * Math.cos(o), a * Math.sin(o) ],
                    p1: [ a * Math.cos(u), a * Math.sin(u) ]
                };
            }
            function n(t, e) {
                return t.a0 == e.a0 && t.a1 == e.a1;
            }
            function i(t, e, n) {
                return "A" + t + "," + t + " 0 " + +(n > Uo) + ",1 " + e;
            }
            function r(t, e, n, i) {
                return "Q 0,0 " + i;
            }
            var a = Tn, o = En, s = qa, c = xa, l = _a;
            return t.radius = function(e) {
                return arguments.length ? (s = Ot(e), t) : s;
            }, t.source = function(e) {
                return arguments.length ? (a = Ot(e), t) : a;
            }, t.target = function(e) {
                return arguments.length ? (o = Ot(e), t) : o;
            }, t.startAngle = function(e) {
                return arguments.length ? (c = Ot(e), t) : c;
            }, t.endAngle = function(e) {
                return arguments.length ? (l = Ot(e), t) : l;
            }, t;
        }, fo.svg.diagonal = function() {
            function t(t, r) {
                var a = e.call(this, t, r), o = n.call(this, t, r), s = (a.y + o.y) / 2, c = [ a, {
                    x: a.x,
                    y: s
                }, {
                    x: o.x,
                    y: s
                }, o ];
                return c = c.map(i), "M" + c[0] + "C" + c[1] + " " + c[2] + " " + c[3];
            }
            var e = Tn, n = En, i = Wa;
            return t.source = function(n) {
                return arguments.length ? (e = Ot(n), t) : e;
            }, t.target = function(e) {
                return arguments.length ? (n = Ot(e), t) : n;
            }, t.projection = function(e) {
                return arguments.length ? (i = e, t) : i;
            }, t;
        }, fo.svg.diagonal.radial = function() {
            var t = fo.svg.diagonal(), e = Wa, n = t.projection;
            return t.projection = function(t) {
                return arguments.length ? n(Ka(e = t)) : e;
            }, t;
        }, fo.svg.symbol = function() {
            function t(t, i) {
                return (jc.get(e.call(this, t, i)) || $a)(n.call(this, t, i));
            }
            var e = Ja, n = Qa;
            return t.type = function(n) {
                return arguments.length ? (e = Ot(n), t) : e;
            }, t.size = function(e) {
                return arguments.length ? (n = Ot(e), t) : n;
            }, t;
        };
        var jc = fo.map({
            circle: $a,
            cross: function(t) {
                var e = Math.sqrt(t / 5) / 2;
                return "M" + -3 * e + "," + -e + "H" + -e + "V" + -3 * e + "H" + e + "V" + -e + "H" + 3 * e + "V" + e + "H" + e + "V" + 3 * e + "H" + -e + "V" + e + "H" + -3 * e + "Z";
            },
            diamond: function(t) {
                var e = Math.sqrt(t / (2 * Uc)), n = e * Uc;
                return "M0," + -e + "L" + n + ",0 0," + e + " " + -n + ",0Z";
            },
            square: function(t) {
                var e = Math.sqrt(t) / 2;
                return "M" + -e + "," + -e + "L" + e + "," + -e + " " + e + "," + e + " " + -e + "," + e + "Z";
            },
            "triangle-down": function(t) {
                var e = Math.sqrt(t / Hc), n = e * Hc / 2;
                return "M0," + n + "L" + e + "," + -n + " " + -e + "," + -n + "Z";
            },
            "triangle-up": function(t) {
                var e = Math.sqrt(t / Hc), n = e * Hc / 2;
                return "M0," + -n + "L" + e + "," + n + " " + -e + "," + n + "Z";
            }
        });
        fo.svg.symbolTypes = jc.keys();
        var Hc = Math.sqrt(3), Uc = Math.tan(30 * Yo);
        No.transition = function(t) {
            for (var e, n, i = zc || ++qc, r = io(t), a = [], o = Bc || {
                time: Date.now(),
                ease: Oi,
                delay: 0,
                duration: 250
            }, s = -1, c = this.length; ++s < c; ) {
                a.push(e = []);
                for (var l = this[s], u = -1, d = l.length; ++u < d; ) (n = l[u]) && ro(n, u, r, i, o), 
                e.push(n);
            }
            return to(a, r, i);
        }, No.interrupt = function(t) {
            return this.each(null == t ? Xc : Za(io(t)));
        };
        var zc, Bc, Xc = Za(io()), Yc = [], qc = 0;
        Yc.call = No.call, Yc.empty = No.empty, Yc.node = No.node, Yc.size = No.size, fo.transition = function(t, e) {
            return t && t.transition ? zc ? t.transition(e) : t : fo.selection().transition(t);
        }, fo.transition.prototype = Yc, Yc.select = function(t) {
            var e, n, i, r = this.id, a = this.namespace, o = [];
            t = V(t);
            for (var s = -1, c = this.length; ++s < c; ) {
                o.push(e = []);
                for (var l = this[s], u = -1, d = l.length; ++u < d; ) (i = l[u]) && (n = t.call(i, i.__data__, u, s)) ? ("__data__" in i && (n.__data__ = i.__data__), 
                ro(n, u, a, r, i[a][r]), e.push(n)) : e.push(null);
            }
            return to(o, a, r);
        }, Yc.selectAll = function(t) {
            var e, n, i, r, a, o = this.id, s = this.namespace, c = [];
            t = L(t);
            for (var l = -1, u = this.length; ++l < u; ) for (var d = this[l], h = -1, f = d.length; ++h < f; ) if (i = d[h]) {
                a = i[s][o], n = t.call(i, i.__data__, h, l), c.push(e = []);
                for (var p = -1, g = n.length; ++p < g; ) (r = n[p]) && ro(r, p, s, o, a), e.push(r);
            }
            return to(c, s, o);
        }, Yc.filter = function(t) {
            var e, n, i, r = [];
            "function" != typeof t && (t = Y(t));
            for (var a = 0, o = this.length; a < o; a++) {
                r.push(e = []);
                for (var n = this[a], s = 0, c = n.length; s < c; s++) (i = n[s]) && t.call(i, i.__data__, s, a) && e.push(i);
            }
            return to(r, this.namespace, this.id);
        }, Yc.tween = function(t, e) {
            var n = this.id, i = this.namespace;
            return arguments.length < 2 ? this.node()[i][n].tween.get(t) : W(this, null == e ? function(e) {
                e[i][n].tween.remove(t);
            } : function(r) {
                r[i][n].tween.set(t, e);
            });
        }, Yc.attr = function(t, e) {
            function n() {
                this.removeAttribute(s);
            }
            function i() {
                this.removeAttributeNS(s.space, s.local);
            }
            function r(t) {
                return null == t ? n : (t += "", function() {
                    var e, n = this.getAttribute(s);
                    return n !== t && (e = o(n, t), function(t) {
                        this.setAttribute(s, e(t));
                    });
                });
            }
            function a(t) {
                return null == t ? i : (t += "", function() {
                    var e, n = this.getAttributeNS(s.space, s.local);
                    return n !== t && (e = o(n, t), function(t) {
                        this.setAttributeNS(s.space, s.local, e(t));
                    });
                });
            }
            if (arguments.length < 2) {
                for (e in t) this.attr(e, t[e]);
                return this;
            }
            var o = "transform" == t ? $i : Ti, s = fo.ns.qualify(t);
            return eo(this, "attr." + t, e, s.local ? a : r);
        }, Yc.attrTween = function(t, e) {
            function n(t, n) {
                var i = e.call(this, t, n, this.getAttribute(r));
                return i && function(t) {
                    this.setAttribute(r, i(t));
                };
            }
            function i(t, n) {
                var i = e.call(this, t, n, this.getAttributeNS(r.space, r.local));
                return i && function(t) {
                    this.setAttributeNS(r.space, r.local, i(t));
                };
            }
            var r = fo.ns.qualify(t);
            return this.tween("attr." + t, r.local ? i : n);
        }, Yc.style = function(t, e, n) {
            function i() {
                this.style.removeProperty(t);
            }
            function r(e) {
                return null == e ? i : (e += "", function() {
                    var i, r = o(this).getComputedStyle(this, null).getPropertyValue(t);
                    return r !== e && (i = Ti(r, e), function(e) {
                        this.style.setProperty(t, i(e), n);
                    });
                });
            }
            var a = arguments.length;
            if (a < 3) {
                if ("string" != typeof t) {
                    a < 2 && (e = "");
                    for (n in t) this.style(n, t[n], e);
                    return this;
                }
                n = "";
            }
            return eo(this, "style." + t, e, r);
        }, Yc.styleTween = function(t, e, n) {
            function i(i, r) {
                var a = e.call(this, i, r, o(this).getComputedStyle(this, null).getPropertyValue(t));
                return a && function(e) {
                    this.style.setProperty(t, a(e), n);
                };
            }
            return arguments.length < 3 && (n = ""), this.tween("style." + t, i);
        }, Yc.text = function(t) {
            return eo(this, "text", t, no);
        }, Yc.remove = function() {
            var t = this.namespace;
            return this.each("end.transition", function() {
                var e;
                this[t].count < 2 && (e = this.parentNode) && e.removeChild(this);
            });
        }, Yc.ease = function(t) {
            var e = this.id, n = this.namespace;
            return arguments.length < 1 ? this.node()[n][e].ease : ("function" != typeof t && (t = fo.ease.apply(fo, arguments)), 
            W(this, function(i) {
                i[n][e].ease = t;
            }));
        }, Yc.delay = function(t) {
            var e = this.id, n = this.namespace;
            return arguments.length < 1 ? this.node()[n][e].delay : W(this, "function" == typeof t ? function(i, r, a) {
                i[n][e].delay = +t.call(i, i.__data__, r, a);
            } : (t = +t, function(i) {
                i[n][e].delay = t;
            }));
        }, Yc.duration = function(t) {
            var e = this.id, n = this.namespace;
            return arguments.length < 1 ? this.node()[n][e].duration : W(this, "function" == typeof t ? function(i, r, a) {
                i[n][e].duration = Math.max(1, t.call(i, i.__data__, r, a));
            } : (t = Math.max(1, t), function(i) {
                i[n][e].duration = t;
            }));
        }, Yc.each = function(t, e) {
            var n = this.id, i = this.namespace;
            if (arguments.length < 2) {
                var r = Bc, a = zc;
                try {
                    zc = n, W(this, function(e, r, a) {
                        Bc = e[i][n], t.call(e, e.__data__, r, a);
                    });
                } finally {
                    Bc = r, zc = a;
                }
            } else W(this, function(r) {
                var a = r[i][n];
                (a.event || (a.event = fo.dispatch("start", "end", "interrupt"))).on(t, e);
            });
            return this;
        }, Yc.transition = function() {
            for (var t, e, n, i, r = this.id, a = ++qc, o = this.namespace, s = [], c = 0, l = this.length; c < l; c++) {
                s.push(t = []);
                for (var e = this[c], u = 0, d = e.length; u < d; u++) (n = e[u]) && (i = n[o][r], 
                ro(n, u, o, a, {
                    time: i.time,
                    ease: i.ease,
                    delay: i.delay + i.duration,
                    duration: i.duration
                })), t.push(n);
            }
            return to(s, o, a);
        }, fo.svg.axis = function() {
            function t(t) {
                t.each(function() {
                    var t, l = fo.select(this), u = this.__chart__ || n, d = this.__chart__ = n.copy(), h = null == c ? d.ticks ? d.ticks.apply(d, s) : d.domain() : c, f = null == e ? d.tickFormat ? d.tickFormat.apply(d, s) : S : e, p = l.selectAll(".tick").data(h, d), g = p.enter().insert("g", ".domain").attr("class", "tick").style("opacity", jo), m = fo.transition(p.exit()).style("opacity", jo).remove(), v = fo.transition(p.order()).style("opacity", 1), y = Math.max(r, 0) + o, x = Kr(d), _ = l.selectAll(".domain").data([ 0 ]), b = (_.enter().append("path").attr("class", "domain"), 
                    fo.transition(_));
                    g.append("line"), g.append("text");
                    var w, T, E, A, C = g.select("line"), P = v.select("line"), k = p.select("text").text(f), M = g.select("text"), O = v.select("text"), N = "top" === i || "left" === i ? -1 : 1;
                    if ("bottom" === i || "top" === i ? (t = ao, w = "x", E = "y", T = "x2", A = "y2", 
                    k.attr("dy", N < 0 ? "0em" : ".71em").style("text-anchor", "middle"), b.attr("d", "M" + x[0] + "," + N * a + "V0H" + x[1] + "V" + N * a)) : (t = oo, 
                    w = "y", E = "x", T = "y2", A = "x2", k.attr("dy", ".32em").style("text-anchor", N < 0 ? "end" : "start"), 
                    b.attr("d", "M" + N * a + "," + x[0] + "H0V" + x[1] + "H" + N * a)), C.attr(A, N * r), 
                    M.attr(E, N * y), P.attr(T, 0).attr(A, N * r), O.attr(w, 0).attr(E, N * y), d.rangeBand) {
                        var V = d, L = V.rangeBand() / 2;
                        u = d = function(t) {
                            return V(t) + L;
                        };
                    } else u.rangeBand ? u = d : m.call(t, d, u);
                    g.call(t, u, d), v.call(t, d, d);
                });
            }
            var e, n = fo.scale.linear(), i = Wc, r = 6, a = 6, o = 3, s = [ 10 ], c = null;
            return t.scale = function(e) {
                return arguments.length ? (n = e, t) : n;
            }, t.orient = function(e) {
                return arguments.length ? (i = e in Kc ? e + "" : Wc, t) : i;
            }, t.ticks = function() {
                return arguments.length ? (s = go(arguments), t) : s;
            }, t.tickValues = function(e) {
                return arguments.length ? (c = e, t) : c;
            }, t.tickFormat = function(n) {
                return arguments.length ? (e = n, t) : e;
            }, t.tickSize = function(e) {
                var n = arguments.length;
                return n ? (r = +e, a = +arguments[n - 1], t) : r;
            }, t.innerTickSize = function(e) {
                return arguments.length ? (r = +e, t) : r;
            }, t.outerTickSize = function(e) {
                return arguments.length ? (a = +e, t) : a;
            }, t.tickPadding = function(e) {
                return arguments.length ? (o = +e, t) : o;
            }, t.tickSubdivide = function() {
                return arguments.length && t;
            }, t;
        };
        var Wc = "bottom", Kc = {
            top: 1,
            right: 1,
            bottom: 1,
            left: 1
        };
        fo.svg.brush = function() {
            function t(a) {
                a.each(function() {
                    var a = fo.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", r).on("touchstart.brush", r), o = a.selectAll(".background").data([ 0 ]);
                    o.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), 
                    a.selectAll(".extent").data([ 0 ]).enter().append("rect").attr("class", "extent").style("cursor", "move");
                    var s = a.selectAll(".resize").data(g, S);
                    s.exit().remove(), s.enter().append("g").attr("class", function(t) {
                        return "resize " + t;
                    }).style("cursor", function(t) {
                        return Qc[t];
                    }).append("rect").attr("x", function(t) {
                        return /[ew]$/.test(t) ? -3 : null;
                    }).attr("y", function(t) {
                        return /^[ns]/.test(t) ? -3 : null;
                    }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), s.style("display", t.empty() ? "none" : null);
                    var c, d = fo.transition(a), h = fo.transition(o);
                    l && (c = Kr(l), h.attr("x", c[0]).attr("width", c[1] - c[0]), n(d)), u && (c = Kr(u), 
                    h.attr("y", c[0]).attr("height", c[1] - c[0]), i(d)), e(d);
                });
            }
            function e(t) {
                t.selectAll(".resize").attr("transform", function(t) {
                    return "translate(" + d[+/e$/.test(t)] + "," + h[+/^s/.test(t)] + ")";
                });
            }
            function n(t) {
                t.select(".extent").attr("x", d[0]), t.selectAll(".extent,.n>rect,.s>rect").attr("width", d[1] - d[0]);
            }
            function i(t) {
                t.select(".extent").attr("y", h[0]), t.selectAll(".extent,.e>rect,.w>rect").attr("height", h[1] - h[0]);
            }
            function r() {
                function r() {
                    32 == fo.event.keyCode && (P || (x = null, O[0] -= d[1], O[1] -= h[1], P = 2), k());
                }
                function g() {
                    32 == fo.event.keyCode && 2 == P && (O[0] += d[1], O[1] += h[1], P = 0, k());
                }
                function m() {
                    var t = fo.mouse(b), r = !1;
                    _ && (t[0] += _[0], t[1] += _[1]), P || (fo.event.altKey ? (x || (x = [ (d[0] + d[1]) / 2, (h[0] + h[1]) / 2 ]), 
                    O[0] = d[+(t[0] < x[0])], O[1] = h[+(t[1] < x[1])]) : x = null), A && v(t, l, 0) && (n(T), 
                    r = !0), C && v(t, u, 1) && (i(T), r = !0), r && (e(T), S({
                        type: "brush",
                        mode: P ? "move" : "resize"
                    }));
                }
                function v(t, e, n) {
                    var i, r, o = Kr(e), c = o[0], l = o[1], u = O[n], g = n ? h : d, m = g[1] - g[0];
                    if (P && (c -= u, l -= m + u), i = (n ? p : f) ? Math.max(c, Math.min(l, t[n])) : t[n], 
                    P ? r = (i += u) + m : (x && (u = Math.max(c, Math.min(l, 2 * x[n] - i))), u < i ? (r = i, 
                    i = u) : r = u), g[0] != i || g[1] != r) return n ? s = null : a = null, g[0] = i, 
                    g[1] = r, !0;
                }
                function y() {
                    m(), T.style("pointer-events", "all").selectAll(".resize").style("display", t.empty() ? "none" : null), 
                    fo.select("body").style("cursor", null), N.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), 
                    M(), S({
                        type: "brushend"
                    });
                }
                var x, _, b = this, w = fo.select(fo.event.target), S = c.of(b, arguments), T = fo.select(b), E = w.datum(), A = !/^(n|s)$/.test(E) && l, C = !/^(e|w)$/.test(E) && u, P = w.classed("extent"), M = tt(b), O = fo.mouse(b), N = fo.select(o(b)).on("keydown.brush", r).on("keyup.brush", g);
                if (fo.event.changedTouches ? N.on("touchmove.brush", m).on("touchend.brush", y) : N.on("mousemove.brush", m).on("mouseup.brush", y), 
                T.interrupt().selectAll("*").interrupt(), P) O[0] = d[0] - O[0], O[1] = h[0] - O[1]; else if (E) {
                    var V = +/w$/.test(E), L = +/^n/.test(E);
                    _ = [ d[1 - V] - O[0], h[1 - L] - O[1] ], O[0] = d[V], O[1] = h[L];
                } else fo.event.altKey && (x = O.slice());
                T.style("pointer-events", "none").selectAll(".resize").style("display", null), fo.select("body").style("cursor", w.style("cursor")), 
                S({
                    type: "brushstart"
                }), m();
            }
            var a, s, c = O(t, "brushstart", "brush", "brushend"), l = null, u = null, d = [ 0, 0 ], h = [ 0, 0 ], f = !0, p = !0, g = Jc[0];
            return t.event = function(t) {
                t.each(function() {
                    var t = c.of(this, arguments), e = {
                        x: d,
                        y: h,
                        i: a,
                        j: s
                    }, n = this.__chart__ || e;
                    this.__chart__ = e, zc ? fo.select(this).transition().each("start.brush", function() {
                        a = n.i, s = n.j, d = n.x, h = n.y, t({
                            type: "brushstart"
                        });
                    }).tween("brush:brush", function() {
                        var n = Ei(d, e.x), i = Ei(h, e.y);
                        return a = s = null, function(r) {
                            d = e.x = n(r), h = e.y = i(r), t({
                                type: "brush",
                                mode: "resize"
                            });
                        };
                    }).each("end.brush", function() {
                        a = e.i, s = e.j, t({
                            type: "brush",
                            mode: "resize"
                        }), t({
                            type: "brushend"
                        });
                    }) : (t({
                        type: "brushstart"
                    }), t({
                        type: "brush",
                        mode: "resize"
                    }), t({
                        type: "brushend"
                    }));
                });
            }, t.x = function(e) {
                return arguments.length ? (l = e, g = Jc[!l << 1 | !u], t) : l;
            }, t.y = function(e) {
                return arguments.length ? (u = e, g = Jc[!l << 1 | !u], t) : u;
            }, t.clamp = function(e) {
                return arguments.length ? (l && u ? (f = !!e[0], p = !!e[1]) : l ? f = !!e : u && (p = !!e), 
                t) : l && u ? [ f, p ] : l ? f : u ? p : null;
            }, t.extent = function(e) {
                var n, i, r, o, c;
                return arguments.length ? (l && (n = e[0], i = e[1], u && (n = n[0], i = i[0]), 
                a = [ n, i ], l.invert && (n = l(n), i = l(i)), i < n && (c = n, n = i, i = c), 
                n == d[0] && i == d[1] || (d = [ n, i ])), u && (r = e[0], o = e[1], l && (r = r[1], 
                o = o[1]), s = [ r, o ], u.invert && (r = u(r), o = u(o)), o < r && (c = r, r = o, 
                o = c), r == h[0] && o == h[1] || (h = [ r, o ])), t) : (l && (a ? (n = a[0], i = a[1]) : (n = d[0], 
                i = d[1], l.invert && (n = l.invert(n), i = l.invert(i)), i < n && (c = n, n = i, 
                i = c))), u && (s ? (r = s[0], o = s[1]) : (r = h[0], o = h[1], u.invert && (r = u.invert(r), 
                o = u.invert(o)), o < r && (c = r, r = o, o = c))), l && u ? [ [ n, r ], [ i, o ] ] : l ? [ n, i ] : u && [ r, o ]);
            }, t.clear = function() {
                return t.empty() || (d = [ 0, 0 ], h = [ 0, 0 ], a = s = null), t;
            }, t.empty = function() {
                return !!l && d[0] == d[1] || !!u && h[0] == h[1];
            }, fo.rebind(t, c, "on");
        };
        var Qc = {
            n: "ns-resize",
            e: "ew-resize",
            s: "ns-resize",
            w: "ew-resize",
            nw: "nwse-resize",
            ne: "nesw-resize",
            se: "nwse-resize",
            sw: "nesw-resize"
        }, Jc = [ [ "n", "e", "s", "w", "nw", "ne", "se", "sw" ], [ "e", "w" ], [ "n", "s" ], [] ], $c = vs.format = Ss.timeFormat, Zc = $c.utc, tl = Zc("%Y-%m-%dT%H:%M:%S.%LZ");
        $c.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? so : tl, 
        so.parse = function(t) {
            var e = new Date(t);
            return isNaN(e) ? null : e;
        }, so.toString = tl.toString, vs.second = Xt(function(t) {
            return new ys(1e3 * Math.floor(t / 1e3));
        }, function(t, e) {
            t.setTime(t.getTime() + 1e3 * Math.floor(e));
        }, function(t) {
            return t.getSeconds();
        }), vs.seconds = vs.second.range, vs.seconds.utc = vs.second.utc.range, vs.minute = Xt(function(t) {
            return new ys(6e4 * Math.floor(t / 6e4));
        }, function(t, e) {
            t.setTime(t.getTime() + 6e4 * Math.floor(e));
        }, function(t) {
            return t.getMinutes();
        }), vs.minutes = vs.minute.range, vs.minutes.utc = vs.minute.utc.range, vs.hour = Xt(function(t) {
            var e = t.getTimezoneOffset() / 60;
            return new ys(36e5 * (Math.floor(t / 36e5 - e) + e));
        }, function(t, e) {
            t.setTime(t.getTime() + 36e5 * Math.floor(e));
        }, function(t) {
            return t.getHours();
        }), vs.hours = vs.hour.range, vs.hours.utc = vs.hour.utc.range, vs.month = Xt(function(t) {
            return t = vs.day(t), t.setDate(1), t;
        }, function(t, e) {
            t.setMonth(t.getMonth() + e);
        }, function(t) {
            return t.getMonth();
        }), vs.months = vs.month.range, vs.months.utc = vs.month.utc.range;
        var el = [ 1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6 ], nl = [ [ vs.second, 1 ], [ vs.second, 5 ], [ vs.second, 15 ], [ vs.second, 30 ], [ vs.minute, 1 ], [ vs.minute, 5 ], [ vs.minute, 15 ], [ vs.minute, 30 ], [ vs.hour, 1 ], [ vs.hour, 3 ], [ vs.hour, 6 ], [ vs.hour, 12 ], [ vs.day, 1 ], [ vs.day, 2 ], [ vs.week, 1 ], [ vs.month, 1 ], [ vs.month, 3 ], [ vs.year, 1 ] ], il = $c.multi([ [ ".%L", function(t) {
            return t.getMilliseconds();
        } ], [ ":%S", function(t) {
            return t.getSeconds();
        } ], [ "%I:%M", function(t) {
            return t.getMinutes();
        } ], [ "%I %p", function(t) {
            return t.getHours();
        } ], [ "%a %d", function(t) {
            return t.getDay() && 1 != t.getDate();
        } ], [ "%b %d", function(t) {
            return 1 != t.getDate();
        } ], [ "%B", function(t) {
            return t.getMonth();
        } ], [ "%Y", Le ] ]), rl = {
            range: function(t, e, n) {
                return fo.range(Math.ceil(t / n) * n, +e, n).map(lo);
            },
            floor: S,
            ceil: S
        };
        nl.year = vs.year, vs.scale = function() {
            return co(fo.scale.linear(), nl, il);
        };
        var al = nl.map(function(t) {
            return [ t[0].utc, t[1] ];
        }), ol = Zc.multi([ [ ".%L", function(t) {
            return t.getUTCMilliseconds();
        } ], [ ":%S", function(t) {
            return t.getUTCSeconds();
        } ], [ "%I:%M", function(t) {
            return t.getUTCMinutes();
        } ], [ "%I %p", function(t) {
            return t.getUTCHours();
        } ], [ "%a %d", function(t) {
            return t.getUTCDay() && 1 != t.getUTCDate();
        } ], [ "%b %d", function(t) {
            return 1 != t.getUTCDate();
        } ], [ "%B", function(t) {
            return t.getUTCMonth();
        } ], [ "%Y", Le ] ]);
        al.year = vs.year.utc, vs.scale.utc = function() {
            return co(fo.scale.linear(), al, ol);
        }, fo.text = Nt(function(t) {
            return t.responseText;
        }), fo.json = function(t, e) {
            return Vt(t, "application/json", uo, e);
        }, fo.html = function(t, e) {
            return Vt(t, "text/html", ho, e);
        }, fo.xml = Nt(function(t) {
            return t.responseXML;
        }), this.d3 = fo, i = fo, r = "function" == typeof i ? i.call(e, n, e, t) : i, !(void 0 !== r && (t.exports = r));
    }();
}, function(t, e, n) {
    "use strict";
    var i = Object.assign || function(t) {
        for (var e = 1; e < arguments.length; e++) {
            var n = arguments[e];
            for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
        }
        return t;
    }, r = n(12);
    n(58);
    var a = r.createClass({
        displayName: "ListingRow",
        propTypes: {
            rowId: r.PropTypes.string,
            columns: r.PropTypes.array.isRequired,
            tabRenderers: r.PropTypes.array,
            navigateToItem: r.PropTypes.func,
            listingDetail: r.PropTypes.node,
            listingActions: r.PropTypes.arrayOf(r.PropTypes.node),
            selectChanged: r.PropTypes.func,
            selected: r.PropTypes.bool,
            initiallyExpanded: r.PropTypes.bool,
            initiallyActiveTab: r.PropTypes.bool
        },
        getDefaultProps: function() {
            return {
                tabRenderers: [],
                navigateToItem: null
            };
        },
        getInitialState: function() {
            return {
                expanded: this.props.initiallyExpanded,
                activeTab: this.props.initiallyActiveTab ? this.props.initiallyActiveTab : 0,
                loadedTabs: {},
                selected: this.props.selected
            };
        },
        handleNavigateClick: function(t) {
            t && 0 === t.button && this.props.navigateToItem();
        },
        handleExpandClick: function(t) {
            if (t && 0 === t.button) {
                var e = !this.state.expanded && this.props.tabRenderers.length > 0;
                this.setState({
                    expanded: e
                });
                var n = {};
                if (e) {
                    var i, r;
                    for (i = 0; i < this.props.tabRenderers.length; i++) r = "presence" in this.props.tabRenderers[i] ? this.props.tabRenderers[i].presence : "default", 
                    "always" == r && (n[i] = !0);
                    n[this.state.activeTab] = !0;
                }
                this.setState({
                    loadedTabs: n
                }), t.stopPropagation(), t.preventDefault();
            }
        },
        handleSelectClick: function(t) {
            if (t && 0 === t.button) {
                var e = !this.state.selected;
                this.setState({
                    selected: e
                }), this.props.selectChanged && this.props.selectChanged(e), t.stopPropagation(), 
                t.preventDefault();
            }
        },
        handleTabClick: function(t, e) {
            if (e && 0 === e.button) {
                var n = this.state.activeTab, i = "default", r = this.state.loadedTabs;
                n !== t && ("presence" in this.props.tabRenderers[n] && (i = this.props.tabRenderers[n].presence), 
                "onlyActive" == i && delete r[n], r[t] = !0, this.setState({
                    loadedTabs: r,
                    activeTab: t
                })), e.stopPropagation(), e.preventDefault();
            }
        },
        render: function() {
            var t, e = this, n = !!this.props.navigateToItem && !this.state.expanded, a = this.props.columns.map(function(t) {
                return "string" == typeof t || "number" == typeof t || null === t || void 0 === t || t instanceof String || r.isValidElement(t) ? r.createElement("td", null, t) : "header" in t && t.header ? r.createElement("th", null, t.name) : "tight" in t && t.tight ? r.createElement("td", {
                    className: "listing-ct-actions"
                }, t.name || t.element) : r.createElement("td", null, t.name);
            }), o = this.props.tabRenderers.length > 0;
            t = o ? r.createElement("td", {
                className: "listing-ct-toggle",
                onClick: n ? this.handleExpandClick : void 0
            }, r.createElement("i", {
                className: "fa fa-fw"
            })) : r.createElement("td", {
                className: "listing-ct-toggle"
            });
            var s = [ "listing-ct-item" ];
            n || s.push("listing-ct-nonavigate"), o || s.push("listing-ct-noexpand");
            var c, l = !(n || o) && void 0 !== this.state.selected;
            l ? (c = this.handleSelectClick, this.state.selected && s.push("listing-ct-selected")) : c = n ? this.handleNavigateClick : this.handleExpandClick;
            var u = r.createElement("tr", {
                "data-row-id": this.props.rowId,
                className: s.join(" "),
                onClick: c
            }, t, a);
            if (this.state.expanded) {
                var d, h, f, p, g = this.props.tabRenderers.map(function(t, n) {
                    return r.createElement("li", {
                        key: n,
                        className: n === e.state.activeTab ? "active" : ""
                    }, r.createElement("a", {
                        href: "#",
                        onClick: e.handleTabClick.bind(e, n)
                    }, t.name));
                }), m = [];
                for (d = 0; d < this.props.tabRenderers.length; d++) h = this.props.tabRenderers[d].renderer, 
                f = this.props.tabRenderers[d].data, (d === this.state.activeTab || d in this.state.loadedTabs) && (p = r.createElement(h, i({
                    key: this.props.tabRenderers[d].name,
                    hidden: d !== this.state.activeTab
                }, f)), d === this.state.activeTab ? m.push(r.createElement("div", {
                    className: "listing-ct-body",
                    key: d
                }, p)) : m.push(r.createElement("div", {
                    className: "listing-ct-body",
                    key: d,
                    hidden: !0
                }, p)));
                var v;
                return "listingDetail" in this.props && (v = r.createElement("span", {
                    className: "listing-ct-caption"
                }, this.props.listingDetail)), r.createElement("tbody", {
                    className: "open"
                }, u, r.createElement("tr", {
                    className: "listing-ct-panel"
                }, r.createElement("td", {
                    colSpan: a.length + (t ? 1 : 0)
                }, r.createElement("div", {
                    className: "listing-ct-head"
                }, r.createElement("div", {
                    className: "listing-ct-actions"
                }, v, this.props.listingActions), r.createElement("ul", {
                    className: "nav nav-tabs nav-tabs-pf"
                }, g)), m)));
            }
            return r.createElement("tbody", null, u, r.createElement("tr", {
                className: "listing-ct-panel"
            }));
        }
    }), o = r.createClass({
        displayName: "Listing",
        propTypes: {
            title: r.PropTypes.string.isRequired,
            fullWidth: r.PropTypes.bool,
            emptyCaption: r.PropTypes.string.isRequired,
            columnTitles: r.PropTypes.arrayOf(r.PropTypes.string),
            actions: r.PropTypes.arrayOf(r.PropTypes.node)
        },
        getDefaultProps: function() {
            return {
                fullWidth: !0,
                columnTitles: [],
                actions: []
            };
        },
        render: function() {
            var t = [ "listing", "listing-ct" ];
            this.props.fullWidth && t.push("listing-ct-wide");
            var e, n, i;
            this.props.children && 0 !== this.props.children.length ? this.props.columnTitles.length ? (i = !1, 
            this.props.children.forEach(function(t) {
                void 0 !== t.props.selected && (i = !0);
            }), i && this.props.children.forEach(function(t) {
                void 0 === t.props.selected && (t.props.selected = !1);
            }), n = r.createElement("tr", null, r.createElement("th", {
                className: "listing-ct-toggle"
            }), this.props.columnTitles.map(function(t) {
                return r.createElement("th", null, t);
            }))) : n = r.createElement("tr", null) : (e = "listing-ct-empty", n = r.createElement("tr", null, r.createElement("td", null, this.props.emptyCaption)));
            var a;
            return (this.props.title || this.props.actions && this.props.actions.length > 0) && (a = r.createElement("caption", {
                className: "cockpit-caption"
            }, this.props.title, this.props.actions)), r.createElement("table", {
                className: t.join(" ")
            }, a, r.createElement("thead", {
                className: e
            }, n), this.props.children);
        }
    });
    t.exports = {
        ListingRow: a,
        Listing: o
    };
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(57), l = n(19), u = n(49), d = i(u), h = s.default.gettext, f = function(t) {
        var e = t.disks, n = t.vmId;
        return a.default.createElement("span", {
            className: "machines-disks-total"
        }, h("Count:"), " ", a.default.createElement("span", {
            id: n + "-disks-total-value",
            className: "machines-disks-total-value"
        }, Object.getOwnPropertyNames(e).length));
    }, p = function(t) {
        var e = t.disk, n = t.vmId, i = e.source, r = function(t, e, n) {
            e && t.push(a.default.createElement(d.default, {
                descrClass: "machines-disks-source-descr",
                descr: n,
                valueClass: "machines-disks-source-value",
                value: e
            }));
        }, o = [];
        return r(o, i.file, h("File")), r(o, i.dev, h("Device")), r(o, i.protocol, h("Protocol")), 
        r(o, i.pool, h("Pool")), r(o, i.volume, h("Volume")), r(o, i.host.name, h("Host")), 
        r(o, i.host.port, h("Port")), a.default.createElement("table", {
            className: "machines-disks-source",
            id: n + "-disks-" + e.target + "-source"
        }, o);
    }, g = function(t) {
        var e = t.value, n = t.id;
        return isNaN(e) ? null : a.default.createElement("div", {
            id: n
        }, (0, l.toGigaBytes)(e, "B"), " ", h("GB"));
    }, m = function(t) {
        var e = t.disk, n = t.vmId;
        return a.default.createElement("div", {
            id: n + "-disks-" + e.target + "-target"
        }, e.target);
    }, v = function(t) {
        var e = t.disk, n = t.vmId;
        return a.default.createElement("div", {
            id: n + "-disks-" + e.target + "-device"
        }, e.device);
    }, y = function(t) {
        var e = t.disk, n = t.vmId;
        return a.default.createElement("div", {
            id: n + "-disks-" + e.target + "-bus"
        }, e.bus);
    }, x = function(t) {
        var e = t.vmId;
        return a.default.createElement(c.Listing, {
            columnTitles: [],
            emptyCaption: a.default.createElement("div", {
                id: e + "-disksstats-unsupported"
            }, h("Upgrade to a more recent version of libvirt to view disk statistics"))
        });
    }, _ = function(t) {
        var e = t.vm, n = t.provider;
        if (!e.disks || 0 === Object.getOwnPropertyNames(e.disks).length) return a.default.createElement("div", null, h("No disks defined for this VM"));
        var i = !1;
        e.disksStats && (i = !!Object.getOwnPropertyNames(e.disksStats).some(function(t) {
            return !!e.disksStats[t] && (!isNaN(e.disksStats[t].capacity) || !isNaN(e.disksStats[t].allocation));
        }));
        var r = [ h("Device"), h("Target") ];
        i && (r.push(h("Used")), r.push(h("Capacity"))), r.push(h("Bus")), r.push(h("Readonly")), 
        r.push(h("Source")), n.vmDisksColumns && n.vmDisksColumns.forEach(function(t) {
            r.splice(t.index, 0, t.title);
        });
        var o = n.vmDisksActionsFactory instanceof Function ? n.vmDisksActionsFactory({
            vm: e
        }) : void 0, s = "vm-" + e.name;
        return a.default.createElement("div", null, a.default.createElement(f, {
            disks: e.disks,
            vmId: s
        }), a.default.createElement(c.Listing, {
            columnTitles: r,
            actions: o
        }, Object.getOwnPropertyNames(e.disks).sort().map(function(t) {
            var r = e.disks[t], o = e.disksStats ? e.disksStats[t] : void 0, l = o ? o.allocation : void 0, u = o ? o.capacity : void 0, d = [ {
                name: a.default.createElement(v, {
                    disk: r,
                    vmId: s
                }),
                header: !0
            }, a.default.createElement(m, {
                disk: r,
                vmId: s
            }) ];
            return i && (d.push(a.default.createElement(g, {
                value: l,
                id: s + "-disks-" + r.target + "-used"
            })), d.push(a.default.createElement(g, {
                value: u,
                id: s + "-disks-" + r.target + "-capacity"
            }))), d.push(a.default.createElement(y, {
                disk: r,
                vmId: s
            })), d.push(h(r.readonly ? "yes" : "no")), d.push(a.default.createElement(p, {
                disk: r,
                vmId: s
            })), n.vmDisksColumns && n.vmDisksColumns.forEach(function(n) {
                d.splice(n.index, 0, n.valueProvider({
                    vm: e,
                    diskTarget: t
                }));
            }), a.default.createElement(c.ListingRow, {
                columns: d
            });
        })), i || a.default.createElement(x, {
            vmId: s
        }));
    };
    _.propTypes = {
        vm: a.default.PropTypes.object.isRequired
    }, e.default = _;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(22), l = n(19), u = n(57), d = s.default.gettext, h = function(t) {
        var e = t.vm, n = t.dispatch, i = t.hostDevices, r = (0, l.vmId)(e.name);
        if (!e.interfaces || 0 === e.interfaces.length) return a.default.createElement("div", null, d("No network interfaces defined for this VM"));
        var o = function(t) {
            for (var e in i) if (i[e].valid && i[e].Interface == t) return !0;
            return !1;
        }, h = function(t) {
            return function() {
                null !== t && o(t) && s.default.jump("/network#/" + t, s.default.transport.host);
            };
        }, f = function(t) {
            return function(i) {
                i.stopPropagation(), t.mac && n((0, c.changeNetworkState)(e, t.mac, "up" === t.state ? "down" : "up"));
            };
        }, p = function(t, e) {
            return a.default.createElement("table", {
                id: r + "-network-" + e + "-source"
            }, a.default.createElement("tr", null, a.default.createElement("td", {
                className: "machines-network-source-descr"
            }, d("Address")), a.default.createElement("td", {
                className: "machines-network-source-value"
            }, t.address)), a.default.createElement("tr", null, a.default.createElement("td", {
                className: "machines-network-source-descr"
            }, d("Port")), a.default.createElement("td", {
                className: "machines-network-source-value"
            }, t.port)));
        }, g = [ {
            name: d("Type"),
            value: function(t, e) {
                return a.default.createElement("div", {
                    id: r + "-network-" + e + "-type"
                }, (0, l.rephraseUI)("networkType", t.type));
            },
            header: !0
        }, {
            name: d("Model type"),
            value: "model"
        }, {
            name: d("MAC Address"),
            value: "mac"
        }, {
            name: d("Target"),
            value: "target"
        }, {
            name: d("Source"),
            value: function(t, e) {
                var n = function(t) {
                    return o(t) && "machines-network-source-link";
                }, i = {
                    direct: function(t) {
                        return a.default.createElement("span", {
                            className: n(t.dev),
                            onClick: h(t.dev)
                        }, t.dev);
                    },
                    network: function(t) {
                        return a.default.createElement("span", {
                            className: n(t.network),
                            onClick: h(t.network)
                        }, t.network);
                    },
                    bridge: function(t) {
                        return a.default.createElement("span", {
                            className: n(t.bridge),
                            onClick: h(t.bridge)
                        }, t.bridge);
                    },
                    mcast: p,
                    server: p,
                    client: p,
                    udp: p
                };
                return void 0 !== i[t.type] ? a.default.createElement("div", {
                    id: r + "-network-" + e + "-source"
                }, i[t.type](t.source, e)) : null;
            }
        }, {
            name: d("Additional"),
            value: function(t, e) {
                var n = [ {
                    name: d("MTU"),
                    value: "mtu"
                }, {
                    name: d("Virtualport"),
                    value: "virtualportType"
                }, {
                    name: d("Managed"),
                    value: (0, l.rephraseUI)("networkManaged", t.managed)
                }, {
                    name: d("Portgroup"),
                    value: function(t) {
                        return t.source.portgroup ? t.source.portgroup : null;
                    }
                } ], i = n.map(function(n) {
                    var i = n.name, o = null;
                    return "string" == typeof n.value && (o = t[n.value]), "function" == typeof n.value && (o = n.value(t)), 
                    o ? a.default.createElement("div", {
                        className: "col-xs-12 col-md-6 machines-network-additional-column",
                        id: r + "-network-" + e + "-" + i
                    }, a.default.createElement("div", {
                        className: "machines-network-source-descr col-xs-12 col-sm-6"
                    }, i), a.default.createElement("div", {
                        className: "machines-network-source-value col-xs-12 col-sm-6"
                    }, o)) : null;
                });
                return a.default.createElement("div", null, i);
            }
        }, {
            name: d("State"),
            value: function(t, e) {
                var n = "up" === t.state;
                return a.default.createElement("div", {
                    className: "machines-network-state",
                    id: r + "-network-" + e + "-state"
                }, a.default.createElement("span", {
                    className: "machines-network-state-text"
                }, (0, l.rephraseUI)("networkState", t.state)), a.default.createElement("button", {
                    className: "btn btn-default",
                    onClick: f(t),
                    title: "" + d(n ? "Unplug" : "Plug")
                }, n ? "Unplug" : "Plug"));
            }
        } ], m = 1;
        return a.default.createElement("div", {
            className: "machines-network-list"
        }, a.default.createElement(u.Listing, {
            columnTitles: g.map(function(t) {
                return t.name;
            }),
            actions: null
        }, e.interfaces.sort().map(function(t) {
            var e = g.map(function(e) {
                var n = null;
                return "string" == typeof e.value && void 0 !== t[e.value] && (n = {
                    name: a.default.createElement("div", {
                        id: r + "-network-" + m + "-" + e.value
                    }, t[e.value]),
                    header: e.header
                }), "function" == typeof e.value && (n = e.value(t, m)), n;
            });
            return m++, a.default.createElement(u.ListingRow, {
                columns: e
            });
        })));
    };
    h.propTypes = {
        vm: a.default.PropTypes.object.isRequired
    }, e.default = h;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(12), l = i(c), u = n(20), d = i(u), h = n(62), f = i(h), p = n(63), g = i(p), m = n(68), v = i(m), y = n(69), x = i(y), _ = n(19), b = n(22), w = d.default.gettext, S = function() {
        return l.default.createElement("div", null, w("Please start the virtual machine to access its console."));
    }, T = function(t) {
        var e = t.onChange, n = t.selected, i = t.isSerialConsole, r = t.vm, a = [], o = !1;
        return r.displays && (r.displays.vnc && (a.push(l.default.createElement(f.default.SelectEntry, {
            data: "vnc-browser",
            key: "vnc-browser"
        }, w("Graphics Console (VNC)"))), o = !0), (o || r.displays.spice) && a.push(l.default.createElement(f.default.SelectEntry, {
            data: "desktop",
            key: "desktop"
        }, w("Graphics Console in Desktop Viewer")))), i && a.push(l.default.createElement(f.default.SelectEntry, {
            data: "serial-browser",
            key: "serial-browser"
        }, w("Serial Console"))), l.default.createElement("table", {
            className: "form-table-ct"
        }, l.default.createElement("tr", null, l.default.createElement("td", {
            className: "top"
        }, l.default.createElement("label", null, w("Console Type"))), l.default.createElement("td", null, l.default.createElement(f.default.StatelessSelect, {
            id: "console-type-select",
            selected: n,
            onChange: e,
            extraClass: "console-type-select"
        }, a))));
    }, E = function() {
        return l.default.createElement("div", null, w("No console defined for this virtual machine."));
    }, A = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                consoleType: void 0,
                consoleDetail: void 0
            }, n.onConsoleTypeSelected = n.onConsoleTypeSelected.bind(n), n.getDefaultConsole = n.getDefaultConsole.bind(n), 
            n.onDesktopConsoleDownload = n.onDesktopConsoleDownload.bind(n), n;
        }
        return o(e, t), s(e, [ {
            key: "getDefaultConsole",
            value: function() {
                var t = this.props, e = t.vm, n = t.config;
                if (e.displays) {
                    if (e.displays.vnc) return "vnc-browser";
                    if (e.displays.spice) return "desktop";
                }
                var i = n.provider.serialConsoleCommand({
                    vm: e
                });
                return i ? "serial-browser" : null;
            }
        }, {
            key: "componentWillMount",
            value: function() {
                this.onConsoleTypeSelected(this.getDefaultConsole());
            }
        }, {
            key: "onConsoleTypeSelected",
            value: function(t) {
                var e = this;
                (0, _.logDebug)("onConsoleTypeSelected", t);
                var n = this.props, i = n.vm, r = n.config, a = r.provider, o = r.providerState, s = void 0;
                "vnc-browser" === t && (a.onConsoleAboutToShow ? a.onConsoleAboutToShow({
                    type: "vnc",
                    vm: i,
                    providerState: o
                }).then(function(n) {
                    (0, _.logDebug)("onConsoleTypeSelected(), provider updated console details"), n || console.info("In-Browser VNC console is disabled by external provider"), 
                    e.setState({
                        consoleType: t,
                        consoleDetail: n
                    });
                }) : s = i.displays.vnc), this.setState({
                    consoleType: t,
                    consoleDetail: s
                });
            }
        }, {
            key: "onDesktopConsoleDownload",
            value: function(t) {
                var e = this.props, n = e.dispatch, i = e.vm;
                n((0, b.vmDesktopConsole)(i, i.displays[t]));
            }
        }, {
            key: "render",
            value: function() {
                var t = this, e = this.props, n = e.vm, i = e.config, r = i.provider;
                if (!r.canConsole || !r.canConsole(n.state)) return l.default.createElement(S, null);
                var a = i.provider.serialConsoleCommand({
                    vm: n
                }), o = function() {
                    t.onDesktopConsoleDownload(n.displays.spice ? "spice" : "vnc");
                };
                (0, _.logDebug)("Consoles render, this.state.consoleType: ", this.state.consoleType);
                var s = null, c = null;
                switch (this.state.consoleType) {
                  case "serial-browser":
                    s = l.default.createElement(g.default, {
                        vmName: n.name,
                        spawnArgs: a
                    });
                    break;

                  case "vnc-browser":
                    s = l.default.createElement(v.default, {
                        vm: n,
                        consoleDetail: this.state.consoleDetail
                    }), c = l.default.createElement(m.VncActions, {
                        vm: n
                    });
                    break;

                  case "desktop":
                    s = l.default.createElement(x.default, {
                        vm: n,
                        onDesktopConsole: o,
                        config: i
                    });
                    break;

                  default:
                    s = l.default.createElement(E, null);
                }
                return l.default.createElement("div", null, l.default.createElement("span", {
                    className: "console-menu"
                }, l.default.createElement(T, {
                    onChange: this.onConsoleTypeSelected,
                    isSerialConsole: !!a,
                    selected: this.state.consoleType,
                    vm: n
                }), c), s);
            }
        } ]), e;
    }(l.default.Component);
    e.default = A;
}, function(t, e, n) {
    "use strict";
    function i(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function r(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function a(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    var o = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }();
    !function() {
        var e = n(20), s = n(12);
        n(39);
        var c = e.gettext, l = c("undefined"), u = function(t) {
            function e() {
                i(this, e);
                var t = r(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return t.clickHandler = t.clickHandler.bind(t), t.state = {
                    open: !1,
                    documentClickHandler: void 0
                }, t;
            }
            return a(e, t), o(e, [ {
                key: "componentDidMount",
                value: function() {
                    var t = this.handleDocumentClick.bind(this, s.findDOMNode(this));
                    this.setState({
                        documentClickHandler: t
                    }), document.addEventListener("click", t, !1);
                }
            }, {
                key: "componentWillUnmount",
                value: function() {
                    document.removeEventListener("click", this.state.documentClickHandler, !1);
                }
            }, {
                key: "handleDocumentClick",
                value: function(t, e) {
                    t.contains(e.target) || this.setState({
                        open: !1
                    });
                }
            }, {
                key: "clickHandler",
                value: function(t) {
                    if (!t || 0 === t.button) if ("A" === t.target.tagName) {
                        var e = t.target.offsetParent, n = void 0;
                        if ("data-data" in e.attributes && (n = e.attributes["data-data"].value), this.setState({
                            open: !1
                        }), n === this.props.selected) return;
                        this.props.onChange && this.props.onChange(n);
                    } else this.setState({
                        open: !this.state.open
                    });
                }
            }, {
                key: "render",
                value: function() {
                    var t = this, e = function(t) {
                        return t && t.props && "data" in t.props ? t.props.data : void 0;
                    }, n = function(t) {
                        return t && t.props && void 0 !== t.props.children ? t.props.children : l;
                    }, i = s.Children.toArray(this.props.children).filter(function(t) {
                        return t && t.props && "data" in t.props;
                    }), r = i.filter(function(n) {
                        return t.props.selected === e(n);
                    }), a = void 0;
                    r.length > 0 ? a = r[0] : i.length > 0 && (a = i[0]);
                    var o = n(a), c = "btn-group bootstrap-select dropdown";
                    this.state.open && (c += " open"), this.props.extraClass && (c += " " + this.props.extraClass);
                    var u = "btn btn-default dropdown-toggle";
                    return this.props.enabled === !1 && (u += " disabled"), s.createElement("div", {
                        className: c,
                        onClick: this.clickHandler,
                        id: this.props.id
                    }, s.createElement("button", {
                        className: u,
                        type: "button"
                    }, s.createElement("span", {
                        className: "pull-left"
                    }, o), s.createElement("span", {
                        className: "caret"
                    })), s.createElement("ul", {
                        className: "dropdown-menu"
                    }, this.props.children));
                }
            } ]), e;
        }(s.Component);
        u.propTypes = {
            selected: s.PropTypes.string,
            onChange: s.PropTypes.func,
            id: s.PropTypes.string,
            enabled: s.PropTypes.bool,
            extraClass: s.PropTypes.string
        };
        var d = function(t) {
            function e(t) {
                i(this, e);
                var n = r(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                return n.onChange = n.onChange.bind(n), n.state = {
                    currentData: t.initial
                }, n;
            }
            return a(e, t), o(e, [ {
                key: "onChange",
                value: function(t) {
                    this.setState({
                        currentData: t
                    }), "function" == typeof this.props.onChange && this.props.onChange(t);
                }
            }, {
                key: "render",
                value: function() {
                    return s.createElement(u, {
                        onChange: this.onChange,
                        selected: this.state.currentData,
                        id: this.props.id,
                        enabled: this.props.enabled,
                        extraClass: this.props.extraClass
                    }, this.props.children);
                }
            } ]), e;
        }(s.Component);
        d.propTypes = {
            initial: s.PropTypes.string,
            onChange: s.PropTypes.func,
            id: s.PropTypes.string,
            enabled: s.PropTypes.bool,
            extraClass: s.PropTypes.string
        };
        var h = function(t) {
            function e() {
                return i(this, e), r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
            }
            return a(e, t), o(e, [ {
                key: "render",
                value: function() {
                    var t = void 0 !== this.props.children ? this.props.children : l;
                    return s.createElement("li", {
                        "data-value": t,
                        "data-data": this.props.data
                    }, s.createElement("a", null, t));
                }
            } ]), e;
        }(s.Component), f = function() {
            return s.createElement("li", {
                role: "separator",
                className: "divider"
            });
        }, p = function(t) {
            var e = t.children, n = void 0 !== e ? e : l;
            return s.createElement("li", {
                className: "dropdown-header"
            }, n);
        };
        h.propTypes = {
            data: s.PropTypes.string.isRequired
        }, t.exports = {
            Select: d,
            StatelessSelect: u,
            SelectEntry: h,
            SelectDivider: f,
            SelectHeader: p
        };
    }();
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(12), l = i(c), u = n(20), d = i(u), h = n(64), f = d.default.gettext, p = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                channel: void 0
            }, n.focusTerminal = n.focusTerminal.bind(n), n.onResetClick = n.onResetClick.bind(n), 
            n.onDisconnectClick = n.onDisconnectClick.bind(n), n;
        }
        return o(e, t), s(e, [ {
            key: "createChannel",
            value: function() {
                var t = this.props.spawnArgs;
                return d.default.channel({
                    payload: "stream",
                    spawn: t,
                    pty: !0
                });
            }
        }, {
            key: "componentWillMount",
            value: function() {
                this.setState({
                    channel: this.createChannel()
                });
            }
        }, {
            key: "componentWillUnmount",
            value: function() {
                this.state.channel && this.state.channel.close();
            }
        }, {
            key: "onResetClick",
            value: function(t) {
                0 === t.button && (this.state.channel && this.state.channel.close(), this.setState({
                    channel: this.createChannel()
                }), this.focusTerminal());
            }
        }, {
            key: "onDisconnectClick",
            value: function(t) {
                0 === t.button && (this.state.channel && this.state.channel.close(), this.setState({
                    channel: null
                }), this.focusTerminal());
            }
        }, {
            key: "focusTerminal",
            value: function() {
                this.refs.resetButton.blur(), this.refs.disconnectButton.blur(), this.refs.terminal && this.refs.terminal.focus();
            }
        }, {
            key: "render",
            value: function() {
                var t = this.props.vmName, e = void 0;
                e = this.state.channel ? l.default.createElement(h.Terminal, {
                    ref: "terminal",
                    channel: this.state.channel
                }) : null === this.state.channel ? l.default.createElement("span", null, f("Disconnected from serial console. Click the Reconnect button.")) : l.default.createElement("span", null, f("Loading ..."));
                var n = !this.state.channel && "disabled" || "";
                return l.default.createElement("div", {
                    className: "console-ct-container"
                }, l.default.createElement("div", {
                    className: "console-actions"
                }, l.default.createElement("button", {
                    ref: "disconnectButton",
                    id: t + "-serialconsole-disconnect",
                    className: "btn btn-default console-actions-buttons " + n,
                    onClick: this.onDisconnectClick
                }, f("Disconnect")), l.default.createElement("button", {
                    ref: "resetButton",
                    id: t + "-serialconsole-reconnect",
                    className: "btn btn-default console-actions-buttons",
                    onClick: this.onResetClick
                }, f("Reconnect"))), l.default.createElement("div", {
                    className: "panel-body machines-terminal"
                }, e));
            }
        } ]), e;
    }(l.default.Component);
    e.default = p;
}, function(t, e, n) {
    "use strict";
    !function() {
        var e = n(12), i = n(65);
        n(66);
        var r = e.createClass({
            displayName: "Terminal",
            propTypes: {
                cols: e.PropTypes.number,
                rows: e.PropTypes.number,
                channel: e.PropTypes.object.isRequired,
                onTitleChanged: e.PropTypes.func
            },
            componentWillMount: function() {
                var t = new i({
                    cols: this.props.cols || 80,
                    rows: this.props.rows || 25,
                    screenKeys: !0
                });
                t.on("data", function(t) {
                    this.props.channel.valid && this.props.channel.send(t);
                }.bind(this)), this.props.onTitleChanged && t.on("title", this.props.onTitleChanged), 
                this.setState({
                    terminal: t
                });
            },
            componentDidMount: function() {
                this.state.terminal.open(this.refs.terminal), this.connectChannel(), this.props.rows || (window.addEventListener("resize", this.onWindowResize), 
                this.onWindowResize());
            },
            componentWillUpdate: function(t, e) {
                e.cols === this.state.cols && e.rows === this.state.rows || (this.state.terminal.resize(e.cols, e.rows), 
                this.props.channel.control({
                    window: {
                        rows: e.rows,
                        cols: e.cols
                    }
                })), t.channel !== this.props.channel && (this.state.terminal.reset(), this.disconnectChannel());
            },
            componentDidUpdate: function(t) {
                t.channel !== this.props.channel && (this.connectChannel(), this.props.channel.control({
                    window: {
                        rows: this.state.rows,
                        cols: this.state.cols
                    }
                }));
            },
            render: function() {
                return e.createElement("div", {
                    ref: "terminal",
                    key: this.state.terminal,
                    className: "console-ct",
                    onFocusIn: this.onFocusIn,
                    onFocusOut: this.onFocusOut
                });
            },
            componentWillUnmount: function() {
                this.disconnectChannel(), this.state.terminal.destroy(), window.removeEventListener("resize", this.onWindowResize);
            },
            onChannelMessage: function(t, e) {
                this.state.terminal.write(e);
            },
            onChannelClose: function(t, e) {
                var n = this.state.terminal;
                n.write("[31m" + (e.problem || "disconnected") + "[m\r\n"), n.cursorHidden = !0, 
                n.refresh(n.y, n.y);
            },
            connectChannel: function() {
                var t = this.props.channel;
                t && t.valid && (t.addEventListener("message", this.onChannelMessage.bind(this)), 
                t.addEventListener("close", this.onChannelClose.bind(this)));
            },
            disconnectChannel: function() {
                this.props.channel && (this.props.channel.removeEventListener("message", this.onChannelMessage), 
                this.props.channel.removeEventListener("close", this.onChannelClose));
            },
            focus: function() {
                this.state.terminal && this.state.terminal.focus();
            },
            onWindowResize: function() {
                var t = 22, e = this.getDOMNode(), n = this.refs.terminal.querySelector(".terminal"), i = document.createElement("span");
                i.textContent = "M", i.style.position = "absolute", n.appendChild(i);
                var r = i.getBoundingClientRect();
                n.removeChild(i), this.setState({
                    rows: Math.floor((e.parentElement.clientHeight - t) / r.height),
                    cols: Math.floor((e.parentElement.clientWidth - t) / r.width)
                });
            },
            onBeforeUnload: function(t) {
                return t.preventDefault(), t.returnValue = "", "";
            },
            onFocusIn: function() {
                window.addEventListener("beforeunload", this.onBeforeUnload);
            },
            onFocusOut: function() {
                window.removeEventListener("beforeunload", this.onBeforeUnload);
            }
        });
        t.exports = {
            Terminal: r
        };
    }();
}, function(t, e, n) {
    var i, r;
    (function(n) {
        (function() {
            "use strict";
            function n() {
                this._events = this._events || {};
            }
            function a() {
                n.call(this);
            }
            function o(t) {
                var e = this;
                if (!(this instanceof o)) return new o(arguments[0], arguments[1], arguments[2]);
                a.call(this), "number" == typeof t && (t = {
                    cols: arguments[0],
                    rows: arguments[1],
                    handler: arguments[2]
                }), t = t || {}, g(m(o.defaults), function(n) {
                    null == t[n] && (t[n] = o.options[n], o[n] !== o.defaults[n] && (t[n] = o[n])), 
                    e[n] = t[n];
                }), 8 === t.colors.length ? t.colors = t.colors.concat(o._colors.slice(8)) : 16 === t.colors.length ? t.colors = t.colors.concat(o._colors.slice(16)) : 10 === t.colors.length ? t.colors = t.colors.slice(0, -2).concat(o._colors.slice(8, -2), t.colors.slice(-2)) : 18 === t.colors.length && (t.colors = t.colors.slice(0, -2).concat(o._colors.slice(16, -2), t.colors.slice(-2))), 
                this.colors = t.colors, this.options = t, this.parent = t.body || t.parent || (v ? v.getElementsByTagName("body")[0] : null), 
                this.cols = t.cols || t.geometry[0], this.rows = t.rows || t.geometry[1], this.setRawMode, 
                this.isTTY = !0, this.isRaw = !0, this.columns = this.cols, this.rows = this.rows, 
                t.handler && this.on("data", t.handler), this.ybase = 0, this.ydisp = 0, this.x = 0, 
                this.y = 0, this.cursorHidden = !1, this.convertEol, this.state = 0, this.queue = "", 
                this.scrollTop = 0, this.scrollBottom = this.rows - 1, this.applicationKeypad = !1, 
                this.applicationCursor = !1, this.originMode = !1, this.insertMode = !1, this.wraparoundMode = !1, 
                this.normal = null, this.prefixMode = !1, this.selectMode = !1, this.visualMode = !1, 
                this.searchMode = !1, this.searchDown, this.entry = "", this.entryPrefix = "Search: ", 
                this._real, this._selected, this._textarea, this.charset = null, this.gcharset = null, 
                this.glevel = 0, this.charsets = [ null ], this.decLocator, this.x10Mouse, this.vt200Mouse, 
                this.vt300Mouse, this.normalMouse, this.mouseEvents, this.sendFocus, this.utfMouse, 
                this.sgrMouse, this.urxvtMouse, this.element, this.children, this.refreshStart, 
                this.refreshEnd, this.savedX, this.savedY, this.savedCols, this.readable = !0, this.writable = !0, 
                this.defAttr = 131840, this.curAttr = this.defAttr, this.params = [], this.currentParam = 0, 
                this.prefix = "", this.postfix = "", this.lines = [];
                for (var n = this.rows; n--; ) this.lines.push(this.blankLine());
                this.tabs, this.setupStops();
            }
            function s(t, e, n, i) {
                t.addEventListener(e, n, i || !1);
            }
            function c(t, e, n, i) {
                t.removeEventListener(e, n, i || !1);
            }
            function l(t) {
                return t.preventDefault && t.preventDefault(), t.returnValue = !1, t.stopPropagation && t.stopPropagation(), 
                t.cancelBubble = !0, !1;
            }
            function u(t, e) {
                function n() {
                    this.constructor = t;
                }
                n.prototype = e.prototype, t.prototype = new n();
            }
            function d(t) {
                var e = t.getElementsByTagName("body")[0], n = t.createElement("div");
                n.className = "terminal";
                var i = t.createElement("div"), r = t.createElement("span");
                r.innerHTML = "hello world", i.appendChild(r), n.appendChild(i), e.appendChild(n);
                var a = r.scrollWidth;
                r.style.fontWeight = "bold";
                var o = r.scrollWidth;
                return e.removeChild(n), a !== o;
            }
            function h(t, e) {
                for (var n = t.length; n--; ) if (t[n] === e) return n;
                return -1;
            }
            function f(t) {
                return !(t <= "＀") && (t >= "！" && t <= "ﾾ" || t >= "ￂ" && t <= "ￇ" || t >= "ￊ" && t <= "ￏ" || t >= "ￒ" && t <= "ￗ" || t >= "ￚ" && t <= "ￜ" || t >= "￠" && t <= "￦" || t >= "￨" && t <= "￮");
            }
            function p(t, e, n) {
                var i = t << 16 | e << 8 | n;
                if (null != p._cache[i]) return p._cache[i];
                for (var r, a, s, c, l, u = 1 / 0, d = -1, h = 0; h < o.vcolors.length; h++) {
                    if (r = o.vcolors[h], a = r[0], s = r[1], c = r[2], l = p.distance(t, e, n, a, s, c), 
                    0 === l) {
                        d = h;
                        break;
                    }
                    l < u && (u = l, d = h);
                }
                return p._cache[i] = d;
            }
            function g(t, e, n) {
                if (t.forEach) return t.forEach(e, n);
                for (var i = 0; i < t.length; i++) e.call(n, t[i], i, t);
            }
            function m(t) {
                if (Object.keys) return Object.keys(t);
                var e, n = [];
                for (e in t) Object.prototype.hasOwnProperty.call(t, e) && n.push(e);
                return n;
            }
            var v = this.document;
            n.prototype.addListener = function(t, e) {
                this._events[t] = this._events[t] || [], this._events[t].push(e);
            }, n.prototype.on = n.prototype.addListener, n.prototype.removeListener = function(t, e) {
                if (this._events[t]) for (var n = this._events[t], i = n.length; i--; ) if (n[i] === e || n[i].listener === e) return void n.splice(i, 1);
            }, n.prototype.off = n.prototype.removeListener, n.prototype.removeAllListeners = function(t) {
                this._events[t] && delete this._events[t];
            }, n.prototype.once = function(t, e) {
                function n() {
                    var i = Array.prototype.slice.call(arguments);
                    return this.removeListener(t, n), e.apply(this, i);
                }
                return n.listener = e, this.on(t, n);
            }, n.prototype.emit = function(t) {
                if (this._events[t]) for (var e = Array.prototype.slice.call(arguments, 1), n = this._events[t], i = n.length, r = 0; r < i; r++) n[r].apply(this, e);
            }, n.prototype.listeners = function(t) {
                return this._events[t] = this._events[t] || [];
            }, u(a, n), a.prototype.pipe = function(t, e) {
                function n() {
                    o.removeListener("data", i), o.removeListener("error", r), o.removeListener("end", a), 
                    t.removeListener("error", r), t.removeListener("close", n);
                }
                var i, r, a, o = this;
                return o.on("data", i = function(e) {
                    t.write(e);
                }), o.on("error", r = function(t) {
                    if (n(), !this.listeners("error").length) throw t;
                }), o.on("end", a = function() {
                    t.end(), n();
                }), t.on("error", r), t.on("close", n), t.emit("pipe", o), t;
            };
            var y = 0, x = 1, _ = 2, b = 3, w = 4, S = 5, T = 6, E = {
                type: "udk"
            };
            u(o, a), o.tangoColors = [ "#2e3436", "#cc0000", "#4e9a06", "#c4a000", "#3465a4", "#75507b", "#06989a", "#d3d7cf", "#555753", "#ef2929", "#8ae234", "#fce94f", "#729fcf", "#ad7fa8", "#34e2e2", "#eeeeec" ], 
            o.xtermColors = [ "#000000", "#cd0000", "#00cd00", "#cdcd00", "#0000ee", "#cd00cd", "#00cdcd", "#e5e5e5", "#7f7f7f", "#ff0000", "#00ff00", "#ffff00", "#5c5cff", "#ff00ff", "#00ffff", "#ffffff" ], 
            o.colors = function() {
                function t(t, n, r) {
                    i.push("#" + e(t) + e(n) + e(r));
                }
                function e(t) {
                    return t = t.toString(16), t.length < 2 ? "0" + t : t;
                }
                var n, i = o.tangoColors.slice(), r = [ 0, 95, 135, 175, 215, 255 ];
                for (n = 0; n < 216; n++) t(r[n / 36 % 6 | 0], r[n / 6 % 6 | 0], r[n % 6]);
                for (n = 0; n < 24; n++) r = 8 + 10 * n, t(r, r, r);
                return i;
            }(), o.colors[256] = "#000000", o.colors[257] = "#f0f0f0", o._colors = o.colors.slice(), 
            o.vcolors = function() {
                for (var t, e = [], n = o.colors, i = 0; i < 256; i++) t = parseInt(n[i].substring(1), 16), 
                e.push([ t >> 16 & 255, t >> 8 & 255, 255 & t ]);
                return e;
            }(), o.defaults = {
                colors: o.colors,
                convertEol: !1,
                termName: "xterm",
                geometry: [ 80, 24 ],
                visualBell: !1,
                popOnBell: !1,
                scrollback: 1e3,
                screenKeys: !1,
                debug: !1
            }, o.options = {}, g(m(o.defaults), function(t) {
                o[t] = o.defaults[t], o.options[t] = o.defaults[t];
            }), o.focus = null, o.prototype.focus = function() {
                o.focus !== this && (o.focus && o.focus.blur(), this.sendFocus && this.send("[I"), 
                o.focus = this);
            }, o.prototype.blur = function() {
                o.focus === this && (this.sendFocus && this.send("[O"), o.focus = null);
            }, o.prototype.initGlobal = function() {
                var t = this.document;
                o._boundDocs = o._boundDocs || [], ~h(o._boundDocs, t) || (o._boundDocs.push(t), 
                o.bindPaste(t), o.bindKeys(t), o.bindCopy(t), this.isMobile && this.fixMobile(t));
            }, o.bindPaste = function(t) {
                var e = t.defaultView;
                s(e, "paste", function(t) {
                    var e = o.focus;
                    if (e) return t.clipboardData ? e.send(t.clipboardData.getData("text/plain")) : e.context.clipboardData && e.send(e.context.clipboardData.getData("Text")), 
                    e.element.contentEditable = "inherit", l(t);
                });
            }, o.bindKeys = function(t) {
                s(t, "keydown", function(t) {
                    if (o.focus) {
                        var e = t.target || t.srcElement;
                        if (e) return e === o.focus.element || e === o.focus.context || e === o.focus.document || e === o.focus.body || e === o._textarea || e === o.focus.parent ? o.focus.keyDown(t) : void 0;
                    }
                }, !0), s(t, "keypress", function(t) {
                    if (o.focus) {
                        var e = t.target || t.srcElement;
                        if (e) return e === o.focus.element || e === o.focus.context || e === o.focus.document || e === o.focus.body || e === o._textarea || e === o.focus.parent ? o.focus.keyPress(t) : void 0;
                    }
                }, !0), s(t, "mousedown", function(t) {
                    if (o.focus) {
                        var e = t.target || t.srcElement;
                        if (e) {
                            do if (e === o.focus.element) return; while (e = e.parentNode);
                            o.focus.blur();
                        }
                    }
                });
            }, o.bindCopy = function(t) {
                var e = t.defaultView;
                s(e, "copy", function(t) {
                    var e = o.focus;
                    if (e && e._selected) {
                        var n = e.getCopyTextarea(), i = e.grabText(e._selected.x1, e._selected.x2, e._selected.y1, e._selected.y2);
                        e.emit("copy", i), n.focus(), n.textContent = i, n.value = i, n.setSelectionRange(0, i.length), 
                        C(function() {
                            e.element.focus(), e.focus();
                        }, 1);
                    }
                });
            }, o.prototype.fixMobile = function(t) {
                var e = this, n = t.createElement("textarea");
                n.style.position = "absolute", n.style.left = "-32000px", n.style.top = "-32000px", 
                n.style.width = "0px", n.style.height = "0px", n.style.opacity = "0", n.style.backgroundColor = "transparent", 
                n.style.borderStyle = "none", n.style.outlineStyle = "none", n.autocapitalize = "none", 
                n.autocorrect = "off", t.getElementsByTagName("body")[0].appendChild(n), o._textarea = n, 
                C(function() {
                    n.focus();
                }, 1e3), this.isAndroid && s(n, "change", function() {
                    var t = n.textContent || n.value;
                    n.value = "", n.textContent = "", e.send(t + "\r");
                });
            }, o.prototype.open = function(t) {
                var e, n = this, i = 0;
                if (this.parent = t || this.parent, !this.parent) throw new Error("Terminal requires a parent element.");
                for (this.context = this.parent.ownerDocument.defaultView, this.document = this.parent.ownerDocument, 
                this.body = this.document.getElementsByTagName("body")[0], this.context.navigator && this.context.navigator.userAgent && (this.isMac = !!~this.context.navigator.userAgent.indexOf("Mac"), 
                this.isIpad = !!~this.context.navigator.userAgent.indexOf("iPad"), this.isIphone = !!~this.context.navigator.userAgent.indexOf("iPhone"), 
                this.isAndroid = !!~this.context.navigator.userAgent.indexOf("Android"), this.isMobile = this.isIpad || this.isIphone || this.isAndroid, 
                this.isMSIE = !!~this.context.navigator.userAgent.indexOf("MSIE")), this.element = this.document.createElement("div"), 
                this.element.className = "terminal", this.element.style.outline = "none", this.element.setAttribute("tabindex", 0), 
                this.element.setAttribute("spellcheck", "false"), this.element.style.backgroundColor = this.colors[256], 
                this.element.style.color = this.colors[257], this.children = []; i < this.rows; i++) e = this.document.createElement("div"), 
                this.element.appendChild(e), this.children.push(e);
                this.parent.appendChild(this.element), this.refresh(0, this.rows - 1), "useEvents" in this.options && !this.options.useEvents || this.initGlobal(), 
                "useFocus" in this.options && !this.options.useFocus || (this.focus(), s(this.element, "focus", function() {
                    n.focus(), n.isMobile && o._textarea.focus();
                }), s(this.element, "mousedown", function() {
                    n.focus();
                }), s(this.element, "mousedown", function(t) {
                    var e = null != t.button ? +t.button : null != t.which ? t.which - 1 : null;
                    n.isMSIE && (e = 1 === e ? 0 : 4 === e ? 1 : e), 2 === e && (n.element.contentEditable = "true", 
                    C(function() {
                        n.element.contentEditable = "inherit";
                    }, 1));
                }, !0)), "useMouse" in this.options && !this.options.useMouse || this.bindMouse(), 
                "useFocus" in this.options && !this.options.useFocus || C(function() {
                    n.element.focus();
                }, 100), null == o.brokenBold && (o.brokenBold = d(this.document)), this.emit("open");
            }, o.prototype.setRawMode = function(t) {
                this.isRaw = !!t;
            }, o.prototype.bindMouse = function() {
                function t(t) {
                    var e, n;
                    if (e = r(t), n = a(t)) switch (i(e, n), t.type) {
                      case "mousedown":
                        d = e;
                        break;

                      case "mouseup":
                        d = 32;
                        break;

                      case h:                    }
                }
                function e(t) {
                    var e, n = d;
                    e = a(t), e && (n += 32, i(n, e));
                }
                function n(t, e) {
                    if (u.utfMouse) {
                        if (2047 === e) return t.push(0);
                        e < 127 ? t.push(e) : (e > 2047 && (e = 2047), t.push(192 | e >> 6), t.push(128 | 63 & e));
                    } else {
                        if (255 === e) return t.push(0);
                        e > 127 && (e = 127), t.push(e);
                    }
                }
                function i(t, e) {
                    if (u.vt300Mouse) {
                        t &= 3, e.x -= 32, e.y -= 32;
                        var i = "[24";
                        if (0 === t) i += "1"; else if (1 === t) i += "3"; else if (2 === t) i += "5"; else {
                            if (3 === t) return;
                            i += "0";
                        }
                        return i += "~[" + e.x + "," + e.y + "]\r", void u.send(i);
                    }
                    if (u.decLocator) return t &= 3, e.x -= 32, e.y -= 32, 0 === t ? t = 2 : 1 === t ? t = 4 : 2 === t ? t = 6 : 3 === t && (t = 3), 
                    void u.send("[" + t + ";" + (3 === t ? 4 : 0) + ";" + e.y + ";" + e.x + ";" + (e.page || 0) + "&w");
                    if (u.urxvtMouse) return e.x -= 32, e.y -= 32, e.x++, e.y++, void u.send("[" + t + ";" + e.x + ";" + e.y + "M");
                    if (u.sgrMouse) return e.x -= 32, e.y -= 32, void u.send("[<" + (3 === (3 & t) ? t & -4 : t) + ";" + e.x + ";" + e.y + (3 === (3 & t) ? "m" : "M"));
                    var i = [];
                    n(i, t), n(i, e.x), n(i, e.y), u.send("[M" + A.fromCharCode.apply(A, i));
                }
                function r(t) {
                    var e, n, i, r, a;
                    switch (t.type) {
                      case "mousedown":
                        e = null != t.button ? +t.button : null != t.which ? t.which - 1 : null, u.isMSIE && (e = 1 === e ? 0 : 4 === e ? 1 : e);
                        break;

                      case "mouseup":
                        e = 3;
                        break;

                      case "DOMMouseScroll":
                        e = t.detail < 0 ? 64 : 65;
                        break;

                      case "mousewheel":
                        e = t.wheelDeltaY > 0 ? 64 : 65;
                    }
                    return n = t.shiftKey ? 4 : 0, i = t.metaKey ? 8 : 0, r = t.ctrlKey ? 16 : 0, a = n | i | r, 
                    u.vt200Mouse ? a &= r : u.normalMouse || (a = 0), e = 32 + (a << 2) + e;
                }
                function a(t) {
                    var e, n, i, r, a;
                    if (null != t.pageX) {
                        for (e = t.pageX, n = t.pageY, a = u.element; a && a !== u.document.documentElement; ) e -= a.offsetLeft, 
                        n -= a.offsetTop, a = "offsetParent" in a ? a.offsetParent : a.parentNode;
                        return i = u.element.clientWidth, r = u.element.clientHeight, e = Math.round(e / i * u.cols), 
                        n = Math.round(n / r * u.rows), e < 0 && (e = 0), e > u.cols && (e = u.cols), n < 0 && (n = 0), 
                        n > u.rows && (n = u.rows), e += 32, n += 32, {
                            x: e,
                            y: n,
                            type: t.type === h ? "mousewheel" : t.type
                        };
                    }
                }
                var o = this.element, u = this, d = 32, h = "onmousewheel" in this.context ? "mousewheel" : "DOMMouseScroll";
                s(o, "mousedown", function(n) {
                    u.mouseEvents && (t(n), u.focus(), u.normalMouse && s(u.document, "mousemove", e), 
                    u.x10Mouse || s(u.document, "mouseup", function n(i) {
                        return t(i), u.normalMouse && c(u.document, "mousemove", e), c(u.document, "mouseup", n), 
                        l(i);
                    }));
                }), s(o, h, function(e) {
                    if (u.mouseEvents && !(u.x10Mouse || u.vt300Mouse || u.decLocator)) return t(e), 
                    l(e);
                }), s(o, h, function(t) {
                    if (!u.mouseEvents && !u.applicationKeypad) return "DOMMouseScroll" === t.type ? u.scrollDisp(t.detail < 0 ? -5 : 5) : u.scrollDisp(t.wheelDeltaY > 0 ? -5 : 5), 
                    l(t);
                });
            }, o.prototype.close = o.prototype.destroySoon = o.prototype.destroy = function() {
                this.destroyed || (this._blink && (clearInterval(this._blink), delete this._blink), 
                this.readable = !1, this.writable = !1, this.destroyed = !0, this._events = {}, 
                this.handler = function() {}, this.write = function() {}, this.end = function() {}, 
                this.element.parentNode && this.element.parentNode.removeChild(this.element), this.emit("end"), 
                this.emit("close"), this.emit("finish"), this.emit("destroy"));
            }, o.prototype.refresh = function(t, e) {
                var n, i, r, a, s, c, l, u, d, h, p, g, m;
                for (l = this.cols, i = t, e >= this.lines.length && (this.log("`end` is too large. Most likely a bad CSR."), 
                e = this.lines.length - 1); i <= e; i++) {
                    for (m = i + this.ydisp, a = this.lines[m], s = "", n = i !== this.y || this.ydisp !== this.ybase && !this.selectMode || this.cursorHidden ? -1 : this.x, 
                    d = this.defAttr, r = 0; r < l; r++) {
                        switch (u = a[r][0], c = a[r][1], r === n && (u = -1), u !== d && (d !== this.defAttr && (s += "</span>"), 
                        u !== this.defAttr && (u === -1 ? s += '<span class="reverse-video terminal-cursor">' : (s += '<span class="', 
                        h = 511 & u, p = u >> 9 & 511, g = u >> 18, 1 & g && (o.brokenBold || (s += "term-bold "), 
                        p < 8 && (p += 8)), 2 & g && (s += "term-underline "), 4 & g && (s += "term-blink "), 
                        8 & g && (h = u >> 9 & 511, p = 511 & u, 1 & g && p < 8 && (p += 8)), 16 & g && (s += "term-hidden "), 
                        256 !== h && (s += "term-bg-color-" + h + " "), 257 !== p && (s += "term-fg-color-" + p + " "), 
                        s += '">'))), c) {
                          case "&":
                            s += "&amp;";
                            break;

                          case "<":
                            s += "&lt;";
                            break;

                          case ">":
                            s += "&gt;";
                            break;

                          default:
                            c <= " " ? s += "&nbsp;" : (f(c) && r++, s += c);
                        }
                        d = u;
                    }
                    d !== this.defAttr && (s += "</span>"), this.children[i].innerHTML = s;
                }
            }, o.prototype.showCursor = function() {
                this.cursorHidden = !1, this.refresh(this.y, this.y);
            }, o.prototype.scroll = function() {
                var t;
                ++this.ybase === this.scrollback && (this.ybase = this.ybase / 2 | 0, this.lines = this.lines.slice(-(this.ybase + this.rows) + 1)), 
                this.ydisp = this.ybase, t = this.ybase + this.rows - 1, t -= this.rows - 1 - this.scrollBottom, 
                t === this.lines.length ? this.lines.push(this.blankLine()) : this.lines.splice(t, 0, this.blankLine()), 
                0 !== this.scrollTop && (0 !== this.ybase && (this.ybase--, this.ydisp = this.ybase), 
                this.lines.splice(this.ybase + this.scrollTop, 1)), this.updateRange(this.scrollTop), 
                this.updateRange(this.scrollBottom);
            }, o.prototype.scrollDisp = function(t) {
                this.ydisp += t, this.ydisp > this.ybase ? this.ydisp = this.ybase : this.ydisp < 0 && (this.ydisp = 0), 
                this.refresh(0, this.rows - 1);
            }, o.prototype.write = function(t) {
                var e, n, i, r = t.length, a = 0;
                for (this.refreshStart = this.y, this.refreshEnd = this.y, this.ybase !== this.ydisp && (this.ydisp = this.ybase, 
                this.maxRange()); a < r; a++, this.lch = i) switch (i = t[a], this.state) {
                  case y:
                    switch (i) {
                      case "":
                        this.bell();
                        break;

                      case "\n":
                      case "\v":
                      case "\f":
                        this.convertEol && (this.x = 0), this.y++, this.y > this.scrollBottom && (this.y--, 
                        this.scroll());
                        break;

                      case "\r":
                        this.x = 0;
                        break;

                      case "\b":
                        this.x > 0 && this.x--;
                        break;

                      case "\t":
                        this.x = this.nextStop();
                        break;

                      case "":
                        this.setgLevel(1);
                        break;

                      case "":
                        this.setgLevel(0);
                        break;

                      case "":
                        this.state = x;
                        break;

                      default:
                        if (i >= " " && (this.charset && this.charset[i] && (i = this.charset[i]), this.x >= this.cols && (this.x = 0, 
                        this.y++, this.y > this.scrollBottom && (this.y--, this.scroll())), this.lines[this.y + this.ybase][this.x] = [ this.curAttr, i ], 
                        this.x++, this.updateRange(this.y), f(i))) {
                            if (e = this.y + this.ybase, this.cols < 2 || this.x >= this.cols) {
                                this.lines[e][this.x - 1] = [ this.curAttr, " " ];
                                break;
                            }
                            this.lines[e][this.x] = [ this.curAttr, " " ], this.x++;
                        }
                    }
                    break;

                  case x:
                    switch (i) {
                      case "[":
                        this.params = [], this.currentParam = 0, this.state = _;
                        break;

                      case "]":
                        this.params = [], this.currentParam = 0, this.state = b;
                        break;

                      case "P":
                        this.params = [], this.prefix = "", this.currentParam = "", this.state = S;
                        break;

                      case "_":
                        this.state = T;
                        break;

                      case "^":
                        this.state = T;
                        break;

                      case "c":
                        this.reset();
                        break;

                      case "E":
                        this.x = 0;

                      case "D":
                        this.index();
                        break;

                      case "M":
                        this.reverseIndex();
                        break;

                      case "%":
                        this.setgLevel(0), this.setgCharset(0, o.charsets.US), this.state = y, a++;
                        break;

                      case "(":
                      case ")":
                      case "*":
                      case "+":
                      case "-":
                      case ".":
                        switch (i) {
                          case "(":
                            this.gcharset = 0;
                            break;

                          case ")":
                            this.gcharset = 1;
                            break;

                          case "*":
                            this.gcharset = 2;
                            break;

                          case "+":
                            this.gcharset = 3;
                            break;

                          case "-":
                            this.gcharset = 1;
                            break;

                          case ".":
                            this.gcharset = 2;
                        }
                        this.state = w;
                        break;

                      case "/":
                        this.gcharset = 3, this.state = w, a--;
                        break;

                      case "N":
                        break;

                      case "O":
                        break;

                      case "n":
                        this.setgLevel(2);
                        break;

                      case "o":
                        this.setgLevel(3);
                        break;

                      case "|":
                        this.setgLevel(3);
                        break;

                      case "}":
                        this.setgLevel(2);
                        break;

                      case "~":
                        this.setgLevel(1);
                        break;

                      case "7":
                        this.saveCursor(), this.state = y;
                        break;

                      case "8":
                        this.restoreCursor(), this.state = y;
                        break;

                      case "#":
                        this.state = y, a++;
                        break;

                      case "H":
                        this.tabSet();
                        break;

                      case "=":
                        this.log("Serial port requested application keypad."), this.applicationKeypad = !0, 
                        this.state = y;
                        break;

                      case ">":
                        this.log("Switching back to normal keypad."), this.applicationKeypad = !1, this.state = y;
                        break;

                      default:
                        this.state = y, this.error("Unknown ESC control: %s.", i);
                    }
                    break;

                  case w:
                    switch (i) {
                      case "0":
                        n = o.charsets.SCLD;
                        break;

                      case "A":
                        n = o.charsets.UK;
                        break;

                      case "B":
                        n = o.charsets.US;
                        break;

                      case "4":
                        n = o.charsets.Dutch;
                        break;

                      case "C":
                      case "5":
                        n = o.charsets.Finnish;
                        break;

                      case "R":
                        n = o.charsets.French;
                        break;

                      case "Q":
                        n = o.charsets.FrenchCanadian;
                        break;

                      case "K":
                        n = o.charsets.German;
                        break;

                      case "Y":
                        n = o.charsets.Italian;
                        break;

                      case "E":
                      case "6":
                        n = o.charsets.NorwegianDanish;
                        break;

                      case "Z":
                        n = o.charsets.Spanish;
                        break;

                      case "H":
                      case "7":
                        n = o.charsets.Swedish;
                        break;

                      case "=":
                        n = o.charsets.Swiss;
                        break;

                      case "/":
                        n = o.charsets.ISOLatin, a++;
                        break;

                      default:
                        n = o.charsets.US;
                    }
                    this.setgCharset(this.gcharset, n), this.gcharset = null, this.state = y;
                    break;

                  case b:
                    if ("" === this.lch && "\\" === i || "" === i) {
                        switch ("" === this.lch && ("string" == typeof this.currentParam ? this.currentParam = this.currentParam.slice(0, -1) : "number" == typeof this.currentParam && (this.currentParam = (this.currentParam - ("".charCodeAt(0) - 48)) / 10)), 
                        this.params.push(this.currentParam), this.params[0]) {
                          case 0:
                          case 1:
                          case 2:
                            this.params[1] && (this.title = this.params[1], this.handleTitle(this.title));
                            break;

                          case 3:
                            break;

                          case 4:
                          case 5:
                            break;

                          case 10:
                          case 11:
                          case 12:
                          case 13:
                          case 14:
                          case 15:
                          case 16:
                          case 17:
                          case 18:
                          case 19:
                            break;

                          case 46:
                            break;

                          case 50:
                            break;

                          case 51:
                            break;

                          case 52:
                            break;

                          case 104:
                          case 105:
                          case 110:
                          case 111:
                          case 112:
                          case 113:
                          case 114:
                          case 115:
                          case 116:
                          case 117:
                          case 118:                        }
                        this.params = [], this.currentParam = 0, this.state = y;
                    } else this.params.length ? this.currentParam += i : i >= "0" && i <= "9" ? this.currentParam = 10 * this.currentParam + i.charCodeAt(0) - 48 : ";" === i && (this.params.push(this.currentParam), 
                    this.currentParam = "");
                    break;

                  case _:
                    if ("?" === i || ">" === i || "!" === i) {
                        this.prefix = i;
                        break;
                    }
                    if (i >= "0" && i <= "9") {
                        this.currentParam = 10 * this.currentParam + i.charCodeAt(0) - 48;
                        break;
                    }
                    if ("$" === i || '"' === i || " " === i || "'" === i) {
                        this.postfix = i;
                        break;
                    }
                    if (this.params.push(this.currentParam), this.currentParam = 0, ";" === i) break;
                    switch (this.state = y, i) {
                      case "A":
                        this.cursorUp(this.params);
                        break;

                      case "B":
                        this.cursorDown(this.params);
                        break;

                      case "C":
                        this.cursorForward(this.params);
                        break;

                      case "D":
                        this.cursorBackward(this.params);
                        break;

                      case "H":
                        this.cursorPos(this.params);
                        break;

                      case "J":
                        this.eraseInDisplay(this.params);
                        break;

                      case "K":
                        this.eraseInLine(this.params);
                        break;

                      case "m":
                        this.prefix || this.charAttributes(this.params);
                        break;

                      case "n":
                        this.prefix || this.deviceStatus(this.params);
                        break;

                      case "@":
                        this.insertChars(this.params);
                        break;

                      case "E":
                        this.cursorNextLine(this.params);
                        break;

                      case "F":
                        this.cursorPrecedingLine(this.params);
                        break;

                      case "G":
                        this.cursorCharAbsolute(this.params);
                        break;

                      case "L":
                        this.insertLines(this.params);
                        break;

                      case "M":
                        this.deleteLines(this.params);
                        break;

                      case "P":
                        this.deleteChars(this.params);
                        break;

                      case "X":
                        this.eraseChars(this.params);
                        break;

                      case "`":
                        this.charPosAbsolute(this.params);
                        break;

                      case "a":
                        this.HPositionRelative(this.params);
                        break;

                      case "c":
                        this.sendDeviceAttributes(this.params);
                        break;

                      case "d":
                        this.linePosAbsolute(this.params);
                        break;

                      case "e":
                        this.VPositionRelative(this.params);
                        break;

                      case "f":
                        this.HVPosition(this.params);
                        break;

                      case "h":
                        this.setMode(this.params);
                        break;

                      case "l":
                        this.resetMode(this.params);
                        break;

                      case "r":
                        this.setScrollRegion(this.params);
                        break;

                      case "s":
                        this.saveCursor(this.params);
                        break;

                      case "u":
                        this.restoreCursor(this.params);
                        break;

                      case "I":
                        this.cursorForwardTab(this.params);
                        break;

                      case "S":
                        this.scrollUp(this.params);
                        break;

                      case "T":
                        this.params.length < 2 && !this.prefix && this.scrollDown(this.params);
                        break;

                      case "Z":
                        this.cursorBackwardTab(this.params);
                        break;

                      case "b":
                        this.repeatPrecedingCharacter(this.params);
                        break;

                      case "g":
                        this.tabClear(this.params);
                        break;

                      case "p":
                        switch (this.prefix) {
                          case "!":
                            this.softReset(this.params);
                        }
                        break;

                      default:
                        this.error("Unknown CSI code: %s.", i);
                    }
                    this.prefix = "", this.postfix = "";
                    break;

                  case S:
                    if ("" === this.lch && "\\" === i || "" === i) {
                        if ("tmux;" === this.prefix && "" === i) {
                            this.currentParam += i;
                            continue;
                        }
                        "" === this.lch && ("string" == typeof this.currentParam ? this.currentParam = this.currentParam.slice(0, -1) : "number" == typeof this.currentParam && (this.currentParam = (this.currentParam - ("".charCodeAt(0) - 48)) / 10)), 
                        this.params.push(this.currentParam);
                        var s = this.params[this.params.length - 1];
                        switch (this.prefix) {
                          case E:
                            this.emit("udk", {
                                clearAll: 0 === this.params[0],
                                eraseBelow: 1 === this.params[0],
                                lockKeys: 0 === this.params[1],
                                dontLockKeys: 1 === this.params[1],
                                keyList: (this.params[2] + "").split(";").map(function(t) {
                                    return t = t.split("/"), {
                                        keyCode: t[0],
                                        hexKeyValue: t[1]
                                    };
                                })
                            });
                            break;

                          case "$q":
                            var c = 0;
                            switch (s) {
                              case '"q':
                                s = '0"q', c = 1;
                                break;

                              case '"p':
                                s = '61;0"p', c = 1;
                                break;

                              case "r":
                                s = "" + (this.scrollTop + 1) + ";" + (this.scrollBottom + 1) + "r", c = 1;
                                break;

                              case "m":
                                c = 0;
                                break;

                              default:
                                this.error("Unknown DCS Pt: %s.", s), c = 0;
                            }
                            this.send("P" + c + "$r" + s + "\\");
                            break;

                          case "+p":
                            this.emit("set terminfo", {
                                name: this.params[0]
                            });
                            break;

                          case "+q":
                            var c = !1;
                            this.send("P" + +c + "+r" + s + "\\");
                            break;

                          case "tmux;":
                            this.emit("passthrough", s);
                            break;

                          default:
                            this.error("Unknown DCS prefix: %s.", s);
                        }
                        this.currentParam = 0, this.prefix = "", this.state = y;
                    } else this.currentParam += i, this.prefix || (/^\d*;\d*\|/.test(this.currentParam) ? (this.prefix = E, 
                    this.params = this.currentParam.split(/[;|]/).map(function(t) {
                        return t.length ? +t : 0;
                    }).slice(0, -1), this.currentParam = "") : (/^[$+][a-zA-Z]/.test(this.currentParam) || /^\w+;\x1b/.test(this.currentParam)) && (this.prefix = this.currentParam, 
                    this.currentParam = ""));
                    break;

                  case T:
                    ("" === this.lch && "\\" === i || "" === i) && (this.state = y);
                }
                return this.updateRange(this.y), this.refresh(this.refreshStart, this.refreshEnd), 
                !0;
            }, o.prototype.writeln = function(t) {
                return this.write(t + "\r\n");
            }, o.prototype.end = function(t) {
                var e = !0;
                return t && (e = this.write(t)), this.destroySoon(), e;
            }, o.prototype.resume = function() {}, o.prototype.pause = function() {}, o.prototype.keyDown = function(t) {
                var e, n = this;
                switch (t.keyCode) {
                  case 8:
                    if (t.altKey) {
                        e = "";
                        break;
                    }
                    if (t.shiftKey) {
                        e = "\b";
                        break;
                    }
                    e = "";
                    break;

                  case 9:
                    if (t.shiftKey) {
                        e = "[Z";
                        break;
                    }
                    e = "\t";
                    break;

                  case 13:
                    e = "\r";
                    break;

                  case 27:
                    e = "";
                    break;

                  case 32:
                    e = " ";
                    break;

                  case 37:
                    if (this.applicationCursor) {
                        e = "OD";
                        break;
                    }
                    if (t.ctrlKey) {
                        e = "[5D";
                        break;
                    }
                    e = "[D";
                    break;

                  case 39:
                    if (this.applicationCursor) {
                        e = "OC";
                        break;
                    }
                    if (t.ctrlKey) {
                        e = "[5C";
                        break;
                    }
                    e = "[C";
                    break;

                  case 38:
                    if (this.applicationCursor) {
                        e = "OA";
                        break;
                    }
                    if (t.ctrlKey) return this.scrollDisp(-1), l(t);
                    e = "[A";
                    break;

                  case 40:
                    if (this.applicationCursor) {
                        e = "OB";
                        break;
                    }
                    if (t.ctrlKey) return this.scrollDisp(1), l(t);
                    e = "[B";
                    break;

                  case 46:
                    e = "[3~";
                    break;

                  case 45:
                    e = "[2~";
                    break;

                  case 36:
                    if (this.applicationKeypad) {
                        e = "OH";
                        break;
                    }
                    e = "OH";
                    break;

                  case 35:
                    if (this.applicationKeypad) {
                        e = "OF";
                        break;
                    }
                    e = "OF";
                    break;

                  case 33:
                    if (t.shiftKey) return this.scrollDisp(-(this.rows - 1)), l(t);
                    e = "[5~";
                    break;

                  case 34:
                    if (t.shiftKey) return this.scrollDisp(this.rows - 1), l(t);
                    e = "[6~";
                    break;

                  case 112:
                    e = "OP";
                    break;

                  case 113:
                    e = "OQ";
                    break;

                  case 114:
                    e = "OR";
                    break;

                  case 115:
                    e = "OS";
                    break;

                  case 116:
                    e = "[15~";
                    break;

                  case 117:
                    e = "[17~";
                    break;

                  case 118:
                    e = "[18~";
                    break;

                  case 119:
                    e = "[19~";
                    break;

                  case 120:
                    e = "[20~";
                    break;

                  case 121:
                    e = "[21~";
                    break;

                  case 122:
                    e = "[23~";
                    break;

                  case 123:
                    e = "[24~";
                    break;

                  default:
                    if (t.ctrlKey) if (t.keyCode >= 65 && t.keyCode <= 90) {
                        if (this.screenKeys && !this.prefixMode && !this.selectMode && 65 === t.keyCode) return this.enterPrefix(), 
                        l(t);
                        if (this.prefixMode && 86 === t.keyCode) return void this.leavePrefix();
                        if ((this.prefixMode || this.selectMode) && 67 === t.keyCode) return void (this.visualMode && C(function() {
                            n.leaveVisual();
                        }, 1));
                        e = A.fromCharCode(t.keyCode - 64);
                    } else 32 === t.keyCode ? e = A.fromCharCode(0) : t.keyCode >= 51 && t.keyCode <= 55 ? e = A.fromCharCode(t.keyCode - 51 + 27) : 56 === t.keyCode ? e = A.fromCharCode(127) : 219 === t.keyCode ? e = A.fromCharCode(27) : 221 === t.keyCode && (e = A.fromCharCode(29)); else t.altKey && (t.keyCode >= 65 && t.keyCode <= 90 ? e = "" + A.fromCharCode(t.keyCode + 32) : 192 === t.keyCode ? e = "`" : t.keyCode >= 48 && t.keyCode <= 57 && (e = "" + (t.keyCode - 48)));
                }
                return !e || (this.prefixMode ? (this.leavePrefix(), l(t)) : this.selectMode ? (this.keySelect(t, e), 
                l(t)) : (this.emit("keydown", t), this.emit("key", e, t), this.handler(e), l(t)));
            }, o.prototype.setgLevel = function(t) {
                this.glevel = t, this.charset = this.charsets[t];
            }, o.prototype.setgCharset = function(t, e) {
                this.charsets[t] = e, this.glevel === t && (this.charset = e);
            }, o.prototype.keyPress = function(t) {
                var e;
                if (l(t), t.charCode) e = t.charCode; else if (null == t.which) e = t.keyCode; else {
                    if (0 === t.which || 0 === t.charCode) return !1;
                    e = t.which;
                }
                return !(!e || t.ctrlKey || t.altKey || t.metaKey) && (e = A.fromCharCode(e), this.prefixMode ? (this.leavePrefix(), 
                this.keyPrefix(t, e), !1) : this.selectMode ? (this.keySelect(t, e), !1) : (this.emit("keypress", e, t), 
                this.emit("key", e, t), this.handler(e), !1));
            }, o.prototype.send = function(t) {
                var e = this;
                this.queue || C(function() {
                    e.handler(e.queue), e.queue = "";
                }, 1), this.queue += t;
            }, o.prototype.bell = function() {
                if (this.emit("bell"), this.visualBell) {
                    var t = this;
                    this.element.style.borderColor = "white", C(function() {
                        t.element.style.borderColor = "";
                    }, 10), this.popOnBell && this.focus();
                }
            }, o.prototype.log = function() {
                if (this.debug && this.context.console && this.context.console.log) {
                    var t = Array.prototype.slice.call(arguments);
                    this.context.console.log.apply(this.context.console, t);
                }
            }, o.prototype.error = function() {
                if (this.debug && this.context.console && this.context.console.error) {
                    var t = Array.prototype.slice.call(arguments);
                    this.context.console.error.apply(this.context.console, t);
                }
            }, o.prototype.resize = function(t, e) {
                var n, i, r, a, o;
                if (t < 1 && (t = 1), e < 1 && (e = 1), a = this.cols, a < t) for (o = [ this.defAttr, " " ], 
                r = this.lines.length; r--; ) for (;this.lines[r].length < t; ) this.lines[r].push(o); else if (a > t) for (r = this.lines.length; r--; ) for (;this.lines[r].length > t; ) this.lines[r].pop();
                if (this.setupStops(a), this.cols = t, this.columns = t, a = this.rows, a < e) for (i = this.element; a++ < e; ) this.lines.length < e + this.ybase && this.lines.push(this.blankLine()), 
                this.children.length < e && (n = this.document.createElement("div"), i.appendChild(n), 
                this.children.push(n)); else if (a > e) for (;a-- > e; ) if (this.lines.length > e + this.ybase && this.lines.pop(), 
                this.children.length > e) {
                    if (i = this.children.pop(), !i) continue;
                    i.parentNode.removeChild(i);
                }
                this.rows = e, this.y >= e && (this.y = e - 1), this.x >= t && (this.x = t - 1), 
                this.scrollTop = 0, this.scrollBottom = e - 1, this.refresh(0, this.rows - 1), this.normal = null, 
                this.emit("resize");
            }, o.prototype.updateRange = function(t) {
                t < this.refreshStart && (this.refreshStart = t), t > this.refreshEnd && (this.refreshEnd = t);
            }, o.prototype.maxRange = function() {
                this.refreshStart = 0, this.refreshEnd = this.rows - 1;
            }, o.prototype.setupStops = function(t) {
                for (null != t ? this.tabs[t] || (t = this.prevStop(t)) : (this.tabs = {}, t = 0); t < this.cols; t += 8) this.tabs[t] = !0;
            }, o.prototype.prevStop = function(t) {
                for (null == t && (t = this.x); !this.tabs[--t] && t > 0; ) ;
                return t >= this.cols ? this.cols - 1 : t < 0 ? 0 : t;
            }, o.prototype.nextStop = function(t) {
                for (null == t && (t = this.x); !this.tabs[++t] && t < this.cols; ) ;
                return t >= this.cols ? this.cols - 1 : t < 0 ? 0 : t;
            }, o.prototype.eraseAttr = function() {
                return this.defAttr & -512 | 511 & this.curAttr;
            }, o.prototype.eraseRight = function(t, e) {
                for (var n = this.lines[this.ybase + e], i = [ this.eraseAttr(), " " ]; t < this.cols; t++) n[t] = i;
                this.updateRange(e);
            }, o.prototype.eraseLeft = function(t, e) {
                var n = this.lines[this.ybase + e], i = [ this.eraseAttr(), " " ];
                for (t++; t--; ) n[t] = i;
                this.updateRange(e);
            }, o.prototype.eraseLine = function(t) {
                this.eraseRight(0, t);
            }, o.prototype.blankLine = function(t) {
                for (var e = t ? this.eraseAttr() : this.defAttr, n = [ e, " " ], i = [], r = 0; r < this.cols; r++) i[r] = n;
                return i;
            }, o.prototype.ch = function(t) {
                return t ? [ this.eraseAttr(), " " ] : [ this.defAttr, " " ];
            }, o.prototype.is = function(t) {
                var e = this.termName;
                return 0 === (e + "").indexOf(t);
            }, o.prototype.handler = function(t) {
                this.emit("data", t);
            }, o.prototype.handleTitle = function(t) {
                this.emit("title", t);
            }, o.prototype.index = function() {
                this.y++, this.y > this.scrollBottom && (this.y--, this.scroll()), this.state = y;
            }, o.prototype.reverseIndex = function() {
                var t;
                this.y--, this.y < this.scrollTop && (this.y++, this.lines.splice(this.y + this.ybase, 0, this.blankLine(!0)), 
                t = this.rows - 1 - this.scrollBottom, this.lines.splice(this.rows - 1 + this.ybase - t + 1, 1), 
                this.updateRange(this.scrollTop), this.updateRange(this.scrollBottom)), this.state = y;
            }, o.prototype.reset = function() {
                this.options.rows = this.rows, this.options.cols = this.cols, o.call(this, this.options), 
                this.refresh(0, this.rows - 1);
            }, o.prototype.tabSet = function() {
                this.tabs[this.x] = !0, this.state = y;
            }, o.prototype.cursorUp = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y -= e, this.y < 0 && (this.y = 0);
            }, o.prototype.cursorDown = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y += e, this.y >= this.rows && (this.y = this.rows - 1);
            }, o.prototype.cursorForward = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.x += e, this.x >= this.cols && (this.x = this.cols - 1);
            }, o.prototype.cursorBackward = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.x -= e, this.x < 0 && (this.x = 0);
            }, o.prototype.cursorPos = function(t) {
                var e, n;
                e = t[0] - 1, n = t.length >= 2 ? t[1] - 1 : 0, e < 0 ? e = 0 : e >= this.rows && (e = this.rows - 1), 
                n < 0 ? n = 0 : n >= this.cols && (n = this.cols - 1), this.x = n, this.y = e;
            }, o.prototype.eraseInDisplay = function(t) {
                var e;
                switch (t[0]) {
                  case 0:
                    for (this.eraseRight(this.x, this.y), e = this.y + 1; e < this.rows; e++) this.eraseLine(e);
                    break;

                  case 1:
                    for (this.eraseLeft(this.x, this.y), e = this.y; e--; ) this.eraseLine(e);
                    break;

                  case 2:
                    for (e = this.rows; e--; ) this.eraseLine(e);
                    break;

                  case 3:                }
            }, o.prototype.eraseInLine = function(t) {
                switch (t[0]) {
                  case 0:
                    this.eraseRight(this.x, this.y);
                    break;

                  case 1:
                    this.eraseLeft(this.x, this.y);
                    break;

                  case 2:
                    this.eraseLine(this.y);
                }
            }, o.prototype.charAttributes = function(t) {
                if (1 === t.length && 0 === t[0]) return void (this.curAttr = this.defAttr);
                for (var e, n = t.length, i = 0, r = this.curAttr >> 18, a = this.curAttr >> 9 & 511, o = 511 & this.curAttr; i < n; i++) e = t[i], 
                e >= 30 && e <= 37 ? a = e - 30 : e >= 40 && e <= 47 ? o = e - 40 : e >= 90 && e <= 97 ? (e += 8, 
                a = e - 90) : e >= 100 && e <= 107 ? (e += 8, o = e - 100) : 0 === e ? (r = this.defAttr >> 18, 
                a = this.defAttr >> 9 & 511, o = 511 & this.defAttr) : 1 === e ? r |= 1 : 4 === e ? r |= 2 : 5 === e ? r |= 4 : 7 === e ? r |= 8 : 8 === e ? r |= 16 : 22 === e ? r &= -2 : 24 === e ? r &= -3 : 25 === e ? r &= -5 : 27 === e ? r &= -9 : 28 === e ? r &= -17 : 39 === e ? a = this.defAttr >> 9 & 511 : 49 === e ? o = 511 & this.defAttr : 38 === e ? 2 === t[i + 1] ? (i += 2, 
                a = p(255 & t[i], 255 & t[i + 1], 255 & t[i + 2]), a === -1 && (a = 511), i += 2) : 5 === t[i + 1] && (i += 2, 
                e = 255 & t[i], a = e) : 48 === e ? 2 === t[i + 1] ? (i += 2, o = p(255 & t[i], 255 & t[i + 1], 255 & t[i + 2]), 
                o === -1 && (o = 511), i += 2) : 5 === t[i + 1] && (i += 2, e = 255 & t[i], o = e) : 100 === e ? (a = this.defAttr >> 9 & 511, 
                o = 511 & this.defAttr) : this.error("Unknown SGR attribute: %d.", e);
                this.curAttr = r << 18 | a << 9 | o;
            }, o.prototype.deviceStatus = function(t) {
                if (this.prefix) {
                    if ("?" === this.prefix) switch (t[0]) {
                      case 6:
                        this.send("[?" + (this.y + 1) + ";" + (this.x + 1) + "R");
                        break;

                      case 15:
                        break;

                      case 25:
                        break;

                      case 26:
                        break;

                      case 53:                    }
                } else switch (t[0]) {
                  case 5:
                    this.send("[0n");
                    break;

                  case 6:
                    this.send("[" + (this.y + 1) + ";" + (this.x + 1) + "R");
                }
            }, o.prototype.insertChars = function(t) {
                var e, n, i, r;
                for (e = t[0], e < 1 && (e = 1), n = this.y + this.ybase, i = this.x, r = [ this.eraseAttr(), " " ]; e-- && i < this.cols; ) this.lines[n].splice(i++, 0, r), 
                this.lines[n].pop();
            }, o.prototype.cursorNextLine = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y += e, this.y >= this.rows && (this.y = this.rows - 1), 
                this.x = 0;
            }, o.prototype.cursorPrecedingLine = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y -= e, this.y < 0 && (this.y = 0), this.x = 0;
            }, o.prototype.cursorCharAbsolute = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.x = e - 1;
            }, o.prototype.insertLines = function(t) {
                var e, n, i;
                for (e = t[0], e < 1 && (e = 1), n = this.y + this.ybase, i = this.rows - 1 - this.scrollBottom, 
                i = this.rows - 1 + this.ybase - i + 1; e--; ) this.lines.splice(n, 0, this.blankLine(!0)), 
                this.lines.splice(i, 1);
                this.updateRange(this.y), this.updateRange(this.scrollBottom);
            }, o.prototype.deleteLines = function(t) {
                var e, n, i;
                for (e = t[0], e < 1 && (e = 1), n = this.y + this.ybase, i = this.rows - 1 - this.scrollBottom, 
                i = this.rows - 1 + this.ybase - i; e--; ) this.lines.splice(i + 1, 0, this.blankLine(!0)), 
                this.lines.splice(n, 1);
                this.updateRange(this.y), this.updateRange(this.scrollBottom);
            }, o.prototype.deleteChars = function(t) {
                var e, n, i;
                for (e = t[0], e < 1 && (e = 1), n = this.y + this.ybase, i = [ this.eraseAttr(), " " ]; e--; ) this.lines[n].splice(this.x, 1), 
                this.lines[n].push(i);
            }, o.prototype.eraseChars = function(t) {
                var e, n, i, r;
                for (e = t[0], e < 1 && (e = 1), n = this.y + this.ybase, i = this.x, r = [ this.eraseAttr(), " " ]; e-- && i < this.cols; ) this.lines[n][i++] = r;
            }, o.prototype.charPosAbsolute = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.x = e - 1, this.x >= this.cols && (this.x = this.cols - 1);
            }, o.prototype.HPositionRelative = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.x += e, this.x >= this.cols && (this.x = this.cols - 1);
            }, o.prototype.sendDeviceAttributes = function(t) {
                t[0] > 0 || (this.prefix ? ">" === this.prefix && (this.is("xterm") ? this.send("[>0;276;0c") : this.is("rxvt-unicode") ? this.send("[>85;95;0c") : this.is("linux") ? this.send(t[0] + "c") : this.is("screen") && this.send("[>83;40003;0c")) : this.is("xterm") || this.is("rxvt-unicode") || this.is("screen") ? this.send("[?1;2c") : this.is("linux") && this.send("[?6c"));
            }, o.prototype.linePosAbsolute = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y = e - 1, this.y >= this.rows && (this.y = this.rows - 1);
            }, o.prototype.VPositionRelative = function(t) {
                var e = t[0];
                e < 1 && (e = 1), this.y += e, this.y >= this.rows && (this.y = this.rows - 1);
            }, o.prototype.HVPosition = function(t) {
                t[0] < 1 && (t[0] = 1), t[1] < 1 && (t[1] = 1), this.y = t[0] - 1, this.y >= this.rows && (this.y = this.rows - 1), 
                this.x = t[1] - 1, this.x >= this.cols && (this.x = this.cols - 1);
            }, o.prototype.setMode = function(t) {
                if ("object" != typeof t) if (this.prefix) {
                    if ("?" === this.prefix) switch (t) {
                      case 1:
                        this.applicationCursor = !0;
                        break;

                      case 2:
                        this.setgCharset(0, o.charsets.US), this.setgCharset(1, o.charsets.US), this.setgCharset(2, o.charsets.US), 
                        this.setgCharset(3, o.charsets.US);
                        break;

                      case 3:
                        this.savedCols = this.cols, this.resize(132, this.rows);
                        break;

                      case 6:
                        this.originMode = !0;
                        break;

                      case 7:
                        this.wraparoundMode = !0;
                        break;

                      case 66:
                        this.log("Serial port requested application keypad."), this.applicationKeypad = !0;
                        break;

                      case 9:
                      case 1e3:
                      case 1002:
                      case 1003:
                        this.x10Mouse = 9 === t, this.vt200Mouse = 1e3 === t, this.normalMouse = t > 1e3, 
                        this.mouseEvents = !0, this.element.style.cursor = "default", this.log("Binding to mouse events.");
                        break;

                      case 1004:
                        this.sendFocus = !0;
                        break;

                      case 1005:
                        this.utfMouse = !0;
                        break;

                      case 1006:
                        this.sgrMouse = !0;
                        break;

                      case 1015:
                        this.urxvtMouse = !0;
                        break;

                      case 25:
                        this.cursorHidden = !1;
                        break;

                      case 1049:
                      case 47:
                      case 1047:
                        if (!this.normal) {
                            var e = {
                                lines: this.lines,
                                ybase: this.ybase,
                                ydisp: this.ydisp,
                                x: this.x,
                                y: this.y,
                                scrollTop: this.scrollTop,
                                scrollBottom: this.scrollBottom,
                                tabs: this.tabs
                            };
                            this.reset(), this.normal = e;
                        }
                    }
                } else switch (t) {
                  case 4:
                    this.insertMode = !0;
                    break;

                  case 20:                } else for (var n = t.length, i = 0; i < n; i++) this.setMode(t[i]);
            }, o.prototype.resetMode = function(t) {
                if ("object" != typeof t) if (this.prefix) {
                    if ("?" === this.prefix) switch (t) {
                      case 1:
                        this.applicationCursor = !1;
                        break;

                      case 3:
                        132 === this.cols && this.savedCols && this.resize(this.savedCols, this.rows), delete this.savedCols;
                        break;

                      case 6:
                        this.originMode = !1;
                        break;

                      case 7:
                        this.wraparoundMode = !1;
                        break;

                      case 66:
                        this.log("Switching back to normal keypad."), this.applicationKeypad = !1;
                        break;

                      case 9:
                      case 1e3:
                      case 1002:
                      case 1003:
                        this.x10Mouse = !1, this.vt200Mouse = !1, this.normalMouse = !1, this.mouseEvents = !1, 
                        this.element.style.cursor = "";
                        break;

                      case 1004:
                        this.sendFocus = !1;
                        break;

                      case 1005:
                        this.utfMouse = !1;
                        break;

                      case 1006:
                        this.sgrMouse = !1;
                        break;

                      case 1015:
                        this.urxvtMouse = !1;
                        break;

                      case 25:
                        this.cursorHidden = !0;
                        break;

                      case 1049:
                      case 47:
                      case 1047:
                        this.normal && (this.lines = this.normal.lines, this.ybase = this.normal.ybase, 
                        this.ydisp = this.normal.ydisp, this.x = this.normal.x, this.y = this.normal.y, 
                        this.scrollTop = this.normal.scrollTop, this.scrollBottom = this.normal.scrollBottom, 
                        this.tabs = this.normal.tabs, this.normal = null, this.refresh(0, this.rows - 1));
                    }
                } else switch (t) {
                  case 4:
                    this.insertMode = !1;
                    break;

                  case 20:                } else for (var e = t.length, n = 0; n < e; n++) this.resetMode(t[n]);
            }, o.prototype.setScrollRegion = function(t) {
                this.prefix || (this.scrollTop = (t[0] || 1) - 1, this.scrollBottom = (t[1] || this.rows) - 1, 
                this.x = 0, this.y = 0);
            }, o.prototype.saveCursor = function(t) {
                this.savedX = this.x, this.savedY = this.y;
            }, o.prototype.restoreCursor = function(t) {
                this.x = this.savedX || 0, this.y = this.savedY || 0;
            }, o.prototype.cursorForwardTab = function(t) {
                for (var e = t[0] || 1; e--; ) this.x = this.nextStop();
            }, o.prototype.scrollUp = function(t) {
                for (var e = t[0] || 1; e--; ) this.lines.splice(this.ybase + this.scrollTop, 1), 
                this.lines.splice(this.ybase + this.scrollBottom, 0, this.blankLine());
                this.updateRange(this.scrollTop), this.updateRange(this.scrollBottom);
            }, o.prototype.scrollDown = function(t) {
                for (var e = t[0] || 1; e--; ) this.lines.splice(this.ybase + this.scrollBottom, 1), 
                this.lines.splice(this.ybase + this.scrollTop, 0, this.blankLine());
                this.updateRange(this.scrollTop), this.updateRange(this.scrollBottom);
            }, o.prototype.initMouseTracking = function(t) {}, o.prototype.resetTitleModes = function(t) {}, 
            o.prototype.cursorBackwardTab = function(t) {
                for (var e = t[0] || 1; e--; ) this.x = this.prevStop();
            }, o.prototype.repeatPrecedingCharacter = function(t) {
                for (var e = t[0] || 1, n = this.lines[this.ybase + this.y], i = n[this.x - 1] || [ this.defAttr, " " ]; e--; ) n[this.x++] = i;
            }, o.prototype.tabClear = function(t) {
                var e = t[0];
                e <= 0 ? delete this.tabs[this.x] : 3 === e && (this.tabs = {});
            }, o.prototype.mediaCopy = function(t) {}, o.prototype.setResources = function(t) {}, 
            o.prototype.disableModifiers = function(t) {}, o.prototype.setPointerMode = function(t) {}, 
            o.prototype.softReset = function(t) {
                this.cursorHidden = !1, this.insertMode = !1, this.originMode = !1, this.wraparoundMode = !1, 
                this.applicationKeypad = !1, this.applicationCursor = !1, this.scrollTop = 0, this.scrollBottom = this.rows - 1, 
                this.curAttr = this.defAttr, this.x = this.y = 0, this.charset = null, this.glevel = 0, 
                this.charsets = [ null ];
            }, o.prototype.requestAnsiMode = function(t) {}, o.prototype.requestPrivateMode = function(t) {}, 
            o.prototype.setConformanceLevel = function(t) {}, o.prototype.loadLEDs = function(t) {}, 
            o.prototype.setCursorStyle = function(t) {}, o.prototype.setCharProtectionAttr = function(t) {}, 
            o.prototype.restorePrivateValues = function(t) {}, o.prototype.setAttrInRectangle = function(t) {
                for (var e, n, i = t[0], r = t[1], a = t[2], o = t[3], s = t[4]; i < a + 1; i++) for (e = this.lines[this.ybase + i], 
                n = r; n < o; n++) e[n] = [ s, e[n][1] ];
                this.updateRange(t[0]), this.updateRange(t[2]);
            }, o.prototype.savePrivateValues = function(t) {}, o.prototype.manipulateWindow = function(t) {}, 
            o.prototype.reverseAttrInRectangle = function(t) {}, o.prototype.setTitleModeFeature = function(t) {}, 
            o.prototype.setWarningBellVolume = function(t) {}, o.prototype.setMarginBellVolume = function(t) {}, 
            o.prototype.copyRectangle = function(t) {}, o.prototype.enableFilterRectangle = function(t) {}, 
            o.prototype.requestParameters = function(t) {}, o.prototype.selectChangeExtent = function(t) {}, 
            o.prototype.fillRectangle = function(t) {
                for (var e, n, i = t[0], r = t[1], a = t[2], o = t[3], s = t[4]; r < o + 1; r++) for (e = this.lines[this.ybase + r], 
                n = a; n < s; n++) e[n] = [ e[n][0], A.fromCharCode(i) ];
                this.updateRange(t[1]), this.updateRange(t[3]);
            }, o.prototype.enableLocatorReporting = function(t) {
                t[0] > 0;
            }, o.prototype.eraseRectangle = function(t) {
                var e, n, i, r = t[0], a = t[1], o = t[2], s = t[3];
                for (i = [ this.eraseAttr(), " " ]; r < o + 1; r++) for (e = this.lines[this.ybase + r], 
                n = a; n < s; n++) e[n] = i;
                this.updateRange(t[0]), this.updateRange(t[2]);
            }, o.prototype.setLocatorEvents = function(t) {}, o.prototype.selectiveEraseRectangle = function(t) {}, 
            o.prototype.requestLocatorPosition = function(t) {}, o.prototype.insertColumns = function() {
                for (var t, e = params[0], n = this.ybase + this.rows, i = [ this.eraseAttr(), " " ]; e--; ) for (t = this.ybase; t < n; t++) this.lines[t].splice(this.x + 1, 0, i), 
                this.lines[t].pop();
                this.maxRange();
            }, o.prototype.deleteColumns = function() {
                for (var t, e = params[0], n = this.ybase + this.rows, i = [ this.eraseAttr(), " " ]; e--; ) for (t = this.ybase; t < n; t++) this.lines[t].splice(this.x, 1), 
                this.lines[t].push(i);
                this.maxRange();
            }, o.prototype.enterPrefix = function() {
                this.prefixMode = !0;
            }, o.prototype.leavePrefix = function() {
                this.prefixMode = !1;
            }, o.prototype.enterSelect = function() {
                this._real = {
                    x: this.x,
                    y: this.y,
                    ydisp: this.ydisp,
                    ybase: this.ybase,
                    cursorHidden: this.cursorHidden,
                    lines: this.copyBuffer(this.lines),
                    write: this.write
                }, this.write = function() {}, this.selectMode = !0, this.visualMode = !1, this.cursorHidden = !1, 
                this.refresh(this.y, this.y);
            }, o.prototype.leaveSelect = function() {
                this.x = this._real.x, this.y = this._real.y, this.ydisp = this._real.ydisp, this.ybase = this._real.ybase, 
                this.cursorHidden = this._real.cursorHidden, this.lines = this._real.lines, this.write = this._real.write, 
                delete this._real, this.selectMode = !1, this.visualMode = !1, this.refresh(0, this.rows - 1);
            }, o.prototype.enterVisual = function() {
                this._real.preVisual = this.copyBuffer(this.lines), this.selectText(this.x, this.x, this.ydisp + this.y, this.ydisp + this.y), 
                this.visualMode = !0;
            }, o.prototype.leaveVisual = function() {
                this.lines = this._real.preVisual, delete this._real.preVisual, delete this._selected, 
                this.visualMode = !1, this.refresh(0, this.rows - 1);
            }, o.prototype.enterSearch = function(t) {
                this.entry = "", this.searchMode = !0, this.searchDown = t, this._real.preSearch = this.copyBuffer(this.lines), 
                this._real.preSearchX = this.x, this._real.preSearchY = this.y;
                for (var e = this.ydisp + this.rows - 1, n = 0; n < this.entryPrefix.length; n++) this.lines[e][n] = [ this.defAttr & -512 | 4, this.entryPrefix[n] ];
                this.y = this.rows - 1, this.x = this.entryPrefix.length, this.refresh(this.rows - 1, this.rows - 1);
            }, o.prototype.leaveSearch = function() {
                this.searchMode = !1, this._real.preSearch && (this.lines = this._real.preSearch, 
                this.x = this._real.preSearchX, this.y = this._real.preSearchY, delete this._real.preSearch, 
                delete this._real.preSearchX, delete this._real.preSearchY), this.refresh(this.rows - 1, this.rows - 1);
            }, o.prototype.copyBuffer = function(t) {
                for (var t = t || this.lines, e = [], n = 0; n < t.length; n++) {
                    e[n] = [];
                    for (var i = 0; i < t[n].length; i++) e[n][i] = [ t[n][i][0], t[n][i][1] ];
                }
                return e;
            }, o.prototype.getCopyTextarea = function(t) {
                var e = this._copyTextarea, n = this.document;
                return e || (e = n.createElement("textarea"), e.style.position = "absolute", e.style.left = "-32000px", 
                e.style.top = "-32000px", e.style.width = "0px", e.style.height = "0px", e.style.opacity = "0", 
                e.style.backgroundColor = "transparent", e.style.borderStyle = "none", e.style.outlineStyle = "none", 
                n.getElementsByTagName("body")[0].appendChild(e), this._copyTextarea = e), e;
            }, o.prototype.copyText = function(t) {
                var e = this, n = this.getCopyTextarea();
                this.emit("copy", t), n.focus(), n.textContent = t, n.value = t, n.setSelectionRange(0, t.length), 
                C(function() {
                    e.element.focus(), e.focus();
                }, 1);
            }, o.prototype.selectText = function(t, e, n, i) {
                var r, a, o, s, c, l, u, d, h;
                if (this._selected) {
                    for (r = this._selected.x1, a = this._selected.x2, o = this._selected.y1, s = this._selected.y2, 
                    s < o && (c = a, a = r, r = c, c = s, s = o, o = c), a < r && o === s && (c = a, 
                    a = r, r = c), u = o; u <= s; u++) for (l = 0, d = this.cols - 1, u === o && (l = r), 
                    u === s && (d = a); l <= d; l++) null != this.lines[u][l].old && (h = this.lines[u][l].old, 
                    delete this.lines[u][l].old, this.lines[u][l] = [ h, this.lines[u][l][1] ]);
                    n = this._selected.y1, t = this._selected.x1;
                }
                for (n = Math.max(n, 0), n = Math.min(n, this.ydisp + this.rows - 1), i = Math.max(i, 0), 
                i = Math.min(i, this.ydisp + this.rows - 1), this._selected = {
                    x1: t,
                    x2: e,
                    y1: n,
                    y2: i
                }, i < n && (c = e, e = t, t = c, c = i, i = n, n = c), e < t && n === i && (c = e, 
                e = t, t = c), u = n; u <= i; u++) for (l = 0, d = this.cols - 1, u === n && (l = t), 
                u === i && (d = e); l <= d; l++) h = this.lines[u][l][0], this.lines[u][l] = [ h & -512 | 261636, this.lines[u][l][1] ], 
                this.lines[u][l].old = h;
                n -= this.ydisp, i -= this.ydisp, n = Math.max(n, 0), n = Math.min(n, this.rows - 1), 
                i = Math.max(i, 0), i = Math.min(i, this.rows - 1), this.refresh(0, this.rows - 1);
            }, o.prototype.grabText = function(t, e, n, i) {
                var r, a, o, s, c, l = "", u = "";
                for (i < n && (c = e, e = t, t = c, c = i, i = n, n = c), e < t && n === i && (c = e, 
                e = t, t = c), o = n; o <= i; o++) {
                    for (a = 0, s = this.cols - 1, o === n && (a = t), o === i && (s = e); a <= s; a++) r = this.lines[o][a][1], 
                    " " !== r ? (u && (l += u, u = ""), l += r, f(r) && a++) : u += r;
                    u = "", l += "\n";
                }
                for (a = e, o = i; a < this.cols; a++) if (" " !== this.lines[o][a][1]) {
                    l = l.slice(0, -1);
                    break;
                }
                return l;
            }, o.prototype.keyPrefix = function(t, e) {
                "k" === e || "&" === e ? this.destroy() : "p" === e || "]" === e ? this.emit("request paste") : "c" === e ? this.emit("request create") : e >= "0" && e <= "9" ? (e = +e - 1, 
                ~e || (e = 9), this.emit("request term", e)) : "n" === e ? this.emit("request term next") : "P" === e ? this.emit("request term previous") : ":" === e ? this.emit("request command mode") : "[" === e && this.enterSelect();
            }, o.prototype.keySelect = function(t, e) {
                if (this.searchMode || "n" === e || "N" === e) return this.keySearch(t, e);
                if ("" === e) {
                    var n = this.ydisp + this.y;
                    return this.ydisp === this.ybase ? (this.y = Math.min(this.y + (this.rows - 1) / 2 | 0, this.rows - 1), 
                    this.refresh(0, this.rows - 1)) : this.scrollDisp((this.rows - 1) / 2 | 0), void (this.visualMode && this.selectText(this.x, this.x, n, this.ydisp + this.y));
                }
                if ("" === e) {
                    var n = this.ydisp + this.y;
                    return 0 === this.ydisp ? (this.y = Math.max(this.y - (this.rows - 1) / 2 | 0, 0), 
                    this.refresh(0, this.rows - 1)) : this.scrollDisp(-(this.rows - 1) / 2 | 0), void (this.visualMode && this.selectText(this.x, this.x, n, this.ydisp + this.y));
                }
                if ("" === e) {
                    var n = this.ydisp + this.y;
                    return this.scrollDisp(this.rows - 1), void (this.visualMode && this.selectText(this.x, this.x, n, this.ydisp + this.y));
                }
                if ("" === e) {
                    var n = this.ydisp + this.y;
                    return this.scrollDisp(-(this.rows - 1)), void (this.visualMode && this.selectText(this.x, this.x, n, this.ydisp + this.y));
                }
                if ("k" === e || "[A" === e) {
                    var n = this.ydisp + this.y;
                    return this.y--, this.y < 0 && (this.y = 0, this.scrollDisp(-1)), void (this.visualMode ? this.selectText(this.x, this.x, n, this.ydisp + this.y) : this.refresh(this.y, this.y + 1));
                }
                if ("j" === e || "[B" === e) {
                    var n = this.ydisp + this.y;
                    return this.y++, this.y >= this.rows && (this.y = this.rows - 1, this.scrollDisp(1)), 
                    void (this.visualMode ? this.selectText(this.x, this.x, n, this.ydisp + this.y) : this.refresh(this.y - 1, this.y));
                }
                if ("h" === e || "[D" === e) {
                    var i = this.x;
                    return this.x--, this.x < 0 && (this.x = 0), void (this.visualMode ? this.selectText(i, this.x, this.ydisp + this.y, this.ydisp + this.y) : this.refresh(this.y, this.y));
                }
                if ("l" === e || "[C" === e) {
                    var i = this.x;
                    return this.x++, this.x >= this.cols && (this.x = this.cols - 1), void (this.visualMode ? this.selectText(i, this.x, this.ydisp + this.y, this.ydisp + this.y) : this.refresh(this.y, this.y));
                }
                if ("v" === e || " " === e) return void (this.visualMode ? this.leaveVisual() : this.enterVisual());
                {
                    if ("y" !== e) {
                        if ("q" === e || "" === e) return void (this.visualMode ? this.leaveVisual() : this.leaveSelect());
                        if ("w" === e || "W" === e) {
                            for (var r = this.x, a = this.y, o = this.ydisp, i = this.x, n = this.y, s = this.ydisp, c = !1; ;) {
                                for (var l = this.lines[s + n]; i < this.cols; ) {
                                    if (l[i][1] <= " ") c = !0; else if (c) break;
                                    i++;
                                }
                                if (i >= this.cols && (i = this.cols - 1), !(i === this.cols - 1 && l[i][1] <= " ")) break;
                                if (i = 0, ++n >= this.rows && (n--, ++s > this.ybase)) {
                                    s = this.ybase, i = this.x;
                                    break;
                                }
                            }
                            return this.x = i, this.y = n, this.scrollDisp(-this.ydisp + s), void (this.visualMode && this.selectText(r, this.x, a + o, this.ydisp + this.y));
                        }
                        if ("b" === e || "B" === e) {
                            for (var r = this.x, a = this.y, o = this.ydisp, i = this.x, n = this.y, s = this.ydisp; ;) {
                                for (var l = this.lines[s + n], c = i > 0 && l[i][1] > " " && l[i - 1][1] > " "; i >= 0; ) {
                                    if (l[i][1] <= " ") {
                                        if (c && i + 1 < this.cols && l[i + 1][1] > " ") {
                                            i++;
                                            break;
                                        }
                                        c = !0;
                                    }
                                    i--;
                                }
                                if (i < 0 && (i = 0), 0 !== i || !(l[i][1] <= " ") && c) break;
                                if (i = this.cols - 1, --n < 0 && (n++, --s < 0)) {
                                    s++, i = 0;
                                    break;
                                }
                            }
                            return this.x = i, this.y = n, this.scrollDisp(-this.ydisp + s), void (this.visualMode && this.selectText(r, this.x, a + o, this.ydisp + this.y));
                        }
                        if ("e" === e || "E" === e) {
                            var i = this.x + 1, n = this.y, s = this.ydisp;
                            for (i >= this.cols && i--; ;) {
                                for (var l = this.lines[s + n]; i < this.cols && l[i][1] <= " "; ) i++;
                                for (;i < this.cols; ) {
                                    if (l[i][1] <= " " && i - 1 >= 0 && l[i - 1][1] > " ") {
                                        i--;
                                        break;
                                    }
                                    i++;
                                }
                                if (i >= this.cols && (i = this.cols - 1), !(i === this.cols - 1 && l[i][1] <= " ")) break;
                                if (i = 0, ++n >= this.rows && (n--, ++s > this.ybase)) {
                                    s = this.ybase;
                                    break;
                                }
                            }
                            return this.x = i, this.y = n, this.scrollDisp(-this.ydisp + s), void (this.visualMode && this.selectText(r, this.x, a + o, this.ydisp + this.y));
                        }
                        if ("^" === e || "0" === e) {
                            var r = this.x;
                            if ("0" === e) this.x = 0; else if ("^" === e) {
                                for (var l = this.lines[this.ydisp + this.y], i = 0; i < this.cols && !(l[i][1] > " "); ) i++;
                                i >= this.cols && (i = this.cols - 1), this.x = i;
                            }
                            return void (this.visualMode ? this.selectText(r, this.x, this.ydisp + this.y, this.ydisp + this.y) : this.refresh(this.y, this.y));
                        }
                        if ("$" === e) {
                            for (var r = this.x, l = this.lines[this.ydisp + this.y], i = this.cols - 1; i >= 0; ) {
                                if (l[i][1] > " ") {
                                    this.visualMode && i < this.cols - 1 && i++;
                                    break;
                                }
                                i--;
                            }
                            return i < 0 && (i = 0), this.x = i, void (this.visualMode ? this.selectText(r, this.x, this.ydisp + this.y, this.ydisp + this.y) : this.refresh(this.y, this.y));
                        }
                        if ("g" === e || "G" === e) {
                            var r = this.x, a = this.y, o = this.ydisp;
                            return "g" === e ? (this.x = 0, this.y = 0, this.scrollDisp(-this.ydisp)) : "G" === e && (this.x = 0, 
                            this.y = this.rows - 1, this.scrollDisp(this.ybase)), void (this.visualMode && this.selectText(r, this.x, a + o, this.ydisp + this.y));
                        }
                        if ("H" === e || "M" === e || "L" === e) {
                            var r = this.x, a = this.y;
                            return "H" === e ? (this.x = 0, this.y = 0) : "M" === e ? (this.x = 0, this.y = this.rows / 2 | 0) : "L" === e && (this.x = 0, 
                            this.y = this.rows - 1), void (this.visualMode ? this.selectText(r, this.x, this.ydisp + a, this.ydisp + this.y) : (this.refresh(a, a), 
                            this.refresh(this.y, this.y)));
                        }
                        if ("{" === e || "}" === e) {
                            var l, u, r = this.x, a = this.y, o = this.ydisp, d = !1, h = !1, f = -1, n = this.y + ("{" === e ? -1 : 1), s = this.ydisp;
                            for ("{" === e ? n < 0 && (n++, s > 0 && s--) : "}" === e && n >= this.rows && (n--, 
                            s < this.ybase && s++); ;) {
                                for (l = this.lines[s + n], u = 0; u < this.cols; u++) {
                                    if (l[u][1] > " ") {
                                        f === -1 && (f = 0), d = !0;
                                        break;
                                    }
                                    if (u === this.cols - 1) {
                                        f === -1 ? f = 1 : 0 === f ? h = !0 : 1 === f && d && (h = !0);
                                        break;
                                    }
                                }
                                if (h) break;
                                if ("{" === e) {
                                    if (n--, n < 0) {
                                        if (n++, !(s > 0)) break;
                                        s--;
                                    }
                                } else if ("}" === e && (n++, n >= this.rows)) {
                                    if (n--, !(s < this.ybase)) break;
                                    s++;
                                }
                            }
                            return h || ("{" === e ? (n = 0, s = 0) : "}" === e && (n = this.rows - 1, s = this.ybase)), 
                            this.x = 0, this.y = n, this.scrollDisp(-this.ydisp + s), void (this.visualMode && this.selectText(r, this.x, a + o, this.ydisp + this.y));
                        }
                        return ("/" === e || "?" === e) && void (this.visualMode || this.enterSearch("/" === e));
                    }
                    if (this.visualMode) {
                        var p = this.grabText(this._selected.x1, this._selected.x2, this._selected.y1, this._selected.y2);
                        this.copyText(p), this.leaveVisual();
                    }
                }
            }, o.prototype.keySearch = function(t, e) {
                if ("" === e) return void this.leaveSearch();
                if ("\r" === e || !this.searchMode && ("n" === e || "N" === e)) {
                    this.leaveSearch();
                    var n = this.entry;
                    if (!n) return void this.refresh(0, this.rows - 1);
                    for (var i, r, a, o = this.x, s = this.y, c = this.ydisp, l = !1, u = !1, d = this.x + 1, h = this.ydisp + this.y, f = "N" === e ? this.searchDown : !this.searchDown; ;) {
                        for (i = this.lines[h]; d < this.cols; ) {
                            for (a = 0; a < n.length && !(d + a >= this.cols) && i[d + a][1] === n[a]; a++) if (i[d + a][1] === n[a] && a === n.length - 1) {
                                l = !0;
                                break;
                            }
                            if (l) break;
                            d += a + 1;
                        }
                        if (l) break;
                        if (d = 0, f) {
                            if (h--, h < 0) {
                                if (u) break;
                                u = !0, h = this.ybase + this.rows - 1;
                            }
                        } else if (h++, h > this.ybase + this.rows - 1) {
                            if (u) break;
                            u = !0, h = 0;
                        }
                    }
                    return l ? (h - this.ybase < 0 ? (r = h, h = 0, r > this.ybase && (h = r - this.ybase, 
                    r = this.ybase)) : (r = this.ybase, h -= this.ybase), this.x = d, this.y = h, this.scrollDisp(-this.ydisp + r), 
                    void (this.visualMode && this.selectText(o, this.x, s + c, this.ydisp + this.y))) : void this.refresh(0, this.rows - 1);
                }
                if ("\b" === e || "" === e) {
                    if (0 === this.entry.length) return;
                    var p = this.ydisp + this.rows - 1;
                    this.entry = this.entry.slice(0, -1);
                    var a = this.entryPrefix.length + this.entry.length;
                    return this.lines[p][a] = [ this.lines[p][a][0], " " ], this.x--, this.refresh(this.rows - 1, this.rows - 1), 
                    void this.refresh(this.y, this.y);
                }
                if (1 === e.length && e >= " " && e <= "~") {
                    var p = this.ydisp + this.rows - 1;
                    this.entry += e;
                    var a = this.entryPrefix.length + this.entry.length - 1;
                    return this.lines[p][a] = [ this.defAttr & -512 | 4, e ], this.x++, this.refresh(this.rows - 1, this.rows - 1), 
                    void this.refresh(this.y, this.y);
                }
                return !1;
            }, o.charsets = {}, o.charsets.SCLD = {
                "`": "◆",
                a: "▒",
                b: "\t",
                c: "\f",
                d: "\r",
                e: "\n",
                f: "°",
                g: "±",
                h: "␤",
                i: "\v",
                j: "┘",
                k: "┐",
                l: "┌",
                m: "└",
                n: "┼",
                o: "⎺",
                p: "⎻",
                q: "─",
                r: "⎼",
                s: "⎽",
                t: "├",
                u: "┤",
                v: "┴",
                w: "┬",
                x: "│",
                y: "≤",
                z: "≥",
                "{": "π",
                "|": "≠",
                "}": "£",
                "~": "·"
            }, o.charsets.UK = null, o.charsets.US = null, o.charsets.Dutch = null, o.charsets.Finnish = null, 
            o.charsets.French = null, o.charsets.FrenchCanadian = null, o.charsets.German = null, 
            o.charsets.Italian = null, o.charsets.NorwegianDanish = null, o.charsets.Spanish = null, 
            o.charsets.Swedish = null, o.charsets.Swiss = null, o.charsets.ISOLatin = null;
            var A = this.String, C = this.setTimeout;
            this.setInterval;
            p._cache = {}, p.distance = function(t, e, n, i, r, a) {
                return Math.pow(30 * (t - i), 2) + Math.pow(59 * (e - r), 2) + Math.pow(11 * (n - a), 2);
            }, o.EventEmitter = n, o.Stream = a, o.inherits = u, o.on = s, o.off = c, o.cancel = l, 
            i = [], r = function() {
                return o;
            }.apply(e, i), !(void 0 !== r && (t.exports = r));
        }).call(function() {
            return this || ("undefined" != typeof window ? window : n);
        }());
    }).call(e, function() {
        return this;
    }());
}, function(t, e) {}, , function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.VncActions = void 0;
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(19), l = s.default.gettext, u = function(t) {
        var e = t.url, n = t.novncContainerId;
        return a.default.createElement("iframe", {
            src: e,
            className: "machines-console-frame-vnc",
            frameBorder: "0",
            name: n,
            "data-container-id": n
        }, l("Your browser does not support iframes."));
    };
    u.propTypes = {
        url: a.default.PropTypes.string.isRequired,
        novncContainerId: a.default.PropTypes.string.isRequired
    };
    var d = (e.VncActions = function(t) {
        var e = t.vm, n = (0, c.vmId)(e.name);
        return a.default.createElement("span", {
            className: "console-actions"
        }, l("Send shortcut"), a.default.createElement("button", {
            className: "btn btn-default console-actions-buttons",
            id: n + "-vnc-ctrl-alt-del"
        }, "Ctrl+Alt+Del"));
    }, function(t) {
        var e = t.vm, n = t.consoleDetail;
        if (!n) return (0, c.logDebug)("Vnc component: console detail not yet provided"), 
        null;
        var i = (0, c.vmId)(e.name), r = i + "-novnc-frame-container", o = "https:" === window.location.protocol, s = n.tlsPort || n.port, l = "?host=" + n.address + "&port=" + s + "&encrypt=" + o + "&true_color=1&resize=true&containerId=" + encodeURIComponent(i);
        return l = n.password ? l += "&password=" + n.password : l, a.default.createElement("div", {
            id: r,
            className: "machines-console-frame",
            style: {
                height: "100px;"
            }
        }, a.default.createElement("br", null), a.default.createElement(u, {
            url: "vnc.html" + l,
            novncContainerId: r
        }));
    });
    e.default = d;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(12), l = i(c), u = n(20), d = i(u), h = n(19), f = d.default.gettext, p = function(t) {
        var e = t.os, n = t.command, i = t.innerHtml;
        return l.default.createElement("li", {
            className: "machines-desktop-install-instructs-item"
        }, l.default.createElement("div", {
            className: "machines-desktop-install-instructs-row"
        }, l.default.createElement("b", null, e, ":"), " ", i && l.default.createElement("div", {
            dangerouslySetInnerHTML: {
                __html: i
            }
        }), !i && l.default.createElement("div", {
            className: "machines-desktop-shell-command"
        }, n)));
    }, g = function() {
        var t = d.default.format(f('Clicking "Launch Remote Viewer" will download a .vv file and launch $0.'), "<i>Remote Viewer</i>"), e = d.default.format(f("$0 is available for most operating systems. To install it, search for it in GNOME Software or run the following:"), "<i>Remote Viewer</i>"), n = d.default.format(f("Download the MSI from $0"), '<a href="https://virt-manager.org/download/" target="_blank">virt-manager.org</a>');
        return l.default.createElement("div", null, l.default.createElement("br", null), l.default.createElement("p", {
            className: "machines-desktop-more-info-text",
            dangerouslySetInnerHTML: {
                __html: t
            }
        }), l.default.createElement("p", {
            className: "machines-desktop-more-info-text",
            dangerouslySetInnerHTML: {
                __html: e
            }
        }), l.default.createElement("ul", {
            className: "machines-desktop-install-instructs"
        }, l.default.createElement(p, {
            os: "RHEL, CentOS",
            command: "sudo yum install virt-viewer"
        }), l.default.createElement(p, {
            os: "Fedora",
            command: "sudo dnf install virt-viewer"
        }), l.default.createElement(p, {
            os: "Ubuntu, Debian",
            command: "sudo apt-get install virt-viewer"
        }), l.default.createElement(p, {
            os: "Windows",
            innerHtml: n
        })));
    }, m = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                expanded: !1
            }, n.onClick = n.onClick.bind(n), n.getContent = n.getContent.bind(n), n;
        }
        return o(e, t), s(e, [ {
            key: "onClick",
            value: function() {
                this.setState({
                    expanded: !this.state.expanded
                });
            }
        }, {
            key: "getContent",
            value: function() {
                var t = this.props.vm, e = this.props.config, n = e.provider, i = e.providerState, r = l.default.createElement(g, null);
                if (n.ConsoleClientResources) {
                    var a = n.ConsoleClientResources;
                    r = l.default.createElement(a, {
                        displays: t.displays,
                        vm: t,
                        providerState: i
                    });
                }
                return r;
            }
        }, {
            key: "render",
            value: function() {
                return this.state.expanded ? l.default.createElement("div", {
                    className: "machines-desktop-more-info-container"
                }, l.default.createElement("a", {
                    href: "#",
                    onClick: this.onClick
                }, l.default.createElement("span", {
                    className: "fa fa-angle-down"
                }), " ", f("More Information")), this.getContent()) : l.default.createElement("a", {
                    href: "#",
                    onClick: this.onClick
                }, l.default.createElement("span", {
                    className: "fa fa-angle-right"
                }), " ", f("More Information"));
            }
        } ]), e;
    }(l.default.Component), v = function(t) {
        var e = t.vm, n = t.config, i = t.onDesktopConsole, r = e.displays.spice;
        r || (r = e.displays.vnc);
        var a = function() {
            return i(r);
        };
        return l.default.createElement("td", {
            className: "machines-desktop-main-col"
        }, l.default.createElement("p", {
            className: "machines-desktop-viewer-block"
        }, l.default.createElement("button", {
            onClick: a,
            id: (0, h.vmId)(e.name) + "-consoles-launch"
        }, f("Launch Remote Viewer"))), l.default.createElement("p", {
            className: "machines-desktop-viewer-block"
        }, l.default.createElement(m, {
            vm: e,
            config: n
        })));
    }, y = function(t) {
        var e = t.displays, n = t.idPrefix, i = e.spice && e.spice.address, r = e.spice && e.spice.port, a = e.spice && e.spice.tlsPort, o = e.vnc && e.vnc.port, s = e.vnc && e.vnc.tlsPort, c = e.vnc && e.vnc.address, u = c && i ? c === i && c : i || c;
        return l.default.createElement("dl", {
            className: "machines-desktop-manual-con-details"
        }, u && l.default.createElement("dt", null, f("Address:")), u && l.default.createElement("dd", {
            id: n + "-address"
        }, u), !u && i && l.default.createElement("dt", null, f("SPICE Address:")), !u && i && l.default.createElement("dd", {
            id: n + "-address-spice"
        }, i), !u && c && l.default.createElement("dt", null, f("VNC Address:")), !u && c && l.default.createElement("dd", {
            id: n + "-address-vnc"
        }, c), r && l.default.createElement("dt", null, f("SPICE Port:")), r && l.default.createElement("dd", {
            id: n + "-port-spice"
        }, r), a && l.default.createElement("dt", null, f("SPICE TLS Port:")), a && l.default.createElement("dd", {
            id: n + "-port-spice-tls"
        }, a), o && l.default.createElement("dt", null, f("VNC Port:")), o && l.default.createElement("dd", {
            id: n + "-port-vnc"
        }, o), s && l.default.createElement("dt", null, f("VNC TLS Port:")), s && l.default.createElement("dd", {
            id: n + "-port-vnc-tls"
        }, s));
    }, x = function(t) {
        var e = t.displays, n = t.idPrefix, i = !!e.vnc, r = !!e.spice;
        if (!i && !r) return null;
        var a = f("Connect with any SPICE or VNC viewer application.");
        if (!i || !r) {
            var o = f(i ? "VNC" : "SPICE");
            a = d.default.format(f("Connect with any $0 viewer application."), o);
        }
        return l.default.createElement("td", {
            className: "machines-desktop-main-col"
        }, l.default.createElement("h2", null, f("Manual Connection")), l.default.createElement("p", {
            className: "machines-desktop-manual-block"
        }, a), l.default.createElement("p", {
            className: "machines-desktop-manual-block"
        }, l.default.createElement(y, {
            displays: e,
            idPrefix: n
        })));
    }, _ = function(t) {
        var e = t.vm, n = t.onDesktopConsole, i = t.config;
        return l.default.createElement("div", null, l.default.createElement("table", {
            className: "machines-desktop-main"
        }, l.default.createElement("tr", null, l.default.createElement(v, {
            config: i,
            vm: e,
            onDesktopConsole: n
        }), l.default.createElement(x, {
            displays: e.displays,
            idPrefix: (0, h.vmId)(e.name) + "-consoles-manual"
        }))));
    };
    e.default = _;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        var n = {
            destroy: !1,
            disks: []
        };
        Object.keys(t.disks).sort().forEach(function(e) {
            var i = t.disks[e];
            "file" == i.type && i.source.file && n.disks.push({
                target: i.target,
                file: i.source.file,
                checked: !i.readonly
            });
        }), "running" == t.state && (n.destroy = !0);
        var i = (0, l.show_modal_dialog)({
            title: o.default.format(d("Confirm deletion of $0"), t.name),
            body: c.default.createElement(h, {
                values: n,
                onChange: function() {
                    return i.render();
                }
            })
        }, {
            actions: [ {
                caption: d("Delete"),
                style: "danger",
                clicked: function() {
                    var i = [];
                    return n.disks.forEach(function(t) {
                        t.checked && i.push(t.target);
                    }), e((0, u.deleteVm)(t, {
                        destroy: n.destroy,
                        storage: i
                    }));
                }
            } ]
        });
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.deleteDialog = r;
    var a = n(20), o = i(a), s = n(12), c = i(s), l = n(38), u = n(22);
    n(71);
    var d = o.default.gettext;
    c.default;
    var h = function(t) {
        function e(t) {
            return c.default.createElement("tr", null, c.default.createElement("td", null, c.default.createElement("input", {
                type: "checkbox",
                checked: t.checked,
                onChange: function(e) {
                    t.checked = e.target.checked, i();
                }
            })), c.default.createElement("td", null, t.file), c.default.createElement("td", null, t.target));
        }
        var n = t.values, i = t.onChange, r = null;
        n.destroy && (r = c.default.createElement("p", null, d("The VM is running and will be forced off before deletion.")));
        var a = null;
        return n.disks.length > 0 && (a = c.default.createElement("div", null, c.default.createElement("p", null, d("Delete associated storage files:")), c.default.createElement("table", {
            className: "table delete-dialog-disks"
        }, c.default.createElement("tbody", null, n.disks.map(e))))), c.default.createElement("div", {
            className: "modal-body"
        }, r, a);
    };
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(20), l = i(c), u = n(12), d = i(u), h = n(19), f = n(22);
    n(73);
    var p = l.default.gettext, g = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                isDetail: !1
            }, n.toggleDetail = n.toggleDetail.bind(n), n;
        }
        return o(e, t), s(e, [ {
            key: "toggleDetail",
            value: function() {
                this.setState({
                    isDetail: !this.state.isDetail
                });
            }
        }, {
            key: "render",
            value: function() {
                var t = this.props, e = t.text, n = t.detail, i = t.textId, r = t.onDismiss, a = p("show more");
                this.state.isDetail && (a = p("show less"));
                var o = d.default.createElement("a", {
                    href: "#",
                    className: "alert-link machines-more-button",
                    onClick: this.toggleDetail
                }, a);
                return d.default.createElement("div", {
                    className: "alert alert-warning alert-dismissable"
                }, d.default.createElement("button", {
                    type: "button",
                    className: "close",
                    "aria-hidden": "true",
                    onClick: r
                }, d.default.createElement("span", {
                    className: "pficon pficon-close"
                })), d.default.createElement("span", {
                    className: "pficon pficon-warning-triangle-o"
                }), d.default.createElement("strong", {
                    id: i
                }, e), o, this.state.isDetail && n);
            }
        } ]), e;
    }(d.default.Component), m = function(t) {
        var e = t.vm, n = t.dispatch;
        if (!e.lastMessage) return null;
        var i = (0, h.vmId)(e.name) + "-last-message", r = e.lastMessageDetail && e.lastMessageDetail.exception ? e.lastMessageDetail.exception : null;
        r = r && d.default.createElement("p", null, r);
        var a = function() {
            n((0, f.deleteVmMessage)({
                name: e.name,
                connectionName: e.connectionName
            }));
        };
        return d.default.createElement(g, {
            text: e.lastMessage,
            textId: i,
            detail: r,
            onDismiss: a
        });
    };
    e.default = m;
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.VmStateless = e.VmHA = e.VmOS = e.VmCpu = e.VmMemory = e.VmDescription = e.VmLastMessage = void 0;
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(30), l = i(c), u = n(57), d = n(53), h = n(36), f = n(33), p = n(50), g = i(p), m = n(35);
    a.default;
    var v = s.default.gettext, y = function() {
        return a.default.createElement("div", null, v("No VM found in oVirt."));
    }, x = function() {
        return a.default.createElement("div", null, v("Please wait till VMs list is loaded from the server."));
    }, _ = function(t) {
        var e = t.highAvailability;
        return a.default.createElement("div", null, v(e && e.enabled && "true" === e.enabled ? "yes" : "no"));
    }, b = function(t) {
        var e = t.mem;
        return a.default.createElement("div", null, (0, h.toGigaBytes)(e, "B"), " GiB");
    }, w = function(t) {
        var e = t.os;
        return a.default.createElement("div", null, e.type);
    }, S = function(t) {
        var e = t.stateless;
        return a.default.createElement("div", null, (0, g.default)("stateless", e));
    }, T = function(t) {
        var e = t.descr;
        return a.default.createElement("span", null, e);
    }, E = function(t) {
        var e = t.cpu, n = (0, h.valueOrDefault)(e.topology.sockets, 1) * (0, h.valueOrDefault)(e.topology.cores, 1) * (0, 
        h.valueOrDefault)(e.topology.threads, 1), i = v("sockets") + ": " + e.topology.sockets + "\n" + v("cores") + ": " + e.topology.cores + "\n" + v("threads") + ": " + e.topology.threads;
        return a.default.createElement("span", {
            title: i,
            "data-toggle": "tooltip",
            "data-placement": "left"
        }, n);
    }, A = function(t) {
        var e = t.id, n = t.hosts, i = t.dispatch;
        if (!e || !n || !n[e]) return null;
        var r = n[e];
        if ((0, h.isSameHostAddress)(r.address)) return a.default.createElement("a", {
            href: "#",
            onClick: function() {
                return i((0, f.goToSubpage)("hostvms"));
            }
        }, v("Host"));
        var o = "https://" + r.address + ":" + l.default.cockpitPort + "/machines";
        return a.default.createElement("a", {
            href: o,
            onClick: function() {
                window.top.location = o;
            }
        }, r.name);
    }, C = function(t) {
        var e = t.id, n = t.templates;
        if (!e || !n || !n[e]) return null;
        var i = n[e], r = i.version.baseTemplateId && n[i.version.baseTemplateId] ? n[i.version.baseTemplateId].name : "", o = v("Description") + ": " + i.description + "\n" + v("Version") + ": " + (0, 
        h.valueOrDefault)(i.version.name, "") + "\n" + v("Version num") + ": " + (0, h.valueOrDefault)(i.version.number, "") + "\n" + v("Base template") + ": " + r + "\n";
        return a.default.createElement("span", {
            title: o,
            "data-toggle": "tooltip",
            "data-placement": "left"
        }, i.name);
    }, P = function(t) {
        var e = t.vm, n = t.hostName, i = t.dispatch, r = null, o = {
            title: v("Run"),
            action: function() {
                return i((0, f.startVm)(e));
            },
            id: "cluster-" + e.name + "-run"
        }, s = {
            title: v("Run Here"),
            action: function() {
                return i((0, f.startVm)(e, n));
            },
            id: "cluster-" + e.name + "-run-here"
        };
        return [ "suspended" ].indexOf(e.state) >= 0 && (r = [ o ]), [ "shut off", "down" ].indexOf(e.state) >= 0 && (r = [ o, s ]), 
        r ? a.default.createElement("span", null, a.default.createElement(d.DropdownButtons, {
            buttons: r
        }), a.default.createElement(k, {
            vm: e
        })) : null;
    }, k = function(t) {
        var e = t.vm;
        if (!e.lastMessage) return null;
        var n = e.lastMessage;
        return e.lastMessageDetail && e.lastMessageDetail.data && (n = e.lastMessageDetail.data), 
        a.default.createElement("p", {
            title: n,
            "data-toggle": "tooltip",
            id: "clustervm-" + e.name + "-actionerror"
        }, a.default.createElement("span", {
            className: "pficon-warning-triangle-o"
        }), " ", e.lastMessage);
    }, M = function(t) {
        var e = t.vm, n = t.hosts, i = t.templates, r = t.config, o = t.dispatch, s = a.default.createElement(d.StateIcon, {
            state: e.state,
            config: r
        }), c = r.providerState && r.providerState.ovirtConfig, l = (0, m.getHost)(n, c), h = l && l.name;
        return a.default.createElement(u.ListingRow, {
            columns: [ {
                name: e.name,
                header: !0
            }, a.default.createElement(T, {
                descr: e.description
            }), a.default.createElement(C, {
                id: e.templateId,
                templates: i
            }), a.default.createElement(b, {
                mem: e.memory
            }), a.default.createElement(E, {
                cpu: e.cpu
            }), a.default.createElement(w, {
                os: e.os
            }), a.default.createElement(_, {
                highAvailability: e.highAvailability
            }), a.default.createElement(S, {
                stateless: e.stateless
            }), a.default.createElement(A, {
                id: e.hostId,
                hosts: n,
                dispatch: o
            }), a.default.createElement(P, {
                vm: e,
                dispatch: o,
                hostName: h
            }), s ]
        });
    }, O = function(t) {
        var e = t.dispatch, n = t.config, i = n.providerState, r = i.vms, o = i.hosts, c = i.templates, l = i.clusters, d = i.ovirtConfig;
        if (!r) return a.default.createElement(x, null);
        if (0 === r.length) return a.default.createElement(y, null);
        var h = (0, m.getCurrentCluster)(o, l, d), f = s.default.format(v("Cluster Virtual Machines"));
        return h && (f = s.default.format(v("Virtual Machines of $0 cluster"), h.name)), 
        a.default.createElement("div", {
            className: "container-fluid"
        }, a.default.createElement(u.Listing, {
            title: f,
            columnTitles: [ v("Name"), v("Description"), v("Template"), v("Memory"), v("vCPUs"), v("OS"), v("HA"), v("Stateless"), v("Host"), a.default.createElement("div", {
                className: "ovirt-provider-cluster-vms-actions"
            }, v("Action")), a.default.createElement("div", {
                className: "ovirt-provider-cluster-vms-state"
            }, v("State")) ]
        }, Object.getOwnPropertyNames(r).map(function(t) {
            return a.default.createElement(M, {
                vm: r[t],
                hosts: o,
                templates: c,
                config: n,
                dispatch: e
            });
        })));
    };
    e.VmLastMessage = k, e.VmDescription = T, e.VmMemory = b, e.VmCpu = E, e.VmOS = w, 
    e.VmHA = _, e.VmStateless = S, e.default = O;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(12), l = i(c), u = n(20), d = i(u), h = n(57), f = n(74), p = n(33), g = n(35), m = n(19), v = function() {
        return l.default.createElement("div", null, x("No VM found in oVirt."));
    }, y = function() {
        return l.default.createElement("div", null, x("Please wait till list of templates is loaded from the server."));
    };
    l.default;
    var x = d.default.gettext, _ = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                enterDetails: !1,
                vmName: ""
            }, n.onDoCreateVm = n.onDoCreateVm.bind(n), n.onCreateVm = n.onCreateVm.bind(n), 
            n.onCancel = n.onCancel.bind(n), n.onVmNameChanged = n.onVmNameChanged.bind(n), 
            n;
        }
        return o(e, t), s(e, [ {
            key: "onCreateVm",
            value: function() {
                this.setState({
                    enterDetails: !0,
                    vmName: ""
                });
            }
        }, {
            key: "onCancel",
            value: function() {
                this.setState({
                    enterDetails: !1,
                    vmName: ""
                });
            }
        }, {
            key: "onVmNameChanged",
            value: function(t) {
                this.setState({
                    vmName: t.target.value
                });
            }
        }, {
            key: "onDoCreateVm",
            value: function() {
                this.props.dispatch((0, p.createVmFromTemplate)({
                    templateName: this.props.template.name,
                    clusterName: this.props.cluster.name,
                    vm: {
                        name: this.state.vmName
                    }
                })), this.setState({
                    enterDetails: !1,
                    vmName: ""
                });
            }
        }, {
            key: "render",
            value: function() {
                return this.state.enterDetails ? l.default.createElement("div", null, l.default.createElement("input", {
                    className: "form-control",
                    type: "text",
                    placeholder: x("Enter New VM name"),
                    value: this.state.vmName,
                    onChange: this.onVmNameChanged
                }), l.default.createElement("button", {
                    onClick: this.onCancel,
                    className: "btn btn-default btn-danger"
                }, x("Cancel")), l.default.createElement("button", {
                    onClick: this.onDoCreateVm,
                    className: "btn btn-default btn-danger"
                }, x("Create"))) : l.default.createElement("button", {
                    onClick: this.onCreateVm
                }, x("Create VM"));
            }
        } ]), e;
    }(l.default.Component), b = function(t) {
        var e = t.template, n = t.cluster, i = t.dispatch;
        return n ? l.default.createElement("span", null, l.default.createElement(_, {
            template: e,
            cluster: n,
            dispatch: i
        }), l.default.createElement(f.VmLastMessage, {
            vm: e
        })) : ((0, m.logDebug)("TemplateActions: unknown cluster"), null);
    }, w = function(t) {
        var e = t.template, n = t.templates, i = t.cluster, r = t.dispatch;
        return l.default.createElement(h.ListingRow, {
            columns: [ {
                name: e.name,
                header: !0
            }, e.version.name, e.version.baseTemplateId ? n[e.version.baseTemplateId].name : null, l.default.createElement(f.VmDescription, {
                descr: e.description
            }), l.default.createElement(f.VmMemory, {
                mem: e.memory
            }), l.default.createElement(f.VmCpu, {
                cpu: e.cpu
            }), l.default.createElement(f.VmOS, {
                os: e.os
            }), l.default.createElement(f.VmHA, {
                highAvailability: e.highAvailability
            }), l.default.createElement(f.VmStateless, {
                stateless: e.stateless
            }), l.default.createElement(b, {
                template: e,
                cluster: i,
                dispatch: r
            }) ]
        });
    }, S = function(t) {
        var e = t.config, n = t.dispatch, i = e.providerState, r = i.templates, a = i.hosts, o = i.clusters, s = i.ovirtConfig;
        if (!r) return l.default.createElement(y, null);
        if (0 === r.length) return l.default.createElement(v, null);
        var c = (0, g.getCurrentCluster)(a, o, s), u = d.default.format(x("Cluster Templates"));
        return c && (u = d.default.format(x("Templates of $0 cluster"), c.name)), l.default.createElement("div", {
            className: "container-fluid"
        }, l.default.createElement(h.Listing, {
            title: u,
            columnTitles: [ x("Name"), x("Version"), x("Base Template"), x("Description"), x("Memory"), x("vCPUs"), x("OS"), x("HA"), x("Stateless"), x("Action") ]
        }, Object.getOwnPropertyNames(r).map(function(t) {
            return l.default.createElement(w, {
                template: r[t],
                templates: r,
                cluster: c,
                dispatch: n
            });
        })));
    };
    e.default = S;
}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    function r(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    function a(t, e) {
        if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !e || "object" != typeof e && "function" != typeof e ? t : e;
    }
    function o(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var s = function() {
        function t(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
                Object.defineProperty(t, i.key, i);
            }
        }
        return function(e, n, i) {
            return n && t(e.prototype, n), i && t(e, i), e;
        };
    }(), c = n(12), l = i(c), u = n(20), d = i(u);
    n(77);
    var h = n(30), f = n(19);
    l.default;
    var p = d.default.gettext, g = function(t) {
        function e(t) {
            r(this, e);
            var n = a(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
            return n.state = {
                fileContent: p("Loading data ..."),
                changed: !1,
                loaded: !1,
                reloadConfirmation: !1,
                saveConfirmation: !1
            }, n.onSave = n.onSave.bind(n), n.onSaveConfirmed = n.onSaveConfirmed.bind(n), n.onSaveCanceled = n.onSaveCanceled.bind(n), 
            n.onReload = n.onReload.bind(n), n.onReloadConfirmed = n.onReloadConfirmed.bind(n), 
            n.onReloadCanceled = n.onReloadCanceled.bind(n), n.onEditorChange = n.onEditorChange.bind(n), 
            n;
        }
        return o(e, t), s(e, [ {
            key: "componentDidMount",
            value: function() {
                this.doReload();
            }
        }, {
            key: "componentWillUnmount",
            value: function() {}
        }, {
            key: "doReload",
            value: function() {
                var t = this;
                d.default.file(h.VDSM_CONF_FILE).read().done(function(e) {
                    t.setState({
                        fileContent: e,
                        changed: !1,
                        loaded: !0
                    });
                }).fail(function(t) {
                    (0, f.logError)("Error reading " + h.VDSM_CONF_FILE + ": " + JSON.stringify(t));
                });
            }
        }, {
            key: "doSave",
            value: function() {
                var t = this;
                d.default.file(h.VDSM_CONF_FILE, {
                    superuser: "try"
                }).replace(this.state.fileContent).done(function() {
                    (0, f.logDebug)("Content of vdsm.conf replaced."), t.setState({
                        changed: !1
                    });
                }).fail(function(t) {
                    (0, f.logError)("Error writing " + h.VDSM_CONF_FILE + ": " + JSON.stringify(t));
                });
            }
        }, {
            key: "onSave",
            value: function() {
                this.setState({
                    saveConfirmation: !0
                });
            }
        }, {
            key: "onSaveConfirmed",
            value: function() {
                this.doSave(), this.setState({
                    saveConfirmation: !1
                });
            }
        }, {
            key: "onSaveCanceled",
            value: function() {
                this.setState({
                    saveConfirmation: !1
                });
            }
        }, {
            key: "onReload",
            value: function() {
                this.setState({
                    reloadConfirmation: !0
                });
            }
        }, {
            key: "onReloadConfirmed",
            value: function() {
                this.doReload(), this.setState({
                    reloadConfirmation: !1
                });
            }
        }, {
            key: "onReloadCanceled",
            value: function() {
                this.setState({
                    reloadConfirmation: !1
                });
            }
        }, {
            key: "onEditorChange",
            value: function(t) {
                this.setState({
                    fileContent: t.target.value,
                    changed: !0
                });
            }
        }, {
            key: "render",
            value: function() {
                var t = null;
                this.state.saveConfirmation || (t = this.state.reloadConfirmation ? l.default.createElement("span", null, " ", p("Confirm reload:"), " ", l.default.createElement("button", {
                    className: "btn btn-danger btn-xs",
                    onClick: this.onReloadConfirmed
                }, p("OK")), " ", l.default.createElement("button", {
                    className: "btn btn-primary btn-xs",
                    onClick: this.onReloadCanceled
                }, p("Cancel"))) : l.default.createElement("button", {
                    className: "btn btn-default",
                    onClick: this.onReload
                }, p("Reload")));
                var e = null;
                this.state.reloadConfirmation || (e = this.state.saveConfirmation ? l.default.createElement("span", null, " ", p("Confirm save:"), " ", l.default.createElement("button", {
                    className: "btn btn-danger btn-xs",
                    onClick: this.onSaveConfirmed
                }, p("OK")), " ", l.default.createElement("button", {
                    className: "btn btn-primary btn-xs",
                    onClick: this.onSaveCanceled
                }, p("Cancel"))) : l.default.createElement("button", {
                    className: "btn btn-default",
                    onClick: this.onSave,
                    disabled: !this.state.changed
                }, p("Save")));
                var n = null;
                return this.state.loaded && (n = l.default.createElement("div", {
                    id: "vdsmview-data-loaded"
                })), l.default.createElement("div", {
                    className: "ovirt-provider-vdsm"
                }, l.default.createElement("h1", null, p("Edit the vdsm.conf")), l.default.createElement("a", {
                    href: "/system/services#/vdsmd.service",
                    target: "_top"
                }, p("VDSM Service Management")), l.default.createElement("div", {
                    className: "ovirt-provider-vdsm-menu"
                }, l.default.createElement("div", {
                    className: "ovirt-provider-vdsm-inline-block"
                }), l.default.createElement("div", {
                    className: "btn-group ovirt-provider-vdsm-menu-buttons"
                }, e, t)), l.default.createElement("br", null), l.default.createElement("textarea", {
                    className: "ovirt-provider-vdsm-editor",
                    value: this.state.fileContent,
                    onChange: this.onEditorChange
                }), n);
            }
        } ]), e;
    }(l.default.Component), m = function() {
        return l.default.createElement("div", null, l.default.createElement(g, null));
    };
    e.default = m;
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r), o = n(20), s = i(o);
    n(79);
    var c = n(38), l = i(c), u = n(33), d = s.default.gettext;
    a.default;
    var h = function(t, e) {
        var n = e && e.id, i = a.default.createElement("div", {
            className: "modal-body"
        }, d("Please confirm, the host shall be switched to maintenance mode."), a.default.createElement("br", null), d("All running virtual machines will be turned off.")), r = {
            title: d("Switch Host to Maintenance"),
            body: i
        }, o = {
            actions: [ {
                clicked: function() {
                    return t((0, u.switchHostToMaintenance)({
                        hostId: n
                    }));
                },
                caption: d("OK"),
                style: "primary"
            } ]
        };
        l.default.show_modal_dialog(r, o);
    }, f = function(t, e) {
        return function(n) {
            n && 0 === n.button && h(t, e);
        };
    }, p = function(t) {
        var e = t.dispatch, n = t.host;
        return n ? a.default.createElement("a", {
            className: "card-pf-link-with-icon pull-right",
            id: "ovirt-host-to-maintenance",
            onClick: f(e, n)
        }, a.default.createElement("div", {
            className: "ovirt-action-padding"
        }, a.default.createElement("span", {
            className: "pficon pficon-close"
        }), d("Host to Maintenance"))) : null;
    };
    e.default = p;
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    function i(t) {
        return t && t.__esModule ? t : {
            default: t
        };
    }
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(12), a = i(r), o = n(20), s = i(o), c = n(50), l = i(c);
    n(81), a.default;
    var u = s.default.gettext, d = function(t) {
        var e = t.host;
        return e ? a.default.createElement("div", {
            className: "container-fluid ovirt-host-status-wrapper"
        }, a.default.createElement("div", {
            className: "ovirt-host-status"
        }, a.default.createElement("div", {
            className: "ovirt-host-status-label"
        }, u("oVirt Host State:")), " ", (0, l.default)("hostStatus", e.status))) : null;
    };
    e.default = d;
}, function(t, e) {}, function(t, e) {} ]);
//# sourceMappingURL=ovirt.min.js.map