!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}({0:function(e,t){e.exports=jQuery},2:function(e,t){e.exports=cockpit},27:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var r,i,o=n(0),a=n.n(o),s=n(2),c=n.n(s);function d(e,t){e.wait(function(){e.valid&&t()})}function u(e){var t,n,o={exists:null,state:null,enabled:null,wait:function(e){s.promise.then(e)},start:function(){return b("StartUnit",[e,"replace"])},stop:function(){return b("StopUnit",[e,"replace"])},restart:function(){return b("RestartUnit",[e,"replace"])},tryRestart:function(){return b("TryRestartUnit",[e,"replace"])},enable:function(){return y("EnableUnitFiles",[[e],!1,!1])},disable:function(){return y("DisableUnitFiles",[[e],!1])}};c.a.event_target(o);var a,s=c.a.defer();function u(){o.exists="not-found"!=t.LoadState||"inactive"!=t.ActiveState,"activating"==t.ActiveState?o.state="starting":"deactivating"==t.ActiveState?o.state="stopping":"active"==t.ActiveState||"reloading"==t.ActiveState?o.state="running":"failed"==t.ActiveState?o.state="failed":"inactive"==t.ActiveState&&o.exists?o.state="stopped":o.state=void 0,"enabled"==t.UnitFileState||"linked"==t.UnitFileState?o.enabled=!0:"disabled"==t.UnitFileState||"masked"==t.UnitFileState?o.enabled=!1:o.enabled=void 0,o.unit=t,o.dispatchEvent("changed"),s.resolve()}function f(){o.service=n,o.dispatchEvent("changed")}function l(){function e(e,n){r.call(e,"org.freedesktop.DBus.Properties","GetAll",[n]).fail(function(e){console.log(e)}).done(function(e){var i={};for(var o in e[0])i[o]=e[0][o].v;var a={};a[n]=i;var s={};s[t.path]=a,r.notify(s)})}t&&n&&(e(t.path,"org.freedesktop.systemd1.Unit"),e(n.path,"org.freedesktop.systemd1.Service"))}function p(t,n,r,i,o){i==e&&l()}-1==e.indexOf(".")&&(e+=".service"),a=function(){i.LoadUnit(e).done(function(e){(t=r.proxy("org.freedesktop.systemd1.Unit",e)).addEventListener("changed",u),d(t,u),(n=r.proxy("org.freedesktop.systemd1.Service",e)).addEventListener("changed",f),d(n,f)}).fail(function(){o.exists=!1,o.dispatchEvent("changed")})},i||(r=c.a.dbus("org.freedesktop.systemd1",{superuser:"try"}),d(i=r.proxy("org.freedesktop.systemd1.Manager","/org/freedesktop/systemd1"),function(){i.Subscribe().fail(function(e){"org.freedesktop.systemd1.AlreadySubscribed"!=e.name&&"org.freedesktop.DBus.Error.FileExists"!=e.name&&console.warn("Subscribing to systemd signals failed",e)})})),d(i,a),i.addEventListener("Reloading",function(e,t){t||l()}),i.addEventListener("JobNew",p),i.addEventListener("JobRemoved",p);var v={};function g(e,t){return r.call("/org/freedesktop/systemd1","org.freedesktop.systemd1.Manager",e,t)}function b(e,t){var n=c.a.defer();return g(e,t).done(function(e){var t=e[0];v[t]=n}).fail(function(e){n.reject(e)}),n.promise()}function y(e,t){return g(e,t).then(function(){var e=c.a.defer();return g("Reload",[]).done(function(){e.resolve()}).fail(function(t){"org.freedesktop.DBus.Error.NoReply"===t.name?(l(),e.resolve()):e.reject(t)}),e.promise()})}return i.addEventListener("JobRemoved",function(e,t,n,r,i){v[n]&&("done"==i?v[n].resolve():v[n].reject(i),delete v[n])}),o}a()(function(){var e;function t(){function t(){function t(t){a()("#"+t).text(JSON.stringify(e[t]))}t("exists"),t("state"),t("enabled")}e=u(c.a.location.path[0]||""),a()(e).on("changed",t),t(),a()("body").show()}function n(t){a()("#"+t).on("click",function(){e[t]().fail(function(e){console.error("action",t,"failed:",JSON.stringify(e))})})}n("start"),n("stop"),n("enable"),n("disable"),a()(c.a).on("locationchanged",t),t()})}});
//# sourceMappingURL=service.min.js.map