
/*
 * Just define an array for everyone else to extend. This is global
 * because tests and legacy stuff expect it to be so.
 */
var shell = { };
define("shell/shell", shell);

//# sourceURL=shell/shell.js

define("shell/attrchange", ["jquery"],function(t){function e(){var t=document.createElement("p");var e=false;if(t.addEventListener)t.addEventListener("DOMAttrModified",function(){e=true},false);else if(t.attachEvent)t.attachEvent("onDOMAttrModified",function(){e=true});else return false;t.setAttribute("id","target");return e}function a(e,a){if(e){var r=this.data("attr-old-value");if(a.attributeName.indexOf("style")>=0){if(!r["style"])r["style"]={};var i=a.attributeName.split(".");a.attributeName=i[0];a.oldValue=r["style"][i[1]];a.newValue=i[1]+":"+this.prop("style")[t.camelCase(i[1])];r["style"][i[1]]=a.newValue}else{a.oldValue=r[a.attributeName];a.newValue=this.attr(a.attributeName);r[a.attributeName]=a.newValue}this.data("attr-old-value",r)}}var r=window.MutationObserver||window.WebKitMutationObserver;t.fn.attrchange=function(i){var n={trackValues:false,callback:t.noop};if(typeof i==="function"){n.callback=i}else{t.extend(n,i)}if(n.trackValues){t(this).each(function(e,a){var r={};for(var i,n=0,l=a.attributes,u=l.length;n<u;n++){i=l.item(n);r[i.nodeName]=i.value}t(this).data("attr-old-value",r)})}if(r){var l={subtree:false,attributes:true,attributeOldValue:n.trackValues};var u=new r(function(e){e.forEach(function(e){var a=e.target;if(n.trackValues){e.newValue=t(a).attr(e.attributeName)}n.callback.call(a,e)})});return this.each(function(){u.observe(this,l)})}else if(e()){return this.on("DOMAttrModified",function(t){if(t.originalEvent)t=t.originalEvent;t.attributeName=t.attrName;t.oldValue=t.prevValue;n.callback.call(this,t)})}else if("onpropertychange"in document.body){return this.on("propertychange",function(e){e.attributeName=window.event.propertyName;a.call(t(this),n.trackValues,e);n.callback.call(this,e)})}return this}});

//# sourceURL=shell/attrchange.min.js

define("shell/controls", ["jquery","base1/cockpit","shell/attrchange"],function(t,e){"use strict";var i={};function a(e,i){var a;if(e){var s="div.bar-row[graph='"+e+"']";a=t(s)}else if(i){a=t(i)}else{a=t([])}function r(e){var i=t(e).attr("value");if(i===undefined)return[NaN];var a=i.split("/",2);var s=parseInt(a[0],10);if(a.length==1)return[s];var r=parseInt(a[1],10);if(!isNaN(r)&&s>r)s=r;if(s<0)s=0;return[s,r]}var n=0;a.each(function(){var t=r(this).pop();if(!isNaN(t)&&t>n)n=t});if(e){var l=100*1024*1024;n=n-n%l+l}a.each(function(){var e=r(this);var i=e.shift();var a=e.pop();if(isNaN(i)||a===0){t(this).css("visibility","hidden")}else{var s=t(this).data("bar-progress");if(isNaN(a)){s.addClass("progress-no-limit");a=i}else{s.removeClass("progress-no-limit")}t(this).css("visibility","visible");s.css("width",a/n*100+"%");t(this).data("bar-progress-bar").css("width",i/a*100+"%").toggle(i>0)}})}var s={};function r(e,i){if(e===undefined){if(i)e=t(i).attr("graph")}if(!e){a(undefined,i);return}if(s[e]!=="undefined")window.clearTimeout(s[e]);s[e]=window.setTimeout(function(){delete s[e];a(e)},10)}function n(e){var i=t("<div>").addClass("progress-bar");var s=t("<div>").addClass("progress").append(i);t(e).addClass("bar-row").append(s).data("bar-progress",s).data("bar-progress-bar",i);t(e).attrchange({trackValues:false,callback:function(t){if(t.attributeName=="graph"||t.attributeName=="value"){r(this.getAttribute("graph"),this)}}});e.reflow=function(){a(this.getAttribute("graph"),this)};r(undefined,e)}function l(){t("div.bar-row").each(function(){n(this,false)})}i.BarRow=function h(e){var i=t("<div>").addClass("bar-row").attr("graph",e);n(i);return i};t(document).ready(l);function d(e,i,a,s){var r=0;if(s>a)r=1;else if(s<0||isNaN(s))r=0;else if(!isNaN(a)&&a>0&&s>=0)r=s/a;t(i).css("width",r*100+"%").next("div").css("margin-left",t(i).css("width"));e.value=r}function u(e){d(e,t(e).children("div.slider-bar").first()[0],1,e.value)}function f(e){t(e).toggleClass("slider-warning",e.offsetWidth<e.scrollWidth)}function o(e){t(e).attr("unselectable","on");Object.defineProperty(e,"value",{get:function(){return parseFloat(this.getAttribute("value"))},set:function(t){var e=String(t);if(e!=this.getAttribute("value"))this.setAttribute("value",t)}});Object.defineProperty(e,"disabled",{get:function(){if(!this.hasAttribute("disabled"))return false;return this.getAttribute("disabled").toLowerCase()!="false"},set:function(t){this.setAttribute("disabled",t?"true":"false")}});u(e);f(e);t(e).attrchange({trackValues:true,callback:function(i){if(i.attributeName=="value"&&i.oldValue!==i.newValue)u(e);if(i.attributeName=="disabled")t(e).toggleClass("slider-disabled",e.disabled)}});if(e.disabled)t(e).addClass("slider-disabled");t(e).on("mousedown",function(i){if(e.disabled)return true;var a;var s=t(e).offset().left;if(t(i.target).hasClass("slider-thumb")){var r=i.offsetX||i.clientX-t(i.target).offset().left;s+=r-t(i.target).outerWidth()/2;a=t(i.target).parent()[0]}else{a=t(e).children("div.slider-bar").first()[0];d(e,a,t(e).width(),i.pageX-s);t(e).trigger("change",[e.value]);f(e)}t(document).on("mousemove.slider",function(i){d(e,a,t(e).width(),i.pageX-s);t(e).trigger("change",[e.value]);f(e);return false}).on("mouseup.slider",function(e){t(document).off("mousemove.slider").off("mouseup.slider");return false});return false})}function c(){t("div.slider").each(function(){o(this)})}i.Slider=function v(){var e=t("<div class='slider'>").append(t("<div class='slider-bar'>").append(t("<div class='slider-thumb'>")));o(e);return e};t(document).ready(c);i.update_privileged_ui=function g(e,i,a){var s=e.allowed!==false;t(i).each(function(){var e="allowed-title";if(typeof t(this).data(e)==="undefined"||t(this).data(e)===false)t(this).data(e,t(this).attr("title")||"");t(this).tooltip({html:true});if(t(this).hasClass("disabled")===s){t(this).toggleClass("disabled",!s).attr("data-original-title",null);if(s)t(this).attr("title",t(this).data(e));else t(this).attr("title",a);t(this).tooltip("fixTitle")}})};return i});

//# sourceURL=shell/controls.min.js

define("shell/plot", ["jquery","base1/cockpit","shell/shell"],function(e,t,n){var i=t.gettext;var r=t.gettext;n.plot=function s(n,i,r){var a={};var o={};var s=[];var c=[];var f=null;var u;var l;function d(){if(n.height()===0||n.width()===0)return;if(f===null)f=e.plot(n,c,a);f.setData(c);var t=f.getAxes();t.xaxis.options.min=l.beg*u;t.xaxis.options.max=(l.end-2)*u;if(a.setup_hook)a.setup_hook(f);t.xaxis.show=true;t.xaxis.used=true;t.yaxis.show=true;t.yaxis.used=true;f.setupGrid();f.draw()}var h=false;function v(){if(!h){h=true;window.setTimeout(function(){h=false;d()},0)}}function _(){l.walk()}function m(){l.move(l.beg,l.end)}var g=0;function p(n,i){if(f)f.clearSelection(true);u=Math.ceil(n/1e3)*1e3;var r;if(i!==undefined)r=(new Date).getTime()-i*1e3;else r=0;var a=-Math.ceil((n*1e3+r)/u);var o=-Math.floor(r/u);if(l&&l.interval==u){l.move(a,o)}else{if(l)l.close();l=t.grid(u,a,o);g++;for(var c=0;c<s.length;c++)s[c].reset();g--;b();e(l).on("notify",function(e,t,n){v()})}}function b(){if(g===0)l.sync()}function k(){l.close();for(var t=0;t<s.length;t++)s[t].stop();a={};s=[];c=[];f=null;e(n).empty();e(n).data("flot_data",null)}function x(){if(n.height()===0||n.width()===0)return;if(f)f.resize();v()}function w(e){a=e;f=null}function y(){return a}function M(n,i){var r=null;var a={options:i,move_to_front:_,remove:m};s.push({stop:f,reset:x,hover_hit:w,hover:y});function f(){if(r)r.close()}function d(){c.push(i)}function h(){var e=c.indexOf(i);if(e>=0)c.splice(e,1)}function _(){var e=c.indexOf(i);if(e>=0){c.splice(e,1);c.push(i)}}function m(){f();h();v()}function g(e){return{name:e,units:n.units,derive:n.derive}}var p=[];if(n.direct){p.push({source:"direct",archive_source:"pcp-archive",metrics:n.direct.map(g),instances:n.instances,"omit-instances":n["omit-instances"],host:n.host})}if(n.internal){p.push({source:"internal",metrics:n.internal.map(g),instances:n.instances,"omit-instances":n["omit-instances"],host:n.host})}function k(e){var t,n;if(!e)return 0;if(e.length!==undefined){n=0;for(t=0;t<e.length;t++)n+=k(e[t]);return n}return e}function x(){if(r)r.close();r=t.metrics(u,p);var a=l.add(r,[]);var s=n.factor||1;i.data=l.add(function(e,t,n){for(var i=0;i<n;i++)e[t+i]=[(l.beg+t+i)*u,k(a[t+i])*s]});function c(){if(r.archives&&!o.archives){o.archives=true;e(o).triggerHandler("changed")}}e(r).on("changed",c);c();b()}function w(e,t){return!!(t&&t.series.data==i.data)}function y(t){e(a).triggerHandler("hover",[t])}x();d();return a}function z(n,i){var r=null;var a={add_instance:p,clear_instances:k};s.push({stop:f,reset:v,hover_hit:x,hover:w});function f(){if(r)r.close()}function d(e){return{name:e,units:n.units,derive:n.derive}}var h=[];if(n.direct){h.push({source:"direct",archive_source:"pcp-archive",metrics:[d(n.direct)],metrics_path_names:["a"],instances:n.instances,"omit-instances":n["omit-instances"],host:n.host})}if(n.internal){h.push({source:"internal",metrics:[d(n.internal)],metrics_path_names:["a"],instances:n.instances,"omit-instances":n["omit-instances"],host:n.host})}function v(){if(r)r.close();r=t.metrics(u,h);function n(){if(r.archives&&!o.archives){o.archives=true;e(o).triggerHandler("changed")}}e(r).on("changed",n);n();g++;for(var i in _)_[i].reset();g--;b()}var _={};var m=null;function p(t){if(_[t])return;var a=e.extend({},i);var o=n.factor||1;var s=n.threshold||0;var f;var d=m;function h(){f=l.add(r,["a",t]);a.data=l.add(function(e,t,n){for(var i=0;i<n;i++){var r=(f[t+i]||0)*o;var a=(l.beg+t+i)*u;var c=0;if(d){if(d.data[t+i][1])c=d.data[t+i][1];else c=d.data[t+i][2]}if(Math.abs(r)>s){e[t+i]=[a,c+r,c];if(e[t+i-1]&&e[t+i-1][1]===null)e[t+i-1][1]=e[t+i-1][2]}else{e[t+i]=[a,null,c];if(e[t+i-1]&&e[t+i-1][1]!==null)e[t+i-1][1]=e[t+i-1][2]}}});b()}function v(){l.remove(f);l.remove(a.data);var e=c.indexOf(a);if(e>=0)c.splice(e,1)}m=a;_[t]=a;a.reset=h;a.remove=v;h();c.push(a)}function k(){for(var e in _)_[e].remove();_={};m=null}function x(e,t){var n,i;if(!l)return false;i=Math.round(e.x/u)-l.beg;if(i<0)i=0;for(n in _){var r=_[n].data;if(r[i]&&r[i][1]&&r[i][2]<=e.y&&e.y<=r[i][1])return n}return false}function w(t){e(a).triggerHandler("hover",[t])}v();return a}var D=null;var $=false;function F(e,t){if(D!=e){if(D)D.hover(false);D=e;$=t;if(D)D.hover($)}else if($!=t){$=t;if(D)D.hover($)}}function S(e,t,n){var i=null;var r=false;for(var a=0;a<s.length;a++){r=s[a].hover_hit(t,n);if(r){i=s[a];break}}F(i,r)}function H(e){F(null,false)}function C(t,n){if(n)e(o).triggerHandler("zoomstart",[])}function T(t,n){f.clearSelection(true);e(o).triggerHandler("zoom",[(n.xaxis.to-n.xaxis.from)/1e3,n.xaxis.to/1e3])}e(n).on("plothover",S);e(n).on("mouseleave",H);e(n).on("plotselecting",C);e(n).on("plotselected",T);e(n).data("flot_data",c);p(i,r);e.extend(o,{archives:false,start_walking:_,stop_walking:m,refresh:v,reset:p,destroy:k,resize:x,set_options:w,get_options:y,add_metrics_sum_series:M,add_metrics_stacked_instances_series:z});return o};var a=["#006bb4","#008ff0","#2daaff","#69c2ff","#a5daff","#e1f3ff","#00243c","#004778"];n.plot_simple_template=function c(){return{colors:a,legend:{show:false},series:{shadowSize:0,lines:{lineWidth:2,fill:.4}},xaxis:{tickLength:0,mode:"time",tickFormatter:n.format_date_tick,minTickSize:[1,"minute"],reserveSpace:false},yaxis:{tickColor:"#d1d1d1",min:0},points:{radius:0},grid:{borderWidth:1,aboveData:false,color:"black",borderColor:e.color.parse("black").scale("a",.22).toString(),labelMargin:0}}};n.memory_ticks=function f(e){var t=Math.pow(2,Math.ceil(Math.log(e.max/5)/Math.LN2));var n=[];for(var i=0;i<e.max;i+=t)n.push(i);return n};var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.format_date_tick=function u(e,t){function n(e){var t=e.toFixed();if(t.length==1)t="0"+t;return t}var i=0;var a=1;var s=2;var c=3;var f;var u;var l=t.tickSize[1];if(l=="minute"||l=="hour")u=c;else if(l=="day")u=s;else if(l=="month")u=a;else u=i;var d=new Date;var h=new Date(t.min);f=i;if(h.getFullYear()==d.getFullYear()){f=a;if(h.getMonth()==d.getMonth()){f=s;if(h.getDate()==d.getDate())f=c}}if(f>u)f=u;if(f==s)f=a;var v=new Date(e);var _=" ";if(i>=f&&i<=u)_+=v.getFullYear().toFixed()+" ";if(a>=f&&a<=u)_+=r("month-name",o[v.getMonth()])+" ";if(s>=f&&s<=u)_+=v.getDate().toFixed()+" ";if(c>=f&&c<=u)_+=n(v.getHours())+":"+n(v.getMinutes())+" ";return _.substr(0,_.length-1)};n.bytes_tick_unit=function l(e){return t.format_bytes(e.max,1024,true)[1]};n.format_bytes_tick_no_unit=function d(e,i){return t.format_bytes(e,n.bytes_tick_unit(i),true)[0]};n.format_bytes_tick=function h(e,n){return t.format_bytes(e,1024)};n.bytes_per_sec_tick_unit=function v(e){return t.format_bytes_per_sec(e.max,1024,true)[1]};n.format_bytes_per_sec_tick_no_unit=function _(e,i){return t.format_bytes_per_sec(e,n.bytes_per_sec_tick_unit(i),true)[0]};n.format_bytes_per_sec_tick=function m(e,n){return t.format_bytes_per_sec(e,1024)};n.bits_per_sec_tick_unit=function g(e){return t.format_bits_per_sec(e.max*8,1e3,true)[1]};n.format_bits_per_sec_tick_no_unit=function p(e,i){return t.format_bits_per_sec(e*8,n.bits_per_sec_tick_unit(i),true)[0]};n.format_bits_per_sec_tick=function b(e,n){return t.format_bits_per_sec(e*8,1e3)};n.setup_plot_controls=function k(n,i,r){var a=5*60;var o=[5*60,60*60,6*60*60,24*60*60,7*24*60*60,30*24*60*60,365*24*60*60];var s=5*60;var c;var f=[];i.find("[data-range]").click(function(){f=[];s=parseInt(e(this).attr("data-range"),10);m()});i.find('[data-action="goto-now"]').click(function(){c=undefined;m()});i.find('[data-action="scroll-left"]').click(function(){var e=s/10;if(c===undefined)c=(new Date).getTime()/1e3;c-=e;m()});i.find('[data-action="scroll-right"]').click(function(){var e=s/10;if(c!==undefined){c+=e;m()}});i.find('[data-action="zoom-out"]').click(function(){d()});function u(){if(c===undefined){r.forEach(function(e){e.stop_walking()});c=(new Date).getTime()/1e3;v()}}function l(e,t){f.push(s);s=e;c=t;m()}function d(){var e=f.pop();if(e===undefined){var t;for(t=0;t<o.length-1;t++){if(o[t]>s)break}e=o[t]}if(c!==undefined)c+=(e-s)/2;s=e;m()}function h(e){function n(e,n,i){return t.format(t.ngettext(e,n,i),i)}if(e>=365*24*60*60)return n("$0 year","$0 years",Math.ceil(e/(365*24*60*60)));else if(e>=30*24*60*60)return n("$0 month","$0 months",Math.ceil(e/(30*24*60*60)));else if(e>=7*24*60*60)return n("$0 week","$0 weeks",Math.ceil(e/(7*24*60*60)));else if(e>=24*60*60)return n("$0 day","$0 days",Math.ceil(e/(24*60*60)));else if(e>=60*60)return n("$0 hour","$0 hours",Math.ceil(e/(60*60)));else return n("$0 minute","$0 minutes",Math.ceil(e/60))}function v(){i.find('[data-action="scroll-right"]').attr("disabled",c===undefined);i.find('[data-action="zoom-out"]').attr("disabled",s>=o[o.length-1])}function _(){var e;if(n.hasClass("show-zoom-controls")&&s>a){n.addClass("show-zoom-cursor");e="x"}else{n.removeClass("show-zoom-cursor");e=null}r.forEach(function(t){var n=t.get_options();if(!n.selection||n.selection.mode!=e){n.selection={mode:e,color:"#d4edfa"};t.set_options(n);t.refresh()}})}function m(){if(s<a){c+=(a-s)/2;s=a}if(c>=(new Date).getTime()/1e3-10)c=undefined;i.find(".dropdown-toggle span:first-child").text(h(s));r.forEach(function(t){t.stop_walking();t.reset(s,c);t.refresh();if(c===undefined)t.start_walking();function i(){if(t.archives){n.addClass("show-zoom-controls");_()}}e(t).on("changed",i);i()});v();_()}function g(t){if(t===undefined)t=[];r=t;r.forEach(function(t){e(t).on("zoomstart",function(e){u()});e(t).on("zoom",function(e,t,n){l(t,n)})});m()}g(r);return{reset:g}}});

//# sourceURL=shell/plot.min.js

define("shell/cockpit-util", ["jquery","base1/cockpit","shell/shell"],function(t,n,a){a.action_btn=function c(n,a,e){var o,c,i;var l,s;o=t("<button>",{"data-container":"body","class":"btn btn-default"}).text("").addClass(e);c=[];s=[];a.forEach(function(a,o){c[o]=t("<li>",{"class":"presentation"}).append(t("<a>",{role:"menuitem",on:{click:function(e){if(!s[o]&&!t(e.currentTarget).hasClass("disabled"))n(a.action)}}}).addClass(e).addClass(a.btn_classes).append(t("<span>",{"class":a.danger?"text-danger":""}).text(a.title)));s[o]=false});i=t("<div>",{"class":"btn-group"}).append(o,t("<button>",{"class":"btn btn-default dropdown-toggle","data-toggle":"dropdown"}).append(t("<span>",{"class":"caret"})),t("<ul>",{"class":"dropdown-menu",style:"right:0px;left:auto;min-width:0;text-align:left",role:"menu"}).append(c));function r(t){a.forEach(function(a,e){if(a.action==t||t=="default"&&a.is_default){l=a.action;o.text(a.title);o.toggleClass("btn-danger",a.danger);o.toggleClass("btn-default",!a.danger);o.off("click");o.on("click",function(){n(a.action)});o.prop("disabled",s[e])}})}function d(t,n){if(l==t)o.prop("disabled",!n);a.forEach(function(a,e){if(a.action==t){s[e]=!n;c[e].toggleClass("disabled",!n)}})}r("default");t.data(i[0],"cockpit-action-btn-funcs",{select:r,enable:d});return i};a.action_btn_select=function i(n,a){t.data(n[0],"cockpit-action-btn-funcs").select(a)};a.action_btn_enable=function l(n,a,e){t.data(n[0],"cockpit-action-btn-funcs").enable(a,e)};if(!a.util)a.util={};var e={};a.util.machine_info=o;function o(a){var o=e[a];var c;if(!o){c=t.Deferred();e[a]=o=c.promise();n.spawn(["cat","/proc/meminfo","/proc/cpuinfo"],{host:a}).done(function(t){var n={};var a=t.match(/MemTotal:[^0-9]*([0-9]+) [kK]B/);var e=a&&parseInt(a[1],10);if(e)n.memory=e*1024;n.cpus=0;var o=new RegExp("^processor","gm");while(o.test(t))n.cpus+=1;c.resolve(n)}).fail(function(){c.reject()})}return o}});

//# sourceURL=shell/cockpit-util.min.js

define("shell/cockpit-plot", ["jquery","base1/cockpit","shell/shell"],function(e,t,n){function i(t,n,i,r){var o={colors:["#0099d3"],legend:{show:false},series:{shadowSize:0,lines:{lineWidth:0,fill:1}},xaxis:{tickFormatter:function(){return""}},yaxis:{tickFormatter:function(){return""}},points:{radius:0},grid:{borderWidth:1,aboveData:true,color:"black",borderColor:e.color.parse("black").scale("a",.22).toString(),labelMargin:0}};var a=300;var f;var l=false;var s;e.extend(true,o,r);var u=e(t);var c=e("<div/>");u.empty();u.append(c);function d(){c.width(u.width());c.height(u.height())}function h(e){if(f){f.getAxes().yaxis.options.max=e;g()}else{o.yaxis.max=e}}function m(){l=true;v()}function v(){if(l&&u.width()!==0&&u.height()!==0){if(!f){d();f=e.plot(c,i,o)}else w()}}function p(){l=false}function g(){if(f&&l){f.setData(i);if(r.setup_hook)r.setup_hook(f);f.setupGrid();f.draw()}}function w(){if(f&&l){d();if(c.width()>0&&c.height()>0)f.resize();g()}}function y(){e(s).trigger("destroyed");e(window).off("resize",w);e(u).empty();f=null}e(n).on("notify",g);e(window).on("resize",w);v();s={start:m,stop:p,resize:w,element:c[0],set_yaxis_max:h,destroy:y};return s}function r(t,n,i,r,o){var a={colors:["#0099d3"],legend:{show:false},series:{shadowSize:0,lines:{lineWidth:0,fill:1}},xaxis:{tickFormatter:function(){return""}},yaxis:{tickFormatter:function(){return""}},points:{radius:0},grid:{borderWidth:1,aboveData:true,color:"black",borderColor:e.color.parse("black").scale("a",.22).toString(),labelMargin:0}};var f=i.length;var l;var s=false;var u;var c=false;var d=false;var h;e.extend(true,a,r);var m=e(t);var v=e("<div/>");m.empty();m.append(v);function p(){if(!d&&n.NumSamples!==undefined){l=n.NumSamples;for(var t=0;t<f;t++){var r=[];for(var o=0;o<l;o++){r[o]=[o,0]}i[t].data=r}e(n).on("NewSample",N);n.call("GetSamples",{},function(e,t){if(!e){z(t);s=true;k()}});e(window).on("resize",b);d=true;x()}}function g(){v.width(m.width());v.height(m.height())}function w(e){if(u){u.getAxes().yaxis.options.max=e;k()}else{a.yaxis.max=e}}function y(){c=true;x()}function x(){if(d&&c&&m.width()!==0&&m.height()!==0){if(!u){g();u=e.plot(v,i,a)}else b()}}function _(){c=false}function k(){if(u&&c){u.setData(i);if(r.setup_hook)r.setup_hook(u);u.setupGrid();u.draw()}}function b(){if(u&&c){g();if(v.width()>0&&v.height()>0)u.resize();k()}}function S(e){var t;var n,r,a,f;for(r=0;r<i.length;r++){t=i[r].data;for(a=0;a<t.length-1;a++){t[a][1]=t[a+1][1];t[a][2]=t[a+1][2]}}o(e,i[0].data.length-1)}function z(e){var t,n;n=i[0].data.length-e.length;for(t=0;t<e.length;t++){o(e[t][1],t+n)}}function N(e,t,n){if(s){S(n);k()}}function C(){e(h).trigger("destroyed");e(n).off("notify:NumSamples",p);e(n).off("NewSample",N);e(window).off("resize",b);e(m).empty();u=null}if(n.NumSamples!==undefined)p();else e(n).on("notify:NumSamples",p);h={start:y,stop:_,resize:b,element:v[0],set_yaxis_max:w,destroy:C};return h}n.setup_complicated_plot=function o(e,t,n,r){function o(e,t){return e.add(function(e,n,i){for(var r=0;r<i;r++)e[n+r]=[r,t[n+r]||0]})}function a(e,t,n){return e.add(function(e,i,r){var o,a,f,l;for(o=0;o<r;o++){f=0;if(n){a=n[i+o];f=a?a[1]:0}l=t[i+o]||0;e[i+o]=[o,l+f,f]}})}var f=null;n.forEach(function(e,n){if(r.x_rh_stack_graphs)e.data=a(t,e.row,f);else e.data=o(t,e.row);f=e.data});return i(e,t,n,r)};n.setup_simple_plot=function a(t,n,i,o,f,l){var s=[{}];function u(t,i){var r=s[0].data;r[i][1]=f(t);if(i==r.length-1)e(n).html(l(t))}return r(t,i,s,o,u)};n.setup_multi_plot=function f(t,n,i,o,a,l){var s=this;var u=o.length-1;var c=new Array(u+1);var d=new Array(u);var h;var m;for(m=0;m<c.length;m++)c[m]={};function v(){var e=n.Consumers||[];d.forEach(function(t,n){if(t&&e.indexOf(t)<0||!a(t)){d[n]=null}});e.forEach(function(e){if(!a(e))return;if(d.indexOf(e)<0){for(m=0;m<u;m++){if(!d[m]){d[m]=e;return}}console.warn("Too many consumers")}})}function p(t,r){var o=0;for(var f in t){if(a(f))o+=t[f][i]}function l(e,t){var n=c[e].data;var i=e>0?c[e-1].data[r][2]:0;n[r][1]=i;n[r][2]=i+t}d.forEach(function(e,n){l(n,e&&t[e]?t[e][i]:0)});l(u,o);if(r==n.NumSamples-1)e(h).trigger("update-total",[o])}h=r(t,n,c,{colors:o,grid:{hoverable:true,autoHighlight:false},setup_hook:l},p);e(n).on("notify:Consumers",v);var g=null;function w(t){if(t!=g){g=t;e(h).trigger("highlight",[t])}}function y(e,t,i){var r,o;o=Math.round(t.x);if(o<0)o=0;if(o>n.NumSamples-1)o=n.NumSamples-1;for(r=0;r<u;r++){if(r<u&&c[r].data[o][1]<=t.y&&t.y<=c[r].data[o][2])break}if(r<u)w(d[r]);else w(null)}function x(e){w(null)}e(h.element).on("plothover",y);e(h.element).on("mouseleave",x);e(h).on("destroyed",function(){e(n).off("notify:Consumers",v);e(h.element).off("plothover",y);e(h.element).off("mouseleave",x)});v();return h}});

//# sourceURL=shell/cockpit-plot.min.js
