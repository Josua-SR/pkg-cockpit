var phantom_checkpoint=phantom_checkpoint||function(){};define(["jquery","base1/cockpit","shell/base_index","translated!base1/po","manifests"],function(e,n,t,a,o){"use strict";n.locale(a);var i=n.gettext;var r="Cockpit";var c=o["shell"]||{};if(c.title)r=c.title;var s=window.location.pathname.indexOf(".html")!==-1;var l=t.new_index_from_proto({navigate:function(e,n){return h(e,n)},brand_sel:"#index-brand",logout_sel:"#go-logout",oops_sel:"#navbar-oops",language_sel:"#display-language",about_sel:"#about-version",default_title:r});var d=window.sessionStorage.getItem("login-data");if(d){var u=JSON.parse(d);e("#content-user-name").text(u["displayName"])}var p=t.new_compiled();p.load(o,"dashboard");var f=null;e(l).on("disconnect",function(e,n){f=n;m()});e("#machine-reconnect").on("click",function(e){window.sessionStorage.clear();window.location.reload(true)});function m(){var t=l.current_frame();if(t)e(t).hide();e(".curtains .spinner").toggle(false);e("#machine-reconnect").toggle(true);e(".curtains i").toggle(true);e(".curtains h1").text(i("Disconnected"));e(".curtains p").text(n.message(f));e(".curtains").show();e("#navbar-dropdown").addClass("disabled");phantom_checkpoint()}l.ready();function h(e,n){var t=p.ordered("dashboard");if(f)return;if(!e)e=l.retrieve_state();if(!e.component&&t.length>0){e.component=t[0].path}v(e);_(e);l.recalculate_layout();l.jump(e,true)}function v(n){e(".dashboard-link").each(function(){var t=e(this);t.toggleClass("active",t.attr("data-component")===n.component)});var t=p.items[n.component];delete n.sidebar;e("#machine-link span").text(r);if(e(".dashboard-link").length<2)e("#content-navbar").toggleClass("hidden",true)}function g(e){if(e)e+=" - ";else e="";document.title=e+r}function _(n){var t;var a=l.current_frame();var o=n.hash;var i=n.component;var r;if(i)r=l.frames.lookup(null,i,o);if(r!=a){e(a).css("display","none");l.current_frame(r)}var c,s;e(r).css("display","block");s=p.items[n.component];c=s?s.label:"";g(c);phantom_checkpoint()}return l});
