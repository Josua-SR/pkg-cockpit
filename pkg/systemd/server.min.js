define(["jquery","base1/cockpit","system/journalctl","system/renderer"],function(e,t,r,n){"use strict";var o=t.gettext;var a=t.gettext;var u={};u.journal=r;u.logbox=function c(t,r){var o=[];var a=e("<div>");function c(){var e=n.journal_renderer(n.output_funcs_for_box(a));a.empty();for(var t=0;t<o.length;t++){e.prepend(o[t])}e.prepend_flush();a.toggle(o.length>0)}c();var s=u.journal(t,{count:r}).stream(function(e){o=o.concat(e);if(o.length>r)o=o.slice(-r);c()}).fail(function(e){a.append(document.createTextNode(e.message));a.show()});return s.promise(a)};return u});
