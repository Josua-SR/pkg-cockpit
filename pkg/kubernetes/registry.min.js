
(function(){"use strict";var e="/api/v1";var n="/oapi/v1";var t={api:e,create:0};var r=p([{kind:"DeploymentConfig",type:"deploymentconfigs",api:n},{kind:"Endpoints",type:"endpoints",api:e},{kind:"Group",type:"groups",api:n,global:true},{kind:"Image",type:"images",api:n,global:true},{kind:"ImageStream",type:"imagestreams",api:n},{kind:"ImageStreamImage",type:"imagestreamimages",api:n},{kind:"ImageStreamTag",type:"imagestreamtags",api:n},{kind:"Namespace",type:"namespaces",api:e,global:true,create:-100},{kind:"Node",type:"nodes",api:e,global:true},{kind:"Pod",type:"pods",api:e,create:-20},{kind:"PolicyBinding",type:"policybindings",api:n},{kind:"RoleBinding",type:"rolebindings",api:n},{kind:"Route",type:"routes",api:n},{kind:"Project",type:"projects",api:n,global:true,create:-90},{kind:"ProjectRequest",type:"projectrequests",api:n,global:true,create:-90},{kind:"ReplicationController",type:"replicationcontrollers",api:e,create:-60},{kind:"Service",type:"services",api:e,create:-80},{kind:"User",type:"users",api:n,global:true}]);var a=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/;var i="120s";function u(){if(window.debugging=="all"||window.debugging=="kube")console.debug.apply(console,arguments)}function o(e){var n,t,r,a;if(e.length===0)return 0;for(n=0,t=0,a=e.length;t<a;t++){r=e.charCodeAt(t);n=(n<<5)-n+r;n|=0}return Math.abs(n)}function l(e,n){var t=0;var r=e.length-1;var a,i;while(t<=r){a=(t+r)/2|0;i=e[a];if(i<n)t=a+1;else if(i>n)r=a-1;else return a}return t}function c(e){var n=this;var t=[];n.add=function r(n,a){var i,u,c,f,s=n.length;for(u=0;u<s;u++){i=o(""+n[u])%e;c=t[i];if(c===undefined)c=t[i]=[];f=l(c,a);if(c[f]!=a)c.splice(f,0,a)}};n.get=function a(n){var r=t[o(""+n)%e];if(!r)return[];return r.slice()};n.all=function i(n){var r,a,i,u,l;var c,f,s,d,p;for(a=0,l=n.length;a<l;a++){r=o(""+n[a])%e;i=t[r];if(!i){u=[];break}if(!u){u=i.slice()}else{for(d=0,p=0,c=u.length;d<c;){f=u[d];s=i[d+p];if(s<f){p+=1}else if(f!==s){u.splice(d,1);c-=1}else{d+=1}}}}return u||[]}}var f=Math.random().toString(36).slice(2);var s=1;function d(){var e="weakmap"+s;s+=1;var n=this;n.delete=function t(n){var t,r=n[f];if(r)delete r[e]};n.has=function r(n){var t=n[f];return t&&e in t};n.get=function a(n){var t=n[f];if(!t)return undefined;return t[e]};n.set=function i(n,t){var r=n[f];if(!r){r=function a(){};Object.defineProperty(n,f,{enumerable:false,configurable:false,writable:false,value:r})}r[e]=t}}function p(e){var n,r,a={"":t};for(n=0,r=e.length;n<r;n++){a[e[n].type]=e[n];a[e[n].kind]=e[n]}return a}function v(e){var n=e[0];if(n&&typeof n==="object"){if(n.metadata){if(n.metadata.selfLink)return n.metadata.selfLink;e=[n.kind,n.metadata.name,n.metadata.namespace]}else if(n.name&&n.kind){e=[n.kind,n.name,n.namespace]}}else if(n&&n[0]=="/"){return n}var t=r[e[0]]||r[""];var a=t.api;if(!t.global&&e[2])a+="/namespaces/"+e[2];a+="/"+t.type;if(e[1])a+="/"+e[1];return a}angular.module("kubeClient",[]).value("KUBE_SCHEMA",r).factory("kubeLoader",["$q","$exceptionHandler","$timeout","KubeWatch","KubeRequest","KUBE_SCHEMA",function(e,n,t,a,i,u){var o=[];var l={namespace:null};var c={};var f={};var s=null;var d=null;function p(e,n){var t=r[e]||r[""];var i=t.api;if(!t.global&&n)i+="/namespaces/"+n;i+="/"+t.type;if(!(e in c)){c[i]=new a(i,m);c[i].params={what:e,global:t.global,namespace:n}}return c[i]}function g(n){var t,r=l.namespace;if(angular.isArray(r)){t=[];angular.forEach(r,function(e){t.push(p(n,e))});return e.all(t)}else{return p(n,r)}}function m(e){if(s===null)s=e;else s.push.apply(s,e);if(e.length>0){if(d===null)d=window.setTimeout(y,150);else return}h(b)}function h(e){var n=s;s=null;if(!n)return;var t={};var r={};var a,i,u,o,l,c;for(a=0,i=n.length;a<i;a++){l=n[a].object;if(l){o=v([l]);if(n[a].type=="DELETED"){delete f[o];r[o]=l}else{t[o]=l;f[o]=l}}}e(t,r)}function b(){var e,t,r;for(e=0,t=o.length;e<t;e++){r=o[e];try{if(r)r.apply(E,arguments)}catch(a){n(a)}}}function y(){d=null;h(b)}function k(){var e,n;window.clearTimeout(d);d=null;s=null;var t=c;c={};angular.forEach(t,function(e){e.cancel()});for(e in f)delete f[e];for(e in l)delete l[e];l.namespace=null;b()}function K(e,n,t){m(e.map(function(e){if(t)e.kind=t;return{type:n?"DELETED":"ADDED",object:e}}));h(b)}function w(){var n=v(arguments);var t=new i("GET",n);var r=t.then(function(e){t=null;var n=e.data;if(!n||!n.kind){return null}else if(n.kind.indexOf("List")===n.kind.length-4){K(n.items,false,n.kind.slice(0,-4));return n.items}else{K([n]);return n}},function(n){t=null;return e.reject(n)});r.cancel=function a(e){t.cancel(e)};return r}function S(e){window.clearTimeout(d);d=null;var n,t,r={};if(e===null){r=null}else if(angular.isArray(e)){angular.forEach(e,function(e){r[e]=true})}else{r[e]=true}l.namespace=e;var a={},i={};h(function(e,n){a=e;i=n});var u,o;for(o in f){u=f[o].metadata;if(r&&u.namespace&&!(u.namespace in r)){i[o]=f[o];delete f[o];delete a[o]}}var s,p,v=[];for(s in c){p=c[s];if(!r&&p.params.namespace||r&&!p.params.global&&!(p.params.namespace in r)){c[s].cancel();v.push(p)}}b(a,i);angular.forEach(v,function(e){g(e.params.what)})}var E={watch:g,load:function j(){return w.apply(this,arguments)},limit:function D(e){if("namespace"in e)S(e.namespace)},reset:k,listen:function T(e,n){if(n)o.unshift(e);else o.push(e);var r=t(function(){r=null;e.call(E,f)},0);return{cancel:function(){var n,a;t.cancel(r);r=null;for(n=0,a=o.length;n<a;n++){if(o[n]===e)o[n]=null}}}},handle:function M(e,n,t){if(!angular.isArray(e))e=[e];K(e,n,t)},resolve:function q(){return v(arguments)},objects:f,limits:l};return E}]).factory("kubeSelect",["kubeLoader",function(e){var n={};var t=null;var r=null;var a=new d;var i=1;e.listen(function(e,n){i+=1;if(!e){t=null}else if(t){o(e)}},true);function u(){var n,r;t=new c(262139);o(e.objects)}function o(e){var r,a,i,u,o,l;for(r in e){a=e[r];for(i in n){l=n[i];if(l.digest){u=l.digest.call(null,a);if(u)t.add([u],r)}else if(l.digests){o=l.digests.call(null,a);if(o.length)t.add(o,r)}}}}function l(e){var n=a.get(e);if(!n||n.version!==i){n={version:i,length:n?n.length:undefined};a.set(e,n)}return n}function f(e){return function(){var n=l(this);var r=Array.prototype.slice.call(arguments);var a=e.name+": "+JSON.stringify(r);if(a in n)return n[a];var i;if(e.filter){i=e.filter.apply(this,r)}else{if(!t)u();if(!n.indexed){o(this);n.indexed=true}if(e.digests){i=g(e,this,r)}else if(e.digest){i=v(e,this,r)}else{console.warn("invalid filter: "+e.name);i={}}}n[a]=i;return i}}function s(){var e,t={length:{enumerable:false,configurable:true,get:function(){return l(this).length}}};for(e in n){t[e]={enumerable:false,configurable:true,value:f(n[e])}}return t}function p(e,n,t){var a,i;if(n===undefined){n=0;for(a in e)n+=1}r=r||s();Object.defineProperties(e,r);i=l(e);i.length=n;i.selection=e;i.indexed=t;return e}function v(e,n,r){var a,i,u,o,l,c,f;var s={},d=0;u=e.digest.apply(null,r);if(u!==null&&u!==undefined){l=t.get(u)}else{l=[]}for(a=0,i=l.length;a<i;a++){c=l[a];f=n[c];if(f){if(u===e.digest.call(null,f)){s[c]=f;d+=1}}}return p(s,d,true)}function g(e,n,r){var a,i,u,o,l,c,f,s;var d,v,g,m;var h={},b=0;a=e.digests.apply(null,r);i=a.length;if(i>0){s=t.all(a);a.sort()}else{s=[]}for(d=0,v=s.length;d<v;d++){l=s[d];f=n[l];if(f){u=e.digests.call(null,f);u.sort();c=false;for(g=0,m=u.length;!c&&g<m;g++){if(a[0]===u[g]){c=true;for(o=0;c&&o<i;o++){if(a[o]!==u[g+o])c=false}}}if(c){h[l]=f;b+=1}}}return p(h,b,true)}function m(e,a){if(typeof a=="function"){e={name:e,filter:a}}n[e.name]=e;t=null;r=null;i+=1}m("one",function(){var e;for(e in this)return this[e];return null});m("extend",function(e){var n;for(n in this)e[n]=this[n];return e});m({name:"label",digests:function(e){var n,t=[],r=e.metadata;var a=r?r.labels:e;for(n in a||[])t.push(n+"="+a[n]);return t}});m({name:"namespace",digest:function(e){if(typeof e==="string")return e;var n=e.metadata;return n?n.namespace:null}});m({name:"name",digest:function(e){if(typeof e==="string")return e;var n=e.metadata;return n?n.name:null}});m({name:"kind",digest:function(e){if(typeof e==="string")return e;return e.kind}});m({name:"host",digest:function(e){if(typeof e==="string")return e;var n=e.spec;return n?n.nodeName:null}});var h={};function b(n){var t,r=false;if(n===undefined){n=e.objects;r=true}else if(!n){n=h}if(typeof n!=="object"){console.warn("Pass resources or resource dicts or null to kubeSelect()");n=h}t=l(n);if(t.selection)return t.selection;var a,i;if(typeof n.kind==="string"){if(!t.single){a=n.meta||{};i={};i[a.selfLink||1]=n;t.single=p(i,undefined,false)}return t.single}return p(n,undefined,r)}b.register=m;return b}]).factory("kubeMethods",["$q","KUBE_SCHEMA","KubeRequest","kubeLoader",function(e,n,t,o){function l(e,t){var r=n[e.kind].create||0;var a=n[t.kind].create||0;return r-a}function c(n,a){var c=e.defer();var f=c.promise;var s=null;if(!angular.isArray(n)){if(n.kind=="List")n=n.items;else n=[n]}var d=false;var p=false;n.forEach(function(e){var n=e.metadata||{};if((e.kind=="Namespace"||e.kind=="Project")&&n.name===a)d=true;var t=r[e.kind]||r[""];if(!t.global)p=true});n=n.slice();if(a&&p&&!d){n.unshift({apiVersion:"v1",kind:"Namespace",metadata:{name:a}})}n.sort(l);function g(){var e=n.shift();if(!e){c.resolve();return}var r=v([e.kind,null,a||"default"]);r+="?timeout="+i;s=new t("POST",r,JSON.stringify(e)).then(function(e){var n;u("created resource:",r,e.data);if(e.data.kind){if(e.data.kind=="Project"){n=e.data.metadata||{};delete n.selfLink}o.handle(e.data)}g()},function(n){var t=n.data;if(e.kind=="Namespace"&&t&&(t.code===409||t.code===403)){u("skipping namespace creation");g()}else{u("create failed:",r,t||n);c.reject(t||n)}})}g();f.cancel=function m(){if(s)s.cancel()};return f}function f(){var n=v(arguments);var r=o.objects[n];n+="?timeout="+i;var a=new t("DELETE",n);return a.then(function(){u("deleted resource:",n,r);if(r)o.handle(r,true)},function(n){var t=n.data;return e.reject(t||n)})}function s(n,r){var a=v([n]);a+="?timeout="+i;var l=JSON.stringify(r);var c={headers:{"Content-Type":"application/strategic-merge-patch+json"}};var f=new t("PATCH",a,l,c);return f.then(function(e){u("patched resource:",a,e.data);if(e.data.kind)o.handle(e.data)},function(n){var t=n.data;return e.reject(t||n)})}function d(n,t){var r=e.defer();var i,u=[];if(!t)t={};var o=n.metadata;if(o){i=null;if(o.name!==undefined){if(!o.name)i=new Error("The name cannot be empty");else if(!a.test(o.name))i=new Error("The name contains invalid characters")}if(i){i.target=t["metadata.name"];u.push(i)}i=null;if(o.namespace!==undefined){if(!o.namespace)i=new Error("The namespace cannot be empty");else if(!a.test(o.namespace))i=new Error("The name contains invalid characters")}if(i){i.target=t["metadata.namespace"];u.push(i)}}if(u.length)r.reject(u);else r.resolve();return r.promise}return{create:c,"delete":f,check:d,patch:s}}]).provider("KubeRequest",[function(){var e=this;e.KubeRequestFactory="MissingKubeRequest";function n(e,n){if(angular.isString(n))return e.get(n,"KubeRequest");else return e.invoke(n)}e.$get=["$injector",function(t){return n(t,e.KubeRequestFactory)}]}]).factory("MissingKubeRequest",[function(){return function e(n,t){throw"no KubeRequestFactory set"}}]).provider("KubeSocket",[function(){var e=this;e.KubeSocketFactory="MissingKubeSocket";function n(e,n){if(angular.isString(n))return e.get(n,"KubeSocket");else return e.invoke(n)}e.$get=["$injector",function(t){return n(t,e.KubeSocketFactory)}]}]).factory("MissingKubeSocket",[function(){return function e(n,t){throw"no KubeSocketFactory set"}}]).provider("KubeWatch",[function(){var e=this;e.KubeWatchFactory="MissingKubeWatch";function n(e,n){if(angular.isString(n))return e.get(n,"KubeWatch");else return e.invoke(n)}e.$get=["$injector",function(t){return n(t,e.KubeWatchFactory)}]}]).factory("MissingKubeWatch",[function(){return function e(n,t){throw"no KubeWatchFactory set"}}]).provider("KubeDiscoverSettings",[function(){var e=this;e.KubeDiscoverSettingsFactory="MissingKubeDiscoverSettings";function n(e,n){if(angular.isString(n))return e.get(n,"KubeDiscoverSettings");else return e.invoke(n)}e.$get=["$injector",function(t){return n(t,e.KubeDiscoverSettingsFactory)}]}]).factory("MissingKubeDiscoverSettings",[function(){return function e(n,t){throw"no KubeDiscoverSettingsFactory set"}}])})();

//# sourceURL=kubernetes/scripts/kube-client.min.js

(function(){"use strict";function e(){if(window.debugging=="all"||window.debugging=="kube")console.debug.apply(console,arguments)}function n(e){if(!e)return;var n;try{n=JSON.parse(e.data)}catch(t){return}if(n&&n.message)e.message=e.statusText=n.message}function t(e,n){var t,r,o=e[n+"-data"];if(o!==undefined)return{data:window.atob(o)};var i=e[n];if(i!==undefined)return{file:i};return undefined}function r(e,n){return window.btoa(window.unescape(encodeURIComponent(e+":"+n)))}function o(n,o){var i,a,c;var s={port:8080,headers:{}};try{i=JSON.parse(n)}catch(u){console.warn("received invalid kubectl config",u);return null}if(!o)o=i["current-context"];var l=i["contexts"]||[];var f,v;l.forEach(function(e){if(e.name===o){var n=e.context||{};f=n.user;v=n.cluster}});var d,p=i["users"]||[];p.forEach(function(e){if(e.name===f)d=e.user});var m,b=i["clusters"]||[];b.forEach(function(e){if(e.name==v)m=e.cluster});if(m){if(m.server){c=document.createElement("a");c.href=m.server;if(c.hostname)s.address=c.hostname;if(c.port)s.port=parseInt(c.port,10);if(c.protocol=="https:"){if(!c.port||c.port==="0")s.port=c.href==m.server?6443:443;s.tls={};s.tls.authority=t(m,"certificate-authority");s.tls.validate=!m["insecure-skip-tls-verify"]}}}if(d){if(d.token)s.headers["Authorization"]="Bearer "+d.token;if(d.username)s.headers["Authorization"]="Basic "+r(d.username,d.password||"");if(s.tls){s.tls.certificate=t(d,"client-certificate");s.tls.key=t(d,"client-key")}}e("parsed kube config",s);return s}angular.module("kubeClient.cockpit",["kubeClient","kubeUtils"]).factory("CockpitKubeWatch",["$q","KUBE_SCHEMA","cockpitKubeDiscover",function(t,r,o){return function i(r,a){e("creating watch:",r);var c;var s=false;var u=null;var l=null;var f=null;var v=t.defer();var d=v.promise;var p=false;var m={};var b;var h;function g(e){if(e){b=m;m={}}else{b=null}k(true)}function k(e){if(e||h!==undefined){window.clearTimeout(h);h=window.setTimeout(w,100)}}function w(e){if(p)return;p=true;var n,t,r=[];t=b;b=null;for(n in t){if(!(n in m))r.push({type:"DELETED",object:t[n]})}if(r.length)a(r);a([]);if(e)v.reject(e);else v.resolve()}var E;function y(n){if(E)n=E+n;var t=n.split("\n");var r,o=t.length-1;E=t[o];var i=[];var s,l;for(r=0;r<o;r++){try{s=JSON.parse(t[r])}catch(f){console.warn(t[r],f);u.close();continue}l=s.object;if(!l){console.warn("invalid watch without object",s);continue}if(s.type=="ERROR"){if(c){c=null;C()}continue}var v=l.metadata;if(!v||!v.uid||!l.kind){console.warn("invalid kube object: ",l);continue}c=v.resourceVersion;var d=v.uid;if(s.type=="DELETED")delete m[d];else m[d]=l;e(s.type,l.kind,v.uid);i.push(s)}a(i);k()}function C(){if(u)return;var t=true;var o=r+"?watch=true";if(c){o+="&resourceVersion="+encodeURIComponent(c);t=false}var i=false;window.setTimeout(function(){i=true},1e3);var a=angular.extend({},l,{path:o,method:"GET"});u=cockpit.channel(a);var f={};var v=false;u.addEventListener("control",function(e,n){if(n.command=="response"){f=n;if(f.status>299)v=true;g(t)}});u.addEventListener("message",function(e,n){if(v)f.data=(f.data||"")+n;else y(n)});u.addEventListener("close",function(t,o){u=null;h=false;if(s)return;var a="watching "+r+" failed: ";var c=o.problem;var l=f.status;if(c){a+=c;if(c=="disconnected")e(a);else console.warn(a);f.problem=c;f.status=999;w(f)}else if(v){n(f);a+=f.message||f.reason||l;if(l===404||l===410||l===403){e(a);w(f);return}else{console.warn(a)}w(f)}else if(!i){console.warn("watching kube "+r+" didn't block")}else{C();return}S()});u.control({command:"done"})}function S(){if(!f){f=window.setTimeout(function(){f=null;C()},5e3)}}t.when(o(),function(e){l=e;C()},function(e){w(e)});d.cancel=function T(e){s=true;var n;if(u){if(e)n=e.problem;u.close(n||"disconnected");u=null}window.clearTimeout(f);f=null;l=null;w(e)};return d}}]).factory("CockpitKubectlWebSocket",[function(){function e(e,n){var t=e.indexOf("?");var r=e;var o;if(t===-1)r=e;else r=e.substr(0,t);o=r.split("/").map(decodeURIComponent);if(t!==-1){angular.forEach(e.substring(t+1).split("&"),function(e){var t,r=e.split("=");var o=decodeURIComponent(r[0]);var i=decodeURIComponent(r[1]);if(n.hasOwnProperty(o)){t=n[o];if(!angular.isArray(t))t=n[o]=[t];t.push(i)}else{n[o]=i}})}return o}function n(n){var t={};var r=e(n,t);var o=[];var i=[];var a="default";var c=null;var s="log";var u="";var l,f;for(l=0,f=r.length;l<f;l++){if(r[l]==="namespaces"){a=r[++l]}else if(r[l]==="pods"){u=r[++l];if(r[l+1]=="exec")s="exec";else if(r[l+1]=="log")s="logs"}}for(l in t){if(l=="container"){c=t[l]}else if(l=="command"){if(angular.isArray(t[l]))o=t[l];else o.push(t[l])}else if(l=="stdin"||l=="tty"||l=="follow"){i.push("--"+l)}}var v=["kubectl",s,"--namespace="+a];if(c)v.push("--container="+c);v.push.apply(v,i);v.push(u,"--");v.push.apply(v,o);return v}return function t(e,r){var o=n(e);var i=false;var a;var c=0;var s={};cockpit.event_target(s);function u(){a=cockpit.channel({payload:"stream",spawn:o,pty:true});a.addEventListener("close",function(e,n){var t=n.problem||"";a=null;c=3;var r=document.createEvent("Event");r.initEvent("close",false,false,!!t,1e3,t);s.dispatchEvent(r)});a.addEventListener("message",function(e,n){if(i)n="1"+window.btoa(n);var t=document.createEvent("MessageEvent");if(!t.initMessageEvent)t=new window.MessageEvent("message",{data:n});else t.initMessageEvent("message",false,false,n,null,null,window,null);s.dispatchEvent(t)});c=1;var e=document.createEvent("Event");e.initEvent("open",false,false);s.dispatchEvent(e)}function l(){var e=document.createEvent("Event");e.initEvent("close",false,false,false,1002,"protocol-error");s.dispatchEvent(e)}function f(e,n){if(a)a.close(n)}function v(e){if(i)e=window.atob(e.slice(1));if(a)a.send(e)}Object.defineProperties(s,{binaryType:{value:"arraybuffer"},bufferedAmount:{value:0},extensions:{value:""},protocol:{value:i?"base64.channel.k8s.io":""},readyState:{get:function(){return c}},url:{value:e},close:{value:f},send:{value:v}});var d=true;if(r){if(angular.isArray(r))d=i=r.indexOf("base64.channel.k8s.io")!==-1;else d=i="base64.channel.k8s.io"}if(d){window.setTimeout(u)}else{console.warn("Unsupported kubernetes container WebSocket subprotocol: "+r);window.setTimeout(l)}return s}}]).factory("CockpitKubeSocket",["$q","$injector",function(e,n){return function t(r,o){var i;var a=0;var c={};var s;var u=[];if(o&&o.protocols){u=o.protocols;if(!angular.isArray(u))u=[String(o.protocols)]}if(o&&o.port)i=o;else i=n.get("cockpitKubeDiscover")();function l(){var e=document.createEvent("Event");e.initEvent("close",false,false,false,1002,"protocol-error");c.dispatchEvent(e)}function f(e,n){if(s)s.close(n)}function v(e){if(s)s.send(e)}Object.defineProperties(c,{binaryType:{value:"arraybuffer"},bufferedAmount:{value:0},extensions:{value:""},protocol:{value:u[0]},readyState:{get:function(){return a}},url:{value:r},close:{value:f},send:{value:v}});e.when(i,function d(e){cockpit.event_target(c);s=cockpit.channel(angular.extend({},e,{payload:"websocket-stream1",path:r,protocols:u}));s.addEventListener("close",function(e,n){var t=n.problem||"";s=null;a=3;var r=document.createEvent("Event");r.initEvent("close",false,false,!!t,1e3,t);c.dispatchEvent(r)});s.addEventListener("message",function(e,n){var t=document.createEvent("MessageEvent");if(!t.initMessageEvent)t=new window.MessageEvent("message",{data:n});else t.initMessageEvent("message",false,false,n,null,null,window,null);c.dispatchEvent(t)});a=1;var n=document.createEvent("Event");n.initEvent("open",false,false);c.dispatchEvent(n)});return c}}]).factory("CockpitKubeRequest",["$q","$injector",function(e,t){var r="Content-Type";var o="application/json";return function i(a,c,s,u){var l=e.defer();var f=l.promise;var v,d;var p={};if(s&&typeof s=="object"){s=JSON.stringify(s);p[r]=o}if(!u)u={};if(u&&u.port)v=u;else v=t.get("cockpitKubeDiscover")();e.when(v,function m(e){var t=angular.extend({},u,e,{path:c,method:a,payload:"http-stream2"});t.headers=angular.extend(p,u.headers||{},e.headers||{});d=cockpit.channel(t);var i={};d.addEventListener("control",function(e,n){if(n.command=="response"){i=n;i.statusText=i.reason}});d.addEventListener("message",function(e,n){i.data=(i.data||"")+n});d.addEventListener("close",function(e,t){var a;d=null;if(t.problem){i.problem=i.statusText=t.problem;i.status=999}var c=i.headers||{};if(c[r]==o){try{i.data=JSON.parse(i.data)}catch(s){}}if(i.status>299){n(i);l.reject(i)}else{l.resolve(i)}});if(s)d.send(s);d.control({command:"done"})},function b(e){l.reject(e)});f.cancel=function h(){if(v.cancel)v.cancel();if(d)d.close("cancelled")};return f}}]).factory("cockpitKubectlConfig",["$q",function(e){return function n(){var n=e.defer();var t=n.promise;var r=cockpit.channel({payload:"stream",spawn:["kubectl","config","view","--output=json","--raw"],err:"message"});var o="";r.addEventListener("message",function(e,n){o+=n});r.addEventListener("close",function(e,t){r=null;if(t.problem)n.reject(t);else n.resolve(o)});t.cancel=function i(e){if(r)r.close(e||"cancelled")};return t}}]).factory("cockpitKubeDiscover",["$q","CockpitKubeRequest","cockpitKubectlConfig","cockpitConnectionInfo",function(n,t,r,i){var a=null;return function c(s){if(!s&&a)return a.promise;var u,l,f,v;var d=window.sessionStorage.getItem("login-data");a=n.defer();var p=[{port:8080},{port:8443,tls:{}},{port:6443,tls:{}}];function m(n,r){if(!n)n=p.shift();if(!n){u.statusText="Couldn't find running API server";u.problem="not-found";a.reject(u);return}if(typeof n==="function"){n();return}n.payload="http-stream2";e("trying kube at:",n);l=new t("GET","/api","",n);l.then(function(t){l=null;var o=t.data;if(o&&o.versions){e("discovered kube api",o);if(r){i.kubeConfig=r;if(f)i.type="kubectl";else i.type="sessionData"}else{i.type="open"}a.resolve(n)}else{e("not an api endpoint:",n);u=t;f=null;m()}}).catch(function(t){l=null;f=null;u=t;if(t.problem==="not-found"){e("api endpoint not found on:",n);m()}else{e("connecting to kube failed:",t);a.reject(t)}})}function b(){f=r().then(function(e){var n=o(e);m(n,n?e:null)}).catch(function(e){console.warn("kubectl failed: "+(e.message||e.problem));m()})}p.unshift(b);if(d)v=o(d);m(v,v?d:null);a.promise.cancel=function h(){if(f&&f.cancel)f.cancel("cancelled");if(l)l.close("cancelled")};return a.promise}}]).factory("CockpitEnvironment",["$q",function(e){var n=e.defer();var t=null;return function r(){if(t!==null)return n.promise;var e=cockpit.channel({payload:"dbus-json3",bus:"internal"});e.addEventListener("close",function(e,r){if(r.problem){console.warn("couldn't retrieve environment:",r.problem);n.reject(r)}else{n.resolve(t)}});e.addEventListener("message",function(n,r){var o=JSON.parse(r);if(o.reply){t=o.reply[0][0].Variables.v;e.close(null)}else if(o.error){console.warn("error retrieving environment:",o.error);e.close("internal-error")}});e.send(JSON.stringify({id:"cookie",call:["/environment","org.freedesktop.DBus.Properties","GetAll",["cockpit.Environment"]]}));return n.promise}}]).factory("cockpitKubeDiscoverSettings",["$q","CockpitKubeRequest","cockpitKubeDiscover","CockpitEnvironment","kubeLoader",function(e,n,t,r,o){var i=null;return function a(c){if(!c&&i)return i;var s={registry:{},flavor:"kubernetes",isAdmin:false};var u=r().then(function(e){var n=e["REGISTRY_HOST"];if(n)s.registry.host=n},function(e){});var l=t(c).then(function(t){var r=new n("GET","/oapi","",t).then(function(){s.flavor="openshift"},function(){s.flavor="kubernetes"});var i=o.watch("namespaces").then(function(){s.isAdmin=true},function(){s.isAdmin=false});var a;if(t.headers){a=(t.headers["Authorization"]||"").trim();if(a.toLowerCase().indexOf("bearer ")===0)s.registry.password=a.substr(7).trim()}return e.all([i,r])});i=e.all([l,u]).then(function(){return s});return i}}]).factory("cockpitConnectionInfo",function(){return{type:null,kubeConfig:null}}).factory("cockpitContainerWebSocket",["CockpitKubeSocket","CockpitKubectlWebSocket","cockpitConnectionInfo",function(e,n,t){return function(r,o){if(t.type=="kubectl")return n(r,o);else return e(r,o)}}]).factory("CockpitFormat",function(){return{formatBytes:cockpit.format_bytes,formatBitsPerSec:cockpit.format_bits_per_sec,format:cockpit.format}}).factory("CockpitMetrics",function(){return{grid:cockpit.grid,series:cockpit.series}}).factory("CockpitTranslate",function(){return{gettext:function(e,n){if(arguments.length>1)return n;else return e}}})})();

//# sourceURL=kubernetes/scripts/kube-client-cockpit.min.js

(function(){"use strict";angular.module("kubernetes.date",[]).filter("dateRelative",function(){return function(e){if(!e){return e}return moment(e).fromNow()}})})();

//# sourceURL=kubernetes/scripts/date.min.js

(function(){"use strict";angular.module("ui.cockpit",["ui.bootstrap"]).directive("modalDialog",["$q",function(e){return{restrict:"E",transclude:true,template:"<ng-transclude></ng-transclude>",link:function(a,t,l){var i=null;function o(){if(i)i.detach();i=null}a.complete=function(n){o();if(!n||!n.then)n=e(n);i=new r(t,n,a)};a.failure=function(){var n;var r=arguments.length;if(r===0){n=null}else if(r===1){n=arguments[0]}else{n=[];n.push.apply(n,arguments)}if(!n){o();return}var t=e.defer();t.reject(n);a.complete(t.promise)};function u(){a.$dismiss()}var f=n(t,".btn-cancel");f.on("click",u);a.$on("$destroy",function(){f.off("click",u);o()})}}}]);function e(e,n){var r,a=[];var t,l,i,o=e.length;for(l=0;l<o;l++){r=e[l].querySelectorAll(n);if(r){for(t=0,i=r.length;t<i;t++)a.push(r[l])}}return angular.element(a)}function n(e,n){var r=null;var a,t=e.length;for(a=0;!r&&a<t;a++)r=e[a].querySelector(n);return angular.element(r)}function r(r,a,t){var l=null;var i=null;var o=false;var u=false;var f=[];var c=angular.element("<div class='dialog-wait pull-left'>");c.append(angular.element("<div class='spinner spinner-sm'>"));var s=angular.element("<span>");c.append(s);this.detach=g;if(!a){g();return}a.then(function(e){i=e;if(a)d(true)},function(e){i=e;if(a)d(false)},function(e){if(a)w(e)});window.setTimeout(function(){if(a&&t&&l===null){d(null);t.$digest()}},0);function d(e){if(u)return;l=e;if(o){t.$dismiss();return}else if(l===null){k();x()}else if(l===true){k();t.$close(i)}else if(l===false){$();p(i)}else{console.warn("invalid dialog state",l)}}function g(){t=null;a=null;k();$()}function p(e){k();if(!angular.isArray(e))e=[e];e.forEach(function(e){var a=null;if(e.target)a=n(r,e.target);if(a&&a[0])m(a,e);else v(e)})}function v(e){var a=angular.element("<div class='alert alert-danger dialog-error'>");a.text(e.message||e.toString());a.prepend(angular.element("<span class='fa fa-exclamation-triangle'>"));var t=n(r,".modal-footer");if(t.length)t.prepend(a);else r.append(a)}function m(e,n){var r=angular.element("<div class='dialog-error help-block'>");r.text(n.message||n.toString());var a=e.parent();a.addClass("has-error");e.after(r);a.on("keypress change",h)}function h(e){var n=e.target;while(n!==this){b(angular.element(n));n=n.parentNode}}function b(n){var r=n.parent();e(r,".dialog-error").remove();r.removeClass("has-error");r.off("keypress change",h)}function k(){var n=e(r,".dialog-error");angular.forEach(n,function(e){b(angular.element(e))})}function y(e){if(a.cancel)a.cancel();o=true;e.stopPropagation();e.preventDefault();return false}function w(e){var n=e.message||e;if(typeof n=="string"||typeof n=="number")s.text(n);else if(!n)s.text("")}function $(){var e;while(true){e=f.pop();if(!e)break;e.removeAttr("disabled")}c.remove();n(r,".btn-cancel").off("click",y)}function x(){$();n(r,".modal-footer").prepend(c);function t(e){var n=angular.element(e);if(n.attr("disabled")||a.cancel&&n.hasClass("btn-cancel"))return;f.push(n);n.attr("disabled","disabled")}angular.forEach(e(r,".form-control"),t);angular.forEach(e(r,".btn"),t);n(r,".btn-cancel").on("click",y)}}})();

//# sourceURL=kubernetes/scripts/dialog.min.js

(function(){"use strict";function e(e,a,t){var n,r,i;var m,o,l=(e.status||{}).tags||[];for(m=0,o=l.length;m<o;m++){i=l[m].items||[];for(n=0,r=i.length;n<r;n++)a.call(t||null,l[m],i[n])}}angular.module("registry.images",["ngRoute","ui.cockpit","kubeClient","kubernetes.date","kubernetes.listing","registry.layers"]).config(["$routeProvider",function(e){e.when("/images/:namespace?",{templateUrl:"views/images-page.html",controller:"ImagesCtrl"}).when("/images/:namespace/:target",{controller:"ImageCtrl",templateUrl:function(e){var a=e["target"]||"";if(a.indexOf(":")===-1)return"views/imagestream-page.html";else return"views/image-page.html"}})}]).controller("ImagesCtrl",["$scope","$location","imageData","imageActions","ListingState","filterService",function(e,a,t,n,r){e.imagestreams=t.allStreams;angular.extend(e,t);e.listing=new r(e);t.watchImages();e.$on("activate",function(t,n){if(!e.listing.expandable){t.preventDefault();a.path("/images/"+n)}});angular.extend(e,n)}]).controller("ImageCtrl",["$scope","$location","$routeParams","kubeSelect","kubeLoader","imageData","imageActions","ListingState",function(a,t,n,r,i,m,o,l){var s=n["target"]||"";var g=s.indexOf(":");var c=n["namespace"]||"";var u,f;if(g===-1){a.kind="ImageStream";u=s;f=null}else{a.kind="Image";u=s.substr(0,g);f=s.substr(g+1)}m.watchImages();var d=i.listen(function(){a.stream=r().kind("ImageStream").namespace(c).name(u).one();a.image=a.config=a.layers=a.labels=a.tag=null;e(a.stream||{},function(e,t){if(e.tag===f)a.tag=e});if(a.tag)a.image=r().kind("Image").taggedBy(a.tag).one();if(a.image){a.names=m.imageTagNames(a.image);a.config=m.imageConfig(a.image);a.layers=m.imageLayers(a.image);a.labels=m.imageLabels(a.image)}});a.listing=new l(a);a.listing.inline=true;a.imagestreams=function(){if(a.stream)return{"/":a.stream};return{}};a.$on("$destroy",function(){d.cancel()});angular.extend(a,m);angular.extend(a,o);a.deleteImageStream=function(e){var n=o.deleteImageStream(e);n.then(function(){t.path(a.viewUrl("images"))});return n};a.deleteTag=function(e,a){var n=o.deleteTag(e,a);n.then(function(){var a=["images",e.metadata.namespace,e.metadata.name];t.path("/"+a.map(encodeURIComponent).join("/"))});return n}}]).directive("imagePanel",["kubeLoader","imageData",function(e,a){return{restrict:"A",scope:true,link:function(t,n,r){var i="main";t.tab=function(e,a){if(a){i=e;a.stopPropagation()}return i===e};var m=e.listen(function(){t.names=t.config=t.layers=t.labels=null;if(t.image){t.names=a.imageTagNames(t.image);t.config=a.imageConfig(t.image);t.layers=a.imageLayers(t.image);t.labels=a.imageLabels(t.image)}});t.$on("$destroy",function(){m.cancel()})},templateUrl:"views/image-panel.html"}}]).directive("imageBody",function(){return{restrict:"A",templateUrl:"views/image-body.html"}}).directive("imageConfig",function(){return{restrict:"A",templateUrl:"views/image-config.html"}}).directive("imageMeta",function(){return{restrict:"A",templateUrl:"views/image-meta.html"}}).directive("imagestreamBody",function(){return{restrict:"A",templateUrl:"views/imagestream-body.html"}}).directive("imagestreamMeta",function(){return{restrict:"A",templateUrl:"views/imagestream-meta.html"}}).directive("imageListing",function(){return{restrict:"A",templateUrl:"views/image-listing.html"}}).factory("imageData",["kubeSelect","kubeLoader",function(a,t){function n(e){for(var a in e){if(e[a].kind==="ImageStream")r(e[a])}}function r(e){var a=e.metadata||{};var n=e.status||{};angular.forEach(n.tags||[],function(e){angular.forEach(e.items||[],function(e){var n=t.resolve("Image",e.image);if(n in t.objects)return;var r={kind:"Image",apiVersion:"v1",metadata:{name:e.image}};t.handle(r);var i=a.name+"@"+e.image;t.load("ImageStreamImage",i,a.namespace).then(function(e){var a=e.image;if(a){a.kind="Image";t.handle(a)}},function(e){console.warn("couldn't load image: "+e.statusText);r.metadata.resourceVersion="invalid"})})})}var i=null;function m(){t.watch("images");if(!i)i=t.watch("imagestreams");return i}t.listen(n);a.register("taggedBy",function(e){var t,n,r={};for(t=0,n=e.items.length;t<n;t++)this.name(e.items[t].image).extend(r);return a(r)});a.register({name:"containsTagImage",digests:function(a){var t=[];if(typeof a=="string"){t.push(a)}else{e(a,function(e,a){t.push(a.image+"")})}return t}});a.register("listTagNames",function(a){var t=[];angular.forEach(this.containsTagImage(a),function(n){e(n,function(e,r){if(!a||r.image==a)t.push(n.metadata.namespace+"/"+n.metadata.name+":"+e.tag)})});return t});a.register("dockerImageManifest",function(){var e={};angular.forEach(this,function(a,t){var n,r=a.dockerImageManifest;if(r){r=JSON.parse(r);angular.forEach(r.history||[],function(e){if(typeof e.v1Compatibility=="string")e.v1Compatibility=JSON.parse(e.v1Compatibility)});e[t]=r}});return a(e)});a.register("dockerImageConfig",function(){var e={};angular.forEach(this,function(a,t){var n,r=o(a)||{};if(r[0]){n=r[0].v1Compatibility;if(n&&n.config){e[t]=n.config;return}}var i=a.dockerImageMetadata||{};if(i.Config)e[t]=i.Config});return a(e)});a.register("dockerConfigLabels",function(){var e={};angular.forEach(this,function(a,t){var n;if(a)n=a.Labels;if(n)e[t]=n});return a(e)});function o(e){if(!e)return null;var t=a(e).dockerImageManifest().one();if(!t||t.schemaVersion!==1)return null;return t.history}function l(e){var a=[];if(!e)return"";if(e.Entrypoint)a.push.apply(a,e.Entrypoint);if(e.Cmd)a.push.apply(a,e.Cmd);var t=a.join(" ");if(e.User&&e.User.split(":")[0]!="root")return"$ "+t;else return"# "+t}return{watchImages:m,allStreams:function s(){return a().kind("ImageStream")},imagesByTag:function g(e){return a().kind("Image").taggedBy(e)},imageLayers:o,imageConfig:function c(e){return a(e).dockerImageConfig().one()||{}},imageTagNames:function u(e){return a().kind("ImageStream").listTagNames(e.metadata.name)},imageLabels:function f(e){return a(e).dockerImageConfig().dockerConfigLabels().one()},configCommand:l}}]).factory("imageActions",["$modal",function(e){function a(a){return e.open({animation:false,controller:"ImageStreamDeleteCtrl",templateUrl:"views/imagestream-delete.html",resolve:{dialogData:function(){return{stream:a}}}}).result}function t(){return e.open({animation:false,controller:"ImageStreamModifyCtrl",templateUrl:"views/imagestream-modify.html",resolve:{dialogData:function(){return{}}}}).result}function n(a){return e.open({animation:false,controller:"ImageStreamModifyCtrl",templateUrl:"views/imagestream-modify.html",resolve:{dialogData:function(){return{stream:a}}}}).result}function r(a,t){var n=e.open({animation:false,controller:"ImageDeleteCtrl",templateUrl:"views/image-delete.html",resolve:{dialogData:function(){return{stream:a,tag:t}}}});return n.result}return{createImageStream:t,modifyImageStream:n,deleteImageStream:a,deleteTag:r}}]).controller("ImageStreamDeleteCtrl",["$scope","$modalInstance","dialogData","kubeMethods",function(e,a,t,n){angular.extend(e,t);e.performDelete=function r(){return n.delete(e.stream)}}]).controller("ImageStreamModifyCtrl",["$scope","$modalInstance","dialogData","kubeMethods","filterService",function(e,a,t,n,r){var i=t.stream||{};var m=i.metadata||{};var o=i.spec||{};var l={name:m.name||"",project:m.namespace||r.namespace()||"",populate:o.dockerImageRepository?"pull":"none",pull:o.dockerImageRepository||""};e.fields=l;e.labels={populate:{none:"Don't pull images automatically",pull:"Pull all tags from another image repository"}};function s(){var e={spec:{dockerImageRepository:null,tags:null}};if(l.populate!="none")e.spec.dockerImageRepository=l.pull.trim();return n.patch(i,e)}function g(){var e={kind:"ImageStream",metadata:{name:l.name.trim(),namespace:l.project.trim()}};if(l.populate!="none"){e.spec={dockerImageRepository:l.pull.trim()}}return n.check(e,{"metadata.name":"#imagestream-modify-name","metadata.namespace":"#imagestream-modify-project"}).then(function(){return n.create(e,l.project)})}e.performCreate=g;e.performModify=s;e.projects=r.namespaces;angular.extend(e,t)}]).controller("ImageDeleteCtrl",["$scope","$modalInstance","dialogData","kubeMethods",function(e,a,t,n){angular.extend(e,t);e.performDelete=function r(){var a=e.stream.metadata.name+":"+e.tag.tag;return n.delete("ImageStreamTag",a,e.stream.metadata.namespace)}}])})();

//# sourceURL=kubernetes/scripts/images.min.js

(function(){"use strict";function t(t,e){var n=d3.select(t);var a=[];var i={height:125,width:null,bar:14,gap:2,max:90,title:"Image layers"};var r;var l=null;var s;var u;var o=n.append("svg").attr("class","image-layers").on("click",function(){var t=d3.select(d3.event.target).datum()||{id:null};p(t.id)});var c=o.append("text").attr("class","label");var d=o.append("text").attr("text-anchor","end").attr("y","1em");var f=o.append("polyline").attr("class","line");function p(t){if(t===null)return;s=t;var e="";var n=null;o.selectAll("g").classed("selected",function(a,i){if(a.id===t){e=a.label;n=i;return true}return false});c.text(e).attr("y",i.height);var a=i.max+15;var r=[];r.push("0,"+a);if(n!==null){r.push(n*i.bar+","+a);r.push(n*i.bar+i.bar/2+","+(a-5));r.push((n+1)*i.bar+","+a)}r.push(u+","+a);f.attr("points",r.join(" "))}function v(){r=null;u=i.width;if(u===null)u=n.node().clientWidth;o.attr("width",u).attr("height",i.height);var t=d3.max(a,function(t){return t.size});l=d3.scale.linear().domain([0,t]).range([2,i.max]);var e=o.selectAll("g").data(a).enter().append("g").attr("transform",function(t,e){return"translate("+e*i.bar+",0)"});e.append("rect").attr("class","layer").attr("x",i.gap).attr("y",function(e){return l(t-e.size)}).attr("width",i.bar-i.gap*2).attr("height",function(t){return l(t.size)});e.append("rect").attr("class","column").attr("width",i.bar).attr("height",l(t)+15);d.text(i.title).attr("x",u-5);p(s)}function g(){window.clearTimeout(r);r=window.setTimeout(v,150)}window.addEventListener("resize",g);v();g();return{data:function(t,e){if(!t)t=[];a=t.slice();a.reverse();if(s===undefined&&a.length)s=a[0].id;angular.extend(i,e);v()},close:function(){window.removeEventListener("resize",g);window.clearTimeout(r)}}}function e(t,e){var n,a={};for(n in t){if(!angular.equals(t[n],e[n]))a[n]=t[n]}return a}function n(t,e){var n,a;if(t.v1Compatibility.container_config){n=t.v1Compatibility.container_config.Cmd;if(n){a=n[n.length-1];if(a.indexOf("#(nop)")===0)return a.substring(6)}}return t.v1Compatibility.id}function a(t,e,a){if(t.v1Compatibility){return{id:t.v1Compatibility.id,size:t.v1Compatibility.Size||0,label:n(t,a[e+1])}}else if(t.name&&t.size){return{id:t.name,size:t.size||0,label:t.name}}else{return{size:0,id:e,label:"Unknown layer"}}}return angular.module("registry.layers",[]).directive("imageLayers",[function(){return{restrict:"E",scope:{layers:"=",settings:"=",prevent:"="},link:function(e,n,i){n.css("display","block");var r=angular.element("<div/>");n.append(r);var l;function s(t,e){if(t&&t.length)t=t.map(a);l.data(t,e)}e.$watchCollection("[layers, settings]",function(t){if(l)s(t[0],t[1]||{})});e.$watch("prevent",function(n){if(!n&&!l){l=t(r[0]);s(e.layers,e.settings||{})}});n.on("$destroy",function(){l.close()})}}}])})();

//# sourceURL=kubernetes/scripts/layers.min.js

(function(){"use strict";function e(n,t,i){return n&&n.classList&&n.classList.contains(t)||n&&n.tagName===i||n&&e(n.parentNode,t,i)}angular.module("kubernetes.listing",[]).directive("listingTable",[function(){return{restrict:"A",link:function(e,n,t){}}}]).factory("ListingState",[function(){return function n(t){var i=this;var r={};function a(n){return!(n&&e(n.target,"btn","li"))}i.forceInline=false;i.only=false;i.expanded=function l(e){if(angular.isUndefined(e)){for(e in r)return true;return false}else{return e in r}};i.toggle=function u(e,n){var t;if(e){t=!(e in r);if(t)i.expand(e,n);else i.collapse(e,n)}};i.expand=function f(e,n){var i;if(a(n)){i=t.$emit("activate",e);if(!i.defaultPrevented){r[e]=true}}};i.collapse=function o(e,n){if(a(n)){if(e){delete r[e]}else{Object.keys(r).forEach(function(e){delete r[e]});i.only=false}}}}}]).directive("listingPanel",[function(){return{restrict:"A",scope:true,link:function(e,n,t){var i="main";e.tab=function(e,n){if(n){i=e;n.stopPropagation()}return i===e}},templateUrl:function(e,n){var t=n.kind;return"views/"+t.toLowerCase()+"-panel.html"}}}])})();

//# sourceURL=kubernetes/scripts/listing.min.js

(function(){"use strict";angular.module("registry.projects",["ngRoute","ui.cockpit","kubeClient","kubernetes.listing","ui.cockpit"]).config(["$routeProvider",function(e){e.when("/projects/:namespace?",{controller:"ProjectsCtrl",templateUrl:function(e){if(!e["namespace"])return"views/projects-page.html";else return"views/project-page.html"}})}]).controller("ProjectsCtrl",["$scope","$routeParams","$location","kubeSelect","kubeLoader","projectData","projectActions","ListingState",function(e,t,n,r,i,a,o,c){i.watch("users");i.watch("groups");i.watch("policybindings");var u=t["namespace"]||"";if(u){e.listing=new c(e);e.project=function(){return r().kind("Project").name(u).one()}}else{e.listing=new c(e);e.projects=function(){return r().kind("Project")};e.$on("activate",function(t,r){if(!e.listing.expandable){t.preventDefault();n.path("/projects/"+r)}})}angular.extend(e,a);angular.extend(e,o);e.users=function(){return r().kind("User")};e.groups=function(){return r().kind("Group")}}]).factory("projectData",["kubeSelect","kubeLoader",function(e,t){t.listen(function(e,t){var i;for(i in t){if(t[i].kind=="PolicyBinding")n(t[i].roleBindings,true)}for(i in e){if(e[i].kind=="PolicyBinding")n(e[i].roleBindings,false);else if(e[i].kind=="RoleBinding")r(e[i].subjects||[])}});function n(e,n){angular.forEach(e||[],function(e){t.handle(e.roleBinding,n,"RoleBinding")})}function r(e){angular.forEach(e,function(e){var n=t.resolve(e.kind,e.name,e.namespace);if(n in t.objects)return;var r={kind:e.kind,apiVersion:"v1",metadata:{name:e.name}};if(e.namespace)r.metadata.namespace=e.namespace;t.handle(r)})}e.register({name:"containsSubject",digests:function(e){var t,n,r,i,a=[];if(typeof e=="string"){a.push(e)}else if(e.kind=="User"||e.kind=="Group"){t=e.metadata||{};a.push(t.name+":"+e.kind)}else if(e.kind=="RoleBinding"){i=e.subjects||[];for(n=0,r=i.length;n<r;n++){a.push(i[n].name);a.push(i[n].name+":"+i[n].kind)}}return a}});function i(t,n){return e().kind("RoleBinding").namespace(n).containsSubject(t)}function a(e,t){return i(e,t).one()?true:false}function o(e,t){var n="";var r;if(!e||e.length===0)return n;if(e.length<=3){for(r=e.length-1;r>=0;r--){n+=e[r]+","}}else{if(t==="Groups"){n=e.length+" "+t}else if(t==="Users"){n=e.length+" "+t}}return n}return{subjectRoleBindings:i,subjectIsMember:a,formatMembers:o}}]).directive("projectPanel",["kubeLoader","kubeSelect",function(e,t){return{restrict:"A",scope:true,link:function(n,r,i){var a="main";n.tab=function(e,t){if(t){a=e;t.stopPropagation()}return a===e};var o=n.id;e.load("Project",null,null);n.project=function(){return t().kind("Project").name(o).one()}},templateUrl:"views/project-panel.html"}}]).directive("projectListing",function(){return{restrict:"A",templateUrl:"views/project-listing.html"}}).factory("projectActions",["$modal",function(e){function t(){return e.open({controller:"ProjectModifyCtrl",templateUrl:"views/project-modify.html",resolve:{dialogData:function(){return{}}}}).result}function n(t){return e.open({animation:false,controller:"ProjectModifyCtrl",templateUrl:"views/project-modify.html",resolve:{dialogData:function(){return{project:t}}}}).result}function r(){return e.open({controller:"UserNewCtrl",templateUrl:"views/add-user-dialog.html"})}function i(){return e.open({controller:"GroupNewCtrl",templateUrl:"views/add-group-dialog.html"})}return{createProject:t,modifyProject:n,createGroup:i,createUser:r}}]).controller("ProjectModifyCtrl",["$q","$scope","dialogData","kubeMethods",function(e,t,n,r){var i=n.project||{};var a=i.metadata||{};var o=a.annotations||{};var c="openshift.io/display-name";var u="openshift.io/description";var s={name:a.name||"",display:o[c]||"",description:o[u]||""};t.fields=s;t.performCreate=function l(){var e;var t={kind:"ProjectRequest",apiVersion:"v1",metadata:{name:s.name.trim()},displayName:s.display.trim(),description:s.description.trim()};return r.check(t,{"metadata.name":"#project-new-name"}).then(function(){return r.create(t)})};t.performModify=function d(){var e={};var t={metadata:{annotations:e}};var n=s.display.trim();if(n!==o[c])e[c]=n;n=s.description.trim();if(n!==o[u])e[u]=n;return r.check(t,{}).then(function(){return r.patch(i,t)})};angular.extend(t,n)}]).controller("UserNewCtrl",["$q","$scope","kubeMethods",function(e,t,n){var r={name:"",identities:""};t.fields=r;t.performCreate=function i(){var e;var t=[];if(r.identities.trim()!=="")t=[r.identities.trim()];var i={kind:"User",apiVersion:"v1",metadata:{name:r.name.trim()},identities:t};return n.check(i,{"metadata.name":"#user_name"}).then(function(){return n.create(i)})}}]).controller("GroupNewCtrl",["$q","$scope","kubeMethods",function(e,t,n){var r={name:""};t.fields=r;t.performCreate=function i(){var e;var t={kind:"Group",apiVersion:"v1",metadata:{name:r.name.trim()}};return n.check(t,{"metadata.name":"#group_name"}).then(function(){return n.create(t)})}}])})();

//# sourceURL=kubernetes/scripts/projects.min.js

(function(){"use strict";angular.module("kubernetes.app",["ui.bootstrap","kubeClient","kubeClient.cockpit"]).controller("MainCtrl",["$scope","$location","$rootScope","$timeout","kubeLoader","kubeSelect","KubeDiscoverSettings","filterService",function(e,t,n,r,i,u,a,o){e.settings={};e.viewActive=function(e){var n=t.url()||"/";var r=n.split("?")[0].split("/");if(!e&&!r[1])return true;if(e===r[1])return true;return false};e.viewUrl=function(e){var t,n=i.limits.namespace;if(angular.isArray(n))n=null;if(!e){if(n)return"/?namespace="+encodeURIComponent(n);else return"/"}else{t=[e];if(n)t.push(n);return"/"+t.map(encodeURIComponent).join("/")}};e.console=console;function c(){document.getElementsByTagName("body")[0].removeAttribute("hidden")}r(c,3e3);function s(t){e.curtains={};a(t).then(function(t){e.settings=t;e.curtains=null;o.globals(t.isAdmin);o.load().then(c)},function(t){e.curtains={status:t.status,message:t.message||t.statusText};e.settings=null;c()})}s();e.reconnect=function(){a(true);i.reset();s()};i.listen(function(){n.$applyAsync()})}]).directive("filterBar",["filterService",function(e){return{restrict:"E",scope:true,link:function(t,n,r){t.filter=e},templateUrl:"views/filter-bar.html"}}]).directive("filterProject",["filterService",function(e){return{restrict:"E",scope:true,link:function(t,n,r){t.filter=e},templateUrl:"views/filter-project.html"}}]).factory("filterService",["$q","$route","$rootScope","kubeLoader","kubeSelect","KubeDiscoverSettings",function(e,t,n,r,i,u){var a=true;var o=u().then(function(t){var n;if(t.flavor==="openshift")n=r.load("projects");if(t.isAdmin)n=r.watch("namespaces");return n||e.when([])});r.listen(function(e){var n,r,i;for(n in e){i=e[n];if(i.kind=="Namespace"||i.kind=="Project"){s(t.current);return}}});function c(){var e;if(a)e=i().kind("Namespace");if(!e||e.length===0)e=i().kind("Project");var t,n,r=[];for(t in e){n=e[t].metadata||{};if(n.name)r.push(n.name)}return r}function s(e){var t=null;if(e)t=e.params["namespace"]||null;if(t===null&&!a){t=c();if(t.length<1)t=null}if(!angular.equals(t,r.limit.namespaces)){r.limit({namespace:t})}}n.$on("$routeChangeSuccess",function(e,t,n){s(t)});n.$on("$routeUpdate",function(e,t,n){s(t)});if(t.current)s(t.current);return{load:function(){return o},globals:function(e){if(arguments.length===0)return a;e=!!e;if(a!==e){a=e;s(t.current)}},namespaces:c,namespace:function(e){if(arguments.length===0)return t.current.params["namespace"];var n=angular.copy(t.current.params);n["namespace"]=e||undefined;n["target"]=null;t.updateParams(n)}}}]).filter("orderObjectBy",function(){return function(e,t){var n,r=[];for(n in e)r.push(e[n]);if(!angular.isArray(t))t=[String(i)];var i=t.map(function(e){return e.split(".")});function u(e,t){return e?e[t]:undefined}r.sort(function(e,t){var n,r,a,o=i.length;for(a=0;a<o;a++){n=i[a].reduce(u,e);r=i[a].reduce(u,t);if(n===r)continue;return n>r?1:-1}return 0});return r}}).filter("formatBytes",["KubeFormat",function(e){return function(t){if(typeof t=="number")return e.formatBytes(t);return t}}])})();

//# sourceURL=kubernetes/scripts/app.min.js

(function(){"use strict";angular.module("kubeUtils",[]).provider("KubeFormat",[function(){var t=this;t.KubeFormatFactory="MissingFormat";function r(t,r){if(angular.isString(r))return t.get(r,"KubeFormat");else return t.invoke(r)}t.$get=["$injector",function(n){return r(n,t.KubeFormatFactory)}]}]).factory("MissingFormat",[function(){return function t(r){throw"no KubeFormatFactory set"}}]).provider("KubeTranslate",[function(){var t=this;t.KubeTranslateFactory="KubeTranslate";function r(t,r){if(angular.isString(r))return t.get(r,"MissingKubeTranslate");else return t.invoke(r)}t.$get=["$injector",function(n){return r(n,t.KubeTranslateFactory)}]}]).factory("MissingKubeTranslate",[function(){function t(){throw"no KubeTranslateFactory set"}return{gettext:t,ngettext:t}}])})();

//# sourceURL=kubernetes/scripts/utils.min.js

(function(){"use strict";var e=15;var t=8;angular.module("registry",["ngRoute","ui.bootstrap","kubernetes.app","registry.images","registry.projects","kubeClient","kubeClient.cockpit"]).config(["$routeProvider","KubeWatchProvider","KubeRequestProvider","KubeDiscoverSettingsProvider","$provide",function(e,t,r,o,a){e.when("/",{templateUrl:"views/registry-dashboard-page.html",controller:"DashboardCtrl",reloadOnSearch:false}).otherwise({redirectTo:"/"});t.KubeWatchFactory="CockpitKubeWatch";r.KubeRequestFactory="CockpitKubeRequest";o.KubeDiscoverSettingsFactory="cockpitKubeDiscoverSettings";a.decorator("$exceptionHandler",["$delegate","$log",function(e,t){return function(t,r){if(window.parent!==window&&window.name.indexOf("cockpit1:")===0)window.parent.postMessage('\n{ "command": "oops" }',"*");e(t,r)}}])}]).controller("DashboardCtrl",["$scope","kubeLoader","kubeSelect","imageData","imageActions","projectActions","filterService",function(r,o,a,i,n,c,s){o.load("projects");i.watchImages();function u(e,t){e=(e.metadata||{}).resourceVersion||0;t=(t.metadata||{}).resourceVersion||0;return t-e}function d(e,t){e=(e.items[0]||{}).created||"";t=(t.items[0]||{}).created||"";return t<e?-1:t>e?1:0}function l(e){var r=e.stream.status||{};var o=(r.tags||[]).slice();o.sort(d);o.splice(t)}a.register("buildRecentStreams",function(){var r,o=[];for(r in this)o.push(this[r]);o.sort(u);o.splice(e);var a=[];var i,n,c,s,l,g;for(s=0,l=o.length;s<l;s++){c=o[s];i=c.status||{};n=(i.tags||[]).slice();n.sort(d);g=n.length;n.splice(t);if(n.length>0)a.push({stream:c,tags:n,truncated:g>n.length})}return a});r.createProject=c.createProject;r.createImageStream=n.createImageStream;r.recentlyUpdated=function g(){return a().kind("ImageStream").buildRecentStreams()};r.projects=function p(){return a().kind("Project")};r.filter=s}])})();

//# sourceURL=kubernetes/scripts/registry.min.js

(function(){angular.module("registry").run(["$templateCache", function($templateCache) {
$templateCache.put("views/filter-bar.html", "<div class=\"btn-group filter-menu pull-right\" ng-if=\"listing\" dropdown> <button class=\"btn btn-default fa fa-th-list\"></button> <button class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" dropdown-toggle> <span class=\"caret\"></span> </button> <ul class=\"dropdown-menu\"> <li ng-if=\"!listing.forceInline\" ng-class=\"{ checked: listing.expandable }\"> <a ng-click=\"listing.expandable = !listing.expandable\" translatable=\"yes\">Expand items inline</a> </li> <li ng-class=\"{ checked: listing.only, disabled: !listing.expanded() }\"> <a ng-click=\"listing.only = !listing.only\" translatable=\"yes\">Only expanded items</a> </li> <li> <a ng-click=\"listing.collapse()\" translatable=\"yes\">Collapse all</a> </li> </ul> </div> <filter-project> </filter-project>");
$templateCache.put("views/filter-project.html", "<div class=\"btn-group bootstrap-select namespace-filter\" dropdown> <button class=\"btn btn-default dropdown-toggle\" type=\"button\" dropdown-toggle> <span class=\"pull-left\"> <span ng-if=\"!filter.namespace()\" translatable=\"yes\">All Projects</span> <span ng-if=\"filter.namespace()\"><span class=\"namespace-meta\" translatable=\"yes\">Project:</span> {{filter.namespace()}}</span> </span> <span class=\"caret\"></span> </button> <ul class=\"dropdown-menu\"> <li ng-class=\"{ checked: !filter.namespace() }\"> <a ng-click=\"filter.namespace(null)\" value=\"\">All Projects</a> </li> <li ng-repeat=\"name in filter.namespaces() track by name\" ng-class=\"{ checked: name == filter.namespace() }\"> <a ng-click=\"filter.namespace(name)\" value=\"{{name}}\">{{name}}</a> </li> </ul> </div>");
$templateCache.put("views/image-body.html", "<dl> <dt ng-if=\"labels.summary\" translatable=\"yes\">Summary</dt> <dd ng-if=\"labels.summary\">{{ labels.summary }}</dd> <dt ng-if=\"labels.description\" translatable=\"yes\">Description</dt> <dd ng-if=\"labels.description\">{{ labels.description }}</dd> <dt ng-if=\"labels.url\" translatable=\"yes\">Source URL</dt> <dd ng-if=\"labels.url\" translatable=\"yes\"> <a href=\"labels.url\"><i class=\"fa fa-external-link\"></i> {{ labels.url }}</a> </dd> <dt translatable=\"yes\">Author</dt> <dd ng-if=\"config.author\">{{config.author}}</dd> <dd ng-if=\"!config.author && image.dockerImageMetadata.Author\">{{image.dockerImageMetadata.Author}}</dd> <dd ng-if=\"!config.author && !image.dockerImageMetadata.Author\"><em translatable=\"yes\">Unknown</em></dd> <dt translatable=\"yes\">Built</dt> <dd ng-if=\"labels['build-date']\" title=\"{{labels['build-date']}}\">{{ labels['build-date'] | dateRelative}}</dd> <dd ng-if=\"!labels['build-date'] && layers[0].v1Compatibility.created\" title=\"{{layer.v1Compatibility.created}}\">{{ layer.v1Compatibility.created | dateRelative}}</dd> <dd ng-if=\"!labels['build-date'] && !layers[0].v1Compatibility.created\" title=\"{{image.dockerImageMetadata.Created}}\">{{image.dockerImageMetadata.Created | dateRelative}}</dd> <dt translatable=\"yes\">Digest</dt> <dd><tt>{{ image.metadata.name }}</tt></dd> <dt translatable=\"yes\">Identifier</dt> <dd><tt>{{ config.Image }}</tt></dd> </dl> <dl class=\"image-tags\"> <dt translatable=\"yes\">Tags</dt> <dd><span class=\"image-tag\" ng-repeat=\"name in names\">{{name}}</span></dd> </dl> <p> <i class=\"fa fa-info-circle\"></i> <span translatable=\"yes\">To pull this image:</span> </p> <pre>$ sudo docker pull {{stream.status.dockerImageRepository}}:{{tag.tag}}</pre>");
$templateCache.put("views/image-config.html", "<pre>{{ configCommand(config) }}</pre> <div class=\"row\"> <dl class=\"col-xs-12 col-sm-12 col-md-4\"> <dt translatable=\"yes\">Run as</dt> <dd ng-if=\"config.User\">{{config.User}}</dd> <dd ng-if=\"!config.User\"><em translatable=\"yes\">Default</em></dd> <dt translatable=\"yes\">Directory</dt> <dd ng-if=\"config.WorkingDir\">{{config.WorkingDir}}</dd> <dd ng-if=\"!config.WorkingDir\">/</dd> <dt ng-if=\"config.StopSignal\" translatable=\"yes\">Stop with</dt> <dd ng-if=\"config.StopSignal\">{{config.StopSignal}}</dd> <dt translatable=\"yes\">Architecture</dt> <dd ng-if=\"config.architecture\">{{config.architecture}}</dd> <dd ng-if=\"!config.architecture\">{{image.dockerImageMetadata.Architecture}}</dd> </dl> <dl class=\"col-xs-12 col-sm-12 col-md-8 full-width\"> <dt ng-if=\"config.Env.length\" translatable=\"yes\">Environment</dt> <dd ng-repeat=\"env in config.Env\"><tt>{{env}}</tt></dd> </dl> </div> <div class=\"row\"> <dl class=\"col-xs-12 col-sm-12 col-md-4\"> <dt translatable=\"yes\">Ports</dt> <dd ng-repeat=\"(port, data) in config.ExposedPorts\">{{port}}</dd> <dd ng-if=\"!config.ExposedPorts\"><em translatable=\"yes\">None</em></dd> </dl> <dl class=\"col-xs-12 col-sm-12 col-md-8 full-width\"> <dt ng-if=\"config.Volumes\" translatable=\"yes\">Volumes</dt> <dd ng-repeat=\"(volume, data) in config.Volumes\">{{volume}}</dd> </dl> </div>");
$templateCache.put("views/image-delete.html", "<modal-dialog> <div class=\"modal-header\"> <h3 class=\"modal-title\" translatable=\"yes\">Remove image tag</h3> </div> <div class=\"modal-body\" translatable=\"yes\">Do you want to remove the image tagged as '{{stream.metadata.namespace}}/{{stream.metadata.name}}:{{tag.tag}}'?</div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-danger\" translatable=\"yes\" ng-click=\"complete(performDelete())\">Delete</button> </div> </modal-dialog>");
$templateCache.put("views/image-meta.html", "<div> <image-layers layers=\"imageLayers(image)\"> </image-layers> <dl> <dt ng-if=\"labels\" translatable=\"yes\">Labels</dt> <dd ng-repeat=\"(name, value) in labels\" ng-show=\"name != 'description' && name != 'name'\"> <tt>{{name}}={{value}}</tt> </dd> <dt ng-if=\"config.OnBuild.length\" translatable=\"yes\">On Build</dt> <dd ng-repeat=\"line in config.OnBuild\"><tt>{{line}}</tt></dd> <dt ng-if=\"image.metadata.annotations\" translatable=\"yes\">Annotations</dt> <dd ng-repeat=\"(name, value) in image.metadata.annotations\">{{name}}: {{value}}</dd> <dt translatable=\"yes\">Docker Version</dt> <dd>{{image.dockerImageMetadata.DockerVersion}}</dd> </dl> </div>");
$templateCache.put("views/image-listing.html", "<table listing-table class=\"listing images-listing\"> <thead> <tr ng-if=\"!listing.inline\"> <td colspan=\"4\"> <a class=\"pull-right\" ng-click=\"createImageStream()\"> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">New image stream</span> </a> <h3 translatable=\"yes\">Images</h3> </td> </tr> <tr> <th translatable=\"yes\">Tags</th> <th translatable=\"yes\">Author</th> <th translatable=\"yes\">Last Updated</th> </tr> </thead> <tbody ng-repeat-start=\"stream in imagestreams() track by stream.metadata.name\" ng-init=\"sid = stream.metadata.namespace + '/' + stream.metadata.name\" data-id=\"{{ sid }}\" class=\"active\" ng-class=\"{open: listing.expanded(sid)}\"> <tr class=\"listing-item imagestream-item\" ng-click=\"listing.toggle(sid)\"> <th ng-if=\"!listing.inline\" colspan=\"4\">{{ sid }}</th> </tr> <tr class=\"listing-panel\" ng-if=\"listing.expanded(sid)\" ng-init=\"id = sid\"> <td listing-panel kind=\"ImageStream\" colspan=\"3\"></td> </tr> </tbody> <tbody ng-repeat=\"tag in stream.status.tags track by tag.tag\" ng-init=\"iid = sid + ':' + tag.tag\" data-id=\"{{ iid }}\" class=\"active\" ng-class=\"{open: listing.expanded(iid), last: $last, first: $first}\"> <tr class=\"listing-item tag-item\" ng-click=\"listing.toggle(iid)\" ng-repeat-start=\"image in imagesByTag(tag) track by image.metadata.name\"> <td><span class=\"image-tag\">:{{ tag.tag }}</span></td> <td colspan=\"3\"><tt>{{ image.metadata.name }}</tt></td> </tr> <tr class=\"listing-item image-item\" ng-click=\"listing.toggle(iid)\" ng-init=\"conf = imageConfig(image); layer = imageLayers(image)[0]\"> <td></td> <td ng-if=\"conf.author\">{{ conf.author }}</td> <td ng-if=\"!conf.author\">{{ image.dockerImageMetadata.Author }}</td> <td title=\"{{ tag.items[0].created }}\">{{ tag.items[0].created | dateRelative }}</td> </tr> <tr class=\"listing-panel\" ng-if=\"listing.expanded(iid)\" ng-init=\"id = iid\" ng-repeat-end=\"\"> <td image-panel colspan=\"3\"></td> </tr> </tbody> <tbody data-ng-rubbish=\"\" ng-if=\"0\" ng-repeat-end> </tbody> <thead class=\"listing-empty\" ng-if=\"!quiet\"> <tr> <td colspan=\"3\" ng-if=\"!failure\" translatable=\"yes\">No image streams are present.</td> <td colspan=\"3\" ng-if=\"failure\">{{failure}}</td> </tr> </thead> </table>");
$templateCache.put("views/image-page.html", "<div class=\"content-filter\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" ng-click=\"deleteTag(stream, tag)\"></button> </div> <h3> <i class=\"pficon pficon-image\"></i> <span ng-if=\"labels.name\">{{ labels.name }}</span> <span ng-if=\"!labels.name\">{{ names[0] }}</span> </h3> <a ng-href=\"#/images/{{ stream.metadata.namespace }}/{{ stream.metadata.name }}\" translatable=\"yes\" class=\"hidden-xs\">Show all images</a> </div> <div class=\"listing-inline\"> <h3 translatable=\"yes\">Image</h3> <div class=\"listing-body container-fluid\" image-body></div> <h3 translatable=\"yes\">Container</h3> <div class=\"listing-body container-fluid\" image-config></div> <h3 translatable=\"yes\">Metadata</h3> <div class=\"listing-body container-fluid\" image-meta></div> </div>");
$templateCache.put("views/image-panel.html", "<div> <div class=\"listing-head\" ng-click=\"listing.collapse(id, $event)\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" ng-click=\"deleteTag(stream, tag)\"></button> </div> <h3> <i class=\"pficon pficon-image\"></i> <span ng-if=\"labels.name\">{{ labels.name }}</span> <span ng-if=\"!labels.name\">{{ names[0] }}</span> </h3> <ul class=\"nav nav-tabs nav-tabs-pf\"> <li ng-class=\"{active: tab('main')}\"> <a ng-click=\"tab('main', $event)\" translatable=\"yes\">Image</a> </li> <li ng-class=\"{active: tab('config')}\"> <a ng-click=\"tab('config', $event)\" translatable=\"yes\">Container</a> </li> <li ng-class=\"{active: tab('meta')}\"> <a ng-click=\"tab('meta', $event)\" translatable=\"yes\">Metadata</a> </li> </ul> </div> <div image-body class=\"listing-body\" ng-show=\"tab('main')\"> </div> <div image-config class=\"listing-body\" ng-show=\"tab('config')\"> </div> <div image-meta class=\"listing-body\" ng-if=\"tab('meta')\"> </div> </div>");
$templateCache.put("views/images-page.html", "<filter-bar class=\"content-filter\"> </filter-bar> <div image-listing> </div>");
$templateCache.put("views/imagestream-body.html", "<dl> <dt translatable=\"yes\">Pull repository</dt> <dd ng-if=\"stream.spec.dockerImageRepository\"><tt>{{stream.spec.dockerImageRepository}}</tt></dd> <dd ng-if=\"!stream.spec.dockerImageRepository\"><em translatable=\"yes\">None</em></dd> <dt translatable=\"yes\">Image count</dt> <dd translatable=\"yes\">{{stream.status.tags.length}}</dd> </dl> <p> <i class=\"fa fa-info-circle\"></i> <span translatable=\"yes\">To push to an image to this image stream:</span> </p> <pre>$ sudo docker tag <em>myimage</em> {{stream.status.dockerImageRepository}}:<em>tag</em>\n$ sudo docker push {{stream.status.dockerImageRepository}}</pre>");
$templateCache.put("views/imagestream-delete.html", "<modal-dialog> <div class=\"modal-header\"> <h3 class=\"modal-title\" translatable=\"yes\">Delete image stream</h3> </div> <div class=\"modal-body\" translatable=\"yes\">Do you want to delete the '{{stream.metadata.namespace}}/{{stream.metadata.name}}' image stream?</div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-danger\" translatable=\"yes\" ng-click=\"complete(performDelete())\">Delete</button> </div> </modal-dialog>");
$templateCache.put("views/imagestream-meta.html", "<dl> <dt ng-if=\"stream.metadata.annotations\" translatable=\"yes\">Annotations</dt> <dd ng-repeat=\"(name, value) in stream.metadata.annotations\"><tt>{{name}}: {{value}}</tt></dd> </dl>");
$templateCache.put("views/imagestream-modify.html", "<modal-dialog> <div class=\"modal-header\"> <h3 class=\"modal-title\" ng-if=\"!stream\" translatable=\"yes\">Create image stream</h3> <h3 class=\"modal-title\" ng-if=\"stream\" translatable=\"yes\">Change image stream</h3> </div> <div class=\"modal-body\"> <table class=\"cockpit-form-table\"> <tr> <td> <label class=\"control-label\" for=\"imagestream-modify-name\" translatable=\"yes\">Name</label> </td> <td> <input id=\"imagestream-modify-name\" class=\"form-control\" ng-if=\"!stream\" ng-model=\"fields.name\" placeholder=\"eg: my-image-stream\" autofocus> <span id=\"imagestream-modify-name\" ng-if=\"stream\">{{ fields.name }}</span> </td> </tr> <tr> <td> <label class=\"control-label\" for=\"imagestream-modify-project-text\" translatable=\"yes\">Project</label> </td> <td> <div ng-if=\"!stream\" id=\"imagestream-modify-project\" class=\"input-group input-combo\"> <input class=\"form-control\" id=\"imagestream-modify-project-text\" ng-model=\"fields.project\"> <span class=\"input-group-btn\" dropdown> <button class=\"btn btn-default dropdown-toggle\" dropdown-toggle type=\"button\"> <span class=\"caret\"></span> </button> <ul dropdown-menu class=\"dropdown-menu\" role=\"menu\"> <li ng-repeat=\"name in projects() track by name\" ng-class=\"{ checked: name == fields.project }\"> <a ng-click=\"fields.project = name\" value=\"{{name}}\">{{ name }}</a> </li> </ul> </span> </div> <span id=\"imagestream-modify-project\" ng-if=\"stream\">{{ fields.project }}</span> </td> </tr> <tr> <td> <label class=\"control-label\" for=\"imagestream-modify-populate\" translatable=\"yes\">Populate</label> </td> <td> <div class=\"btn-group bootstrap-select form-control\" dropdown id=\"imagestream-modify-populate\"> <button class=\"btn btn-default dropdown-toggle\" dropdown-toggle> <span class=\"pull-left\">{{ labels.populate[fields.populate] }}</span> <span class=\"caret\"></span> </button> <ul class=\"dropdown-menu\"> <li ng-repeat=\"(value, label) in labels.populate\" ng-class=\"{checked: value == fields.populate}\"> <a ng-click=\"fields.populate = value\" value=\"{{value}}\">{{ label }}</a> </li> </ul> </div> </td> </tr> <tr ng-show=\"fields.populate != 'none'\"> <td> <label class=\"control-label\" for=\"imagestream-modify-pull\" translatable=\"yes\">Pull from</label> </td> <td> <input id=\"imagestream-modify-pull\" class=\"form-control\" ng-model=\"fields.pull\" placeholder=\"eg: docker.io/library/fedora\"> </td> </tr> </table> </div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-primary\" ng-if=\"stream\" ng-click=\"complete(performModify())\">Change</button> <button class=\"btn btn-primary\" ng-if=\"!stream\" ng-click=\"complete(performCreate())\">Create</button> </div> </modal-dialog>");
$templateCache.put("views/imagestream-page.html", "<div class=\"content-filter\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" ng-click=\"deleteImageStream(stream)\"></button> <button class=\"btn btn-default pficon pficon-edit\" ng-click=\"modifyImageStream(stream)\"></button> </div> <h3> <i class=\"fa fa-folder\"></i> {{ stream.metadata.namespace }}/{{ stream.metadata.name}} </h3> <a ng-href=\"#{{ viewUrl('images') }}\" translatable=\"yes\">Show all image streams</a> </div> <div class=\"listing-inline\"> <h3 translatable=\"yes\">Image Stream</h3> <div class=\"listing-body\" imagestream-body></div> <h3 translatable=\"yes\">Images</h3> </div> <div image-listing> </div> <div class=\"listing-inline\"> <h3 translatable=\"yes\" ng-if=\"stream.metadata.annotations\">Metadata</h3> <div class=\"listing-body\" imagestream-meta></div> </div>");
$templateCache.put("views/imagestream-panel.html", "<div> <div class=\"listing-head\" ng-click=\"listing.collapse(id, $event)\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" ng-click=\"deleteImageStream(stream)\"></button> <button class=\"btn btn-default pficon pficon-edit\" ng-click=\"modifyImageStream(stream)\"></button> </div> <h3><i class=\"fa fa-th-list\"></i>{{ stream.metadata.namespace}}/{{ stream.metadata.name }}</h3> <ul class=\"nav nav-tabs nav-tabs-pf\"> <li ng-class=\"{active: tab('main')}\"><a ng-click=\"tab('main', $event)\">Image stream</a></li> <li ng-class=\"{active: tab('meta')}\"><a ng-click=\"tab('meta', $event)\">Metadata</a></li> </ul> </div> <div imagestream-body class=\"listing-body\" ng-show=\"tab('main')\"> </div> <div imagestream-meta class=\"listing-body\" ng-show=\"tab('meta')\"> </div> </div>");
$templateCache.put("views/add-group-dialog.html", "<modal-dialog> <div class=\"modal-header\"> <h4 class=\"modal-title\" translatable=\"yes\">Add Group</h4> </div> <div class=\"modal-body\"> <table class=\"cockpit-form-table\"> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"group_name\" translatable=\"yes\"> Name </label> </td> <td> <input id=\"group_name\" ng-model=\"fields.name\" class=\"form-control\"> </td> </tr> </table> </div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-primary\" translatable=\"yes\" ng-click=\"complete(performCreate())\">Create</button> </div> </modal-dialog>");
$templateCache.put("views/add-user-dialog.html", "<modal-dialog> <div class=\"modal-header\"> <h4 class=\"modal-title\" translatable=\"yes\">Add User</h4> </div> <div class=\"modal-body\"> <table class=\"cockpit-form-table\"> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"user_name\" translatable=\"yes\"> Name </label> </td> <td> <input id=\"user_name\" ng-model=\"fields.name\" class=\"form-control\"> </td> </tr> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"identities\" translatable=\"yes\"> Identity </label> </td> <td> <input id=\"identities\" ng-model=\"fields.identities\" class=\"form-control\"> </td> </tr> </table> </div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-primary\" translatable=\"yes\" ng-click=\"complete(performCreate())\">Add</button> </div> </modal-dialog>");
$templateCache.put("views/projects-page.html", "<filter-bar class=\"content-filter\"> </filter-bar> <div project-listing> </div>");
$templateCache.put("views/project-modify.html", "<modal-dialog> <div class=\"modal-header\"> <h4 class=\"modal-title\" ng-if=\"!project\" translatable=\"yes\">New project</h4> <h3 class=\"modal-title\" ng-if=\"project\" translatable=\"yes\">Change project</h3> </div> <div class=\"modal-body\"> <table class=\"cockpit-form-table\"> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"project-new-name\" translatable=\"yes\">Name</label> </td> <td> <input id=\"project-new-name\" class=\"form-control\" ng-if=\"!project\" ng-model=\"fields.name\" autofocus> <span id=\"project-new-name\" ng-if=\"project\">{{ fields.name }}</span> </td> </tr> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"project-new-display\" translatable=\"yes\">Display name</label> </td> <td> <input id=\"project-new-display\" class=\"form-control\" ng-model=\"fields.display\"> </td> </tr> <tr> <td class=\"top\"> <label class=\"control-label\" for=\"project-new-description\" translatable=\"yes\">Description</label> </td> <td> <input id=\"project-new-description\" class=\"form-control\" ng-model=\"fields.description\"> </td> </tr> </table> </div> <div class=\"modal-footer\"> <button class=\"btn btn-default btn-cancel\" translatable=\"yes\">Cancel</button> <button class=\"btn btn-primary\" ng-if=\"!project\" ng-click=\"complete(performCreate())\" translatable=\"yes\">Create</button> <button class=\"btn btn-primary\" ng-if=\"project\" ng-click=\"complete(performModify())\" translatable=\"yes\">Change</button> </div> </modal-dialog>");
$templateCache.put("views/project-page.html", "<div class=\"content-filter\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" disabled></button> <button class=\"btn btn-default pficon pficon-edit\" ng-click=\"modifyProject(project())\"></button> </div> <h3> <i class=\"pficon pficon-project\"></i> <span ng-if=\"project().metadata.annotations['openshift.io/display-name']\"> {{ project().metadata.annotations['openshift.io/display-name'] }} ({{ project().metadata.name }}) </span> <span ng-if=\"!project().metadata.annotations['openshift.io/display-name']\"> {{ project().metadata.name }} </span> </h3> <a ng-href=\"#/projects\" translatable=\"yes\">Show all projects</a> </div> <div class=\"listing-inline\"> <p class=\"project-description\" ng-if=\"project().metadata.annotations['openshift.io/description']\"> {{ project().metadata.annotations['openshift.io/description'] }} </p> <h3 translatable=\"yes\">Membership</h3> <table listing-table class=\"listing projects-listing\"> <thead> <tr> <th translatable=\"yes\">Project Members</th> <th translatable=\"yes\">Roles</th> <th translatable=\"yes\"></th> </tr> </thead> <tbody ng-repeat=\"user in users()\" ng-if=\"subjectIsMember(user, project().metadata.name)\"> <tr class=\"listing-item\"> <td>{{ user.metadata.name }}</td> <td> <span ng-repeat=\"role in subjectRoleBindings(user, project().metadata.name)\">{{ role.metadata.name }} </span> </td> <td></td> </tr> </tbody> <tbody ng-repeat=\"group in groups()\" ng-if=\"subjectIsMember(group, project().metadata.name)\"> <tr class=\"listing-item\"> <td>{{ group.metadata.name }}</td> <td> <span ng-repeat=\"role in subjectRoleBindings(group, project().metadata.name)\">{{ role.metadata.name }} </span> </td> <td></td> </tr> </tbody> <thead> <tr> <td colspan=\"3\"> <a class=\"pull-left\" disabled> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">Add Member</span> </a> </td> </tr> </thead> </table> </div>");
$templateCache.put("views/project-panel.html", "<div class=\"listing-head\" ng-click=\"listing.collapse(id, $event)\"> <div class=\"listing-actions\"> <button class=\"btn btn-danger btn-delete pficon pficon-delete\" disabled></button> <button class=\"btn btn-default pficon pficon-edit\" ng-click=\"modifyProject(project())\"></button> </div> <h3><i class=\"pficon pficon-project\"></i> <span ng-if=\"project().metadata.annotations['openshift.io/description']\"> {{ project().metadata.annotations['openshift.io/display-name'] }} ({{ project().metadata.name }}) </span> <span ng-if=\"!project().metadata.annotations['openshift.io/description']\"> {{ project().metadata.name }} </span> <span class=\"project-description\" ng-if=\"project().metadata.annotations['openshift.io/description']\"> <br>{{ project().metadata.annotations['openshift.io/description'] }} </span> </h3> </div> <div class=\"listing-body project-panel\" ng-show=\"tab('main')\"> <div> <table listing-table class=\"listing project-body\"> <thead> <tr> <th translatable=\"yes\">Project Members</th> <th translatable=\"yes\">Roles</th> <th translatable=\"yes\"></th> </tr> </thead> <tbody colspan=\"3\" ng-repeat=\"user in users()\" ng-if=\"subjectIsMember(user, project().metadata.name)\"> <tr class=\"listing-item inner-project-listing\"> <td>{{ user.metadata.name }}</td> <td> <span ng-repeat=\"role in subjectRoleBindings(user, project().metadata.name)\">{{ role.metadata.name }} </span> </td> <td></td> </tr> </tbody> <tbody colspan=\"3\" ng-repeat=\"group in groups()\" ng-if=\"subjectIsMember(group, project().metadata.name)\"> <tr class=\"listing-item inner-project-listing\"> <td>{{ group.metadata.name }}</td> <td> <span ng-repeat=\"role in subjectRoleBindings(group, project().metadata.name)\">{{ role.metadata.name }} </span> </td> <td></td> </tr> </tbody> <thead> <tr> <td colspan=\"3\"> <a class=\"pull-left\" disabled> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">Add Member</span> </a> </td> </tr> </thead> </table> </div> </div>");
$templateCache.put("views/project-listing.html", "<table listing-table class=\"listing projects-listing\"> <thead> <tr> <td colspan=\"3\"> <a class=\"pull-right\" ng-click=\"createProject()\"> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">New Project</span> </a> <h3 translatable=\"yes\">Projects</h3> </td> </tr> <tr> <th translatable=\"yes\">Name</th> <th translatable=\"yes\">Description</th> <th translatable=\"yes\">Members</th> </tr> </thead> <tbody ng-repeat-start=\"item in projects() track by item.metadata.name\" ng-init=\"sid = item.metadata.name\" data-id=\"{{ sid }}\" class=\"active\" ng-class=\"{ open: listing.expanded(sid) }\"> <tr class=\"listing-item\" ng-click=\"listing.toggle(sid)\"> <th>{{ item.metadata.name }}</th> <td>{{ item.metadata.annotations[\"openshift.io/description\"] }}</td> <td></td> </tr> <tr class=\"listing-panel\" ng-if=\"listing.expanded(sid)\" ng-init=\"id = sid\"> <td project-panel colspan=\"3\"></td> </tr> </tbody> <tbody data-ng-rubbish=\"\" ng-if=\"0\" ng-repeat-end></tbody> <thead> <tr> <td colspan=\"3\"> <a class=\"pull-right\" id=\"add-group\" ng-click=\"createGroup()\"> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">New Group</span> </a> <h3 translatable=\"yes\">Groups</h3> </td> </tr> <tr> <th translatable=\"yes\">Name</th> <th translatable=\"yes\">Description</th> <th translatable=\"yes\">Members</th> </tr> </thead> <tbody ng-repeat=\"item in groups()\" class=\"active\"> <tr class=\"listing-item\"> <th>{{ item.metadata.name }}</th> <td></td> <td>{{ formatMembers(item.users, 'Users') }}</td> </tr> <tr class=\"listing-panel\" ng-if=\"selected(id)\"></tr> </tbody> <thead> <tr> <td colspan=\"3\"> <a class=\"pull-right\" id=\"add-user\" ng-click=\"createUser()\"> <i translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></i> <span translatable=\"yes\">Add User</span> </a> <h3 translatable=\"yes\">Users</h3> </td> </tr> <tr> <th translatable=\"yes\">Name</th> <th translatable=\"yes\">Identity</th> <th translatable=\"yes\">Member of</th> </tr> </thead> <tbody ng-repeat=\"item in users()\" class=\"active\"> <tr class=\"listing-item\"> <th>{{ item.metadata.name }}</th> <td>{{ formatMembers(item.identities, 'Identities') }}</td> <td>{{ formatMembers(item.groups, 'Groups') }}</td> </tr> <tr class=\"listing-panel\" ng-if=\"selected(id)\"></tr> </tbody> </table>");
$templateCache.put("views/registry-dashboard-page.html", "<div class=\"blank-slate-pf\" ng-show=\"!filter.namespaces().length\"> <div class=\"blank-slate-pf-icon\"> <i class=\"pficon pficon-add-circle-o\"></i> </div> <h1 translatable=\"yes\">Welcome to the Image Registry</h1> <p translatable=\"yes\">In order to begin pushing images to the registry, you need to create a project.</p> <div class=\"blank-slate-pf-main-action\"> <a ng-click=\"createProject()\" class=\"card-pf-link-with-icon\"> <i class=\"pficon pficon-add-circle-o\"></i><span translatable=\"yes\">New project</span> </a> </div> </div> <div class=\"container-cards-pf dashboard-cards\" ng-show=\"filter.namespaces().length\"> <div class=\"card-pf dashboard-images\"> <div class=\"card-pf-heading\"> <h2 class=\"card-pf-title\" translatable=\"yes\">Images by project</h2> </div> <div class=\"card-pf-body\"> <table class=\"table table-striped table-hover\"> <tr ng-repeat=\"(key, project) in projects() track by key\"> <td> <a ng-href=\"#/images/{{ project.metadata.name }}\"> {{ project.metadata.name }} </a> </td> </tr> </table> </div> <div class=\"card-pf-footer\"> <a ng-click=\"createProject()\" class=\"card-pf-link-with-icon new-project-link\"> <i class=\"pficon pficon-add-circle-o\"></i><span translatable=\"yes\">New project</span> </a> </div> </div> <div class=\"card-pf card-pf-wide dashboard-images\"> <div class=\"card-pf-heading\"> <h2 class=\"card-pf-title\" translatable=\"yes\">Images pushed recently</h2> </div> <div class=\"card-pf-body\" ng-if=\"recentlyUpdated().length\"> <div ng-repeat=\"data in recentlyUpdated()\"> <dd title=\"{{ data.tags[0].items[0].created }}\"> {{ data.tags[0].items[0].created | dateRelative }}</dd> <dt><a ng-href=\"#/images/{{data.stream.metadata.namespace}}/{{data.stream.metadata.name}}\"> {{ data.stream.metadata.namespace}}/{{data.stream.metadata.name }}</a></dt> <!-- TODO: Display ... when too many tags listed --> <ul class=\"image-tag-list\"> <li ng-repeat=\"tag in data.tags track by tag.tag\"> <a ng-href=\"#/images/{{data.stream.metadata.namespace}}/{{data.stream.metadata.name}}:{{tag.tag}}\" class=\"image-tag\">:{{ tag.tag }}</a> </li> <li ng-if=\"data.truncated\" class=\"image-tag-truncated\"> </li> </ul> </div> <a href=\"#/images\" class=\"all-images\" translatable=\"yes\">All images</a> </div> <div class=\"card-pf-body blank-slate-pf\" ng-if=\"!recentlyUpdated().length\"> <div class=\"blank-slate-pf-icon\"> <i class=\"pficon pficon-add-circle-o\"></i> </div> <h1 translatable=\"yes\">No images pushed</h1> <p translatable=\"yes\">In order to begin pushing images to the registry, use the commands below.</p> </div> <div class=\"card-pf-footer\"> <filter-project class=\"pull-right\"> </filter-project> <a class=\"card-pf-link-with-icon\" ng-click=\"createImageStream()\"> <span translatable=\"yes\" class=\"pficon pficon-add-circle-o\"></span> <span translatable=\"yes\">New image stream</span> </a> </div> </div> </div> <div class=\"container-cards-pf dashboard-cards\"> <div class=\"card-pf dashboard-commands\"> <div class=\"card-pf-heading\"> <h2 class=\"card-pf-title\"> <i class=\"fa fa-keyboard-o\"></i> <span translatable=\"yes\">Docker commands</span> </h2> </div> <div class=\"card-pf-body\"> <p translatable=\"yes\">Log into the registry:</p> <div class=\"alert alert-warning\" ng-if=\"!settings.registry.password\"> <span class=\"pficon pficon-warning-triangle-o\"></span> <span translatable=\"yes\">Your login credentials do not give you access to use the docker registry from the command line.</span> </div> <pre ng-if=\"settings.registry.password && settings.registry.host\">$ sudo docker login -p {{settings.registry.password}} -e unused -u unused {{settings.registry.host}}</pre> <pre ng-if=\"settings.registry.password && !settings.registry.host\">$ sudo docker login -p {{settings.registry.password}} -e unused -u unused <em>registry</em></pre> <p translatable=\"yes\">Push an image:</p> <pre ng-if=\"settings.registry.host\">$ sudo docker tag <em>myimage</em> {{settings.registry.host}}/<em>project</em>/<em>name:tag</em>\n$ sudo docker push {{settings.registry.host}}/<em>project</em>/<em>name</em></pre> <pre ng-if=\"!settings.registry.host\">$ sudo docker tag <em>myimage</em> <em>registry</em>/<em>project</em>/<em>name:tag</em>\n$ sudo docker push <em>registry</em>/<em>project</em>/<em>name</em></pre> <p translatable=\"yes\">Pull an image:</p> <pre ng-if=\"settings.registry.host\">$ sudo docker pull {{settings.registry.host}}/<em>project</em>/<em>name:tag</em></pre> <pre ng-if=\"!settings.registry.host\">$ sudo docker pull <em>registry</em>/<em>project</em>/<em>name:tag</em></pre> </div> </div> </div>");
}]);})();
//# sourceURL=kubernetes/registry-templates.js
