define(["jquery"],function(){(function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function a(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function s(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function n(t){return function(){return this[t].apply(this,arguments)}}var r=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){var e=t&&t.valueOf();for(var i=0,a=this.length;i<a;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){if(!e)return;if(!t.isArray(e))e=[e];this.clear();this.push.apply(this,e)},clear:function(){this.length=0},copy:function(){var t=new r;t.replace(this);return t}};return function(){var i=[];i.push.apply(i,arguments);t.extend(i,e);return i}}();var h=function(e,i){this._process_options(i);this.dates=new r;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=t(e);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this.picker=t(D.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};h.prototype={constructor:h,_process_options:function(s){this._o=t.extend({},this._o,s);var n=this.o=t.extend({},this._o);var r=n.language;if(!g[r]){r=r.split("-")[0];if(!g[r])r=c.language}n.language=r;switch(n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode);if(n.multidate!==true){n.multidate=Number(n.multidate)||false;if(n.multidate!==false)n.multidate=Math.max(0,n.multidate)}n.multidateSeparator=String(n.multidateSeparator);n.weekStart%=7;n.weekEnd=(n.weekStart+6)%7;var h=D.parseFormat(n.format);if(n.startDate!==-Infinity){if(!!n.startDate){if(n.startDate instanceof Date)n.startDate=this._local_to_utc(this._zero_time(n.startDate));else n.startDate=D.parseDate(n.startDate,h,n.language)}else{n.startDate=-Infinity}}if(n.endDate!==Infinity){if(!!n.endDate){if(n.endDate instanceof Date)n.endDate=this._local_to_utc(this._zero_time(n.endDate));else n.endDate=D.parseDate(n.endDate,h,n.language)}else{n.endDate=Infinity}}n.daysOfWeekDisabled=n.daysOfWeekDisabled||[];if(!t.isArray(n.daysOfWeekDisabled))n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/);n.daysOfWeekDisabled=t.map(n.daysOfWeekDisabled,function(t){return parseInt(t,10)});n.datesDisabled=n.datesDisabled||[];if(!t.isArray(n.datesDisabled)){var o=[];o.push(D.parseDate(n.datesDisabled,h,n.language));n.datesDisabled=o}n.datesDisabled=t.map(n.datesDisabled,function(t){return D.parseDate(t,h,n.language)});var l=String(n.orientation).toLowerCase().split(/\s+/g),d=n.orientation.toLowerCase();l=t.grep(l,function(t){return/^auto|left|right|top|bottom$/.test(t)});n.orientation={x:"auto",y:"auto"};if(!d||d==="auto");else if(l.length===1){switch(l[0]){case"top":case"bottom":n.orientation.y=l[0];break;case"left":case"right":n.orientation.x=l[0];break}}else{d=t.grep(l,function(t){return/^left|right$/.test(t)});n.orientation.x=d[0]||"auto";d=t.grep(l,function(t){return/^top|bottom$/.test(t)});n.orientation.y=d[0]||"auto"}if(n.defaultViewDate){var u=n.defaultViewDate.year||(new Date).getFullYear();var f=n.defaultViewDate.month||0;var p=n.defaultViewDate.day||1;n.defaultViewDate=i(u,f,p)}else{n.defaultViewDate=a()}n.showOnFocus=n.showOnFocus!==e?n.showOnFocus:true},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i=0,a,s,n;i<t.length;i++){a=t[i][0];if(t[i].length===2){s=e;n=t[i][1]}else if(t[i].length===3){s=t[i][1];n=t[i][2]}a.on(n,s)}},_unapplyEvents:function(t){for(var i=0,a,s,n;i<t.length;i++){a=t[i][0];if(t[i].length===2){n=e;s=t[i][1]}else if(t[i].length===3){n=t[i][1];s=t[i][2]}a.off(s,n)}},_buildEvents:function(){var e={keyup:t.proxy(function(e){if(t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:t.proxy(this.keydown,this)};if(this.o.showOnFocus===true){e.focus=t.proxy(this.show,this)}if(this.isInput){this._events=[[this.element,e]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),e],[this.component,{click:t.proxy(this.show,this)}]]}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:t.proxy(this.show,this)}]]}this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]);this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){if(!(this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var a=i||this.dates.get(-1),s=this._utc_to_local(a);this.element.trigger({type:e,date:s,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){if(arguments.length===0){t=this.dates.length-1;e=this.o.format}else if(typeof t==="string"){e=t;t=this.dates.length-1}e=e||this.o.format;var i=this.dates.get(t);return D.formatDate(i,e,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===false)return;if(!this.isInline)this.picker.appendTo(this.o.container);this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");if((window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard){t(this.element).blur()}return this},hide:function(){if(this.isInline)return this;if(!this.picker.is(":visible"))return this;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this._trigger("hide");return this},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}return this},_utc_to_local:function(t){return t&&new Date(t.getTime()+t.getTimezoneOffset()*6e4)},_local_to_utc:function(t){return t&&new Date(t.getTime()-t.getTimezoneOffset()*6e4)},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);if(typeof t!=="undefined"){return new Date(t)}else{return null}},clearDates:function(){var t;if(this.isInput){t=this.element}else if(this.component){t=this.element.find("input")}if(t){t.val("").change()}this.update();this._trigger("changeDate");if(this.o.autoclose){this.hide()}},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:n("setDates"),setUTCDate:n("setUTCDates"),setValue:function(){var t=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(t).change()}}else{this.element.val(t).change()}return this},getFormattedDate:function(i){if(i===e)i=this.o.format;var a=this.o.language;return t.map(this.dates,function(t){return D.formatDate(t,i,a)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t});this.update();this.updateNavArrows();return this},setEndDate:function(t){this._process_options({endDate:t});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t});this.update();this.updateNavArrows();return this},setDatesDisabled:function(t){this._process_options({datesDisabled:t});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),i=this.picker.outerHeight(),a=10,s=t(this.o.container).width(),n=t(this.o.container).height(),r=t(this.o.container).scrollTop(),h=t(this.o.container).offset();var o=[];this.element.parents().each(function(){var e=t(this).css("z-index");if(e!=="auto"&&e!==0)o.push(parseInt(e))});var l=Math.max.apply(Math,o)+10;var d=this.component?this.component.parent().offset():this.element.offset();var u=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var f=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var c=d.left-h.left,p=d.top-h.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom "+"datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right")c-=e-f}else{if(d.left<0){this.picker.addClass("datepicker-orient-left");c-=d.left-a}else if(c+e>s){this.picker.addClass("datepicker-orient-right");c=d.left+f-e}else{this.picker.addClass("datepicker-orient-left")}}var g=this.o.orientation.y,D,v;if(g==="auto"){D=-r+p-i;v=r+n-(p+u+i);if(Math.max(D,v)===v)g="top";else g="bottom"}this.picker.addClass("datepicker-orient-"+g);if(g==="top")p+=u;else p-=i+parseInt(this.picker.css("padding-top"));if(this.o.rtl){var m=s-(c+f);this.picker.css({top:p,right:m,zIndex:l})}else{this.picker.css({top:p,left:c,zIndex:l})}return this},_allow_update:true,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),i=[],a=false;if(arguments.length){t.each(arguments,t.proxy(function(t,e){if(e instanceof Date)e=this._local_to_utc(e);i.push(e)},this));a=true}else{i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(i&&this.o.multidate)i=i.split(this.o.multidateSeparator);else i=[i];delete this.element.data().date}i=t.map(i,t.proxy(function(t){return D.parseDate(t,this.o.format,this.o.language)},this));i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),true);this.dates.replace(i);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);if(a){this.setValue()}else if(i.length){if(String(e)!==String(this.dates))this._trigger("changeDate")}if(!this.dates.length&&e.length)this._trigger("clearDate");this.fill();return this},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1});var i='<th class="cw">&#160;</th>';e+=i}while(t<this.o.weekStart+7){e+='<th class="dow">'+g[this.o.language].daysMin[t++%7]+"</th>"}e+="</tr>";this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){var t="",e=0;while(e<12){t+='<span class="month">'+g[this.o.language].monthsShort[e++]+"</span>"}this.picker.find(".datepicker-months td").html(t)},setRange:function(e){if(!e||!e.length)delete this.range;else this.range=t.map(e,function(t){return t.valueOf()});this.fill()},getClassNames:function(e){var i=[],a=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),r=new Date;if(e.getUTCFullYear()<a||e.getUTCFullYear()===a&&e.getUTCMonth()<n){i.push("old")}else if(e.getUTCFullYear()>a||e.getUTCFullYear()===a&&e.getUTCMonth()>n){i.push("new")}if(this.focusDate&&e.valueOf()===this.focusDate.valueOf())i.push("focused");if(this.o.todayHighlight&&e.getUTCFullYear()===r.getFullYear()&&e.getUTCMonth()===r.getMonth()&&e.getUTCDate()===r.getDate()){i.push("today")}if(this.dates.contains(e)!==-1)i.push("active");if(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){i.push("disabled")}if(this.o.datesDisabled.length>0&&t.grep(this.o.datesDisabled,function(t){return s(e,t)}).length>0){i.push("disabled","disabled-date")}if(this.range){if(e>this.range[0]&&e<this.range[this.range.length-1]){i.push("range")}if(t.inArray(e.valueOf(),this.range)!==-1){i.push("selected")}}return i},fill:function(){var a=new Date(this.viewDate),s=a.getUTCFullYear(),n=a.getUTCMonth(),r=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,h=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,o=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,l=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,d=g[this.o.language].today||g["en"].today||"",u=g[this.o.language].clear||g["en"].clear||"",f;if(isNaN(s)||isNaN(n))return;this.picker.find(".datepicker-days thead .datepicker-switch").text(g[this.o.language].months[n]+" "+s);this.picker.find("tfoot .today").text(d).toggle(this.o.todayBtn!==false);this.picker.find("tfoot .clear").text(u).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var c=i(s,n-1,28),p=D.getDaysInMonth(c.getUTCFullYear(),c.getUTCMonth());c.setUTCDate(p);c.setUTCDate(p-(c.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(c);v.setUTCDate(v.getUTCDate()+42);v=v.valueOf();var m=[];var y;while(c.valueOf()<v){if(c.getUTCDay()===this.o.weekStart){m.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+c+(this.o.weekStart-c.getUTCDay()-7)%7*864e5),k=new Date(Number(w)+(7+4-w.getUTCDay())%7*864e5),C=new Date(Number(C=i(k.getUTCFullYear(),0,1))+(7+4-C.getUTCDay())%7*864e5),b=(k-C)/864e5/7+1;m.push('<td class="cw">'+b+"</td>")}}y=this.getClassNames(c);y.push("day");if(this.o.beforeShowDay!==t.noop){var T=this.o.beforeShowDay(this._utc_to_local(c));if(T===e)T={};else if(typeof T==="boolean")T={enabled:T};else if(typeof T==="string")T={classes:T};if(T.enabled===false)y.push("disabled");if(T.classes)y=y.concat(T.classes.split(/\s+/));if(T.tooltip)f=T.tooltip}y=t.unique(y);m.push('<td class="'+y.join(" ")+'"'+(f?' title="'+f+'"':"")+">"+c.getUTCDate()+"</td>");f=null;if(c.getUTCDay()===this.o.weekEnd){m.push("</tr>")}c.setUTCDate(c.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var _=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");t.each(this.dates,function(t,e){if(e.getUTCFullYear()===s)_.eq(e.getUTCMonth()).addClass("active")});if(s<r||s>o){_.addClass("disabled")}if(s===r){_.slice(0,h).addClass("disabled")}if(s===o){_.slice(l+1).addClass("disabled")}if(this.o.beforeShowMonth!==t.noop){var U=this;t.each(_,function(e,i){if(!t(i).hasClass("disabled")){var a=new Date(s,e,1);var n=U.o.beforeShowMonth(a);if(n===false)t(i).addClass("disabled")}})}m="";s=parseInt(s/10,10)*10;var M=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;var x=t.map(this.dates,function(t){return t.getUTCFullYear()}),F;for(var S=-1;S<11;S++){F=["year"];if(S===-1)F.push("old");else if(S===10)F.push("new");if(t.inArray(s,x)!==-1)F.push("active");if(s<r||s>o)F.push("disabled");m+='<span class="'+F.join(" ")+'">'+s+"</span>";s+=1}M.html(m)},updateNavArrows:function(){if(!this._allow_update)return;var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(e){e.preventDefault();var a=t(e.target).closest("span, td, th"),s,n,r;if(a.length===1){switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=D.modes[this.viewMode].navStep*(a[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h);if(this.viewMode===1)this._trigger("changeYear",this.viewDate);break}this.fill();break;case"today":var o=new Date;o=i(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);this.showMode(-2);var l=this.o.todayBtn==="linked"?null:"view";this._setDate(o,l);break;case"clear":this.clearDates();break}break;case"span":if(!a.hasClass("disabled")){this.viewDate.setUTCDate(1);if(a.hasClass("month")){r=1;n=a.parent().find("span").index(a);s=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(n);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(i(s,n,r))}}else{r=1;n=0;s=parseInt(a.text(),10)||0;this.viewDate.setUTCFullYear(s);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(i(s,n,r))}}this.showMode(-1);this.fill()}break;case"td":if(a.hasClass("day")&&!a.hasClass("disabled")){r=parseInt(a.text(),10)||1;s=this.viewDate.getUTCFullYear();n=this.viewDate.getUTCMonth();if(a.hasClass("old")){if(n===0){n=11;s-=1}else{n-=1}}else if(a.hasClass("new")){if(n===11){n=0;s+=1}else{n+=1}}this._setDate(i(s,n,r))}break}}if(this.picker.is(":visible")&&this._focused_from){t(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(!t){this.dates.clear()}if(e!==-1){if(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive){this.dates.remove(e)}}else if(this.o.multidate===false){this.dates.clear();this.dates.push(t)}else{this.dates.push(t)}if(typeof this.o.multidate==="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(t,e){if(!e||e==="date")this._toggle_multidate(t&&new Date(t));if(!e||e==="view")this.viewDate=t&&new Date(t);this.fill();this.setValue();if(!e||e!=="view"){this._trigger("changeDate")}var i;if(this.isInput){i=this.element}else if(this.component){i=this.element.find("input")}if(i){i.change()}if(this.o.autoclose&&(!e||e==="date")){this.hide()}},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var a=new Date(t.valueOf()),s=a.getUTCDate(),n=a.getUTCMonth(),r=Math.abs(i),h,o;i=i>0?1:-1;if(r===1){o=i===-1?function(){return a.getUTCMonth()===n}:function(){return a.getUTCMonth()!==h};h=n+i;a.setUTCMonth(h);if(h<0||h>11)h=(h+12)%12}else{for(var l=0;l<r;l++)a=this.moveMonth(a,i);h=a.getUTCMonth();a.setUTCDate(s);o=function(){return h!==a.getUTCMonth()}}while(o()){a.setUTCDate(--s);a.setUTCMonth(h)}return a},moveYear:function(t,e){return this.moveMonth(t,e*12)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible")){if(t.keyCode===27)this.show();return}var e=false,i,s,n,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;i=t.keyCode===37?-1:1;if(t.ctrlKey){s=this.moveYear(this.dates.get(-1)||a(),i);n=this.moveYear(r,i);this._trigger("changeYear",this.viewDate)}else if(t.shiftKey){s=this.moveMonth(this.dates.get(-1)||a(),i);n=this.moveMonth(r,i);this._trigger("changeMonth",this.viewDate)}else{s=new Date(this.dates.get(-1)||a());s.setUTCDate(s.getUTCDate()+i);n=new Date(r);n.setUTCDate(r.getUTCDate()+i)}if(this.dateWithinRange(n)){this.focusDate=this.viewDate=n;this.setValue();this.fill();t.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;i=t.keyCode===38?-1:1;if(t.ctrlKey){s=this.moveYear(this.dates.get(-1)||a(),i);n=this.moveYear(r,i);this._trigger("changeYear",this.viewDate)}else if(t.shiftKey){s=this.moveMonth(this.dates.get(-1)||a(),i);n=this.moveMonth(r,i);this._trigger("changeMonth",this.viewDate)}else{s=new Date(this.dates.get(-1)||a());s.setUTCDate(s.getUTCDate()+i*7);n=new Date(r);n.setUTCDate(r.getUTCDate()+i*7)}if(this.dateWithinRange(n)){this.focusDate=this.viewDate=n;this.setValue();this.fill();t.preventDefault()}break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(r);e=true}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){t.preventDefault();if(typeof t.stopPropagation==="function"){t.stopPropagation()}else{t.cancelBubble=true}if(this.o.autoclose)this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(e){if(this.dates.length)this._trigger("changeDate");else this._trigger("clearDate");var h;if(this.isInput){h=this.element}else if(this.component){h=this.element.find("input")}if(h){h.change()}}},showMode:function(t){if(t){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))}this.picker.children("div").hide().filter(".datepicker-"+D.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var o=function(e,i){this.element=t(e);this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t});delete i.inputs;f.call(t(this.inputs),i).bind("changeDate",t.proxy(this.dateUpdated,this));this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")});this.updateDates()};o.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()});this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(this.updating)return;this.updating=true;var i=t(e.target).data("datepicker"),a=i.getUTCDate(),s=t.inArray(e.target,this.inputs),n=s-1,r=s+1,h=this.inputs.length;if(s===-1)return;t.each(this.pickers,function(t,e){if(!e.getUTCDate())e.setUTCDate(a)});if(a<this.dates[n]){while(n>=0&&a<this.dates[n]){this.pickers[n--].setUTCDate(a)}}else if(a>this.dates[r]){while(r<h&&a>this.dates[r]){this.pickers[r++].setUTCDate(a)}}this.updateDates();delete this.updating},remove:function(){t.map(this.pickers,function(t){t.remove()});delete this.element.data().datepicker}};function l(e,i){var a=t(e).data(),s={},n,r=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());function h(t,e){return e.toLowerCase()}for(var o in a)if(i.test(o)){n=o.replace(r,h);s[n]=a[o]}return s}function d(e){var i={};if(!g[e]){e=e.split("-")[0];if(!g[e])return}var a=g[e];t.each(p,function(t,e){if(e in a)i[e]=a[e]});return i}var u=t.fn.datepicker;var f=function(i){var a=Array.apply(null,arguments);a.shift();var s;this.each(function(){var n=t(this),r=n.data("datepicker"),u=typeof i==="object"&&i;if(!r){var f=l(this,"date"),p=t.extend({},c,f,u),g=d(p.language),D=t.extend({},c,g,f,u);if(n.hasClass("input-daterange")||D.inputs){var v={inputs:D.inputs||n.find("input").toArray()};n.data("datepicker",r=new o(this,t.extend(D,v)))}else{n.data("datepicker",r=new h(this,D))}}if(typeof i==="string"&&typeof r[i]==="function"){s=r[i].apply(r,a);if(s!==e)return false}});if(s!==e)return s;else return this};t.fn.datepicker=f;var c=t.fn.datepicker.defaults={autoclose:false,beforeShowDay:t.noop,beforeShowMonth:t.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,container:"body"};var p=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=h;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var D={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,D.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||i.length===0){throw new Error("Invalid date format.")}return{separators:e,parts:i}},parseDate:function(a,s,n){if(!a)return e;if(a instanceof Date)return a;if(typeof s==="string")s=D.parseFormat(s);var r=/([\-+]\d+)([dmwy])/,o=a.match(/([\-+]\d+)([dmwy])/g),l,d,u;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){a=new Date;for(u=0;u<o.length;u++){l=r.exec(o[u]);d=parseInt(l[1]);switch(l[2]){case"d":a.setUTCDate(a.getUTCDate()+d);break;case"m":a=h.prototype.moveMonth.call(h.prototype,a,d);break;case"w":a.setUTCDate(a.getUTCDate()+d*7);break;case"y":a=h.prototype.moveYear.call(h.prototype,a,d);break}}return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}o=a&&a.match(this.nonpunctuation)||[];a=new Date;var f={},c=["yyyy","yy","M","MM","m","mm","d","dd"],p={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;e-=1;while(e<0)e+=12;e%=12;t.setUTCMonth(e);while(t.getUTCMonth()!==e)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}},v,m;p["M"]=p["MM"]=p["mm"]=p["m"];p["dd"]=p["d"];a=i(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var y=s.parts.slice();if(o.length!==y.length){y=t(y).filter(function(e,i){return t.inArray(i,c)!==-1}).toArray()}function w(){var t=this.slice(0,o[u].length),e=o[u].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(o.length===y.length){var k;for(u=0,k=y.length;u<k;u++){v=parseInt(o[u],10);l=y[u];if(isNaN(v)){switch(l){case"MM":m=t(g[n].months).filter(w);v=t.inArray(m[0],g[n].months)+1;break;case"M":m=t(g[n].monthsShort).filter(w);v=t.inArray(m[0],g[n].monthsShort)+1;break}}f[l]=v}var C,b;for(u=0;u<c.length;u++){b=c[u];if(b in f&&!isNaN(f[b])){C=new Date(a);p[b](C,f[b]);if(!isNaN(C))a=C}}}return a},formatDate:function(e,i,a){if(!e)return"";if(typeof i==="string")i=D.parseFormat(i);var s={d:e.getUTCDate(),D:g[a].daysShort[e.getUTCDay()],DD:g[a].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[a].monthsShort[e.getUTCMonth()],MM:g[a].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d;s.mm=(s.m<10?"0":"")+s.m;e=[];var n=t.extend([],i.separators);for(var r=0,h=i.parts.length;r<=h;r++){if(n.length)e.push(n.shift());e.push(s[i.parts[r]])}return e.join("")},headTemplate:"<thead>"+"<tr>"+'<th class="prev">&#171;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&#187;</th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:"<tfoot>"+"<tr>"+'<th colspan="7" class="today"></th>'+"</tr>"+"<tr>"+'<th colspan="7" class="clear"></th>'+"</tr>"+"</tfoot>"};D.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+D.headTemplate+"<tbody></tbody>"+D.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+D.headTemplate+D.contTemplate+D.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+D.headTemplate+D.contTemplate+D.footTemplate+"</table>"+"</div>"+"</div>";t.fn.datepicker.DPGlobal=D;t.fn.datepicker.noConflict=function(){t.fn.datepicker=u;return this};t.fn.datepicker.version="1.4.0";t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);if(i.data("datepicker"))return;e.preventDefault();f.call(i,"show")});t(function(){f.call(t('[data-provide="datepicker-inline"]'))})})(window.jQuery)});
