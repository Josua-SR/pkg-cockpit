require(["jquery","base1/cockpit","translated!playground/po"],function(n,t,e){t.locale(e);var o=t.gettext;var c=t.gettext;n(function(){n("#hammer").on("click",function(){n(this).hide()});n("#translation").text(o("Translation"));n("#reverse").text(c("reverse","Translation"));n(".cockpit-internal-reauthorize .btn").on("click",function(){n(".cockpit-internal-reauthorize span").text("checking...");var e="pkcheck --action-id org.freedesktop.policykit.exec --process $$ -u 2>&1";t.spawn(["sh","-c",e]).stream(function(n){console.debug(n)}).done(function(){n(".cockpit-internal-reauthorize span").text("result: authorized")}).fail(function(){n(".cockpit-internal-reauthorize span").text("result: access-denied")})});n(".super-channel .btn").on("click",function(){n(".super-channel span").text("checking...");t.spawn(["id"],{superuser:true}).done(function(t){console.log("done");n(".super-channel span").text("result: "+t)}).fail(function(t){console.log("fail");n(".super-channel span").text("result: "+t.problem)})});function e(){n("#nav").empty();var e=["top"].concat(t.location.path);n(e).each(function(o,c){if(o<e.length-1){n("#nav").append(n("<a>").text(c).click(function(){t.location.go(e.slice(1,o+1))})," >> ")}else{n("#nav").append(n("<span>").text(c))}})}n(t).on("locationchanged",e);e();n("#go-down").click(function(){var n=t.location.path.length;t.location.go(t.location.path.concat(n.toString()),{length:n.toString()})});var i=t.file("/tmp/counter",{syntax:JSON});function a(n){n=n||{};n.counter=n.counter||0;return n}function r(t){n("#file-error").text(t.toString())}function l(t,e,o){if(o)return r(o);n("#file-content").text(a(t).counter);n("#file-error").empty()}i.watch(l);n("#modify-file").click(function(){i.modify(function(n){n=a(n);n.counter+=1;return n}).fail(r)});function u(){t.file("/tmp/counter").read().done(function(t){n("#edit-file").val(t)})}function f(){t.file("/tmp/counter").replace(n("#edit-file").val())}n("#load-file").click(u);n("#save-file").click(f);u();n("#delete-file").click(function(){t.spawn(["rm","-f","tmp/counter"])});n("body").show()})});
